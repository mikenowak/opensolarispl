<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Booting an x86 Based System</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="System Administration Guide: Basic Administration"><link rel="up" href="ch12.html" title="Chapter 12. 
Booting a System (Tasks)"><link rel="prev" href="ch12.html" title="Chapter 12. 
Booting a System (Tasks)"><link rel="next" href="ch13.html" title="Chapter 13. The Boot Process
(Reference)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">
Booting an x86 Based System</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch12.html">Prev</a> </td><th width="60%" align="center">Chapter 12. 
Booting a System (Tasks)</th><td width="20%" align="right"> <a accesskey="n" href="ch13.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hbx86boot-1"></a>
Booting an x86 Based System</h2></div></div></div>

<p>The following procedures use the reset button to restart the system.
If your system does not have a reset button, use the power switch to restart
the system. You might be able to press Ctrl-Alt-Del to interrupt system operation,
depending upon the state of the system.</p>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2086772"></a></h3></div></div></div>

<div class="task"><a name="hbx86boot-92385"></a><p class="title"><b>
How to Boot a System to Run Level
3 (Multiuser Level)</b></p><div class="tasksummary">
<p>Use this procedure to boot a system that is currently at run level 0
to run level 3.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbx86boot-step-3"></a>
<p>If the system displays the <code class="literal">Press
any key to reboot</code> prompt, press any key to reboot the system.</p>
<p>You can also use the Reset button at this prompt. If the system is shut
down, turn the system on with the power switch.</p>
<p>The Current Boot
Parameters menu is displayed after a few minutes.</p>
</li><li><a name="hbx86boot-step-4"></a>
<p>
<a class="indexterm" name="hbx86boot-ix1019"></a>Type <span><strong class="command">b</strong></span> to boot the system to run level 3. Press
Enter. </p>
<p>If you do not make a selection within five seconds, the
system is automatically booted to run level 3.</p>
</li><li><a name="hbx86boot-step-42"></a>
<p>Verify that the system has booted to run
level 3.</p>
<p>The login prompt is displayed when the boot process has
finished successfully.</p>
<pre class="screen">
<em class="replaceable"><code>hostname</code></em> console login:</pre>
</li></ol></div><div class="example"><a name="id2086902"></a><p class="title"><b>Example 12.1. 
Booting a System to Run Level 3 (Multiuser Level)</b></p>


<p>For new installations of the Solaris OS, typing <span><strong class="command">b</strong></span> at
the boot prompt automatically boots 64-bit capable x86 based systems to 64-bit
mode. For upgrade installations of the Solaris OS, typing <span><strong class="command">b</strong></span> at
the boot prompt also boots 64-bit capable x86 based systems to 64-bit mode,
unless the <span><strong class="command">eeprom</strong></span> <code class="literal">boot-file</code> parameter
was previously set to a value other than <code class="filename">kernel/unix</code>.</p>
<p>This example shows how to boot an x86 based system that has 64-bit computing
capabilities to run level 3.</p>
<pre class="screen">Press any key to reboot
           .
           .
           .
                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args: 
Type    b [file-name] [boot-flags] &lt;ENTER&gt;      to boot with options
or      i &lt;ENTER&gt;                               to enter boot interpreter
or      &lt;ENTER&gt;                                 to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b</code></strong>
SunOS Release 5.10 Version amd64-gate-2004-09-27 64-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
Hostname: venus
NIS domain name is example.com
checking ufs filesystems
/dev/rdsk/c1d0s7: is logging.
venus console login:</pre>
</div><div class="example"><a name="fcozs"></a><p class="title"><b>Example 12.2. 
Manually Booting a System That Has 64-Bit Computing Capabilities in
64-Bit Mode to Run Level 3 (Multiuser Level)</b></p>


<p>For new installations of the Solaris OS, typing <span><strong class="command">b</strong></span> at
the boot prompt automatically boots 64-bit capable x86 based systems to 64-bit
mode. For upgrade installations of the Solaris OS, typing <span><strong class="command">b</strong></span> at
the boot prompt also boots 64-bit capable x86 based systems to 64-bit mode,
unless the <span><strong class="command">eeprom</strong></span> <code class="literal">boot-file</code> parameter
was previously set to a value other than <code class="filename">kernel/unix</code>.</p>
<p>This example shows how to <span class="emphasis"><em>manually</em></span> boot this type
of system in 64-bit mode to run level 3.</p>
<pre class="screen"># <strong class="userinput"><code>init 0</code></strong>
# svc.startd: The system is coming down.  Please wait.
svc.startd: 68 system services are now being stopped.
umount: /etc/svc/volatile busy
svc.startd: The system is down.
syncing file systems... done
Press any key to reboot.

Initializing system
Please wait...


                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;    to boot with options
or      i &lt;ENTER&gt;                             to enter boot interpreter
or      &lt;ENTER&gt;                               to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b kernel/amd64/unix</code></strong>
SunOS Release 5.10 Version amd64-gate-2004-09-27 64-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
Hostname: venus
NIS domain name is example.com
checking ufs filesystems
/dev/rdsk/c1d0s7: is logging.
venus console login:</pre>
</div><div class="example"><a name="fcoyg"></a><p class="title"><b>Example 12.3. 
Manually Booting a System That Has 64-Bit Computing Capabilities in
32-Bit Mode to Run Level 3 (Multiuser Level)</b></p>


<p>For new installations of the Solaris OS, typing <span><strong class="command">b</strong></span> at
the boot prompt automatically boots 64-bit capable x86 based systems to 64-bit
mode. For upgrade installations of the Solaris OS, typing <span><strong class="command">b</strong></span> at
the boot prompt also boots 64-bit capable x86 based systems to 64-bit mode,
unless the <span><strong class="command">eeprom</strong></span> <code class="literal">boot-file</code> parameter
was previously set to a value other than <code class="filename">kernel/unix</code>.</p>
<p>This example shows how to <span class="emphasis"><em>manually</em></span> boot this type
of system in 32-bit mode to run level 3.</p>
<pre class="screen"># <strong class="userinput"><code>init 0</code></strong>
# svc.startd: The system is coming down.  Please wait.
svc.startd: 68 system services are now being stopped.
umount: /etc/svc/volatile busy
svc.startd: The system is down.
syncing file systems... done
Press any key to reboot.
Resetting...
If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.

                                                    
Initializing system
Please wait...


                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args: 

Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b kernel/unix</code></strong>
SunOS Release 5.10 Version amd64-gate-2004-09-30 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
Hostname: venus
NIS domain name is example.com
checking ufs filesystems
/dev/rdsk/c1d0s7: is logging.
venus console login:</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2087145"></a></h3></div></div></div>

<div class="task"><a name="hbx86boot-10398"></a><p class="title"><b>
How to Boot a System to Run Level
S (Single-User Level)</b></p><div class="tasksummary">
<p>Use this procedure to boot a system that is currently at run level 0
to run level S.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbx86boot-step-8"></a>
<p>If the system displays the <code class="literal">Press
any key to reboot</code> prompt, press any key to reboot the system.</p>
<p>You can also use the Reset button at this prompt. If the system is shut
down, turn the system on with the power switch.</p>
<p>The Current Boot
Parameters menu is displayed after a few minutes.</p>
</li><li><a name="hbx86boot-step-9"></a>
<p>
<a class="indexterm" name="hbx86boot-ix1021"></a>Type <span><strong class="command">b -s</strong></span> to boot the system to run level S.
Press Enter. </p>
<p>If you do not make a selection within five seconds,
the system is automatically booted to run level 3.</p>
</li><li><a name="hbx86boot-step-45"></a>
<p>Type the superuser password, if prompted.</p>
</li><li><a name="hbx86boot-step-11"></a>
<p>Verify that the system is at run level
S.</p>
<pre class="screen"># <strong class="userinput"><code>who -r</code></strong>
   .       run-level S  Jul 19 14:37     S      0  3</pre>
</li><li><a name="hbx86boot-step-12"></a>
<p>Perform the maintenance task that required
the run level change to S.</p>
</li><li><a name="hbx86boot-step-13"></a>
<p>After you complete the system maintenance
task, type Control-D to bring the system to the multiuser state.</p>
</li></ol></div><div class="example"><a name="id2087328"></a><p class="title"><b>Example 12.4. 
Booting a System to Run Level S (Single-User Level)</b></p>


<pre class="screen">Press any key to reboot.
Resetting...
.
.
.
Initializing system 
Please wait...


                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b -s</code></strong>
SunOS Release 5.10 Version amd64-gate-2004-09-30 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
Booting to milestone "milestone/single-user:default".
Hostname: venus
NIS domain name is example.com
Requesting System Maintenance Mode
SINGLE USER MODE

Root password for system maintenance (control-d to bypass): <strong class="userinput"><code>xxxxxx</code></strong>
Entering System Maintenance Mode
.
.
.
# <strong class="userinput"><code>who -r</code></strong>
   .       run-level S  Jul 19 14:37     S      0  3
<em class="lineannotation"><span class="lineannotation">(Perform some maintenance task)</span></em>
# <strong class="userinput"><code>^D</code></strong>
</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2087380"></a></h3></div></div></div>

<div class="task"><a name="hbx86boot-33570"></a><p class="title"><b>
How to Boot a System Interactively</b></p><div class="tasksummary">
<p>Use this procedure to boot a system when you need to specify an alternate
kernel or the <code class="filename">/etc/system</code> file.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbx86boot-step-16"></a>
<p>If the system displays the <code class="literal">Press
any key to reboot</code> prompt, press any key to reboot the system.</p>
<p>You can also use the reset button at this prompt. If the system is shut
down, turn the system on with the power switch.</p>
<p>The Primary Boot
Subsystem menu is displayed after a few minutes.</p>
</li><li><a name="hbx86boot-step-69"></a>
<p>Select the Solaris partition (if not marked
as active) from the list. Press Enter.</p>
<p>If you do not make a selection
within five seconds, the active boot partition is selected automatically.</p>
<p>The Current Boot Parameters menu is displayed after a few minutes.</p>
</li><li><a name="hbx86boot-step-17"></a>
<p>Type <code class="literal">b -a</code> to boot the
system interactively. Press Enter.</p>
<p>If you do not make a selection
within five seconds, the system is automatically booted to run level 3.</p>
</li><li><a name="hbx86boot-step-18"></a>
<p>Answer the following system prompts.</p>
<ol type="a">
<li>
<p>When prompted, enter the name of the kernel to use for booting.</p>
<p>Press enter to use the default kernel file name. Otherwise, provide
the name of an alternate kernel, press Enter.</p>
</li>
<li>
<p>When prompted, provide an alternate path for the module directories.</p>
<p>Press enter to use the default module directories. Otherwise, provide
the alternate paths to module directories, press Enter.</p>
</li>
<li>
<p>When prompted, provide the name of an alternate system file.</p>
<p>Type <code class="filename">/dev/null</code> if your <code class="filename">/etc/system</code> file
has been damaged. </p>
</li>
<li>
<p>When prompted, enter the <code class="literal">root</code> file system type.</p>
<p>Press enter to select local disk booting with UFS, which is the default,
or enter NFS for network booting.</p>
</li>
<li>
<p>When prompted, enter the physical name of <code class="literal">root</code> device. </p>
<p>Provide an alternate device name or press return to use the default.</p>
</li>
</ol>
</li><li>
<p>If you are not prompted to answer these questions, verify that
you typed the <span><strong class="command">boot</strong></span> <code class="option">
a</code> command correctly.</p>
</li></ol></div><div class="example"><a name="id2087623"></a><p class="title"><b>Example 12.5. 
Booting a System Interactively</b></p>


<p>In the following example, the default choices (shown in square brackets <code class="literal">[]</code>) are accepted.</p>
<pre class="screen">Press any key to reboot.
Resetting...
.
.
.
Autobooting from bootpath: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a


If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.


Initializing system
Please wait...


                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults
Running Configuration Assistant...
                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b -a</code></strong>
Enter default directory for modules [/platform/i86pc/kernel /kernel /usr/kernel]:
<em class="lineannotation"><span class="lineannotation">Press Enter</span></em>
Name of system file [etc/system]: <em class="lineannotation"><span class="lineannotation">Press Enter</span></em>
SunOS Release 5.10 Version amd64-gate-2004-09-30 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
root filesystem type [ufs]: <em class="lineannotation"><span class="lineannotation">Press Enter</span></em>
Enter physical name of root device[/pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a]: <em class="lineannotation"><span class="lineannotation">Press Enter</span></em>
Hostname: venus
NIS domain name is example.com
checking ufs filesystems
/dev/rdsk/c1d0s7: is logging.
venus console login:</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ettmq"></a>
Booting From the Network</h3></div></div></div>

<p>Any system can boot from the network if a boot server is available.
You might want to boot a stand-alone system from the network for recovery
purposes if the system cannot boot from the local disk.</p>
<p>You can boot Solaris OS x86 based systems directly from a network without
the Solaris boot diskette on x86 based systems that support the Preboot Execution
Environment (PXE) network booting protocol. The PXE network boot is available
only for devices that implement the Intel Preboot Execution Environment specification.
If the system is capable of a PXE network boot, you might want to boot the
system directly from the network without using either the Device Configuration
Assistant boot diskette or the Solaris Software 1 CD or DVD.</p>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2087720"></a></h3></div></div></div>

<div class="task"><a name="ettmr"></a><p class="title"><b>
How to Boot a System From the Network</b></p><div class="tasksummary">
<p>This procedure includes instructions for booting an x86 based system
from the network with the Solaris Device Configuration Assistant. Note that
the behavior of the Device Configuration assistant changed , starting with
the Solaris 10 release.</p>
<p>Starting with the Solaris 10 1/06 and the Solaris Express 10/05 releases,
GRUB based booting has been implemented on x86 based systems that are running
the Solaris OS. The GRUB menu replaces the Device Configuration Assistant.
For information about booting an x86 based system from the Network with GRUB,
see <span class="olink">
Performing a GRUB Based Boot From the Network</span>
</p>
<p>There are two network configuration strategies, Reverse Address Resolution
Protocol (RARP) or Dynamic Host Configuration Protocol (DHCP). The default
network boot strategy for a PXE network boot is DHCP. The default network
boot strategy for non-PXE devices is RARP. For non-PXE devices, you can use
either strategy, depending on whether a RARP boot server or a DHCP boot server
is available on your network. </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>If you use a DHCP server for PXE network boots, additional DHCP
configuration is required. For general information on DHCP configuration,
see <span class="olink">Part III, <em class="citetitle">DHCP,</em> in <em class="citetitle">System Administration Guide: IP Services</em>
</span>. If you want to set up your DHCP server
to support installation, see <span class="olink">
<em class="citetitle">Solaris Express Installation Guide: Network-Based Installations</em>
</span>.</p>
</div>
<p>In the Solaris 10 release, if you are performing a PXE network boot,
or if you are booting the system from the Solaris Software 1 CD or DVD, the
system boots automatically. The Device Configuration Assistant menu is no
longer displayed by default. If you are booting a non-PXE device, you will
need to follow the steps in this procedure that describe how to enter the
Device Configuration Assistant menu to change the network configuration.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbx86boot-step-41"></a>
<p>Insert the Device Configuration Assistant
boot diskette or the Solaris Software 1 CD or DVD that you want to boot from.
Or, use the system or network adapter BIOS configuration program to enable
the PXE network boot.</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>If you are using the boot diskette, the first menu of the
Device Configuration Assistant is displayed.</p>
</li><li>
<p>If you are using the Solaris Software 1 CD, DVD, or booting
a PXE device from the network, the system boots automatically.</p>
<p>If
you choose to change the network configuration and enter the Device Configuration
Assistant menu, press Esc when the following message is displayed.</p>
<pre class="screen">If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.

Press ESCape to interrupt autoboot in 5 seconds.</pre>
</li></ul></div>
<p>The Device Configuration Assistant screen is displayed.</p>
</li><li>
<p>If the system displays the <code class="literal">Press any key to reboot</code> prompt,
press any key to reboot the system.</p>
<p>You can also use the reset
button at this prompt. If the system is shut down, turn the system on with
the power switch.</p>
</li><li><a name="hbx86boot-step-49"></a>
<p>Press the F2 key (F2_Continue) to scan
for devices.</p>
<p>Device identification is performed. Then, the Identified
Devices screen is displayed.</p>
</li><li>
<p>Press the F2 key (F2_Continue) to load drivers.</p>
<p>Bootable
drivers are loaded. Then, the Boot Solaris menu is displayed.</p>
</li><li><a name="hbx86boot-step-50"></a>
<p>Use the Device Configuration Assistant
to change the network configuration.</p>
<ol type="a">
<li>
<p>Press the F4 key (F4_Boot Tasks).</p>
</li>
<li>
<p>Select <code class="literal">Set Network Configuration Strategy</code>.
Press the F2 key (F2_Continue).</p>
</li>
<li>
<p>Select either <code class="literal">RARP</code> or <code class="literal">DHCP</code> and
press the F2 key (F2_Continue).</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>The previous step applies only if you are booting a non-PXE device
from the network. For a PXE network boot, you must use DHCP, which is the
default network boot strategy.</p>
</div>
<p>A screen that confirms your new network boot strategy is displayed.
Your network boot strategy selection is saved as the default network boot
method for the next time this diskette is used for booting.</p>
</li>
<li>
<p>Press F3_Back to return to the Boot Solaris menu.</p>
</li>
</ol>
</li><li><a name="hbx86boot-step-51"></a>
<p>Select <code class="literal">NET</code> as the boot
device. Then, press F2_Continue to boot the network device.</p>
<p>The
Solaris boot option screen is displayed.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="hbx86boot-54"></a>
Using the Device Configuration
Assistant</h3></div></div></div>

<a class="indexterm" name="indexterm-220"></a>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>In this Solaris release the Device Configuration
Assistant has been replaced by the GRUB menu. For more information about this
feature, see <span class="olink">Chapter 11, GRUB Based Booting (Tasks)</span>.</p>
</div>
<p>
<span class="strong"><strong>Solaris 10:</strong></span> The Device Configuration
Assistant for Solaris Operating System x86 based systems is a program that
enables you to perform various hardware configuration and booting tasks. You
can access the Device Configuration Assistant menu from either of the following:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Solaris boot diskette</p>
</li><li>
<p>Solaris Software 1 CD or DVD</p>
</li><li>
<p>PXE network boot</p>
</li><li>
<p>Hard disk with Solaris OS installed</p>
</li></ul></div>
<p>For the procedures in this chapter, you might be requested to insert
the Device Configuration Assistant boot diskette to boot the Configuration
Assistant. Alternately, if your system's BIOS supports booting from the CD
or DVD, you can insert the Solaris Software 1 CD or DVD to boot the Device
Configuration Assistant.</p>
<div class="task"><a name="hbx86boot-55"></a><p class="title"><b>
How to Enter the Device Configuration
Assistant</b></p><div class="tasksummary">
<p>
<span class="strong"><strong>Solaris 10:</strong></span> This procedure shows
how to interrupt the boot process to enter the Device Configuration Assistant.
In the current Solaris release, the GRUB menu replaces the Device Configuration
Assistant.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbx86boot-step-72"></a>
<p>Boot the system. <a class="indexterm" name="indexterm-221"></a>
</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>If you are booting from the Device Configuration boot diskette,
the first menu of the Device Configuration Assistant is displayed after a
few minutes.</p>
</li><li>
<p>If you are booting from the Solaris Software 1 CD, DVD, hard
disk, or performing a PXE network boot, the following message is displayed:</p>
<pre class="screen">If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.

Press ESCape to interrupt autoboot in 5 seconds.</pre>
<p>If you choose to enter the Device Configuration Assistant menu, press
Esc to interrupt the autoboot process.</p>
<p>The Device Configuration
Assistant menu is displayed.</p>
</li></ul></div>
</li><li>
<p>If the system displays the <code class="literal">Press any key to reboot</code> prompt,
press any key to reboot the system. </p>
<p>You can also use the reset
button at this prompt. If the system is shut down, turn the system on with
the power switch.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2088351"></a></h3></div></div></div>

<div class="task"><a name="hbx86boot-51369"></a><p class="title"><b>
How to Stop a System for Recovery
Purposes</b></p><div class="procedure"><ol type="1"><li>
<p>
<a class="indexterm" name="indexterm-222"></a>Stop the system by using one of the following commands, if possible:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>If the system is running, become superuser and type <span><strong class="command">init
0</strong></span> to stop the system. After the <code class="literal">Press any key to reboot</code> prompt
appears, press any key to reboot the system.</p>
</li><li>
<p>If the system is running, become superuser and type <span><strong class="command">init
6</strong></span> to reboot the system. </p>
</li></ul></div>
</li><li><a name="hbx86boot-step-77"></a>
<p>If the system doesn't respond to any input
from the mouse or keyboard, press the Reset key, if it exists, to reboot the
system. Or, you can use the power switch to reboot the system.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2088461"></a></h3></div></div></div>

<div class="task"><a name="hbx86boot-35111"></a><p class="title"><b>
How to Boot a System for Recovery
Purposes</b></p><div class="tasksummary">
<p>Follow these steps to boot the system to repair a critical system resource.
The example shows you how to boot from a Solaris Software 1 CD or from the
network, mount the root (<code class="filename">/</code>) file system on the disk,
and repair the <code class="filename">/etc/passwd</code> file.</p>
<p>Substitute the device name of the file system to be repaired for the <em class="replaceable"><code>device-name</code></em> variable. If you need help identifying a system's
device names, refer to <span class="olink">
<em class="citetitle">Displaying Device Configuration Information</em> in <em class="citetitle">System Administration Guide: Devices and File Systems</em>
</span>.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbx86boot-step-74"></a>
<p>Stop the system by using the system's Stop
key sequence.</p>
<p>Use the Stop key sequence for your system if you
don't know the <code class="literal">root</code> password, or if you can't log in to
the system. For more information, see <span class="olink">
How to Stop a System for Recovery Purposes</span>.</p>
</li><li><a name="hbx86boot-step-20"></a>
<p>Boot the system from the Solaris Software
1 CD, DVD, or from the network, to single-user mode.</p>
<ol type="a">
<li>
<p>Insert the Device Configuration Assistant boot diskette or the
Solaris Software 1 CD or DVD that you want to boot from.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>If you are using the boot diskette the Device Configuration Assistant
menu is displayed. If you are using the Solaris Software 1 CD or DVD, the
system boots automatically. To enter the Device Configuration Assistant menu,
press Esc to interrupt the boot process, when prompted by the system.</p>
</div>
</li>
<li>
<p>If the system displays the <code class="literal">Press any key to reboot</code> prompt,
press any key to reboot the system.</p>
<p>You can also use the Reset
button at this prompt. If the system is shut down, turn the system on with
the power switch.</p>
</li>
</ol>
</li><li>
<p>The Current Boot Parameters menu is displayed after a few minutes.</p>
</li><li>
<p>Type <span><strong class="command">b -s</strong></span> at the prompt. Press Enter.</p>
<p>After a few minutes, the single-user mode <code class="literal">#</code> prompt
is displayed.</p>
</li><li><a name="hbx86boot-step-27"></a>
<p>Mount the root (<code class="filename">/</code>)
file system that contains the invalid <code class="filename">passwd</code> file.</p>
</li><li><a name="hbx86boot-step-28"></a>
<p>Change to the newly mounted <code class="filename">etc</code> directory.</p>
</li><li><a name="hbx86boot-step-30"></a>
<p>Make the necessary change to the file by
using an editor.</p>
</li><li><a name="hbx86boot-step-31"></a>
<p>Change to the root (<code class="filename">/</code>)
directory.</p>
</li><li><a name="hbx86boot-step-32"></a>
<p>Unmount the <code class="filename">/a</code> directory.</p>
</li><li><a name="hbx86boot-step-33"></a>
<p>Reboot the system. Verify that the system
has booted to run level 3.</p>
<p>The login prompt is displayed when
the boot process has finished successfully.</p>
<pre class="screen">
<em class="replaceable"><code>host-name</code></em> console login:</pre>
</li></ol></div><div class="example"><a name="id2088770"></a><p class="title"><b>Example 12.6. 
Solaris 10: Booting a System for Recovery Purposes</b></p>


<p>
<a class="indexterm" name="hbx86boot-ix1025"></a>
<a class="indexterm" name="hbx86boot-ix1026"></a>
<a class="indexterm" name="indexterm-223"></a>The following example shows how to repair the <code class="filename">/etc/passwd</code> file
after booting the system automatically from a local CD-ROM in the Solaris
10 OS. GRUB based booting was introduced in the Solaris Express 6/05 release.
For information about booting a system for recovery purposes in a GRUB based
boot environment, see <span class="olink">
How to Boot the Failsafe Archive for Recovery Purposes</span>.</p>
<pre class="screen">SunOS Secondary Boot version 3.00



                              Solaris Booting System



Running Configuration Assistant...





If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.

Press ESCape to interrupt autoboot in 5 seconds.





Initializing system
Please wait...


                         &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@1/sd@0,0:a
Boot args:


Select the type of installation you want to perform:

				1 Solaris Interactive
				2 Custom JumpStart
				3 Solaris Interactive Text (Desktop session)
				4 Solaris Interactive Text (Console session)
Enter the number of your choice followed by the &lt;ENTER&gt; key.
Alternatively, enter custom boot arguments directly.

If you wait for 30 seconds without typing anything,
an interactive installation will be started.

Select type of installation: <strong class="userinput"><code>b -s</code></strong>
      .
      .
      .
# <strong class="userinput"><code>mount /dev/dsk/c0t0d0s0 /a</code></strong>
      .
      .
      .
# <strong class="userinput"><code>cd /a/etc</code></strong>
# <strong class="userinput"><code>vi passwd</code></strong>
<em class="lineannotation"><span class="lineannotation">(Remove invalid entry)</span></em>
# <strong class="userinput"><code>cd /</code></strong>
# <strong class="userinput"><code>umount /a</code></strong>
# <strong class="userinput"><code>init 6</code></strong>
</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2088954"></a></h3></div></div></div>

<div class="task"><a name="hbx86boot-59"></a><p class="title"><b>
How to Boot a System With the Kernel
Debugger (<span><strong class="command">kmdb</strong></span>)</b></p><div class="tasksummary">
<p>This procedure shows the basics for loading the kernel debugger (<span><strong class="command">kmdb</strong></span>) in the Solaris 10 OS. The <span><strong class="command">savecore</strong></span> feature
is enabled by default. For more detailed information about using the kernel
debugger, see the <span class="olink">
<em class="citetitle">Solaris Modular Debugger Guide</em>
</span>.</p>
<p>For step-by-step instructions on booting a system with the kernel debugger
in the current Solaris release, see <span class="olink">
How to Boot a System With the Kernel Debugger in the GRUB Based Boot Environment (<span><strong class="command">kmdb</strong></span>)</span>.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Boot the system.</p>
</li><li>
<p>Type <span><strong class="command">b <code class="option">
k</code>
</strong></span> at the <code class="literal">Select
(b)oot or (i)nterpreter</code> prompt. Press Enter.</p>
</li><li>
<p>Access the kernel debugger.</p>
<p>The method used to enter
the debugger is dependent upon the type of console that is used to access
the system:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>If a locally attached keyboard is being used, press F1&#8211;A.</p>
</li><li>
<p>If a serial console is being used, send a break by using the
method appropriate to the type of serial console that is being used.</p>
</li></ul></div>
<p>A welcome message is displayed when you access the kernel debugger for
the first time.</p>
</li></ol></div><div class="example"><a name="id2089112"></a><p class="title"><b>Example 12.7. 
Booting a System With the Kernel Debugger (<span>kmdb</span>)</b></p>


<p>Typing <span><strong class="command">b</strong></span> <code class="option">
k</code> at the <code class="literal">Select
(b)oot or (i)nterpreter</code> boot prompt boots a system to its default
mode and also loads <span><strong class="command">kmdb</strong></span>. This example shows how to boot
an x86 based system that has 32&#8211;bit computing capabilities to 32&#8211;bit
mode and also load <span><strong class="command">kmdb</strong></span>.</p>
<pre class="screen">Press any key to reboot.
.
.
.
&lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults
Running Configuration Assistant...
                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b -k</code></strong>
Loading kmdb...
SunOS Release 5.10 Version gate:2004-10-21 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
.
.
.</pre>
</div><div class="example"><a name="ffkto"></a><p class="title"><b>Example 12.8. 
Manually Booting a System That Has 64-Bit Computing Capabilities to
64-Bit Mode With the Kernel Debugger (<span>kmdb</span>)</b></p>


<p>This example shows how to manually boot an x86 based system that has
64-bit computing capabilities to 64-bit mode with <span><strong class="command">kmdb</strong></span>. <a class="indexterm" name="indexterm-224"></a>
</p>
<pre class="screen">Press any key to reboot
        .
        .
        .
            &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:
Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults

            &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b kernel/amd64/unix -k</code></strong>
Loading kmdb...</pre>
</div><div class="example"><a name="ffzpu"></a><p class="title"><b>Example 12.9. 
Manually Booting a System That Has 64-Bit Computing Capabilities to
32-Bit Mode With the Kernel Debugger (<span>kmdb</span>)</b></p>


<p>This example shows how to manually boot an x86 based system that has
64-bit computing capabilities to 32-bit mode with <span><strong class="command">kmdb</strong></span>. <a class="indexterm" name="indexterm-225"></a>
</p>
<pre class="screen">Press any key to reboot
        .
        .
        .
            &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:
Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults

            &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b kernel/unix -k</code></strong>
Loading kmdb...</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="hbx86boot-36"></a>
Forcing a Crash Dump and Reboot
of the System</h3></div></div></div>

<p>Forcing a crash dump and rebooting the system is sometimes necessary
for troubleshooting purposes. The <span><strong class="command">savecore</strong></span> feature is enabled
by default.</p>
<p>For more information on system crash dumps, see <span class="olink">Chapter 24, <em class="citetitle">Managing System Crash Information (Tasks),</em> in <em class="citetitle">System Administration Guide: Advanced Administration</em>
</span>. </p>
<div class="task"><a name="hbx86boot-89163"></a><p class="title"><b>
How to Force a Crash Dump and
Reboot of the System</b></p><div class="tasksummary">
<p>If you cannot use the <span><strong class="command">reboot</strong></span> <code class="option">
d</code> or
the <span><strong class="command">halt</strong></span> <code class="option">
d</code> command, you can use the kernel
debugger, <span><strong class="command">kmdb</strong></span>, to force a crash dump. The kernel debugger
must have been loaded, either at boot, or with the <span><strong class="command">mdb</strong></span> <code class="option">
k</code> command, for the following procedure to work.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>You must be in text mode to enter the kernel debugger (<span><strong class="command">kmdb</strong></span>).
So, first exit any window system.</p>
</div>
</div><div class="procedure"><ol type="1"><li>
<p>If a locally-attached keyboard is being used as the system console,
press F1-A on that keyboard. If the system is configured to use a remote (serial)
console, use the mechanism that is appropriate to that console to send a break
character.</p>
<p>The <span><strong class="command">kmdb</strong></span> prompt is displayed.</p>
</li><li>
<p>Use the <code class="literal">systemdump</code> macro to induce a crash.</p>
<pre class="screen">[0]&gt; $&lt;<strong class="userinput"><code>systemdump</code></strong>
</pre>
<p>Panic messages are displayed, the crash dump is saved, and the system
reboots.</p>
</li><li><a name="hbx86boot-step-44"></a>
<p>Verify that the system has rebooted by
logging in at the console login prompt.</p>
</li></ol></div><div class="example"><a name="id2089527"></a><p class="title"><b>Example 12.10. 
Forcing a Crash Dump and Reboot of the System by Using <span>halt</span> <code class="option">
d</code>
</b></p>


<p>This example shows how to force a crash dump and reboot of the x86 based
system <code class="literal">neptune</code> by using the <span><strong class="command">halt</strong></span> <code class="option">
d</code> and <span><strong class="command">boot</strong></span> commands. Use this method to force a crash dump of the system.
You will need to manually reboot the system after running the <span><strong class="command">halt</strong></span> command
with the <code class="option">
d</code> option.</p>
<pre class="screen"># <strong class="userinput"><code>halt -d</code></strong>
Aug 11 12:51:27 neptune halt:
halted by &lt;user&gt; panic[cpu45]/thread=d3971a00: forced crash dump initiated at user request

d363ae58 genunix:kadmin+bd (5, 0, 0, d3fefac0)
d363af88 genunix:uadmin+88 (5, 0, 0, 0, 0, d363afb4)

syncing file systems... done
dumping to /dev/dsk/c0t0d0s1, offset 107806720, content: kernel
100% done: 40223 pages dumped, compression ratio 4.11, dump succeeded
Press any key to reboot.
Resetting...
.
.
.
SunOS Secondary Boot version 3.00
Autobooting from bootpath: /pci@0,0/pci1028,10a@3/sd@0,0:a 
Running Configuration Assistant... 
If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.


Initializing system
Please wait...   

&lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci1028,10a@3/sd@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;    to boot with options
or      i &lt;ENTER&gt;                             to enter boot interpreter
or      &lt;ENTER&gt;                               to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter:
Loading kmdb...
SunOS Release 5.10 Version s10_62 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
configuring IPv4 interfaces: iprb0.
add net default: gateway 172.20.26.248
Hostname: neptune
The system is coming up.  Please wait.
checking ufs filesystems
/dev/rdsk/c0t0d0s7: is logging.
NIS domain name is example.com
starting rpc services: rpcbind keyserv ypbind done.
Setting netmask of iprb0 to 255.255.255.0
Setting default IPv4 interface for multicast: add net 224.0/4: gateway venus
syslog service starting.
System dump time: Wed Aug 11 12:51:29 2004
Aug 11 13:13:26 venus savecore: saving system crash dump in /var/crash/venus/*.1
Constructing namelist /var/crash/venus/unix.1
Constructing corefile /var/crash/venus/vmcore.1
100% done: 42157 of 42157 pages saved
volume management starting.
The system is ready.
.
.
.</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ffktz"></a>
Troubleshooting a Failed 64-Bit Boot</h3></div></div></div>

<a class="indexterm" name="indexterm-226"></a>
<p>In some instances, an attempt to boot a 64-bit capable x86 based system
to 64-bit mode might fail. This failure might produce an error similar to
the following:</p>
<pre class="screen">Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b kernel/amd64/unix</code></strong>
.
.
.
pci: cannot load driver
Cannot load drivers for /pci@0,0/pci1022,7450@a/pci17c2,10@4/sd@0,0:a
(Can't load the root filesystem)
Press any key to reboot.
.
.
.</pre>
<p>In the event such a failure occurs, boot the system to 32-bit mode by
typing the following command at the <code class="literal">Select (b)oot or (i)nterpreter</code> boot
prompt:</p>
<pre class="screen">Select (b)oot or (i)nterpreter: <strong class="userinput"><code>b kernel/unix</code></strong>
</pre>
<p>For more information, see <span class="olink">Example 12&#8211;3</span>.</p>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch12.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch12.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch13.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 12. 
Booting a System (Tasks) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 13. The Boot Process
(Reference)</td></tr></table></div></body></html>
