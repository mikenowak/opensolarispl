<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Maintaining Hot Spare Pools</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="Solaris Volume Manager Administration Guide"><link rel="up" href="ch17.html" title="Chapter 17. Hot Spare
Pools (Tasks)"><link rel="prev" href="ch17s03.html" title="Associating a Hot Spare Pool With Volumes"><link rel="next" href="ch18.html" title="Chapter 18. Disk
Sets (Overview)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Maintaining Hot Spare Pools</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch17s03.html">Prev</a> </td><th width="60%" align="center">Chapter 17. Hot Spare
Pools (Tasks)</th><td width="20%" align="right"> <a accesskey="n" href="ch18.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tasks-hotspares-8"></a>Maintaining Hot Spare Pools</h2></div></div></div>

<a class="indexterm" name="indexterm-127"></a>
<a class="indexterm" name="indexterm-128"></a>
<p>The following sections show how to perform maintenance tasks on hot
spare pools. </p>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id1760112"></a></h3></div></div></div>

<div class="task"><a name="maintaintasksnew-26732"></a><p class="title"><b>How to Check the Status of Hot Spares
and Hot Spare Pools</b></p><div class="procedure"><ul><li><a name="tasks-hotspares-step-22"></a>
<p>To view the status of a hot spare
pool and its hot spares, use one of the following methods:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select
a hot spare pool. Choose Action&#8658;Properties to view detailed status information.
For more information, see the online help.</p>
</li><li>
<p>Run the following form of the <span><strong class="command">metastat</strong></span> command:</p>
<pre class="screen"># <strong class="userinput"><code>metastat <em class="replaceable"><code>hot-spare-pool-name</code></em>
</code></strong>
</pre>
</li></ul></div>
</li></ul></div><div class="example"><a name="egjvz"></a><p class="title"><b>Example 17.8. Viewing the Status of a Hot Spare Pool</b></p>


<p>The following example shows sample output from the <span><strong class="command">metastat</strong></span> command on a hot spare pool.</p>
<pre class="screen"># <strong class="userinput"><code>metastat hsp001</code></strong>
hsp001: 1 hot spare
        c1t3d0s2                Available       16800 blocks</pre>
<p>The <span><strong class="command">metahs</strong></span> command can also be used to check the
status of a hot spare pool. </p>
<p>For information on the hot spare pool states and the possible actions
to take, see <span class="olink">Hot Spare Pool States</span>.</p>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id1760251"></a></h3></div></div></div>

<div class="task"><a name="maintaintasksnew-10276"></a><p class="title"><b>How to Replace a Hot Spare in a Hot
Spare Pool</b></p><a class="indexterm" name="indexterm-129"></a><a class="indexterm" name="indexterm-130"></a><div class="procedure"><ol type="1"><li>
<p>Become superuser.</p>
</li><li><a name="tasks-hotspares-step-27"></a>
<p>Verify whether the hot spare is currently
being used by using one of the following methods:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select
a hot spare pool. Choose Action&#8658;Properties. Then choose the Hot Spares
panel. Follow the onscreen instructions. For more information, see the online
help.</p>
</li><li>
<p>Use the following form of the <span><strong class="command">metastat</strong></span> command
to view the status of the hot spare pool:</p>
<pre class="screen"># <strong class="userinput"><code>metastat <em class="replaceable"><code>hot-spare-pool-name</code></em>
</code></strong>
</pre>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">metastat</span>
(
1M
)
</span>
</span> man
page.</p>
</li></ul></div>
</li><li><a name="tasks-hotspares-step-28"></a>
<p>To replace the hot spare, use one
of the following methods:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select
a hot spare pool. Choose Action&#8658;Properties. Then choose the Hot Spares
panel. Follow the onscreen instructions. For more information, see the online
help.</p>
</li><li>
<p>Use the following form of the <span><strong class="command">metahs</strong></span> command:</p>
<pre class="screen"># <strong class="userinput"><code>metahs -r <em class="replaceable"><code>hot-spare-pool-name</code></em> <em class="replaceable"><code>current-hot-spare</code></em> <em class="replaceable"><code>replacement-hot-spare</code></em>
</code></strong>
</pre>
<div class="variablelist"><dl><dt><span class="term">
<code class="option">
r</code>
</span></dt><dd>
<p>Specifies to replace disks in the named hot spare pool.</p>
</dd><dt><span class="term">
<em class="replaceable"><code>hot-spare-pool-name</code></em>
</span></dt><dd>
<p>Specifies the name of the hot spare pool. You can also use
the special keyword <code class="literal">all</code> to change all hot spare pool associations.</p>
</dd><dt><span class="term">
<em class="replaceable"><code>current-hot-spare</code></em>
</span></dt><dd>
<p>Specifies the name of the current hot spare that will be replaced.</p>
</dd><dt><span class="term">
<em class="replaceable"><code>replacement-hot-spare</code></em>
</span></dt><dd>
<p>Specifies the name of the slice that will replace the current
hot spare in the named hot spare pool.</p>
</dd></dl></div>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">metahs</span>
(
1M
)
</span>
</span> man
page.</p>
</li></ul></div>
</li></ol></div><div class="example"><a name="egjwa"></a><p class="title"><b>Example 17.9. Replacing a Hot Spare in One Hot Spare Pool</b></p>


<p>In the following example, the <span><strong class="command">metastat</strong></span> command shows
that the hot spare is not in use. The <span><strong class="command">metahs <code class="option">
r</code>
</strong></span> command
replaces the hot spare, <code class="filename">/dev/dsk/c0t2d0s2</code>, with the hot
spare, <code class="filename">/dev/dsk/c3t1d0s2</code>, in the hot spare pool, <code class="filename">hsp003</code>.</p>
<pre class="screen"># <strong class="userinput"><code>metastat hsp003</code></strong>
hsp003: 1 hot spare
        c0t2d0s2                Broken       5600 blocks
# <strong class="userinput"><code>metahs -r hsp003 c0t2d0s2 c3t1d0s2</code></strong>
hsp003: Hotspare c0t2d0s2 is replaced with c3t1d0s2</pre>
</div><div class="example"><a name="egjwn"></a><p class="title"><b>Example 17.10. Replacing a Hot Spare in All Associated Hot Spare Pools</b></p>


<p>
<a class="indexterm" name="maintaintasksnew-ix253"></a>In the following
example, the keyword <code class="option">all</code> replaces the hot spare, <code class="filename">/dev/dsk/c1t0d0s2</code>, with the hot spare, <code class="filename">/dev/dsk/c3t1d0s2</code>, in all its associated hot spare pools.</p>
<pre class="screen"># <strong class="userinput"><code>metahs -r all c1t0d0s2 c3t1d0s2</code></strong>
hsp001: Hotspare c1t0d0s2 is replaced with c3t1d0s2
hsp002: Hotspare c1t0d0s2 is replaced with c3t1d0s2
hsp003: Hotspare c1t0d0s2 is replaced with c3t1d0s2</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id1760728"></a></h3></div></div></div>

<div class="task"><a name="maintaintasksnew-10276a"></a><p class="title"><b>How to Delete a Hot Spare From a
Hot Spare Pool</b></p><a class="indexterm" name="indexterm-131"></a><a class="indexterm" name="indexterm-132"></a><div class="procedure"><ol type="1"><li>
<p>Become superuser.</p>
</li><li><a name="tasks-hotspares-step-27a"></a>
<p>Verify whether the hot spare is
currently being used by using one of the following methods:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select
a hot spare pool. Choose Action&#8658;Properties. Then choose the Hot Spares
panel. Follow the onscreen instructions. For more information, see the online
help.</p>
</li><li>
<p>Use the following form of the <span><strong class="command">metastat</strong></span> command
to view the status of the hot spare pool:</p>
<pre class="screen"># <strong class="userinput"><code>metastat <em class="replaceable"><code>hot-spare-pool-name</code></em>
</code></strong>
</pre>
<p>See the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">metastat</span>
(
1M
)
</span>
</span> man
page.</p>
</li></ul></div>
</li><li><a name="tasks-hotspares-step-28a"></a>
<p>To delete the hot spare, use one
of the following methods:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select
a hot spare pool. Choose Action&#8658;Properties. Then choose the Hot Spares
panel. Follow the onscreen instructions. For more information, see the online
help.</p>
</li><li>
<p>Use the following form of the <span><strong class="command">metahs</strong></span> command:</p>
<pre class="screen"># <strong class="userinput"><code>metahs -d <em class="replaceable"><code>hot-spare-pool-name</code></em> <em class="replaceable"><code>current-hot-spare</code></em>
</code></strong>
</pre>
<div class="variablelist"><dl><dt><span class="term">
<code class="option">
d</code>
</span></dt><dd>
<p>Specifies to delete a hot spare from the named hot spare pool.</p>
</dd><dt><span class="term">
<em class="replaceable"><code>hot-spare-pool</code></em>
</span></dt><dd>
<p>Specifies the name of the hot spare pool. You can also use
the special keyword <code class="literal">all</code> to delete the hot spare from all
hot spare pools.</p>
</dd><dt><span class="term">
<em class="replaceable"><code>current-hot-spare</code></em>
</span></dt><dd>
<p>Specifies the name of the current hot spare that will be deleted.</p>
</dd></dl></div>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">metahs</span>
(
1M
)
</span>
</span> man
page.</p>
</li></ul></div>
</li></ol></div><div class="example"><a name="egjvw"></a><p class="title"><b>Example 17.11. Deleting a Hot Spare from One Hot Spare Pool</b></p>


<p>In the following example, the <span><strong class="command">metastat</strong></span> command shows
that the hot spare is not in use. The <span><strong class="command">metahs <code class="option">
d</code>
</strong></span> command
deletes the hot spare, <code class="filename">/dev/dsk/c0t2d0s2</code>, in the hot
spare pool, <code class="filename">hsp003</code>.</p>
<pre class="screen"># <strong class="userinput"><code>metastat hsp003</code></strong>
hsp003: 1 hot spare
        c0t2d0s2                Broken       5600 blocks
# <strong class="userinput"><code>metahs -d hsp003 c0t2d0s2</code></strong>
</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id1761124"></a></h3></div></div></div>

<div class="task"><a name="maintaintasksnew-23845"></a><p class="title"><b>How to Enable a Hot Spare</b></p><a class="indexterm" name="indexterm-133"></a><a class="indexterm" name="indexterm-134"></a><div class="procedure"><ol type="1"><li>
<p>Become superuser.</p>
</li><li><a name="tasks-hotspares-step-31"></a>
<p>To return a hot spare to the &#8220;available&#8221;
state, use one of the following methods:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select
a hot spare pool. Choose Action&#8658;Properties. Then, choose the Hot Spares
panel. Follow the onscreen instructions. For more information, see the online
help.</p>
</li><li>
<p>Use the following form of the <span><strong class="command">metahs</strong></span> command:</p>
<pre class="screen"># <strong class="userinput"><code>metahs -e <em class="replaceable"><code>hot-spare-slice</code></em>
</code></strong>
</pre>
<div class="variablelist"><dl><dt><span class="term">
<code class="option">
e</code>
</span></dt><dd>
<p>Specifies to enable a hot spare.</p>
</dd><dt><span class="term">
<em class="replaceable"><code>hot-spare-slice</code></em>
</span></dt><dd>
<p>Specifies the name of the slice to enable.</p>
</dd></dl></div>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">metahs</span>
(
1M
)
</span>
</span> man
page. </p>
</li></ul></div>
</li></ol></div><div class="example"><a name="egjwy"></a><p class="title"><b>Example 17.12. Enabling a Hot Spare</b></p>


<p>In the following example, the <span><strong class="command">metahs</strong></span> command places
the hot spare, <code class="filename">/dev/dsk/c0t0d0s2</code> in the &#8220;Available&#8221;
state after it has been repaired. It is unnecessary to specify a hot spare
pool.</p>
<pre class="screen"># <strong class="userinput"><code>metahs -e c0t0d0s2</code></strong>
</pre>
</div></div>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch17s03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch17.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch18.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Associating a Hot Spare Pool With Volumes </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 18. Disk
Sets (Overview)</td></tr></table></div></body></html>
