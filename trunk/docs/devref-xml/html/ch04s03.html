<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4.3 Using Make</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="OpenSolaris Developer's Reference"><link rel="up" href="ch04.html" title="Chapter 4. Building OpenSolaris"><link rel="prev" href="ch04s02.html" title="4.2 Using nightly and bldenv"><link rel="next" href="ch04s04.html" title="4.4 Build Products"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.3 Using Make</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s02.html">Prev</a> </td><th width="60%" align="center">Chapter 4. Building OpenSolaris</th><td width="20%" align="right"> <a accesskey="n" href="ch04s04.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_4_3_Using_Make"></a>4.3 Using Make</h2></div></div></div><p>
Although nightly(1) can automate the entire build process, including
source-level checks and generation of additional build products, it is
not always necessary.  If you are working in a single subdirectory and
wish only to build or lint that subdirectory, it is usually possible to
do this directly without relying on nightly(1).  This is especially true
for the kernel, and if you have not made changes to any other part of
your <a href="apa.html#_workspace">workspace</a>, it is advantageous to build and install only the
kernel during intermediate testing.  See section 5.2 for more
information on installing test kernels.
</p><p>
You will need to set up your environment properly before using make(1)
directly on any part of your workspace.  You can use bldenv(1) to
accomplish this; see ??? and <a href="ch04s02.html">4.2 Using nightly and bldenv</a> for more information on this command.
</p><p>
Because the makefiles use numerous make(1) features, some versions of
make will not work properly.  Specifically, you cannot use BSD make or
GNU make to build your workspace.  The dmake(1) included in the
OpenSolaris tools distribution will work properly, as will the make(1)
shipped in /usr/ccs/bin with Solaris and some other distributions.  If
your version of dmake is older (or, in some cases, newer), it may fail
in unexpected ways.  While both dmake(1) and make(1) can be used,
dmake(1) is normally recommended because it can run multiple tasks in
parallel or even distribute them to other build servers.  This can
improve build times greatly.
</p><p>
The entire uts directory allows you to run make commands in a particular
build subdirectory (see sections 3.3.2 though 3.3.6) to complete only
the build steps you request on only that particular subdirectory.  Most
of the cmd and parts of the lib subdirectories also allow this; however,
some makefiles have not been properly configured to regenerate all
dependencies.  All subdirectories which use the modern object file
layout (see section 3.3.2) should generally work without any problems.
</p><p>
There are several valid targets which are common to all directories;
to find out which ones apply to your directory of interest and which
additional targets may be available, you will need to read that
directory's makefile.
</p><p>
Here are the generic targets:
</p><p>
<span class="bold"><strong>all</strong></span>
</p><p>
Build all derived objects in the object directory.
</p><p>
<span class="bold"><strong>install</strong></span>
</p><p>
Install derived objects into the proto area defined by ${ROOT}.
</p><p>
<span class="bold"><strong>install_h</strong></span>
</p><p>
Install header files into the proto area defined by ${ROOT}.
</p><p>
<span class="bold"><strong>clean</strong></span>
</p><p>
Remove intermediate object files, but do not remove "complete"
derived files such as executable programs, libraries, or kernel modules.
</p><p>
<span class="bold"><strong>clobber</strong></span>
</p><p>
Remove all derived files.
</p><p>
<span class="bold"><strong>check</strong></span>
</p><p>
Perform source-specific checks such as source and header style conformance.
</p><p>
<span class="bold"><strong>lint</strong></span>
</p><p>
Generate lint libraries and run all appropriate lint passes
against all code which would be used to build objects in the
current directory.
</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch04s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4.2 Using nightly and bldenv </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4.4 Build Products</td></tr></table></div></body></html>
