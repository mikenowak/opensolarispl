<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Troubleshooting a System Crash</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="System Administration Guide: Advanced Administration"><link rel="up" href="ch21.html" title="Chapter 21. Troubleshooting Software Problems (Overview)"><link rel="prev" href="ch21s02.html" title="Where to Find Software Troubleshooting Tasks"><link rel="next" href="ch21s04.html" title="Troubleshooting a System Crash Checklist"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Troubleshooting a System Crash</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch21s02.html">Prev</a> </td><th width="60%" align="center">Chapter 21. Troubleshooting Software Problems (Overview)</th><td width="20%" align="right"> <a accesskey="n" href="ch21s04.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tsoverview-30557"></a>Troubleshooting a System Crash</h2></div></div></div>

<p>If a system running the Solaris Operating System crashes, provide your service provider
with as much information as possible, including crash dump files.</p>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="frcbj"></a>
<span><strong class="command">kmdb</strong></span> Replaces <span><strong class="command">kadb</strong></span> as
Standard Solaris Kernel Debugger</h3></div></div></div>

<a class="indexterm" name="indexterm-243"></a>
<p>
<span class="strong"><strong>Solaris 10:</strong></span> <span><strong class="command">kmdb</strong></span> has
replaced <span><strong class="command">kadb</strong></span> as the standard &#8220;in situ&#8221; Solaris
kernel debugger. </p>
<p>
<span><strong class="command">kmdb</strong></span> brings all the power and flexibility of <span><strong class="command">mdb</strong></span> to live kernel debugging. <span><strong class="command">kmdb</strong></span> supports the
following:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Debugger commands (dcmds)</p>
</li><li>
<p>Debugger modules (dmods)</p>
</li><li>
<p>Access to kernel type data</p>
</li><li>
<p>Kernel execution control</p>
</li><li>
<p>Inspection</p>
</li><li>
<p>Modification</p>
</li></ul></div>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">kmdb</span>
(
1
)
</span>
</span> man
page. For step-by-step instructions on using <span><strong class="command">kmdb</strong></span> to troubleshoot
a system, see the <span class="olink">
<em class="citetitle">How to Boot the System With the Kernel Debugger (kmdb)</em> in <em class="citetitle">System Administration Guide: Basic Administration</em>
</span>.</p>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="gcdcd"></a>Solaris Dynamic Tracing
Facility</h3></div></div></div>

<a class="indexterm" name="indexterm-244"></a>
<p>
<span class="strong"><strong>Solaris 10:</strong></span> The Solaris DTrace facility
is a comprehensive dynamic tracking facility that gives you a new level of
observerability into the Solaris kernel and user processes. DTrace helps you
understand your system by permitting you to dynamically instrument the OS
kernel and user processes to record data that you specify at locations of
interest, called, <span class="emphasis"><em>probes</em></span>. Each probe can be associated
with custom programs that are written in the new D programming language. All
of DTrace's instrumentation is entirely dynamic and available for use on your
production system. For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">dtrace</span>
(
1M
)
</span>
</span> man page and the <span class="olink">
<em class="citetitle">Solaris Dynamic Tracing Guide</em>
</span>.</p>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tsoverview-18640"></a>What to Do if the System Crashes</h3></div></div></div>

<p>The most important things to remember are:</p>
<div class="orderedlist"><ol type="1"><li>
<p>Write down the system console messages.</p>
<p>
<a class="indexterm" name="tsoverview-ix5304"></a>
<a class="indexterm" name="tsoverview-ix5305"></a>
<a class="indexterm" name="tsoverview-ix5306"></a>
<a class="indexterm" name="tsoverview-ix5307"></a>
<a class="indexterm" name="tsoverview-ix5308"></a>If a system crashes, making it run again might seem like your
most pressing concern. However, before you reboot the system, examine the
console screen for messages. These messages can provide some insight about
what caused the crash. Even if the system reboots automatically and the console
messages have disappeared from the screen, you might be able to check these
messages by viewing the system error log, the<code class="filename">/var/adm/messages</code> file.
For more information about viewing system error log files, see <span class="olink">How to View System Messages</span>.</p>
<p>
<a class="indexterm" name="tsoverview-ix5309"></a>
<a class="indexterm" name="indexterm-245"></a>
<a class="indexterm" name="tsoverview-ix5311"></a>If you have frequent crashes and can't determine their cause,
gather all the information you can from the system console or the <code class="filename">/var/adm/messages</code> files, and have it ready for a customer service representative
to examine. For a complete list of troubleshooting information to gather for
your service provider, see <span class="olink">Troubleshooting a System Crash</span>.   </p>
<p>If the system fails to reboot successfully
after a system crash, see <span class="olink">Chapter 25, Troubleshooting Miscellaneous Software Problems (Tasks)</span>.</p>
</li><li>
<p>Synchronize the disks and reboot.</p>
<pre class="screen">ok <strong class="userinput"><code>sync</code></strong>
</pre>
<p>If the system fails to reboot successfully after a system crash, see <span class="olink">Chapter 25, Troubleshooting Miscellaneous Software Problems (Tasks)</span>.</p>
</li></ol></div>
<p>Check to see if a system crash dump was generated after the system crash.
System crash dumps are saved by default. For information about crash dumps,
see <span class="olink">Chapter 24, Managing System Crash Information (Tasks)</span>.</p>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tsoverview-23810"></a>Gathering Troubleshooting Data</h3></div></div></div>

<p>Answer the following questions to help isolate the system problem. Use <span class="olink">Troubleshooting a System Crash Checklist</span> for
gathering troubleshooting data for a crashed system.</p>
<div class="table"><a name="tsoverview-tbl-2"></a><p class="title"><b>Table 21.1. Identifying System Crash
Data</b></p>


<table summary="Identifying System Crash
Data" border="1"><colgroup><col><col></colgroup><thead><tr><th>
<p>Question</p>
</th><th>
<p>Description</p>
</th></tr></thead><tbody><tr><td>
<p>
<span class="emphasis"><em>Can you reproduce the problem?</em></span>
</p>
</td><td>
<p>This is important because a reproducible test case is often essential
for debugging really hard problems. By reproducing the problem, the service
provider can build kernels with special instrumentation to trigger, diagnose,
and fix the bug.</p>
</td></tr><tr><td>
<p>
<span class="emphasis"><em>Are you using any third-party drivers?</em></span>
</p>
</td><td>
<p>Drivers run in the same address space as the kernel, with all the same
privileges, so they can cause system crashes if they have bugs.</p>
</td></tr><tr><td>
<p>
<span class="emphasis"><em>What was the system doing just before it crashed?</em></span>
</p>
</td><td>
<p>If the system was doing anything unusual like running a new stress test
or experiencing higher-than-usual load, that might have led to the crash.</p>
</td></tr><tr><td>
<p>
<span class="emphasis"><em>Were there any unusual console messages right before the crash?</em></span>
</p>
</td><td>
<p>Sometimes the system will show signs of distress before it actually
crashes; this information is often useful.</p>
</td></tr><tr><td>
<p>
<span class="emphasis"><em>Did you add any tuning parameters to the</em></span> <code class="filename">/etc/system</code> <span class="emphasis"><em>file</em></span>?</p>
</td><td>
<p>Sometimes tuning parameters, such as increasing shared memory segments
so that the system tries to allocate more than it has, can cause the system
to crash.</p>
</td></tr><tr><td>
<p>
<span class="emphasis"><em>Did the problem start recently?</em></span>
</p>
</td><td>
<p>If so, did the onset of problems coincide with any changes to the system,
for example, new drivers, new software, different workload, CPU upgrade, or
a memory upgrade.</p>
</td></tr></tbody></table>
</div>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch21s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch21.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch21s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Where to Find Software Troubleshooting Tasks </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Troubleshooting a System Crash Checklist</td></tr></table></div></body></html>
