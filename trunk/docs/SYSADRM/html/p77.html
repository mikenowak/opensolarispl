<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Logging In to Non-Global Zones (Tasks) - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p76.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p78.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="z.login.task-1"></a>Chapter&nbsp;22<h3>Logging In to Non-Global Zones (Tasks)</h3><p>This chapter provides procedures for completing the configuration of
an installed zone, logging into a zone from the global zone, and shutting
down a zone. This chapter also shows how to use the <tt>zonename</tt> command
to print the name of the current zone.</p>
<p>For an introduction to the zone login process, see <a href="p75.html">Chapter&nbsp;21, Non-Global Zone Login (Overview)</a>.</p>
<p>For information about logging into <tt>lx</tt> branded zones,
see <a href="p133.html">Chapter&nbsp;34, Logging In to <tt>lx</tt> Branded Zones (Tasks)</a>.</p>
<a name="z.login.task-52"></a><h3>Initial Zone Boot and Zone Login Procedures
(Task Map)</h3>
<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Perform the internal configuration.</p>
</td><td><p>Log in to the zone console or use an <tt>/etc/sysidcfg</tt> file
to perform the initial zone configuration.</p>
</td><td><p><a href="p77.html#z.login.task-31">Performing the Initial Internal Zone Configuration</a></p>
</td></tr>
<tr><td><p>Log in to the zone.</p>
</td><td><p>You can log into a zone through the console, by using interactive mode
to allocate a pseudo-terminal, or by supplying a command to be run in the
zone. Supplying a command to be run does not allocate a pseudo-terminal. You
can also log in by using failsafe mode when a connection to the zone is denied.</p>
</td><td><p><a href="p78.html">Logging In to a Zone</a></p>
</td></tr>
<tr><td><p>Exit a non-global zone.</p>
</td><td><p>Disconnect from a non-global zone.</p>
</td><td><p><a href="p78.html#fpcft">How to Exit a Non-Global Zone</a></p>
</td></tr>
<tr><td><p>Shut down a zone.</p>
</td><td><p>Shut down a zone by using the <tt>shutdown</tt> utility or
a script.</p>
</td><td><p><a href="p79.html">How to Use <tt>zlogin</tt> to Shut Down a Zone</a></p>
</td></tr>
<tr><td><p>Print the zone name.</p>
</td><td><p>Print the zone name of the current zone.</p>
</td><td><p><a href="p80.html">Printing the Name of the Current Zone</a></p>
</td></tr>
</table><a name="z.login.task-31"></a><h3>Performing the Initial Internal Zone Configuration</h3>
<p>You must configure the zone using one of the following methods:</p>
<ul><li><p>Log into the zone and configure it as described in <a href="p75.html#z.login.ov-14">Internal Zone Configuration</a>.</p>
</li>
<li><p>Configure the zone using an <tt>/etc/sysidcfg</tt> file
as described in <a href="p77.html#z.login.task-38">How to Use an <tt>/etc/sysidcfg</tt> File to Perform the Initial Zone Configuration</a>.</p>
</li>
</ul>
<hr>
<p><b>Tip - </b>After you have performed the internal configuration, it is a good
idea to make a copy of the non-global zone's configuration. You can use this
backup to restore the zone in the future. As superuser or Primary Administrator,
print the configuration for the zone <tt>my-zone</tt> to a file.
This example uses a file named <tt>my-zone.config</tt>.</p>
<pre>global# <tt><b>zonecfg -z my-zone export > my-zone.config</b></tt></pre><p>See <a href="p112.html#gbrmi">How to Restore an Individual Non-Global Zone</a> for more information.</p>
<hr>
<a name="z.login.task-32"></a><h4><img src="graphics/procedure.gif"> How to Log In to the Zone Console to Perform
the Internal Zone Configuration</h4>
<p>You must be the global administrator in the global zone to perform this
procedure.</p>
<ol><li><a name="z.login.task-step-34"></a><b>Become superuser, or assume the Primary
Administrator role.</b><p>To create the role and assign the role to
a user, see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="z.login.task-step-35"></a><b>Use the <tt>zlogin</tt> command
with the <tt>-C</tt> option and the name of the zone, <tt>my-zone</tt> in
this procedure.</b><pre>global# <tt><b>zlogin -C my-zone</b></tt></pre></li><li><b>From another terminal window, boot the zone.</b><pre>global# <tt><b>zoneadm -z my-zone boot</b></tt></pre><p>You will see a display similar to the following in the <tt>zlogin</tt> window:</p><pre>[NOTICE: Zone booting up]</pre></li><li><a name="z.login.task-step-36"></a><b>The first time you log in to the console,
you are prompted to answer a series of questions. Your screen will look similar
to this:</b><pre>SunOS Release 5.10 Version Generic 64-bit
Copyright 1983-2006 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
Hostname: my-zone
Loading smf(5) service descriptions: 114/114
Select a Language

     1. English
     2. es
     2. fr

Please make a choice (1 - 3), or press h or ? for help:

Select a Locale

      1. English (C - 7-bit ASCII)
      2. Canada (English) (UTF-8)
      4. U.S.A. (UTF-8)
      5. U.S.A. (en_US.ISO8859-1)
      6. U.S.A. (en_US.ISO8859-15)
      7. Go Back to Previous Screen
      
Please make a choice (1 - 7), or press h or ? for help:

What type of terminal are you using?
      1) ANSI Standard CRT
      2) DEC VT52
      3) DEC VT100
      4) Heathkit 19
      5) Lear Siegler ADM31
      6) PC Console
      7) Sun Command Tool
      8) Sun Workstation
      9) Televideo 910
      10) Televideo 925
      11) Wyse Model 50
      12) X Terminal Emulator (xterms)
      13) CDE Terminal Emulator (dtterm)
      14) Other
Type the number of your choice and press Return:
.
.
.</pre><p>For the complete list of questions you must answer, see <a href="p75.html#z.login.ov-14">Internal Zone Configuration</a>.</p></li><li><a name="z.login.task-step-53"></a><b>(Optional) If you are not using two
windows as described in step 3, you might have missed the initial prompt for
configuration information. If you see the following system message at zone
login instead of a prompt:</b><pre>[connected to zone <i>zonename</i> console]</pre><p>Press Return to display the prompt again.</p><p>If you enter an
incorrect response and try to restart the configuration, you might experience
difficulty when you attempt the process again. This occurs because the <tt>sysidtools</tt> can store your previous responses.</p><p>If this happens,
use the following workaround from the global zone to restart the configuration
process.</p><pre>global# <tt><b>zlogin -S </tt><i>zonename</i><tt> /usr/sbin/sys-unconfig</b></tt></pre><p>For more information on the <tt>sys-unconfig</tt> command,
see the <tt>sys-unconfig</tt>(1M) man page.</p></li></ol><a name="z.login.task-38"></a><h4><img src="graphics/procedure.gif"> How to Use an <tt>/etc/sysidcfg</tt> File
to Perform the Initial Zone Configuration</h4>
<p>You must be the global administrator in the global zone to perform this
procedure.</p>
<ol><li><a name="z.login.task-step-47"></a><b>Become superuser, or assume the Primary
Administrator role.</b><p>To create the role and assign the role to
a user, see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><b>From the global zone, change directories to the non-global zone's <tt>/etc</tt> directory:</b><pre>global# <tt><b>cd /export/home/my-zone/root/etc</b></tt></pre></li><li><a name="z.login.task-step-46"></a><b>Create the <tt>sysidcfg</tt> file
and place it in this directory.</b><p>The file will look similar to
the following:</p><ul><li><b>For a shared-IP zone:</b><pre>system_locale=C
terminal=dtterm
network_interface=primary {
	        hostname=my-zone
}
security_policy=NONE
name_service=NIS {
	        domain_name=special.example.com
	        name_server=bird(192.168.112.3)
}
timezone=US/Central
root_password=m4qtoWN</pre></li><li><b>For an exclusive-IP zone with a static IP configuration:</b><pre>system_locale=C
terminal=dtterm
network_interface=primary {
         hostname=my-zone
         default_route=10.10.10.1
         ip_address=10.10.10.13
         netmask=255.255.255.0
}
timezone=US/Central
root_password=m4qtoWN</pre></li><li><b>For an exclusive-IP zone with DHCP and IPv6 option:</b><pre>system_locale=C
terminal=dtterm
network_interface=primary {
	        dhcp protocol_ipv6=yes
}
security_policy=NONE
name_service=DNS {
         domain_name=example.net
         name_server=192.168.224.11,192.168.224.33
}
timezone=US/Central
root_password=m4qtoWN</pre></li></ul></li><li><b>By default, a separate module will request the NFSv4 domain parameter
used by the <tt>nfsmapid</tt> command. To complete a hands-off initial
zone configuration, edit the file <tt>default/nfs</tt>, uncomment
the <tt>NFSMAPID_DOMAIN</tt> parameter, and set the domain to the
desired NFSv4 domain:</b><pre>global# <tt><b>vi default/nfs</b></tt>
		.
		.
		.
		NFSMAPID_DOMAIN=<i>domain</i></pre><p>For more information on the NFSv4 domain parameter, see the <tt>nfsmapid</tt>(1M) man page.</p></li><li><b>Create the file <tt>.NFS4inst_state.domain</tt> in
this directory to indicate that the NFSv4 domain has been set:</b><pre>global# <tt><b>touch .NFS4inst_state.domain</b></tt></pre></li><li><a name="z.login.task-step-48"></a><b>Boot the zone.</b></li></ol><h6>See Also</h6><p>See the <tt>sysidcfg</tt>(4) man
page for more information.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p76.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p78.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

