<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Optimization Information Logging - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p32.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a> > <a href="p38.html"><tt>poold</tt> Features That Can Be Configured</a> > <a href="p38.html#rmpool-95"><tt>poold</tt> Logging Information</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p38.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p40.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmpool-106"></a><h5>Optimization Information Logging</h5>
<p>The following types of messages can be generated:</p>
<dl><dt><tt>WARNING</tt></dt>
<dd><p>Messages could be displayed regarding problems making optimal
decisions. Examples could include resource sets that are too narrowly constrained
by their minimum and maximum values or by the number of pinned components.</p>
<p>Messages could be displayed about problems performing an optimal reallocation
due to unforseen limitations. Examples could include removing the last processor
from a processor set which contains a bound resource consumer.</p>
</dd>
<dt><tt>NOTICE</tt></dt>
<dd><p>Messages about usable configurations or configurations that
will not be implemented due to overriding decision histories could be displayed.</p>
</dd>
<dt><tt>INFO</tt></dt>
<dd><p>Messages about alternate configurations considered could be
displayed.</p>
</dd>
<dt><tt>DEBUG</tt></dt>
<dd><p>Messages containing the detailed information that is needed
when debugging optimization processing. This information is not generally
used by administrators.</p>
</dd>
</dl>
<a name="rmpool-102"></a><h4>Logging Location</h4>
<p>The <tt>system.poold.log-location</tt> property is used to
specify the location for <tt>poold</tt> logged output. You can specify
a location of <tt>SYSLOG</tt> for <tt>poold</tt> output
(see <tt>syslog</tt>(3C)).</p>
<p>If this property is not specified, the default location for <tt>poold</tt> logged
output is <tt>/var/log/pool/poold</tt>.</p>
<p>When <tt>poold</tt> is invoked from the command line, this
property is not used. Log entries are written to <tt>stderr</tt> on
the invoking terminal.</p>
<a name="rmpool-103"></a><h4>Log Management With <tt>logadm</tt></h4>
<p>If <tt>poold</tt> is active, the <tt>logadm.conf</tt> file
includes an entry to manage the default file <tt>/var/log/pool/poold</tt>.
The entry is:</p>
<p><tt>/var/log/pool/poold -N -s 512k</tt></p>
<p>See the <tt>logadm</tt>(1M) and the <tt>logadm.conf</tt>(4) man pages.</p>
<a name="rmpool-81"></a><h3>How Dynamic Resource Allocation Works</h3>
<p>This section explains the process and the factors that <tt>poold</tt> uses
to dynamically allocate resources.</p>
<a name="rmpool-86"></a><h4>About Available Resources</h4>
<p>Available resources are considered to be all of the resources that are
available for use within the scope of the <tt>poold</tt> process.
The scope of control is at most a single Solaris instance.</p>
<p>On a system that has zones enabled, the scope of an executing instance
of <tt>poold</tt> is limited to the global zone.</p>
<a name="rmpool-82"></a><h4>Determining Available Resources</h4>
<p>Resource pools encompass all of the system resources that are available
for consumption by applications.</p>
<p>For a single executing Solaris instance, a resource of a single type,
such as a CPU, must be allocated to a single partition. There can be one or
more partitions for each type of resource. Each partition contains a unique
set of resources.</p>
<p>For example, a machine with four CPUs and two processor sets can have
the following setup:</p>
<p>pset 0: 0 1</p>
<p>pset 1: 2 3</p>
<p>where 0, 1, 2 and 3 after the colon represent CPU IDs. Note that the
two processor sets account for all four CPUs.</p>
<p>The same machine cannot have the following setup:</p>
<p>pset 0: 0 1</p>
<p>pset 1: 1 2 3</p>
<p>It cannot have this setup because CPU 1 can appear in only one pset
at a time.</p>
<p>Resources cannot be accessed from any partition other than the partition
to which they belong.</p>
<p>To discover the available resources, <tt>poold</tt> interrogates
the active pools configuration to find partitions. All resources within all
partitions are summed to determine the total amount of available resources
for each type of resource that is controlled.</p>
<p>This quantity of resources is the basic figure that <tt>poold</tt> uses
in its operations. However, there are constraints upon this figure that limit
the flexibility that <tt>poold</tt> has to make allocations. For
information about available constraints, see <a href="p36.html#rmpool-76">Configuration Constraints</a>.</p>
<a name="rmpool-87"></a><h4>Identifying a Resource Shortage</h4>
<p><a name="indexterm-112"></a>The control scope for <tt>poold</tt> is
defined as the set of available resources for which <tt>poold</tt> has
primary responsibility for effective partitioning and management. However,
other mechanisms that are allowed to manipulate resources within this control
scope can still affect a configuration. If a partition should move out of
control while <tt>poold</tt> is active, <tt>poold</tt> tries
to restore control through the judicious manipulation of available resources.
If <tt>poold</tt> cannot locate additional resources within its
scope, then the daemon logs information about the resource shortage.</p>
<a name="rmpool-88"></a><h4>Determining Resource Utilization</h4>
<p><tt>poold</tt> typically spends the greatest amount of time
observing the usage of the resources within its scope of control. This monitoring
is performed to verify that workload-dependent objectives are being met.</p>
<p>For example, for processor sets, all measurements are made across all
of the processors in a set. The resource utilization shows the proportion
of time that the resource  is in use over the sample interval. Resource utilization
is displayed as a percentage from 0 to 100.</p>
<a name="rmpool-89"></a><h4>Identifying Control Violations</h4>
<p><a name="indexterm-113"></a><a name="indexterm-114"></a>The directives
described in <a href="p36.html#rmpool-75">Configuration Constraints and Objectives</a> are used to detect the approaching failure of a system to meet its
objectives. These objectives are directly related to workload.</p>
<p>A partition that is not meeting user-configured objectives is a control
violation. The two types of control violations are synchronous and asynchronous.</p>
<ul><li><p>A synchronous violation of an objective is detected by the
daemon in the course of its workload monitoring.</p>
</li>
<li><p>An asynchronous violation of an objective occurs independently
of monitoring action by the daemon.</p>
</li>
</ul>
<p>The following events cause asynchronous objective violations:</p>
<ul><li><p>Resources are added to or removed from a control scope.</p>
</li>
<li><p>The control scope is reconfigured.</p>
</li>
<li><p>The <tt>poold</tt> resource controller is restarted.</p>
</li>
</ul>
<p>The contributions of objectives that are not related to workload are
assumed to remain constant between evaluations of the objective function.
Objectives that are not related to workload are only reassessed when a reevaluation
is triggered through one of the asynchronous violations.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p38.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p40.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

