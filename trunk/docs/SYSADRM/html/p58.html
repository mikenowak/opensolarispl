<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title><tt>zonecfg</tt> Command-File
Mode - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p54.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a> > <a href="p57.html#z.config.ov-10"><tt>zonecfg</tt> Modes</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p57.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p59.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="z.config.ov-15"></a><h4><tt>zonecfg</tt> Command-File
Mode</h4>
<p>In command-file mode, input is taken from a file. The <tt>export</tt> subcommand
described in <a href="p57.html#z.config.ov-4"><tt>zonecfg</tt> Interactive Mode</a> is
used to produce this file. The configuration can be printed to standard output,
or the <tt>-f</tt> option can be used to specify an output file.</p>
<a name="z.config.ov-12"></a><h3>Zone Configuration Data</h3>
<p><a name="indexterm-196"></a>Zone configuration data consists of two kinds of entities:
resources and properties. Each resource has a type, and each resource can
also have a set of one or more properties. The properties have names and values.
The set of properties is dependent on the resource type.</p>
<a name="z.config.ov-16"></a><h4>Resource and Property Types</h4>
<p><a name="indexterm-197"></a><a name="indexterm-198"></a>The resource and property types are
described as follows:</p>
<dl><dt><tt>zonename</tt></dt>
<dd><p>The name of the zone. The following rules apply to zone names:</p>
<ul><li><p>Each zone must have a unique name.</p>
</li>
<li><p>A zone name is case-sensitive.</p>
</li>
<li><p>A zone name must begin with an alphanumeric character.</p>
<p>The name can contain alphanumeric characters, underbars (<tt>_</tt>),
hyphens (<tt>-</tt>), and periods (<tt>.</tt>).</p>
</li>
<li><p>The name cannot be longer than 64 characters.</p>
</li>
<li><p>The name <tt>global</tt> and all names beginning
with <tt>SUNW</tt> are reserved and cannot be used.</p>
</li>
</ul>
</dd>
<dt><tt>zonepath</tt></dt>
<dd><p>The <tt>zonepath</tt> property is the path to the
zone root. Each zone has a path to its root directory that is relative to
the global zone's root directory. At installation time, the global zone directory
is required to have restricted visibility. It must be owned by <tt>root</tt> with
the mode <tt>700</tt>.</p>
<p>The non-global zone's root path is one level lower. The zone's root
directory has the same ownership and permissions as the root directory (<tt>/</tt>) in the global zone. The zone directory must be owned by <tt>root</tt> with the mode <tt>755</tt>. These directories are created
automatically with the correct permissions, and do not need to be verified
by the zone administrator. This hierarchy ensures that unprivileged users
in the global zone are prevented from traversing a non-global zone's file
system.</p>
<table><tr><th valign="top"><p>Path</p>
</th><th valign="top"><p>Description</p>
</th></tr>
<tr><td><p><tt>/home/export/my-zone</tt></p>
</td><td><p><tt>zonecfg</tt> <tt>zonepath</tt></p>
</td></tr>
<tr><td><p><tt>/home/export/my-zone/root</tt></p>
</td><td><p>Root of the zone</p>
</td></tr>
<tr><td><p><tt>/home/export/my-zone/root/dev</tt></p>
</td><td><p>Devices created for the zone</p>
</td></tr>
</table><p>See <a href="p97.html#z.admin.ov-8">Traversing File Systems</a> for a further discussion of this issue.</p>
<hr>
<p><b>Note - </b>You can move a zone to another location on the same system by
specifying a new, full <tt>zonepath</tt> with the <tt>move</tt> subcommand
of <tt>zoneadm</tt>. See <a href="p81.html#gbwym">Moving a Non-Global Zone</a> for instructions.</p>
<hr>
</dd>
<dt><tt>autoboot</tt></dt>
<dd><p>If this property is set to true, the zone is automatically
booted when the global zone is booted. Note that if the zones service, <tt>svc:/system/zones:default</tt> is disabled, the zone will not autoboot, regardless of the setting
of this property. You can enable the zones service with the <tt>svcadm</tt> command
described in the <tt>svcadm</tt>(1M) man
page:</p>
<pre>global# <tt><b>svcadm enable zones</b></tt></pre></dd>
<dt><tt>bootargs</tt></dt>
<dd><p><a name="indexterm-199"></a><a name="indexterm-200"></a>This property is used to set a boot argument for the zone. The
boot argument is applied unless overridden by the <tt>reboot</tt>, <tt>zoneadm boot</tt>, or <tt>zoneadm reboot</tt> commands. See <a href="p68.html#gdepq">Zone Boot Arguments</a>.</p>
</dd>
<dt><tt>pool</tt></dt>
<dd><p><a name="indexterm-201"></a><a name="indexterm-202"></a>This property is used to associate the zone with a resource pool
on the system. Multiple zones can share the resources of one pool. Also see <a href="p54.html#gejlw"><tt>dedicated-cpu</tt> Resource</a>.</p>
</dd>
<dt><tt>limitpriv</tt></dt>
<dd><p><a name="indexterm-203"></a><a name="indexterm-204"></a><a name="indexterm-205"></a><a name="indexterm-206"></a>This property is used to specify a privilege mask other than the
default. See <a href="p100.html#z.admin.ov-18">Privileges in a Non-Global Zone</a>.</p>
<p>Privileges are added by specifying the privilege name, with or without
the leading <tt>priv_</tt>. Privileges are excluded by preceding
the name with a dash (<tt>-</tt>) or an exclamation mark (<tt>!</tt>).
The privilege values are separated by commas and placed within quotation marks
(<tt>&ldquo;</tt>).</p>
<p>As described in <tt>priv_str_to_set</tt>(3C), the special privilege sets of <tt>none</tt>, <tt>all</tt>, and <tt>basic</tt> expand to their normal definitions.
Because zone configuration takes place from the global zone, the special privilege
set <tt>zone</tt> cannot be used. Because a common use is to alter
the default privilege set by adding or removing certain privileges, the special
set <tt>default</tt> maps to the default, set of privileges. When <tt>default</tt> appears at the beginning of the <tt>limitpriv</tt> property,
it expands to the default set.</p>
<p>The following entry adds the ability to use DTrace programs that only
require the <tt>dtrace_proc</tt> and <tt>dtrace_user</tt> privileges
in the zone:</p>
<pre>global# zonecfg -z userzone
zonecfg:userzone> set limitpriv="default,dtrace_proc,dtrace_user"</pre><p>If the zone's privilege set contains a disallowed privilege, is missing
a required privilege, or includes an unknown privilege, an attempt to verify,
ready, or boot the zone will fail with an error message.</p>
</dd>
<dt><tt>scheduling-class</tt></dt>
<dd><p><a name="indexterm-207"></a><a name="indexterm-208"></a>This property sets the scheduling class
for the zone. See <a href="p55.html#gejen">Scheduling Class</a> for additional
information and tips.</p>
</dd>
<dt><tt>ip-type</tt></dt>
<dd><p><a name="indexterm-209"></a><a name="indexterm-210"></a>This property is required to be set only if the zone is an exclusive-IP
zone. See <a href="p55.html#gekkb">Exclusive-IP Non-Global Zones</a> and <a href="p63.html#z.conf.start-29">How to Configure the Zone</a>.</p>
</dd>
<dt><tt>dedicated-cpu</tt></dt>
<dd><p><a name="indexterm-211"></a><a name="indexterm-212"></a>This resource dedicates a subset of the system's processors to
the zone while it is running. The <tt>dedicated-cpu</tt> resource
provides limits for <tt>ncpus</tt> and, optionally, <tt>importance</tt>. For more information, see <a href="p54.html#gejlw"><tt>dedicated-cpu</tt> Resource</a>.</p>
</dd>
<dt><tt>capped-cpu</tt></dt>
<dd><p><a name="indexterm-213"></a><a name="indexterm-214"></a>This resource sets a limit on the amount of CPU resources that
can be consumed by the zone while it is running. The <tt>capped-cpu</tt> resource
provides a limit for <tt>ncpus</tt>. For more information, see <a href="p55.html"><tt>capped-cpu</tt> Resource</a>.</p>
</dd>
<dt><tt>capped-memory</tt> resource</dt>
<dd><p><a name="indexterm-215"></a><a name="indexterm-216"></a>This resource groups the properties used when capping memory for
the zone. The <tt>capped-memory</tt> resource provides limits for <tt>physical</tt>, <tt>swap</tt>, and <tt>locked</tt> memory.
At least one of these properties must be specified.</p>
</dd>
<dt><tt>dataset</tt></dt>
<dd><p><a name="indexterm-217"></a><a name="indexterm-218"></a>Adding a Zetabyte File System (ZFS) dataset resource enables the
delegation of storage administration to a non-global zone. The zone administrator
can create and destroy file systems within that dataset, and modify properties
of the dataset. The zone administrator cannot affect datasets that have not
been added to the zone or exceed any top level quotas set on the dataset assigned
to the zone.</p>
<p>ZFS datasets can be added to a zone in the following ways.</p>
<ul><li><p>As an lofs mounted file system, when the goal is solely to
share space with the global zone</p>
</li>
<li><p>As a delegated dataset</p>
</li>
</ul>
<p>See Chapter 8, ZFS Advanced Topics, in <i>Solaris
ZFS Administration Guide</i> and <a href="p96.html#z.admin.ov-2">File Systems and Non-Global Zones</a>.</p>
<p>Also see <a href="p113.html">Chapter&nbsp;28, Troubleshooting Miscellaneous Solaris Zones Problems</a> for information on dataset issues.</p>
</dd>
<dt><tt>fs</tt></dt>
<dd><p>Each zone can have various file systems that are mounted when
the zone transitions from the installed state to the ready state. The file
system resource specifies the path to the file system mount point. For more
information about the use of file systems in zones, see <a href="p96.html#z.admin.ov-2">File Systems and Non-Global Zones</a>.</p>
</dd>
<dt><tt>inherit-pkg-dir</tt></dt>
<dd><p><a name="indexterm-219"></a>This resource should not be configured in a whole root zone.</p>
<p>In a sparse root zone, the <tt>inherit-pkg-dir</tt> resource
is used to represent directories that contain packaged software that a non-global
zone shares with the global zone.</p>
<p>The contents of software packages transferred into the <tt>inherit-pkg-dir</tt> directory are inherited in read-only mode by the non-global zone.
The zone's packaging database is updated to reflect the packages. These resources
cannot be modified or removed after the zone has been installed using <tt>zoneadm</tt>.</p>
<hr>
<p><b>Note - </b>Four default <tt>inherit-pkg-dir</tt> resources are
included in the configuration. These directory resources indicate which directories
should have their associated packages inherited from the global zone. The
resources are implemented through a read-only loopback file system mount.</p>
<ul><li><p><tt>/lib</tt></p>
</li>
<li><p><tt>/platform</tt></p>
</li>
<li><p><tt>/sbin</tt></p>
</li>
<li><p><tt>/usr</tt></p>
</li>
</ul>
<hr>
</dd>
<dt><tt>net</tt></dt>
<dd><p>The network interface resource is the interface name. Each
zone can have network interfaces that should be set up when the zone transitions
from the installed state to the ready state.</p>
</dd>
<dt><tt>device</tt></dt>
<dd><p>The device resource is the device matching specifier. Each
zone can have devices that should be configured when the zone transitions
from the installed state to the ready state.</p>
</dd>
<dt><tt>rctl</tt></dt>
<dd><p>The <tt>rctl</tt> resource is used for zone-wide
resource controls. The controls are enabled when the zone transitions from
the installed state to the ready state.</p>
<p> See <a href="p56.html#z.config.ov-13">Setting Zone-Wide Resource Controls</a> for
more information.</p>
<hr>
<p><b>Note - </b>To configure zone-wide controls using the <tt>set</tt> <i>global_property_name</i> subcommand of <tt>zonefig</tt> instead
of the <tt>rctl</tt> resource, see <a href="p63.html#z.conf.start-29">How to Configure the Zone</a>.</p>
<hr>
</dd>
<dt><tt>attr</tt></dt>
<dd><p>This generic attribute can be used for user comments or by
other subsystems. The <tt>name</tt> property of an <tt>attr</tt> must
begin with an alphanumeric character. The <tt>name</tt> property
can contain alphanumeric characters, hyphens (<tt>-</tt>), and periods
(<tt>.</tt>). Attribute names beginning with <tt>zone.</tt> are
reserved for use by the system.</p>
</dd>
</dl>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p57.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p59.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

