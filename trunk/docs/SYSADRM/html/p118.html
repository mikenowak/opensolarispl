<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title><tt>lx</tt> Branded Zone Configuration
Components - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p117.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p117.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p119.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="gekrh"></a><h3><tt>lx</tt> Branded Zone Configuration
Components</h3>
<p>This section covers the following components:</p>
<ul><li><p>Zone resources and properties that can be configured using
the <tt>zonecfg</tt> command</p>
</li>
<li><p>Resources included in the configuration by default</p>
</li>
</ul>
<a name="gcxbn"></a><h4>Zone Name and Zone Path in an <tt>lx</tt> Branded
Zone</h4>
<p>You must choose a name and a path for your zone.</p>
<a name="gdkcr"></a><h4>Zone Autoboot in an <tt>lx</tt> Branded
Zone</h4>
<p>The <tt>autoboot</tt> property setting determines whether
the zone is automatically booted when the global zone is booted.</p>
<a name="gdafy"></a><h4>Resource Pool Association in an <tt>lx</tt> Branded
Zone</h4>
<p>If you have configured resource pools on your system as described in <a href="p42.html">Chapter&nbsp;13, Creating and Administering Resource Pools (Tasks)</a>, you can use the <tt>pool</tt> property to
associate the zone with one of the resource pools when  you configure the
zone.</p>
<p>If you do not have resource pools configured, you can still specify
that a subset of the system's processors be dedicated to a non-global zone
while it is running by using the <tt>dedicated-cpu</tt> resource.
The system will dynamically create a temporary pool for use while the zone
is running.</p>
<hr>
<p><b>Note - </b>A zone configuration using a persistent pool set through the <tt>pool</tt> property is incompatible with a temporary pool configured through
the <tt>dedicated-cpu</tt> resource. You can set only one of these
two properties.</p>
<hr>
<a name="gekgp"></a><h4>Specifying the <tt>dedicated-cpu</tt> Resource</h4>
<p>The <tt>dedicated-cpu</tt> resource specifies that a subset
of the system's processors should be dedicated to a non-global zone while
it is running. When the zone boots, the system will dynamically create a temporary
pool for use while the zone is running.</p>
<p>The <tt>dedicated-cpu</tt> resource sets limits for <tt>ncpus</tt>, and optionally, <tt>importance</tt>. </p>
<dl><dt><tt>ncpus</tt></dt>
<dd><p>Specify the number of CPUs or specify a range, such as 2&ndash;4
CPUs. If you specify a range because you want dynamic resource pool behavior,
also do the following:</p>
<ul><li><p>Set the <tt>importance</tt> property.</p>
</li>
<li><p>Enable the dynamic resource pool service as described in <a href="p42.html#rmpool.task-57">Enabling and Disabling the Pools Facility</a></p>
</li>
</ul>
</dd>
<dt><tt>importance</tt></dt>
<dd><p>If you are using a CPU range to achieve dynamic behavior,
also set the <tt>importance</tt> property, The <tt>importance</tt> property,
which is <b>optional</b>, defines the relative importance of
the pool. This property is only needed when you specify a range for <tt>ncpus</tt> and are using dynamic resource pools managed by <tt>poold</tt>.
If <tt>poold</tt> is not running, then <tt>importance</tt> is
ignored. If <tt>poold</tt> is running and <tt>importance</tt> is
not set, <tt>importance</tt> defaults to <tt>1</tt>. For
more information, see <a href="p36.html#gbvhv"><tt>pool.importance</tt> Property Constraint</a>.</p>
</dd>
</dl>
<hr>
<p><b>Caution - </b>The <tt>cpu-shares</tt> rctl and the <tt>dedicated-cpu</tt> resource are incompatible.</p>
<hr>
<a name="gepzg"></a><h4>Specifying the <tt>capped-cpu</tt> Resource</h4>
<p><a name="indexterm-353"></a><a name="indexterm-354"></a>The <tt>capped-cpu</tt> resource provides an absolute
limit on the amount of CPU resources that can be consumed by a project or
a zone. The <tt>capped-cpu</tt> resource has a single <tt>ncpus</tt> property
that is a positive decimal with two digits to the right of the decimal. This
property corresponds to units of CPUs. The resource does not accept a range.
The resource does accept a decimal number. When specifying <tt>ncpus</tt>,
a value of <tt>1</tt> means 100 percent of a CPU. A value of <tt>1.25</tt> means 125 percent, because 100 percent corresponds to one full
CPU on the system.</p>
<hr>
<p><b>Note - </b>The <tt>capped-cpu</tt> resource and the <tt>dedicated-cpu</tt> resource are incompatible.</p>
<hr>
<a name="gekhp"></a><h4>Scheduling Class in a Zone</h4>
<p><a name="indexterm-355"></a>You
can use the <b>fair share scheduler</b> (FSS) to control the
allocation of available CPU resources among zones, based on their importance.
This importance is expressed by the number of <b>shares</b> of
CPU resources that you assign to each zone.</p>
<p>When you explicitly set the <tt>cpu-shares</tt> property,
the fair share scheduler (FSS) will be used as the scheduling class for that
zone. However, the preferred way to use FSS in this case is to set FSS to
be the system default scheduling class with the <tt>dispadmin</tt> command.
That way, all zones will benefit from getting a fair share of the system CPU
resources. If <tt>cpu-shares</tt> is not set for a zone, the zone
will use the system default scheduling class. The following actions set the
scheduling class for a zone:</p>
<ul><li><p>You can use the <tt>scheduling-class</tt> property
in <tt>zonecfg</tt> to set the scheduling class for the zone.</p>
</li>
<li><p>You can set the scheduling class for a zone through the resource
pools facility. If the zone is associated with a pool that has its <tt>pool.scheduler</tt> property set to a valid scheduling class, then processes running
in the zone run in that scheduling class by default. See <a href="p32.html#rmpool-2">Introduction to Resource Pools</a> and <a href="p43.html#rmpool.task-22">How to Associate a Pool With a Scheduling Class</a>.</p>
</li>
<li><p>If the <tt>cpu-shares</tt> rctl is set and FSS has
not been set as the scheduling class for the zone through another action, <tt>zoneadmd</tt> sets the scheduling class to FSS when the zone boots.</p>
</li>
<li><p>If the scheduling class is not set through any other action,
the zone inherits the system default scheduling class.</p>
</li>
</ul>
<p>Note that you can use the <tt>priocntl</tt> described in the <tt>priocntl</tt>(1) man page to move running processes
into a different scheduling class without changing the default scheduling
class and rebooting.</p>
<a name="gekgx"></a><h4><tt>capped-memory</tt> Resource</h4>
<p><a name="indexterm-356"></a>The <tt>capped-memory</tt> resource sets limits for <tt>physical</tt>, <tt>swap</tt>,
and <tt>locked</tt> memory. Each limit is optional, but at least
one must be set.</p>
<ul><li><p>Determine values for this resource if you plan to cap memory
for the zone by using <tt>rcapd</tt> from the global zone. The <tt>physical</tt> property of the <tt>capped-memory</tt> resource
is used by <tt>rcapd</tt> as the <tt>max-rss</tt> value
for the zone.</p>
</li>
<li><p>The <tt>swap</tt> property of the <tt>capped-memory</tt> resource is the preferred way to set the <tt>zone.max-swap</tt> resource
control.</p>
</li>
<li><p>The <tt>locked</tt> property of the <tt>capped-memory</tt> resource is the preferred way to set the <tt>zone.max-locked-memory</tt> resource control.</p>
</li>
</ul>
<p>For more information, see <a href="p27.html">Chapter&nbsp;10, Physical Memory Control Using the Resource Capping Daemon (Overview)</a>, <a href="p30.html">Chapter&nbsp;11, Administering the Resource Capping Daemon (Tasks)</a>, and <a href="p123.html#gcziw">How to Configure the <tt>lx</tt> Branded Zone</a>.</p>
<a name="gcxbe"></a><h4>Zone Network Interfaces in an <tt>lx</tt> Branded
Zone</h4>
<p>Only the shared-IP network configuration is supported in an <tt>lx</tt> branded
zone.</p>
<p>Each zone that requires network connectivity must have one or more dedicated
IP addresses. These addresses are associated with logical network interfaces.
Network interfaces configured by the <tt>zonecfg</tt> command will
automatically be set up and placed in the zone when it is booted.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p117.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p119.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

