<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Bitwise Operators - Solaris Dynamic Tracing Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2005-09-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >Solaris Dynamic Tracing Guide<?GenHTML /ReferencePage> > <a href="p8.html">2.&nbsp;&nbsp;Types, Operators, and Expressions</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p8.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p10.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="chp-typeopexpr-7"></a><h3>Bitwise Operators</h3>
<p>D provides the following binary operators for manipulating individual bits inside of integer operands. These operators all have the same meaning as in ANSI-C.</p>
<a name="tbl-bitops"></a>Table 2-9 D Bitwise Operators<table><tr><td><p><tt>&amp;</tt></p>
</td><td><p>bitwise AND</p>
</td></tr>
<tr><td><p><tt>|</tt></p>
</td><td><p>bitwise OR</p>
</td></tr>
<tr><td><p><tt>^</tt></p>
</td><td><p>bitwise XOR</p>
</td></tr>
<tr><td><p><tt>&lt;&lt;</tt></p>
</td><td><p>shift the left-hand operand left by the number of bits specified by the right-hand operand</p>
</td></tr>
<tr><td><p><tt>>></tt></p>
</td><td><p>shift the left-hand operand right by the number of bits specified by the right-hand operand</p>
</td></tr>
</table><p>The binary <tt>&amp;</tt> operator is used to clear bits from an integer operand. The binary <tt>|</tt> operator is used to set bits in an integer operand. The binary <tt>^</tt> operator returns one in each bit position where exactly one of the corresponding operand bits is set.</p>
<p>The shift operators are used to move bits left or right in a given integer operand. Shifting left fills empty bit positions on the right-hand side of the result with zeroes. Shifting right using an unsigned integer operand fills empty bit positions on the left-hand side of the result with zeroes. Shifting right using a signed integer operand fills empty bit positions on the left-hand side with the value of the sign bit, also known as an arithmetic shift operation.</p>
<p>Shifting an integer value by a negative number of bits or by a number of bits larger than the number of bits in the left-hand operand itself produces an undefined result. The D compiler will produce an error message if the compiler can detect this condition when you compile your D program.</p>
<p>In addition to the binary logical operators, the unary <tt>~</tt> operator may be used to perform a bitwise negation of a single operand: it converts each zero bit in the operand into a one bit, and each one bit in the operand into a zero bit.</p>
<a name="chp-typeopexpr-8"></a><h3>Assignment Operators</h3>
<p>D provides the following binary assignment operators for modifying D variables. You can only modify D variables and arrays. Kernel data objects and constants may not be modified using the D assignment operators. The assignment operators have the same meaning as they do in ANSI-C.</p>
<a name="tbl-asgnops"></a>Table 2-10 D Assignment Operators<table><tr><td><p><tt>=</tt></p>
</td><td><p>set the left-hand operand equal to the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>+=</tt></p>
</td><td><p>increment the left-hand operand by the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>-=</tt></p>
</td><td><p>decrement the left-hand operand by the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>*=</tt></p>
</td><td><p>multiply the left-hand operand by the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>/=</tt></p>
</td><td><p>divide the left-hand operand by the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>%=</tt></p>
</td><td><p>modulo the left-hand operand by the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>|=</tt></p>
</td><td><p>bitwise OR the left-hand operand with the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>&amp;=</tt></p>
</td><td><p>bitwise AND the left-hand operand with the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>^=</tt></p>
</td><td><p>bitwise XOR the left-hand operand with the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>&lt;&lt;=</tt></p>
</td><td><p>shift the left-hand operand left by the number of bits specified by the right-hand expression value</p>
</td></tr>
<tr><td><p><tt>>>=</tt></p>
</td><td><p>shift the left-hand operand right by the number of bits specified by the right-hand expression value</p>
</td></tr>
</table><p>Aside from the assignment operator <tt>=</tt>, the other assignment operators are provided as shorthand for using the <tt>=</tt> operator with one of the other operators described earlier. For example, the expression <tt>x = x + 1</tt> is equivalent to the expression <tt>x += 1</tt>, except that the expression <tt>x</tt> is evaluated once. These assignment operators obey the same rules for operand types as the binary forms described earlier.</p>
<p>The result of any assignment operator is an expression equal to the new value of the left-hand expression. You can use the assignment operators or any of the operators described so far in combination to form expressions of arbitrary complexity. You can use parentheses <tt>( )</tt> to group terms in complex expressions.</p>
<a name="chp-typeopexpr-9"></a><h3>Increment and Decrement Operators</h3>
<p>D provides the special unary <tt>++</tt> and <tt>--</tt> operators for incrementing and decrementing pointers and integers. These operators have the same meaning as in ANSI-C. These operators can only be applied to variables, and may be applied either before or after the variable name. If the operator appears before the variable name, the variable is first modified and then the resulting expression is equal to the new value of the variable. For example, the following two expressions produce identical results:</p>
<table><tr><td><p><tt>x += 1;</tt></p>
</td><td><p><tt>y = ++x;</tt></p>
</td></tr>
<tr><td><p><tt>y = x;</tt></p>
</td><td><p></p>
</td></tr>
</table><p>If the operator appears after the variable name, then the variable is modified after its current value is returned for use in the expression. For example, the following two expressions produce identical results:</p>
<table><tr><td><p><tt>y = x;</tt></p>
</td><td><p><tt>y = x--;</tt></p>
</td></tr>
<tr><td><p><tt>x -= 1;</tt></p>
</td><td><p></p>
</td></tr>
</table><p>You can use the increment and decrement operators to create new variables without declaring them. If a variable declaration is omitted and the increment or decrement operator is applied to a variable, the variable is implicitly declared to be of type <tt>int64_t</tt>.</p>
<p>The increment and decrement operators can be applied to integer or pointer variables. When applied to integer variables, the operators increment or decrement the corresponding value by one. When applied to pointer variables, the operators increment or decrement the pointer address by the size of the data type referenced by the pointer. Pointers and pointer arithmetic in D are discussed in <a href="p13.html">Chapter&nbsp;5, Pointers and Arrays</a>.</p>
<a name="chp-typeopexpr-10"></a><h3>Conditional Expressions</h3>
<p>Although D does not provide support for if-then-else constructs, it does provide support for simple conditional expressions using the <tt>?</tt> and <tt>:</tt> operators. These operators enable a triplet of expressions to be associated where the first expression is used to conditionally evaluate one of the other two. For example, the following D statement could be used to set a variable <tt>x</tt> to one of two strings depending on the value of <tt>i</tt>:</p>
<pre>x = i == 0 ? "zero" : "non-zero";</pre><p>In this example, the expression <tt>i == 0</tt> is first evaluated to determine whether it is true or false. If the first expression is true, the second expression is evaluated and the <tt>?:</tt> expression returns its value. If the first expression is false, the third expression is evaluated and the <tt>?:</tt> expression return its value.</p>
<p>As with any D operator, you can use multiple <tt>?:</tt> operators in a single expression to create more complex expressions. For example, the following expression would take a <tt>char</tt> variable <tt>c</tt> containing one of the characters 0-9, a-z, or A-Z and return the value of this character when interpreted as a digit in a hexadecimal (base 16) integer:</p>
<pre>hexval = (c >= '0' &amp;&amp; c &lt;= '9') ? c - '0' :
    (c >= 'a' &amp;&amp; c &lt;= 'z') ? c + 10 - 'a' : c + 10 - 'A';</pre><p>The first expression used with <tt>?:</tt> must be a pointer or integer in order to be evaluated for its truth value. The second and third expressions may be of any compatible types. You may not construct a conditional expression where, for example, one path returns a string and another path returns an integer. The second and third expressions also may not invoke a tracing function such as <tt>trace()</tt> or <tt>printf()</tt>. If you want to conditionally trace data, use a predicate instead, as discussed in <a href="p5.html">Chapter&nbsp;1, Introduction</a>.</p>
<a name="chp-typeopexpr-11"></a><h3>Type Conversions</h3>
<p>When expressions are constructed using operands of different but compatible types, type conversions are performed in order to determine the type of the resulting expression. The D rules for type conversions are the same as the arithmetic conversion rules for integers in ANSI-C. These rules are sometimes referred to as the usual arithmetic conversions.</p>
<p>A simple way to describe the conversion rules is as follows: each integer type is ranked in the order <tt>char, short, int, long, long long</tt>, with the corresponding unsigned types assigned a rank above its signed equivalent but below the next integer type. When you construct an expression using two integer operands such as <tt>x + y</tt> and the operands are of different integer types, the operand type with the highest rank is used as the result type.</p>
<p>If a conversion is required, the operand of lower rank is first promoted to the type of higher rank. Promotion does not actually change the value of the operand: it simply extends the value to a larger container according to its sign. If an unsigned operand is promoted, the unused high-order bits of the resulting integer are filled with zeroes. If a signed operand is promoted, the unused high-order bits are filled by performing sign extension. If a signed type is converted to an unsigned type, the signed type is first sign-extended and then assigned the new unsigned type determined by the conversion.</p>
<p>Integers and other types can also be explicitly cast from one type to another. In D, pointers and integers can be cast to any integer or pointer types, but not to other types. Rules for casting and promoting strings and character arrays are discussed in <a href="p15.html">Chapter&nbsp;6, Strings</a>. An integer or pointer cast is formed using an expression such as:</p>
<pre>y = (int)x;</pre><p>where the destination type is enclosed in parentheses and used to prefix the source expression. Integers are cast to types of higher rank by performing promotion. Integers are cast to types of lower rank by zeroing the excess high-order bits of the integer.</p>
<p>Because D does not permit floating-point arithmetic, no floating-point operand conversion or casting is permitted and no rules for implicit floating-point conversion are defined.</p>
<a name="chp-typeopexpr-12"></a><h3>Precedence</h3>
<p>The D rules for operator precedence and associativity are described in the following table. These rules are somewhat complex, but are necessary to provide precise compatibility with the ANSI-C operator precedence rules. The table entries are in order from highest precedence to lowest precedence.</p>
<a name="tbl-prec"></a>Table 2-11 D Operator Precedence and Associativity<table><tr><th><p>Operators</p>
</th><th><p>Associativity</p>
</th></tr>
<tr><td><p><tt>() [] -> .</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>! ~ ++ -- + - * &amp; (</tt><i>type</i><tt>) sizeof stringof offsetof xlate</tt></p>
</td><td><p>right to left</p>
</td></tr>
<tr><td><p><tt>* / %</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>+ -</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>&lt;&lt; >></tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>&lt; &lt;= > >=</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>== !=</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>&amp;</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>^</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>|</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>&amp;&amp;</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>^^</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>||</tt></p>
</td><td><p>left to right</p>
</td></tr>
<tr><td><p><tt>?:</tt></p>
</td><td><p>right to left</p>
</td></tr>
<tr><td><p><tt>= += -= *= /= %= &amp;= ^= |= &lt;&lt;= >>=</tt></p>
</td><td><p>right to left</p>
</td></tr>
<tr><td><p><tt>,</tt></p>
</td><td><p>left to right</p>
</td></tr>
</table><p>There are several operators in the table that we have not yet discussed; these will be covered in subsequent chapters:</p>
<table><tr><td><p><tt>sizeof</tt></p>
</td><td><p>Computes the size of an object (<a href="p16.html">Chapter&nbsp;7, Structs and Unions</a>)</p>
</td></tr>
<tr><td><p><tt>offsetof</tt></p>
</td><td><p>Computes the offset of a type member (<a href="p16.html">Chapter&nbsp;7, Structs and Unions</a>)</p>
</td></tr>
<tr><td><p><tt>stringof</tt></p>
</td><td><p>Converts the operand to a string (<a href="p15.html">Chapter&nbsp;6, Strings</a>)</p>
</td></tr>
<tr><td><p><tt>xlate</tt></p>
</td><td><p>Translates a data type (<a href="p66.html">Chapter&nbsp;40, Translators</a>)</p>
</td></tr>
<tr><td><p>unary <tt>&amp;</tt></p>
</td><td><p>Computes the address of an object (<a href="p13.html">Chapter&nbsp;5, Pointers and Arrays</a>)</p>
</td></tr>
<tr><td><p>unary <tt>*</tt></p>
</td><td><p>Dereferences
a pointer to an object (<a href="p13.html">Chapter&nbsp;5, Pointers and Arrays</a>)</p>
</td></tr>
<tr><td><p><tt>-></tt> and <tt>.</tt></p>
</td><td><p>Accesses a member of a structure or union type (<a href="p16.html">Chapter&nbsp;7, Structs and Unions</a>)</p>
</td></tr>
</table><p>The comma (<tt>,</tt>) operator listed in the table is for compatibility with the ANSI-C comma operator, which can be used to evaluate a set of expressions in left-to-right order and return the value of the rightmost expression. This operator is provided strictly for compatibility with C and should generally not be used.</p>
<p>The <tt>()</tt> entry in the table of operator precedence represents a function call; examples of calls to functions such as <tt>printf()</tt> and <tt>trace()</tt> are presented in <a href="p5.html">Chapter&nbsp;1, Introduction</a>. A comma is also used in D to list arguments to functions and to form lists of associative array keys. This comma is not the same as the comma operator and does <b>not</b> guarantee left-to-right evaluation. The D compiler provides no guarantee as to the order of evaluation of arguments to a function or keys to an associative array. You should be careful of using expressions with interacting side-effects, such as the pair of expressions <tt>i</tt> and <tt>i++</tt>, in these contexts.</p>
<p>The <tt>[]</tt> entry in the table of operator precedence represents an array or associative array reference. Examples of associative arrays are presented in <a href="p5.html">Chapter&nbsp;1, Introduction</a>. A special kind of associative array called an aggregation is described in <a href="p19.html">Chapter&nbsp;9, Aggregations</a>. The <tt>[]</tt> operator can also be used to index into fixed-size C arrays as well, as described in <a href="p13.html">Chapter&nbsp;5, Pointers and Arrays</a>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p8.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p10.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

