<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p94.html#dhcp-trouble-1">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p96.html#dhcp-trouble-5">Troubleshooting DHCP Client Configuration Problems</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p96.html#dhcp-trouble-proc-21">How to Use <tt>snoop</tt> to Monitor DHCP Network Traffic</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p96.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p98.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="dhcp-trouble-20"></A><h4>Output from the DHCP Server in Debugging Mode</h4>
<A NAME="indexterm-1563"></A><p>Normal server debugging mode output shows server configuration information followed
by information about each network interface as the daemon starts. After daemon startup,
the debugging mode output shows information about requests the daemon processes. <A HREF="p97.html#dhcp-trouble-ex-29">Example 17-3</A> shows debugging mode output
for a DHCP server that has just started. The server extends the lease for a client
that is using an address owned by another DHCP server that is not responding.</p>
<A NAME="dhcp-trouble-ex-29"></A><p><b>Example 17-3 </b>Normal Output for DHCP Server in Debugging
Mode</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Daemon Version: 3.1  
Maximum relay hops: 4  
Transaction logging to console enabled.  
Run mode is: DHCP Server Mode.  
Datastore: nisplus  
Path: org_dir.dhcp.test..:dhcp.test..:$ 
DHCP offer TTL: 10  
Ethers compatibility enabled.  
BOOTP compatibility enabled.  
ICMP validation timeout: 1000 milliseconds, Attempts: 2.  
Monitor (0005/hme0) started...  
Thread Id: 0005 - Monitoring Interface: hme0 *****  
MTU: 1500      Type: DLPI  
Broadcast: 10.21.255.255 
Netmask: 255.255.0.0  
Address: 10.21.0.2  
Monitor (0006/nf0) started...  
Thread Id: 0006 - Monitoring Interface: nf0 *****  
MTU: 4352      Type: DLPI  
Broadcast: 10.22.255.255  
Netmask: 255.255.0.0  
Address: 10.22.0.1  
Monitor (0007/qfe0) started...  
Thread Id: 0007 - Monitoring Interface: qfe0 *****  
MTU: 1500      Type: DLPI   
Broadcast: 10.23.63.255  
Netmask: 255.255.192.0  
Address: 10.23.0.1  
Read 33 entries from DHCP macro database on Tue Aug 10 15:10:27 2006 
Datagram received on network device: qfe0  
Client: 0800201DBA3A is requesting verification of address owned by 10.21.0.4 
Datagram received on network device: qfe0  
Client: 0800201DBA3A is requesting verification of address owned by 10.21.0.4  
Datagram received on network device: qfe0  
Client: 0800201DBA3A is requesting verification of address owned by 10.21.0.4  
Datagram received on network device: qfe0  
Client: 0800201DBA3A maps to IP: 10.23.3.233  
Unicasting datagram to 10.23.3.233 address.  
Adding ARP entry: 10.23.3.233 == 0800201DBA3A  
DHCP EXTEND 0934312543 0934316143 10.23.3.233 10.21.0.2 
          0800201DBA3A SUNW.Ultra-5_10 0800201DBA3A</pre>
</td></table><br><p><A HREF="p97.html#dhcp-trouble-ex-30">Example 17-4</A> shows debugging
mode output from a DHCP daemon that starts as a BOOTP relay agent. The agent relays
requests from a client to a DHCP server, and relays the server's responses to the
client.</p>
<A NAME="dhcp-trouble-ex-30"></A><p><b>Example 17-4 </b>Normal Output from BOOTP Relay in Debugging
Mode</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Relay destination: 10.21.0.4 (blue-servr2)     network: 10.21.0.0  
Daemon Version: 3.1  
Maximum relay hops: 4  
Transaction logging to console enabled.  
Run mode is: Relay Agent Mode.  
Monitor (0005/hme0) started...  
Thread Id: 0005 - Monitoring Interface: hme0 *****  
MTU: 1500      Type: DLPI  
Broadcast: 10.21.255.255  
Netmask: 255.255.0.0  
Address: 10.21.0.2  
Monitor (0006/nf0) started...  
Thread Id: 0006 - Monitoring Interface: nf0 *****  
MTU: 4352      Type: DLPI  
Broadcast: 10.22.255.255  
Netmask: 255.255.0.0  
Address: 10.22.0.1  
Monitor (0007/qfe0) started...  
Thread Id: 0007 - Monitoring Interface: qfe0 *****  
MTU: 1500      Type: DLPI  
Broadcast: 10.23.63.255  
Netmask: 255.255.192.0  
Address: 10.23.0.1  
Relaying request 0800201DBA3A to 10.21.0.4, server port.  
BOOTP RELAY-SRVR 0934297685 0000000000 0.0.0.0 10.21.0.4 0800201DBA3A 
N/A 0800201DBA3A  
Packet received from relay agent: 10.23.0.1  
Relaying reply to client 0800201DBA3A  
Unicasting datagram to 10.23.3.233 address.  
Adding ARP entry: 10.23.3.233 == 0800201DBA3A  
BOOTP RELAY-CLNT 0934297688 0000000000 10.23.0.1 10.23.3.233 0800201DBA3A 
N/A 0800201DBA3A  
Relaying request 0800201DBA3A to 10.21.0.4, server port.  
BOOTP RELAY-SRVR 0934297689 0000000000 0.0.0.0 10.21.0.4 0800201DBA3A 
N/A 0800201DBA3A  
Packet received from relay agent: 10.23.0.1  
Relaying reply to client 0800201DBA3A  
Unicasting datagram to 10.23.3.233 address.  
Adding ARP entry: 10.23.3.233 == 0800201DBA3A 
 </pre>
</td></table><br><p><A NAME="indexterm-1564"></A>If there is a problem with DHCP, the debugging mode output might display
warnings or error messages. Use the following list of DHCP server error messages to
find solutions.</p>
<p>&nbsp;</p><p><tt>ICMP ECHO reply to OFFER candidate: <i>ip_address</i> disabling</tt></p><blockquote><p><b>Cause: </b>Before the DHCP server offers an IP address to a client,
the server pings the address to verify that the address is not in use. If a client
replies, the address is in use.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Make sure the addresses that you configured are not
already in use. You can use the <tt>ping</tt> command. See the <tt>ping</tt>(1M) man page for more information.</p>
</blockquote>
<p>&nbsp;</p><p><tt>No more IP addresses on <i>network-address</i> network.</tt></p><blockquote><p><b>Cause: </b>No IP addresses are available in the DHCP network table
associated with the client's network.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Create more IP addresses with DHCP Manager or the <tt>pntadm</tt> command. If the DHCP daemon is monitoring multiple subnets, be sure
the additional addresses are for the subnet where the client is located. See <A HREF="p80.html#dhcp-admin-126">Adding IP Addresses to the DHCP Service</A> for more
information.</p>
</blockquote>
<p>&nbsp;</p><p><tt>No more IP addresses for <i>network-address</i> network
when you are running the DHCP daemon in BOOTP compatibility mode.</tt></p><blockquote><p><b>Cause: </b>BOOTP does not use a lease time, so the DHCP server
looks for free addresses with the BOOTP flag set to allocate to BOOTP clients.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Use DHCP Manager to allocate BOOTP addresses. See <A HREF="p79.html#dhcp-admin-94">Supporting BOOTP Clients With the DHCP Service (Task Map)</A>.</p>
</blockquote>
<p>&nbsp;</p><p><tt>Request to access nonexistent per network database: <i>database-name</i> in datastore: <i>datastore.</i></tt></p><blockquote><p><b>Cause: </b>During configuration of the DHCP server, a DHCP network
table for a subnet was not created.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Use DHCP Manager or the <tt>pntadm</tt> command
to create the DHCP network table and new IP addresses. See <A HREF="p78.html#dhcp-admin-17">Adding DHCP Networks</A>.</p>
</blockquote>
<p>&nbsp;</p><p><tt>There is no <i>table-name</i> dhcp-network table for DHCP
client's network.</tt></p><blockquote><p><b>Cause: </b>During configuration of the DHCP server, a DHCP network
table for a subnet was not created.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Use DHCP Manager or the <tt>pntadm</tt> command
to create the DHCP network table and new IP addresses. See <A HREF="p78.html#dhcp-admin-17">Adding DHCP Networks</A>.</p>
</blockquote>
<p>&nbsp;</p><p><tt>Client using non_RFC1048 BOOTP cookie.</tt></p><blockquote><p><b>Cause: </b>A device on the network is trying to access an unsupported
implementation of BOOTP.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Ignore this message, unless you need to configure
this device. If you want to support the device, see <A HREF="p79.html#dhcp-admin-94">Supporting BOOTP Clients With the DHCP Service (Task Map)</A> for more information.</p>
</blockquote>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p96.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p98.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

