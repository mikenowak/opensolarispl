<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p73.html#dhcp-admin-9">15.&nbsp;&nbsp;Administering DHCP (Tasks)</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p74.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p76.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="faayz"></A><h2>DHCP Service and the Service Management Facility</h2>
<A NAME="indexterm-1418"></A><p>The Service Management Facility (SMF) is described in Chapter 14, "Managing Services (Overview)," in <i>System Administration Guide: Basic Administration</i>.
The SMF <tt>svcadm</tt> command can be used to enable and start
the DHCP server, and disable and stop the DHCP server. However, you cannot
use SMF commands to modify the DHCP service options that the DHCP tools allow
you to set. In particular, service options that are stored in the <tt>/etc/dhcp/dhcpsvc.conf</tt> file cannot be set by using the SMF tools.</p>
<p>The following table maps DHCP commands to the equivalent SMF commands.</p>
<A NAME="fahqn"></A><p><b>Table 15-1 </b>SMF Commands For DHCP Server Tasks</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Task</p></th><th scope="col"><p>DHCP Command</p></th><th scope="col"><p>SMF Command</p></th></tr>
<tr><td><p>Enable DHCP service</p></td><td><p><tt>dhcpconfig -S -e</tt></p></td><td><p><tt>svcadm enable svc:/network/dhcp-server</tt></p></td></tr>
<tr><td><p>Disable DHCP service</p></td><td><p><tt>dhcpconfig -S -d</tt></p></td><td><p><tt>svcadm disable svc:/network/dhcp-server</tt></p></td></tr>
<tr><td><p>Start DHCP service for current session only</p></td><td><p>None</p></td><td><p><tt>svcadm enable -t svc:/network/dhcp-server</tt></p></td></tr>
<tr><td><p>Stop DHCP service for current session</p></td><td><p>None</p></td><td><p><tt>svcadm disable -t svc:/network/dhcp-server</tt></p></td></tr>
<tr><td><p>Restart DHCP service</p></td><td><p><tt>dhcpconfig -S -r</tt></p></td><td><p><tt>svcadm restart svc:/network/dhcp-server</tt></p></td></tr>
</table><A NAME="dhcp-admin-51"></A><h2>Modifying DHCP Service Options (Task Map)</h2>
<p><A NAME="indexterm-1419"></A><A NAME="indexterm-1420"></A>You can change values for some additional features of the DHCP
service, which might not have been offered during the initial configuration
with DHCP Manager. To change service options, you can use the Modify Service
Options dialog box in DHCP Manager. Or you can specify options with the <tt>dhcpconfig</tt> command.</p>
<p><A NAME="indexterm-1421"></A>The following task map shows the tasks related to service options
and the procedures to use.</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Task</p></th><th scope="col"><p>Description</p></th><th scope="col"><p>For Instructions</p></th></tr>
<tr><td><p>Change logging options.</p></td><td><p>Enable or disable logging, and select a <tt>syslog</tt> facility
to use for logging DHCP transactions.</p></td><td><p><A HREF="p75.html#dhcp-admin-119">How to Generate Verbose DHCP Log Messages (DHCP Manager)</A>&nbsp;</p><p><A HREF="p75.html#dhcp-admin-118">How to Generate Verbose DHCP Log Messages (Command Line)</A>&nbsp;</p><p><A HREF="p76.html#dhcp-admin-117">How to Enable and Disable DHCP Transaction Logging (DHCP Manager)</A>&nbsp;</p><p><A HREF="p76.html#dhcp-admin-16">How to Enable and Disable DHCP Transaction Logging (Command Line)</A>&nbsp;</p><p><A HREF="p76.html#dhcp-admin-14">How to Log DHCP Transactions to a Separate <tt>syslog</tt> File</A>&nbsp;</p></td></tr>
<tr><td><p>Change DNS update options.</p></td><td><p>Enable or disable server's capability to dynamically add DNS entries
for clients that supply a host name. Determine the maximum time the server
should spend attempting to update DNS.</p></td><td><p><A HREF="p76.html#dhcp-admin-303">How to Enable Dynamic DNS Updating for DHCP Clients</A>&nbsp;</p></td></tr>
<tr><td><p>Enable or disable duplicate IP address detection.</p></td><td><p>Enable or disable the DHCP server's capability to determine that an
IP address is not already in use before offering the address to a client.</p></td><td><p><A HREF="p77.html#dhcp-admin-121">How to Customize DHCP Performance Options (DHCP Manager)</A>&nbsp;</p><p><A HREF="p77.html#dhcp-admin-20">How to Customize DHCP Performance Options (Command Line)</A>&nbsp;</p></td></tr>
<tr><td><p>Change options for the DHCP server's reading of configuration information.</p></td><td><p>Enable or disable the automatic reading of <tt>dhcptab</tt> at
specified intervals, or change the interval between reads.</p></td><td><p><A HREF="p77.html#dhcp-admin-121">How to Customize DHCP Performance Options (DHCP Manager)</A>&nbsp;</p><p><A HREF="p77.html#dhcp-admin-20">How to Customize DHCP Performance Options (Command Line)</A>&nbsp;</p></td></tr>
<tr><td><p>Change the number of relay agent hops.</p></td><td><p>Increase or decrease the number of networks a request can travel through
before being dropped by the DHCP daemon.</p></td><td><p><A HREF="p77.html#dhcp-admin-121">How to Customize DHCP Performance Options (DHCP Manager)</A>&nbsp;</p><p><A HREF="p77.html#dhcp-admin-20">How to Customize DHCP Performance Options (Command Line)</A>&nbsp;</p></td></tr>
<tr><td><p>Change the length of time an IP address offer is cached.</p></td><td><p>Increase or decrease the number of seconds that the DHCP service reserves
an offered IP address before offering the address to a new client.</p></td><td><p><A HREF="p77.html#dhcp-admin-121">How to Customize DHCP Performance Options (DHCP Manager)</A>&nbsp;</p><p><A HREF="p77.html#dhcp-admin-20">How to Customize DHCP Performance Options (Command Line)</A>&nbsp;</p></td></tr>
</table><p>The following figure shows DHCP Manager's Modify Service Options dialog
box.</p>
<A NAME="dhcp-admin-fig-225"></A><p><b>Figure 15-3 </b>Modify Service Options Dialog Box in
DHCP Manager</p>
<IMG src="figures/dhcp-modify-serv.gif" class="figure" alt="Dialog box shows the Options tab with many options fields
and check boxes. The context describes the purpose of the dialog box." title="Dialog box shows the Options tab with many options fields
and check boxes. The context describes the purpose of the dialog box."><A NAME="dhcp-admin-52"></A><h3>Changing DHCP Logging Options</h3>
<p><A NAME="indexterm-1422"></A>The DHCP service can log DHCP service messages and DHCP transactions
to <tt>syslog</tt>. See the <tt>syslogd</tt>(1M) and <tt>syslog.conf</tt>(4) man pages for more information
about <tt>syslog</tt>.</p>
<p>DHCP service messages logged to <tt>syslog</tt> include the
following:</p><ul><li><p>Error messages, which notify you of conditions that prevent
the DHCP service from fulfilling a request by a client or by you.</p>
</li>
<li><p>Warnings and notices, which notify you of conditions that
are abnormal, but do not prevent the DHCP service from fulfilling a request.</p>
</li>
</ul>
<p>You can increase the amount of information that is reported by using
the verbose option for the DHCP daemon. Verbose message output can help you
troubleshoot DHCP problems. See <A HREF="p75.html#dhcp-admin-119">How to Generate Verbose DHCP Log Messages (DHCP Manager)</A>.</p>
<p><A NAME="indexterm-1423"></A>Another useful troubleshooting technique is transaction logging.
Transactions provide information about every interchange between a DHCP server
or BOOTP relay and clients. DHCP transactions include the following message
types:</p><ul><li><p>ASSIGN - IP address assignment </p>
</li>
<li><p>ACK - Server acknowledges that the client accepts the
offered IP address, and sends configuration parameters</p>
</li>
<li><p>EXTEND - Lease extension</p>
</li>
<li><p>RELEASE - IP address release</p>
</li>
<li><p>DECLINE - Client is declining address assignment </p>
</li>
<li><p>INFORM - Client is requesting network configuration
parameters but not an IP address</p>
</li>
<li><p>NAK - Server does not acknowledge a client's request
to use a previously used IP address</p>
</li>
<li><p>ICMP_ECHO - Server detects potential IP address is already
in use by another host</p>
</li>
</ul>
<p>BOOTP relay transactions include the following message types:</p><ul><li><p>RELAY-CLNT - Message is being relayed from the DHCP
client to a DHCP server</p>
</li>
<li><p>RELAY-SRVR - Message is being relayed from the
DHCP server to the DHCP client</p>
</li>
</ul>
<p>DHCP transaction logging is disabled by default. When enabled, DHCP
transaction logging uses the <tt>local0</tt> facility in <tt>syslog</tt> by default. DHCP transaction messages are generated with a <tt>syslog</tt> severity level of <b>notice</b>. This security
level causes DHCP transactions to be logged to the file where other system
notices are logged. However, because the <tt>local</tt> facility
is used, the DHCP transaction messages can be logged separately from other
notices. To log the transaction messages separately, you must edit the <tt>syslog.conf</tt> file to specify a separate log file. See the <tt>syslog.conf</tt>(4) man page for
more information about the <tt>syslog.conf</tt> file.</p>
<p>You can disable or enable transaction logging, and you can specify a
different <tt>syslog</tt> facility, from <tt>local0</tt> through <tt>local7</tt>, as explained in <A HREF="p76.html#dhcp-admin-117">How to Enable and Disable DHCP Transaction Logging (DHCP Manager)</A>. In the
server system's <tt>syslog.conf</tt> file, you can also instruct <tt>syslogd</tt> to store the DHCP transaction messages in a separate file.
See <A HREF="p76.html#dhcp-admin-14">How to Log DHCP Transactions to a Separate <tt>syslog</tt> File</A> for more information.</p>
<A NAME="dhcp-admin-119"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Generate Verbose DHCP Log Messages
(DHCP Manager)</h3>
<ol><A NAME="dhcp-admin-step-54"></A><li><p><b>In DHCP Manager, choose Modify from the
Service menu.</b></p><p>See <A HREF="p74.html#dhcp-admin-4">How to Start and Stop DHCP Manager</A> for information about DHCP Manager.</p>
<p>The
Modify Service Options dialog box opens and displays the Options tab. See <A HREF="p75.html#dhcp-admin-fig-225">Figure 15-3</A>.</p>
</li>
<A NAME="dhcp-admin-step-55"></A><li><p><b>Select Verbose Log Messages.</b></p></li>
<A NAME="dhcp-admin-step-56"></A><li><p><b>Select Restart Server.</b></p><p>The
Restart Server option is near the bottom of the dialog box.</p>
</li>
<A NAME="dhcp-admin-step-57"></A><li><p><b>Click OK.</b></p><p>The daemon runs
in verbose mode for this session and each subsequent session until you reset
this option. Verbose mode can reduce daemon efficiency because of the time
that is taken to display messages.</p>
</li>
</ol><A NAME="dhcp-admin-118"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Generate Verbose DHCP Log Messages
(Command Line)</h3>
<ol><li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-admin-step-516"></A><li><p><b>Type the following command to set verbose
mode:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/dhcpconfig -P VERBOSE=true</b></tt></pre>
</td></table><br><p>The next time the DHCP server starts, the server runs in verbose mode
until you turn off verbose mode.</p>
<p>To turn off verbose mode, type
the following command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/dhcpconfig -P VERBOSE=</b></tt></pre>
</td></table><br><p>This command sets the <tt>VERBOSE</tt> keyword to no value,
which causes the keyword to be removed from the server's configuration file.</p>
<p>Verbose mode can reduce daemon efficiency because of the time that is
taken to display messages.</p>
</li>
</ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p74.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p76.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

