<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p41.html#ipv6-admintasks-1">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p44.html#ipv6-admintasks-5">Administering and Logging Network Status Displays</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p44.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p46.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipv6-admintasks-59"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Log Actions of the IPv4 Routing
Daemon</h3>
<A NAME="indexterm-877"></A><A NAME="indexterm-878"></A><p>If you suspect a malfunction of <tt>routed</tt>, the IPv4
routing daemon, you can start a log that traces the daemon's activity. The
log includes all packet transfers when you start the <tt>routed</tt> daemon. </p>
<ol><li><p><b>On the local host, assume the Primary Administrator role, or become
superuser.</b></p><p>The Primary Administrator role includes the Primary
Administrator profile. To create the role and assign the role to a user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<A NAME="ipconfig-step-63"></A><li><p><b>Create a log file of routing daemon actions: </b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/in.routed /var/</b></tt><i>log-file-name</i></pre>
</td></table><br><hr size="1" noshade><p><IMG ALT="Caution" src="graphics/caution.gif">  <b>Caution - </b>On a busy network, this command can generate almost continuous
output.</p><hr size="1" noshade></li>
</ol><A NAME="eojba"></A><h5>Example 8-15 &nbsp;&nbsp;Network Log for the <tt>in.routed</tt> Daemon</h5>
<p>The following example shows the beginning of the log that is created
by the procedure <A HREF="p45.html#ipv6-admintasks-59">How to Log Actions of the IPv4 Routing Daemon</A>.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>-- 2003/11/18 16:47:00.000000 --
Tracing actions started
RCVBUF=61440
Add interface lo0  #1   127.0.0.1      -->127.0.0.1/32   
   &lt;UP|LOOPBACK|RUNNING|MULTICAST|IPv4> &lt;PASSIVE> 
Add interface hme0 #2   10.10.48.112    -->10.10.48.0/25   
    &lt;UP|BROADCAST|RUNNING|MULTICAST|IPv4> 
turn on RIP
Add    10.0.0.0        -->10.10.48.112      metric=0  hme0  &lt;NET_SYN>
Add    10.10.48.85/25  -->10.10.48.112      metric=0  hme0  &lt;IF|NOPROP></pre>
</td></table><br><A NAME="ipv6-admintasks-62"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Trace the Activities of the IPv6
Neighbor Discovery Daemon</h3>
<A NAME="indexterm-879"></A><A NAME="indexterm-880"></A><p>If you suspect a malfunction of the IPv6 <tt>in.ndpd</tt> daemon,
you can start a log that traces the daemon's activity. This trace is displayed
on the standard output until terminated. This trace includes all packet transfers
when you start the <tt>in.ndpd</tt> daemon. </p>
<ol><li><p><b>Assume the Primary Administrator role, or become superuser, on
the local IPv6 node.</b></p><p>The Primary Administrator role includes the
Primary Administrator profile. To create the role and assign the role to a
user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<A NAME="ipv6-admintasks-step-64"></A><li><p><b>Start a trace of the <tt>in.ndpd</tt> daemon.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/lib/inet/in.ndpd -t</b></tt></pre>
</td></table><br></li>
<A NAME="ipv6-admintasks-step-65"></A><li><p><b>Terminate the trace as needed by
typing Control-C.</b></p></li>
</ol><A NAME="eojae"></A><h5>Example 8-16 &nbsp;&nbsp;Trace of the <tt>in.ndpd</tt> Daemon</h5>
<p>The following output shows the beginning of a trace of <tt>in.ndpd</tt>.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/lib/inet/in.ndpd -t</b></tt>
Nov 18 17:27:28 Sending solicitation to  ff02::2 (16 bytes) on hme0
Nov 18 17:27:28         Source LLA: len 6 &lt;08:00:20:b9:4c:54>
Nov 18 17:27:28 Received valid advert from fe80::a00:20ff:fee9:2d27 (88 bytes) on hme0
Nov 18 17:27:28         Max hop limit: 0
Nov 18 17:27:28         Managed address configuration: Not set
Nov 18 17:27:28         Other configuration flag: Not set
Nov 18 17:27:28         Router lifetime: 1800
Nov 18 17:27:28         Reachable timer: 0
Nov 18 17:27:28         Reachable retrans timer: 0
Nov 18 17:27:28         Source LLA: len 6 &lt;08:00:20:e9:2d:27>
Nov 18 17:27:28         Prefix: 2001:08db:3c4d:1::/64
Nov 18 17:27:28                 On link flag:Set
Nov 18 17:27:28                 Auto addrconf flag:Set
Nov 18 17:27:28                 Valid time: 2592000
Nov 18 17:27:28                 Preferred time: 604800
Nov 18 17:27:28         Prefix: 2002:0a00:3010:2::/64
Nov 18 17:27:28                 On link flag:Set
Nov 18 17:27:28                 Auto addrconf flag:Set
Nov 18 17:27:28                 Valid time: 2592000
Nov 18 17:27:28                 Preferred time: 604800</pre>
</td></table><br><A NAME="ipv6-admintasks-72"></A><h2>Displaying Routing Information With
the <tt>traceroute</tt> Command</h2>
<A NAME="indexterm-881"></A><A NAME="indexterm-882"></A><p>The <tt>traceroute</tt> command traces the route an IP packet
follows to a remote system. For technical details about <tt>traceroute</tt>,
see the <tt>traceroute</tt>(1M) man page.</p>
<p>You use the <tt>traceroute</tt> command to uncover any routing
misconfiguration and routing path failures. If a particular host is unreachable,
you can use <tt>traceroute</tt> to see what path the packet follows
to the remote host and where possible failures might occur.</p>
<p>The <tt>traceroute</tt> command also displays the round trip
time for each gateway along the path to the target host. This information
can be useful for analyzing where traffic is slow between the two hosts.</p>
<A NAME="ipv6-admintasks-73"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Find Out the Route to a Remote
Host</h3>
<ul><li><p><b>Type the following to discover the route to a remote system:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>% <tt><b>traceroute</b></tt> <i>destination-hostname</i></pre>
</td></table><br><p>You can run this form of the <tt>traceroute</tt> command from
your user account.</p>
</li>
</ul><A NAME="ipv6-admintasks-673"></A><h5>Example 8-17 &nbsp;&nbsp;Using the <tt>traceroute</tt> Command to Show the Route to
a Remote Host</h5>
<p>The following output from the <tt>traceroute</tt> command
shows the seven-hop path a packet follows from the local system <tt>nearhost</tt> to the remote system <tt>farhost</tt>. The output also
shows the times for a packet to traverse each hop.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>istanbul% <tt><b>traceroute farhost.faraway.com</b></tt>
	traceroute to farhost.faraway.com (172.16.64.39), 30 hops max, 40 byte packets
	 1  frbldg7c-86 (172.16.86.1)  1.516 ms  1.283 ms  1.362 ms
	 2  bldg1a-001 (172.16.1.211)  2.277 ms  1.773 ms  2.186 ms
	 3  bldg4-bldg1 (172.16.4.42)  1.978 ms  1.986 ms  13.996 ms
	 4  bldg6-bldg4 (172.16.4.49)  2.655 ms  3.042 ms  2.344 ms
	 5  ferbldg11a-001 (172.16.1.236)  2.636 ms  3.432 ms  3.830 ms
	 6  frbldg12b-153 (172.16.153.72)  3.452 ms  3.146 ms  2.962 ms
	 7  sanfrancisco (172.16.64.39)  3.430 ms  3.312 ms  3.451 ms</pre>
</td></table><br><A NAME="ipv6-admintasks-29"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Trace All Routes</h3>
<A NAME="indexterm-883"></A><p>This procedure uses the <tt>-a</tt> option of the <tt>traceroute</tt> command to trace all routes.</p>
<ul><li><p><b>Type the following command on the local system:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>% <tt><b>traceroute -a</b></tt><i>host-name</i></pre>
</td></table><br><p>You can run this form of the <tt>traceroute</tt> command from
your user account.</p>
</li>
</ul><A NAME="eojaf"></A><h5>Example 8-18 &nbsp;&nbsp;Tracing All Routes to a Dual-Stack Host</h5>
<A NAME="indexterm-884"></A><p>This example shows all possible routes to a dual-stack host.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>% <tt><b>traceroute -a v6host.remote.com</b></tt>
traceroute: Warning: Multiple interfaces found; using 2::56:a0:a8 @ eri0:2
traceroute to v6host (2001:db8:4a3b::102:a00:fe79:19b0),30 hops max, 60 byte packets
 1  v6-rout86 (2001:db8:4a3b:56:a00:fe1f:59a1)  35.534 ms  56.998 ms * 
 2  2001:db8::255:0:c0a8:717  32.659 ms  39.444 ms *
 3  farhost.faraway.COM (2001:db8:4a3b::103:a00:fe9a:ce7b)  401.518 ms  7.143 ms *
 4  distant.remote.com (2001:db8:4a3b::100:a00:fe7c:cf35)  113.034 ms  7.949 ms *
 5  v6host (2001:db8:4a3b::102:a00:fe79:19b0)  66.111 ms *  36.965 ms

traceroute to v6host.remote.com  (192.168.10.75),30 hops max,40 byte packets
 1  v6-rout86 (172.16.86.1)  4.360 ms  3.452 ms  3.479 ms
 2  flrmpj17u.here.COM (172.16.17.131)  4.062 ms  3.848 ms  3.505 ms
 3  farhost.farway.com (10.0.0.23)  4.773 ms *  4.294 ms
 4  distant.remote.com (192.168.10.104)  5.128 ms  5.362 ms *
 5  v6host  (192.168.15.85)  7.298 ms  5.444 ms *
 </pre>
</td></table><br>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p44.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p46.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

