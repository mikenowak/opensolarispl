<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p70.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p72.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="chapter3-20"></A><b>Chapter&nbsp;14</b><h1>Configuring the DHCP Service (Tasks)</h1>
<p><A NAME="indexterm-1391"></A>When you configure the DHCP service on your network, you configure and
start the first DHCP server. Other DHCP servers can be added later and can access
the same data from a shared location if the data store supports shared data. This
chapter describes tasks that enable you to configure the DHCP server and place networks
and their associated IP addresses under DHCP management. This chapter also explains
how to unconfigure a DHCP server.</p>
<p>Each task includes a procedure to help you perform the task in DHCP Manager
and a procedure for the equivalent task with the <tt>dhcpconfig</tt> utility.
This chapter contains the following information:</p><ul><li><p><A HREF="p71.html#chapter3-21">Configuring and Unconfiguring a DHCP Server Using DHCP Manager</A></p>
</li>
<li><p><A HREF="p72.html#dhcp-config-13">Configuring and Unconfiguring a DHCP Server Using <tt>dhcpconfig</tt> Commands</A></p>
</li>
</ul>
<p>If you experience problems configuring the DHCP service, see <A HREF="p94.html#dhcp-trouble-1">Chapter&nbsp;17, Troubleshooting DHCP (Reference)</A>.</p>
<p>After you configure the DHCP service, see <A HREF="p73.html#dhcp-admin-9">Chapter&nbsp;15, Administering DHCP (Tasks)</A> for information about managing the DHCP service.</p>
<A NAME="chapter3-21"></A><h2>Configuring and Unconfiguring a DHCP Server Using DHCP
Manager</h2>
<p>This section includes procedures to help you configure and unconfigure a DHCP
server with DHCP Manager. Note that you must be running an X Window system such as
CDE or GNOME to use DHCP Manager.</p>
<p>DHCP Manager can be run as superuser with the <tt>/usr/sadm/admin/bin/dhcpmgr</tt> command. See <A HREF="p73.html#dhcp-admin-1">About DHCP Manager</A> for
general information about the utility. See <A HREF="p74.html#dhcp-admin-109">How to Start and Stop the DHCP Service (DHCP Manager)</A> for more detailed information
about running DHCP Manager.</p>
<p>When you run DHCP Manager on a server that is not configured for DHCP, the following
screen is displayed. You can specify whether you want to configure a DHCP server or
a BOOTP relay agent.</p>
<A NAME="dhcp-config-fig-82"></A><p><b>Figure 14-1 </b>Choose Server Configuration Dialog Box in DHCP
Manager</p>
<IMG src="figures/dhcp-config-choice.gif" class="figure" alt="Dialog box shows options Configure as DHCP server and Configure
as BOOTP relay. Shows OK, Cancel, and Help buttons." title="Dialog box shows options Configure as DHCP server and Configure
as BOOTP relay. Shows OK, Cancel, and Help buttons."><A NAME="dhcp-config-65"></A><h3>Configuring DHCP Servers</h3>
<p><A NAME="indexterm-1392"></A><A NAME="indexterm-1393"></A>When you configure a
DHCP server, DHCP Manager starts the DHCP Configuration Wizard, which prompts you
for information that is needed to configure the server. The initial screen of the
wizard is shown in the following figure.</p>
<A NAME="dhcp-config-fig-85"></A><p><b>Figure 14-2 </b>DHCP Configuration Wizard's Initial Screen</p>
<IMG src="figures/dhcp-config-wiz.gif" class="figure" alt="Dialog box shows storage choices, back and forward arrows, and
Cancel and Help buttons." title="Dialog box shows storage choices, back and forward arrows, and
Cancel and Help buttons."><p>When you finish answering the wizard prompts, DHCP Manager creates the items
that are listed in the following table.</p>
<A NAME="dhcp-config-tbl-68"></A><p><b>Table 14-1 </b>Items Created During
DHCP Server Configuration</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Item</p></th><th scope="col"><p>Description</p></th><th scope="col"><p>Contents</p></th></tr>
<tr><td><p><A NAME="indexterm-1394"></A>Service configuration file, <tt>/etc/inet/dhcpsvc.conf</tt></p></td><td><p>Records keywords and values for server configuration options.</p></td><td><p>Data store type and location, and options that are used with <tt>in.dhcpd</tt> to start the DHCP daemon when the system boots. Do not edit this file manually.
You must use <tt>dhcpmgr</tt> or <tt>dhcpconfig</tt> to modify
DHCP configuration information.</p></td></tr>
<tr><td><p><A NAME="indexterm-1395"></A><tt>dhcptab</tt> table </p></td><td><p>DHCP Manager creates a <tt>dhcptab</tt> table if the table does not
already exist.</p></td><td><p>Macros and options with assigned values.</p></td></tr>
<tr><td><p><A NAME="indexterm-1396"></A>Locale macro (optional), which is named <tt>Locale</tt></p></td><td><p>Contains the local time zone's offset in seconds from Universal time (UTC).</p></td><td><p><tt>UTCoffst</tt> option with assigned number of seconds.</p></td></tr>
<tr><td><p><A NAME="indexterm-1397"></A>Server macro, which is named to match the server's node name</p></td><td><p>Contains options whose values are determined by input from the administrator
who configured the DHCP server. Options apply to all clients that use addresses owned
by the server.</p></td><td><p>The <tt>Locale</tt> macro, plus the following options: </p><ul><li><p><tt>Timeserv</tt>, set to point to the server's primary
IP address.</p></li>
<li><p><tt>LeaseTim</tt>, set to the number of seconds for the
leases.</p></li>
<li><p><tt>LeaseNeg</tt>, if you selected negotiable leases.</p></li>
<li><p><tt>DNSdmain</tt> and <tt>DNSserv</tt>, if DNS
is configured.</p></li>
<li><p><tt>Hostname</tt>, which <b>must not</b> be
assigned a value. The presence of this option indicates that the host name must be
obtained from the name service.</p></li>
</ul>
</td></tr>
<tr><td><p><A NAME="indexterm-1398"></A>Network address macro, whose name is the same as the network address of
client's network</p></td><td><p>Contains options whose values are determined by input from the administrator
who configured the DHCP server. Options apply to all clients that reside on the network
specified by the macro name.</p></td><td><p>The following options: </p><ul><li><p><tt>Subnet</tt>, set to the subnet mask for the local subnet</p></li>
<li><p><tt>Router</tt>, set to the IP address of a router, or <tt>RDiscvyF</tt>, to cause the client to use router discovery</p></li>
<li><p><tt>Broadcst</tt>, set to the broadcast IP address. This
option is present only if the network is not a Point-to-Point network.</p></li>
<li><p><tt>MTU</tt></p><p>, for the maximum transmission
unit</p></li>
<li><p><tt>NISdmain</tt> and <tt>NISservs</tt>, if NIS
is configured</p></li>
<li><p><tt>NIS+dom</tt> and <tt>NIS+serv</tt>, if NIS+
is configured</p></li>
</ul>
</td></tr>
<tr><td><p><A NAME="indexterm-1399"></A>Network table for the network</p></td><td><p>An empty table is created until you create IP addresses for the network.</p></td><td><p>No content until you add IP addresses.</p></td></tr>
</table><A NAME="dhcp-config-96"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Configure a DHCP Server (DHCP Manager)</h3>
<h5>Before You Begin</h5><p>Make sure that you have read <A HREF="p68.html#chap2-26">Chapter&nbsp;13, Planning for DHCP Service (Tasks)</A> before you configure your DHCP server. In particular,
you should use the guidelines in <A HREF="p69.html#chapter2-29">Making Decisions for Your DHCP Server Configuration (Task Map)</A> to help you perform the following
tasks:</p><ul><li><p>Select the system that you want to use as a DHCP server.</p>
</li>
<li><p>Make decisions about your data store, lease policy, and router information.</p>
</li>
</ul>
<ol><A NAME="chapter3-step-4"></A><li><p><b>Become superuser on the server system.</b></p></li>
<A NAME="dhcp-config-step-150"></A><li><p><b>Start DHCP Manager.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>#<tt><b>/usr/sadm/admin/bin/dhcpmgr &amp;</b></tt></pre>
</td></table><br></li>
<A NAME="chapter3-step-5"></A><li><p><b>Choose the option Configure as DHCP Server.</b></p><p>The DHCP Configuration Wizard starts, to help you configure your server.</p>
</li>
<A NAME="chapter3-step-6"></A><li><p><b>Select options, or type requested information, based
on the decisions you made in the planning phase.</b></p><p>If you have difficulty,
click Help in the wizard window to open your web browser and display help for the
DHCP Configuration Wizard.</p>
</li>
<A NAME="chapter3-step-7"></A><li><p><b>Click Finish to complete the server configuration
when you have finished specifying the requested information.</b></p></li>
<A NAME="chapter3-step-8"></A><li><p><b>At the Start Address Wizard prompt, click Yes to
configure IP addresses for the server.</b></p><p>The Add Addresses to Network wizard
enables you to specify which addresses to place under the control of DHCP.</p>
</li>
<A NAME="chapter3-step-9"></A><li><p><b>Answer the prompts according to decisions you made
in the planning phase.</b></p><p>See <A HREF="p69.html#chapter2-30">Making Decisions for IP Address Management (Task Map)</A> for more information. If you have difficulty,
click Help in the wizard window to open your web browser and display help for the
Add Addresses to Network wizard.</p>
</li>
<A NAME="chapter3-step-10"></A><li><p><b>Review your selections, and then click Finish to
add the IP addresses to the network table.</b></p><p>The network table is updated
with records for each address in the range you specified.</p>
</li>
</ol><h5>See Also</h5><p>You can add more networks to the DHCP server with the Network Wizard, as explained
in <A HREF="p78.html#dhcp-admin-17">Adding DHCP Networks</A>.</p>
<A NAME="dhcp-config-66"></A><h3>Configuring BOOTP Relay Agents</h3>
<p><A NAME="indexterm-1400"></A>When you configure a BOOTP relay
agent, DHCP Manager takes the following actions:</p><ul><li><p>Prompts you for the IP address for one or more DHCP servers to which
requests should be relayed</p>
</li>
<li><p>Stores settings needed for BOOTP relay service</p>
</li>
</ul>
<p>The following figure shows the screen displayed when you choose to configure
a BOOTP relay agent.</p>
<A NAME="dhcp-config-fig-84"></A><p><b>Figure 14-3 </b>Configure BOOTP Relay Dialog Box in DHCP Manager</p>
<IMG src="figures/dhcp-config-bootp.gif" class="figure" alt="Dialog box shows input field labeled DHCP Servers, with an Add
button. Shows an empty list, with up and down arrows and Delete button." title="Dialog box shows input field labeled DHCP Servers, with an Add
button. Shows an empty list, with up and down arrows and Delete button."><A NAME="dhcp-config-97"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Configure a BOOTP Relay Agent (DHCP Manager)</h3>
<h5>Before You Begin</h5><p>Make sure that you have read <A HREF="p68.html#chap2-26">Chapter&nbsp;13, Planning for DHCP Service (Tasks)</A> before you configure your BOOTP relay agent. In particular,
you should see <A HREF="p69.html#chapter2-38">Selecting a Host to Run the DHCP Service</A> for help in selecting the system to use.</p>
<ol><A NAME="dhcp-config-step-23"></A><li><p><b>Become superuser on the server system.</b></p></li>
<A NAME="dhcp-config-step-70"></A><li><p><b>Start the DHCP Manager.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>#<tt><b>/usr/sadm/admin/bin/dhcpmgr &amp;</b></tt></pre>
</td></table><br><p><A NAME="indexterm-1401"></A>If the system has not been configured as a DHCP
server or BOOTP relay agent, the DHCP Configuration Wizard starts. If the system has
already been configured as a DHCP server, you must first unconfigure the server. See <A HREF="p72.html#dhcp-config-11">Unconfiguring DHCP Servers and BOOTP Relay Agents</A>.</p>
</li>
<A NAME="dhcp-config-step-24"></A><li><p><b>Select Configure as BOOTP Relay.</b></p><p>The Configure BOOTP Relay dialog box opens.</p>
</li>
<A NAME="dhcp-config-step-8"></A><li><p><b>Type the IP address or host name of one or more
DHCP servers, and click Add.</b></p><p>The specified DHCP servers must be configured
to handle BOOTP or DHCP requests received by this BOOTP relay agent.</p>
</li>
<A NAME="dhcp-config-step-33"></A><li><p><b>Click OK to exit the dialog box.</b></p><p>Notice that DHCP Manager offers only the File menu to exit the application and the
Service menu to manage the server. The disabled menu options are useful only on a
DHCP server.</p>
</li>
</ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p70.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p72.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

