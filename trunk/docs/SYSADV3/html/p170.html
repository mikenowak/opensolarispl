<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p168.html#ipqos-intro-1">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p169.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p171.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipqos-intro-11"></A><h2>Differentiated Services Model</h2>
<p><A NAME="indexterm-2999"></A><A NAME="indexterm-3000"></A><A NAME="indexterm-3001"></A>IPQoS includes the following modules, which are part of the <b>Differentiated Services (Diffserv)</b> architecture that is defined
in RFC 2475:</p>
<ul><li><p>Classifier</p>
</li>
<li><p>Meter</p>
</li>
<li><p>Marker</p>
</li>
</ul>
<p>IPQoS adds the following enhancements to the Diffserv model:</p>
<ul><li><p>Flow-accounting module</p>
</li>
<li><p>802.1D datagram marker</p>
</li>
</ul>
<p>This section introduces the Diffserv modules as they are used by IPQoS.
You need to know about these modules, their names, and their uses to set up
the QoS policy. For detailed information about each module, refer to <A HREF="p188.html#ipqos-reference-2">IPQoS Architecture and the Diffserv Model</A>. </p>
<A NAME="ipqos-intro-17"></A><h3>Classifier <tt>(ipgpc)</tt> Overview</h3>
<p><A NAME="indexterm-3002"></A><A NAME="indexterm-3003"></A><A NAME="indexterm-3004"></A>In the Diffserv model, the <b>classifier</b> selects packets from a network traffic flow. A <b>traffic
flow</b> consists of a group of packets with identical information
in the following IP header fields:</p>
<ul><li><p>Source address</p>
</li>
<li><p>Destination address</p>
</li>
<li><p>Source port</p>
</li>
<li><p>Destination port</p>
</li>
<li><p><A NAME="indexterm-3005"></A>Protocol number</p>
</li>
</ul>
<p>In IPQoS, these fields are referred to as the <b>5-tuple</b>.</p>
<p>The IPQoS classifier module is named <tt>ipgpc</tt>. The <tt>ipgpc</tt> classifier arranges traffic flows into classes that are based
on characteristics you configure in the IPQoS configuration file.</p>
<p>For detailed information about <tt>ipgpc</tt>, refer to <A HREF="p188.html#ipqos-reference-3">Classifier Module</A>.</p>
<A NAME="ipqos-intro-26"></A><h4>IPQoS Classes</h4>
<p><A NAME="indexterm-3006"></A><A NAME="indexterm-3007"></A>A <b>class</b> is a group of network flows that
share similar characteristics. For example, an ISP might define classes to
represent the different service levels that are offered to customers. An ASP
might define SLAs that give different levels of service to various applications.
For an ASP's QoS policy, a class might include outgoing FTP traffic that is
bound for a particular destination IP address. Outgoing traffic from a company's
external web site might also be defined as a class. </p>
<p>Grouping traffic into classes is a major part of planning your QoS policy.
When you create classes by using the <tt>ipqosconf</tt> utility,
you are actually configuring the <tt>ipgpc</tt> classifier.</p>
<p>For information on how to define classes, see <A HREF="p174.html#ipqos-config-planning-14">How to Define the Classes for Your QoS Policy</A>.</p>
<A NAME="ipqos-intro-27"></A><h4>IPQoS Filters</h4>
<p><A NAME="indexterm-3008"></A><A NAME="indexterm-3009"></A><b>Filters</b> are sets of rules that contain parameters
called <b>selectors</b>. Each filter must point to a class.
IPQoS matches packets against the selectors of each filter to determine if
the packet belongs to the filter's class. You can filter on a packet by using
a variety of selectors, for example, the IPQoS 5-tuple and other common parameters:</p>
<ul><li><p>Source address and destination addresses</p>
</li>
<li><p>Source port and destination port </p>
</li>
<li><p>Protocol numbers</p>
</li>
<li><p>User IDs</p>
</li>
<li><p>Project IDs</p>
</li>
<li><p>Differentiated Services Codepoint (DSCP)</p>
</li>
<li><p>Interface index</p>
</li>
</ul>
<p>For example, a simple filter might include the destination port with
the value of 80. The <tt>ipgpc</tt> classifier then selects all
packets that are bound for destination port 80 (HTTP) and handles the packets
as directed in the QoS policy.</p>
<p>For information on creating filters, see <A HREF="p175.html#ipqos-config-planning-42">How to Define Filters in the QoS Policy</A>.</p>
<A NAME="ipqos-intro-19"></A><h3>Meter <tt>(tokenmt</tt> and <tt>tswtclmt)</tt> Overview</h3>
<p><A NAME="indexterm-3010"></A><A NAME="indexterm-3011"></A><A NAME="indexterm-3012"></A><A NAME="indexterm-3013"></A>In the Diffserv model, the <b>meter</b> tracks the
transmission rate of traffic flows on a per-class basis. The meter evaluates
 how much the actual rate of the flow conforms to the configured rates to
determine the appropriate outcome. Based on the traffic flow's outcome, the
meter selects a subsequent action. Subsequent actions might include sending
the packet to another action or returning the packet to the network without
further processing.</p>
<p><A NAME="indexterm-3014"></A>The IPQoS meters determine whether a network flow conforms to
the transmission rate that is defined for its class in the QoS policy. IPQoS
includes two metering modules:</p>
<ul><li><p><A NAME="indexterm-3015"></A><A NAME="indexterm-3016"></A><tt>tokenmt</tt> -
Uses a two-token bucket metering scheme</p>
</li>
<li><p><A NAME="indexterm-3017"></A><A NAME="indexterm-3018"></A><tt>tswtclmt</tt> - Uses a time-sliding window metering scheme</p>
</li>
</ul>
<p><A NAME="indexterm-3019"></A><A NAME="indexterm-3020"></A>Both metering modules recognize three outcomes: red, yellow, and
green. You define the actions to be taken for each outcome in the parameters <tt>red_action_name</tt>, <tt>yellow_action_name</tt>, and <tt>green_action_name</tt>.</p>
<p><A NAME="indexterm-3021"></A><A NAME="indexterm-3022"></A>In addition, you can configure <tt>tokenmt</tt> to be
color aware. A color-aware metering instance uses the packet's size, DSCP,
traffic rate, and configured parameters to determine the outcome.  The meter
uses the DSCP to map the packet's outcome to a green, yellow, or red.</p>
<p>For information on defining parameters for the IPQoS meters, refer to <A HREF="p175.html#ipqos-config-planning-16">How to Plan Flow Control</A>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p169.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p171.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

