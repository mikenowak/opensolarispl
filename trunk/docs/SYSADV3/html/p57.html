<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p55.html#ipv6-ref-76">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p56.html#ipv6-ref-83">Solaris 10 IPv6 Implementation</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p56.html#ipv6-ref-72">IPv6 Configuration Files</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p56.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p58.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="eobnx"></A><p><b>Example 11-1 </b><tt>/etc/inet/ndpd.conf</tt> File</p>
<p>The following example shows how the keywords and configuration variables
are used in the <tt>ndpd.conf</tt> file. Remove the comment (#)
to activate the variable.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># ifdefault      [<i>variable-value</i> ]*
# prefixdefault [<i>variable-value</i> <i></i>]*
# if <i>ifname</i>   [<i>variable-value</i> <i></i>]*
# prefix <i>prefix</i>/<i>length</i> <i>ifname</i>
#
#  Per interface configuration variables
#
#DupAddrDetectTransmits
#AdvSendAdvertisements
#MaxRtrAdvInterval
#MinRtrAdvInterval
#AdvManagedFlag
#AdvOtherConfigFlag
#AdvLinkMTU
#AdvReachableTime
#AdvRetransTimer
#AdvCurHopLimit
#AdvDefaultLifetime
#
# Per Prefix:  AdvPrefixList configuration variables
#
#
#AdvValidLifetime
#AdvOnLinkFlag
#AdvPreferredLifetime
#AdvAutonomousFlag
#AdvValidExpiration
#AdvPreferredExpiration

ifdefault AdvReachableTime 30000 AdvRetransTimer 2000
prefixdefault AdvValidLifetime 240m AdvPreferredLifetime 120m

if qe0 AdvSendAdvertisements 1
prefix 2:0:0:56::/64 qe0
prefix fec0:0:0:56::/64 qe0

if qe1 AdvSendAdvertisements 1
prefix 2:0:0:55::/64 qe1
prefix fec0:0:0:56::/64 qe1

if hme1 AdvSendAdvertisements 1
prefix  2002:8192:56bb:1::/64 qfe0 

if hme1 AdvSendAdvertisements 1
prefix  2002:8192:56bb:2::/64 hme1</pre>
</td></table><br><A NAME="ipv6-ref-73"></A><h4>IPv6 Interface Configuration File</h4>
<A NAME="indexterm-1199"></A><A NAME="indexterm-1200"></A><A NAME="indexterm-1201"></A><A NAME="indexterm-1202"></A><A NAME="indexterm-1203"></A><p>IPv6 uses the <tt>/etc/hostname6.</tt><i>interface</i> file
at start up to automatically define IPv6 logical interfaces. When you select
the IPv6 Enabled option during Solaris installation, the installation program
creates an <tt>/etc/hostname6.</tt><i>interface</i> file
for the primary network interface, in addition to the <tt>/etc/hostname.</tt><i>interface</i> file.</p>
<p>If more than one physical interface is detected during installation,
you are prompted as to whether you want to configure these interfaces. The
installation program creates IPv4 physical interface configuration files and
IPv6 logical interface configuration files for each additional interface that
you indicate. </p>
<p>As with IPv4 interfaces, you can also configure IPv6 interfaces manually,
after Solaris installation. You create<tt>/etc/hostname6.</tt><i>interface</i> files for the new interfaces. For instructions for
manually configuring interfaces, refer to  <A HREF="p25.html#fwawf">Chapter&nbsp;6, Administering Network Interfaces (Tasks)</A>.</p>
<p>The network interface configuration file names have the following syntax:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>hostname.<i>interface</i>
hostname6.<i>interface</i></pre>
</td></table><br><p>The <i>interface</i> variable has the following
syntax:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>dev</i>[.<i>module</i>[.<i>module</i> ...]]<i>PPA</i></pre>
</td></table><br><table border="0" cellspacing="5"><tr><td valign="top"><p><i>dev</i></p></td><td valign="top"><p>Indicates a network interface device. The device can be a
physical network interface, such as <tt>eri</tt> or <tt>qfe</tt>,
or a logical interface, such as a tunnel. See <A HREF="p57.html#ipv6-ref-73">IPv6 Interface Configuration File</A> for more details. </p>
</td></tr><tr><td valign="top"><p><i>Module</i></p></td><td valign="top"><p>Lists one or more <tt>STREAMS</tt> modules to be
pushed onto the device when the device is plumbed.</p>
</td></tr><tr><td valign="top"><p><i>PPA</i></p></td><td valign="top"><p>Indicates the physical point of attachment.</p>
</td></tr></table>
<p>The syntax [.[.]] is also accepted.</p>
<A NAME="eoboa"></A><p><b>Example 11-2 </b>IPv6 Interface Configuration Files</p>
<p>The following are examples of valid IPv6 configuration file names:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>hostname6.qfe0
hostname.ip.tun0
hostname.ip6.tun0
hostname6.ip6to4tun0
hostname6.ip.tun0
hostname6.ip6.tun0</pre>
</td></table><br><A NAME="ipv6-ref-16"></A><h4><tt>/etc/inet/ipaddrsel.conf</tt> Configuration
File</h4>
<A NAME="indexterm-1204"></A><A NAME="indexterm-1205"></A><A NAME="indexterm-1206"></A><p>The <tt>/etc/inet/ipaddrsel.conf</tt> file contains the
IPv6 default address selection policy table. When you install the Solaris
OS with IPv6 enabled, this file contains the contents that are shown in <A HREF="p57.html#ipv6-admintasks-tbl-75">Table 11-5</A>. </p>
<p>You can edit the contents of <tt>/etc/inet/ipaddrsel.conf</tt>.
However, in most cases, you should refrain from modifying this file. If modification
is necessary, refer to the procedure <A HREF="p47.html#ipv6-admintasks-77">How to Administer the IPv6 Address Selection Policy Table</A>. For more information
on <tt>ippaddrsel.conf</tt>, refer to <A HREF="p57.html#euaza">Reasons for Modifying the IPv6 Address Selection Policy Table</A> and the <tt>ipaddrsel.conf</tt>(4) man page.</p>
<A NAME="ipv6-ref-74"></A><h3>IPv6-Related Commands</h3>
<p>This section describes commands that are added with the Solaris IPv6
implementation. The text also describes modifications to existing commands
to support IPv6. </p>
<A NAME="ipv6-ref-108"></A><h4><tt>ipaddrsel</tt> Command</h4>
<A NAME="indexterm-1207"></A><A NAME="indexterm-1208"></A><p>The <tt>ipaddrsel</tt> command enables you to modify the IPv6
default address selection policy table.</p>
<p>The Solaris kernel uses the IPv6 default address selection policy table
to perform destination address ordering and source address selection for an
IPv6 packet header. The <tt>/etc/inet/ipaddrsel.conf</tt> file
contains the policy table. </p>
<p>The following table lists the default address formats and their priorities
for the policy table. You can find technical details for IPv6 address selection
in the <tt>inet6</tt>(7P) man
page.<A NAME="indexterm-1209"></A></p>
<A NAME="ipv6-admintasks-tbl-75"></A><p><b>Table 11-5 </b>IPv6 Address Selection
Policy Table</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Prefix</p></th><th scope="col"><p>Precedence</p></th><th scope="col"><p>Definition</p></th></tr>
<tr><td><p><tt>::1/128</tt></p></td><td><p>50</p></td><td><p>Loopback</p></td></tr>
<tr><td><p><tt>::/0</tt></p></td><td><p>40</p></td><td><p>Default</p></td></tr>
<tr><td><p><tt>2002::/16</tt></p></td><td><p>30</p></td><td><p>6to4</p></td></tr>
<tr><td><p><tt>::/96</tt></p></td><td><p>20</p></td><td><p>IPv4 Compatible</p></td></tr>
<tr><td><p><tt>::ffff:0:0/96</tt></p></td><td><p>10</p></td><td><p>IPv4</p></td></tr>
</table><p>In this table, IPv6 prefixes (<tt>::1/128</tt> and <tt>::/0</tt>)
take precedence over 6to4 addresses (<tt>2002::/16</tt>) and IPv4
addresses (<tt>::/96</tt> and <tt>::ffff:0:0/96</tt>).
Therefore, by default, the kernel selects the global IPv6 address of the interface
for packets going to another IPv6 destination. The IPv4 address of the interface
has a lower priority, particularly for packets going to an IPv6 destination.
Given the selected IPv6 source address, the kernel also uses the IPv6 format
for the destination address.</p>
<A NAME="euaza"></A><h5>Reasons for Modifying the IPv6 Address Selection
Policy Table</h5>
<p>Under most instances, you do not need to change the IPv6 default address
selection policy table. If you do need to administer the policy table, you
use the <tt>ipaddrsel</tt> command.</p>
<p>You might want to modify the policy table under the following circumstances:</p>
<ul><li><p>If the system has an interface that is used for a 6to4 tunnel,
you can give higher priority to 6to4 addresses.</p>
</li>
<li><p>If you want a particular source address to be used only in
communications with a particular destination address, you can add these addresses
to the policy table. Then, you can use <tt>ifconfig</tt> to flag
these addresses as preferred. </p>
</li>
<li><p>If you want IPv4 addresses to take precedence over IPv6 addresses,
you can change the priority of <tt>::ffff:0:0/96</tt> to a higher
number.</p>
</li>
<li><p>If you need to assign a higher priority to deprecated addresses,
you can add the deprecated address to the policy table. For example, site-local
addresses are now deprecated in IPv6. These addresses have the prefix <tt>fec0::/10</tt>. You can change the policy table to give higher priority to site-local
addresses.</p>
</li>
</ul>
<p>For details about the <tt>ipaddrsel</tt> command, refer to
the <tt>ipaddrsel</tt>(1M) man page.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p56.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p58.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

