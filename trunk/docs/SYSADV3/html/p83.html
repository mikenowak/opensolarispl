<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p73.html#dhcp-admin-9">15.&nbsp;&nbsp;Administering DHCP (Tasks)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p80.html#dhcp-admin-124">Working With IP Addresses in the DHCP Service (Task Map)</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p82.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p84.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="dhcp-admin-38pnt"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Assign a Consistent IP Address to
a DHCP Client (<tt>pntadm</tt>)</h3>
<ol><li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-admin-step-545"></A><li><p><b>Set the lease flags by typing a command
of the following format:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>pntadm -M </tt><i>ip-address<tt></i> -i </tt><i>client-id<tt></i> -f MANUAL+BOOTP </tt><i>network-address<tt></i></b></tt></pre>
</td></table><br><p>For example, to enable the Solaris DHCP client whose MAC address is <tt>08:00:20:94:12:1E</tt> to always receive IP address <tt>10.21.5.12</tt>,
you would type:</p>
<p><tt><b>pntadm -M 10.21.5.12 -i 0108002094121E
-f MANUAL+BOOTP 10.21.0.0</b></tt></p>
<p><hr size="1" noshade><p><b>Tip - </b>Refer to the Client ID entry in <A HREF="p80.html#dhcp-admin-tbl-146">Table 15-4</A> for more information about how to determine client
identifiers.</p>
<hr size="1" noshade></p></li>
</ol><A NAME="dhcp-admin-125"></A><h2>Working With DHCP Macros (Task Map)</h2>
<p><A NAME="indexterm-1468"></A><b>DHCP macros</b> are containers of DHCP options.
The Solaris DHCP service uses macros to gather options that should be passed
to clients. DHCP Manager and the <tt>dhcpconfig</tt> utility create
a number of macros automatically when you configure the server. See <A HREF="p67.html#dhcp-overview-9">About DHCP Macros</A> for background information
about macros. See <A HREF="p71.html#chapter3-20">Chapter&nbsp;14, Configuring the DHCP Service (Tasks)</A> for information about macros created by default.</p>
<p>You might find that when changes occur on your network, you need to
make changes to the configuration information that is passed to clients. To
change configuration  information, you need to work with DHCP macros. You
can view, create, modify, duplicate, and delete DHCP macros.</p>
<p>When you work with macros, you must know about DHCP standard options,
which are described in the <tt>dhcp_inittab</tt>(4) man page.</p>
<p><A NAME="indexterm-1469"></A>The following task map lists tasks to help you view, create, modify,
and delete DHCP macros.</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Task</p></th><th scope="col"><p>Description</p></th><th scope="col"><p>For Instructions</p></th></tr>
<tr><td><p>View DHCP macros.</p></td><td><p>Display a list of all the macros that are defined on the DHCP server.</p></td><td><p><A HREF="p83.html#dhcp-admin-13">How to View Macros Defined on a DHCP Server (DHCP Manager)</A>&nbsp;</p><p><A HREF="p83.html#dhcp-admin-13dh">How to View Macros Defined on a DHCP Server (<tt>dhtadm</tt>)</A> </p></td></tr>
<tr><td><p>Create DHCP macros.</p></td><td><p>Create new macros to support DHCP clients.</p></td><td><p><A HREF="p84.html#dhcp-admin-42art">How to Create a DHCP Macro (DHCP Manager)</A>&nbsp;</p><p><A HREF="p85.html#dhcp-admin-42dh">How to Create a DHCP Macro (<tt>dhtadm</tt>)</A>&nbsp;</p></td></tr>
<tr><td><p>Modify values that are passed in macros to DHCP clients.</p></td><td><p>Change macros by modifying existing options, adding options to macros,
or removing options from macros.</p></td><td><p><A HREF="p83.html#dhcp-admin-39art">How to Change Values for Options in a DHCP Macro (DHCP Manager)</A>&nbsp;</p><p><A HREF="p83.html#dhcp-admin-39dh">How to Change Values for Options in a DHCP Macro (<tt>dhtadm</tt>)</A>&nbsp;</p><p><A HREF="p84.html#dhcp-admin-40art">How to Add Options to a DHCP Macro (DHCP Manager)</A>&nbsp;</p><p><A HREF="p84.html#dhcp-admin-40dh">How to Add Options to a DHCP Macro (<tt>dhtadm</tt>)</A>&nbsp;</p><p><A HREF="p84.html#dhcp-admin-41art">How to Delete Options From a DHCP Macro (DHCP Manager)</A>&nbsp;</p><p><A HREF="p84.html#dhcp-admin-41dh">How to Delete Options From a DHCP Macro (<tt>dhtadm</tt>)</A>&nbsp;</p></td></tr>
<tr><td><p>Delete DHCP macros.</p></td><td><p>Remove DHCP macros that are no longer used.</p></td><td><p><A HREF="p85.html#dhcp-admin-43art">How to Delete a DHCP Macro (DHCP Manager)</A>&nbsp;</p><p><A HREF="p85.html#dhcp-admin-43dh">How to Delete a DHCP Macro (<tt>dhtadm</tt>)</A>&nbsp;</p></td></tr>
</table><p>The following figure shows the Macros tab in the DHCP Manager window.</p>
<A NAME="dhcp-admin-fig-211"></A><p><b>Figure 15-14 </b>DHCP Manager's Macros Tab</p>
<IMG src="figures/dhcp-macros-tab.gif" class="figure" alt="Macros tab shows list of macros with one macro selected.
Option names and values contained in macro are shown. Find field and Next
button are shown." title="Macros tab shows list of macros with one macro selected.
Option names and values contained in macro are shown. Find field and Next
button are shown."><A NAME="dhcp-admin-13"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to View Macros Defined on a DHCP Server
(DHCP Manager)</h3>
<ol><A NAME="dhcp-admin-step-215"></A><li><p><b>In DHCP Manager, select the Macros tab.</b></p><p>See <A HREF="p74.html#dhcp-admin-4">How to Start and Stop DHCP Manager</A> for
information about DHCP Manager.</p>
<p>The Macros area on the left side
of the window displays, in alphabetical order, all the macros defined on the
DHCP server. Macros preceded by a folder icon include references to other
macros, whereas macros preceded by a document icon do not reference other
macros.</p>
</li>
<A NAME="dhcp-admin-step-216"></A><li><p><b>To open a macro folder, click the handle
icon to the left of the folder icon.</b></p><p>The macros that are included
in the selected macro are listed.</p>
</li>
<A NAME="dhcp-admin-step-217"></A><li><p><b>To view the content of a macro, click
the macro name. </b></p><p>Options and their assigned values are displayed.</p>
</li>
</ol><A NAME="dhcp-admin-13dh"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to View Macros Defined on a DHCP Server
(<tt>dhtadm</tt>)</h3>
<ol><li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-admin-step-548"></A><li><p><b>Display the macros by typing the following
command:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>dhtadm -P</b></tt></pre>
</td></table><br><p>This command prints to standard output the formatted contents of the <tt>dhcptab</tt> table, including all macros and symbols defined on the DHCP
server.</p>
</li>
</ol><A NAME="dhcp-admin-18"></A><h3>Modifying DHCP Macros</h3>
<p><A NAME="indexterm-1470"></A><A NAME="indexterm-1471"></A>You might need to modify macros when some aspect of your network
changes and one or more DHCP clients need to know about the change. For example,
you might add a router or an NIS server, create a new subnet, or change the
lease policy.</p>
<p>Before you modify a macro, determine the name of the DHCP option you
want to change, add, or delete. The standard DHCP options are listed in the
DHCP Manager help and in the <tt>dhcp_inittab</tt>(4) man page.</p>
<p><A NAME="indexterm-1472"></A>You can use the <tt>dhtadm -M -m</tt> command or DHCP
Manager to modify macros. See the <tt>dhtadm</tt>(1M) man page for more information
about <tt>dhtadm</tt>.</p>
<p>The following figure shows DHCP Manager's Macro Properties dialog box.</p>
<A NAME="dhcp-admin-fig-219"></A><p><b>Figure 15-15 </b>Macro Properties Dialog Box in DHCP
Manager</p>
<IMG src="figures/dhcp-macro-props.gif" class="figure" alt="Dialog box shows list of options and their values. Shows
Select, Add, Modify, up and down, and Delete buttons. Shows check box to notify
server." title="Dialog box shows list of options and their values. Shows
Select, Add, Modify, up and down, and Delete buttons. Shows check box to notify
server."><A NAME="dhcp-admin-39art"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Change Values for Options in a DHCP
Macro (DHCP Manager)</h3>
<ol><A NAME="dhcp-admin-step-223"></A><li><p><b>In DHCP Manager, select the Macros tab.</b></p><p>See <A HREF="p74.html#dhcp-admin-4">How to Start and Stop DHCP Manager</A> for
information about DHCP Manager.</p>
</li>
<A NAME="dhcp-admin-step-224"></A><li><p><b>Select the macro that you want to change.</b></p></li>
<A NAME="dhcp-admin-step-225"></A><li><p><b>Choose Properties from the Edit menu.</b></p><p>The Macro Properties dialog box opens.</p>
</li>
<A NAME="dhcp-admin-step-226"></A><li><p><b>In the table of Options, select the option
that you want to change.</b></p><p>The option's name and its value are displayed
in the Option Name and Option Value fields.</p>
</li>
<A NAME="dhcp-admin-step-227"></A><li><p><b>In the Option Value field, select the
old value and type the new value for the option.</b></p></li>
<A NAME="dhcp-admin-step-228"></A><li><p><b>Click Modify.</b></p><p>The new value
is displayed in the options table.</p>
</li>
<A NAME="dhcp-admin-step-229"></A><li><p><b>Select Notify DHCP Server of Change.</b></p><p>This selection tells the DHCP server to reread the <tt>dhcptab</tt> table
to put the change into effect immediately after you click OK.</p>
</li>
<A NAME="dhcp-admin-step-230"></A><li><p><b>Click OK.</b></p></li>
</ol><A NAME="dhcp-admin-39dh"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Change Values for Options in a DHCP
Macro (<tt>dhtadm</tt>)</h3>
<ol><li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-admin-step-551"></A><li><p><b>Change option values by typing a command
of the following format:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>dhtadm -M -m </tt><i>macroname<tt></i> -e '</tt><i>option<tt></i>=</tt><i>value<tt></i>:</tt><i>option<tt></i>=</tt><i>value<tt></i>' -g</b></tt></pre>
</td></table><br><p>For example, to change the lease time and the Universal Time Offset
in the macro <tt>bluenote</tt>, you would type:</p>
<p># <tt><b>dhtadm -M -m bluenote -e 'LeaseTim=43200:UTCOffst=28800' -g</b></tt></p>
</li>
</ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p82.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p84.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

