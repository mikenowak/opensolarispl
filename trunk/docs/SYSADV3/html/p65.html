<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p64.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p66.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="dhcp-overview-1"></A><b>Chapter&nbsp;12</b><h1>About Solaris DHCP (Overview)</h1>
<p>This chapter introduces the Dynamic Host Configuration Protocol (DHCP),
and explains the concepts that underlie the protocol. This chapter also describes
the advantages of using DHCP in your network.</p>
<p>This chapter contains the following information:</p><ul><li><p><A HREF="p65.html#dhcp-overview-2">About the DHCP Protocol</A></p>
</li>
<li><p><A HREF="p65.html#dhcp-overview-12a">Advantages of Using Solaris DHCP</A></p>
</li>
<li><p><A HREF="p65.html#dhcp-overview-3">How DHCP Works</A></p>
</li>
<li><p><A HREF="p65.html#dhcp-overview-14a">Solaris DHCP Server</A></p>
</li>
<li><p><A HREF="p67.html#dhcp-overview-36a">Solaris DHCP Client</A></p>
</li>
</ul>
<A NAME="dhcp-overview-2"></A><h2>About the DHCP Protocol</h2>
<p><A NAME="indexterm-1337"></A><A NAME="indexterm-1338"></A>The DHCP protocol enables host systems in a TCP/IP network to
be configured automatically for the network as the systems boot. DHCP uses
a client-server mechanism. Servers store and manage configuration information
for clients and provide that information upon a client's request. The information
includes the client's IP address and information about network services that
are available to the client.</p>
<p>DHCP evolved from an earlier protocol, BOOTP, which was designed for
booting over a TCP/IP network. DHCP uses the same format as BOOTP for messages
between the client and server. However, unlike BOOTP messages, DHCP messages
can include network configuration data for the client.</p>
<p>A primary benefit of DHCP is its ability to manage IP address assignments
through leases. <b>Leases</b> allow IP addresses to be reclaimed
when they are not in use. The reclaimed IP addresses can be reassigned to
other clients. A site that uses DHCP can use a smaller pool of IP addresses
than would be needed if all clients were assigned a permanent IP address.</p>
<A NAME="dhcp-overview-12a"></A><h2>Advantages of Using Solaris DHCP</h2>
<p><A NAME="indexterm-1339"></A>DHCP relieves you of some of the time-consuming tasks involved
in setting up a TCP/IP network and in the daily management of that network.
Note that Solaris DHCP works only with IPv4.</p>
<p>Solaris DHCP offers the following advantages:</p><ul><li><p><b>IP address management</b> -
A primary advantage of DHCP is easier management of IP addresses. In a network
without DHCP, you must manually assign IP addresses. You must be careful to
assign unique IP addresses to each client and to configure each client individually.
If a client moves to a different network, you must make manual modifications
for that client. When DHCP is enabled, the DHCP server manages and assigns
IP addresses without administrator intervention. Clients can move to other
subnets without manual reconfiguration because they obtain, from a DHCP server,
new client information appropriate for the new network.</p>
</li>
<li><p><b>Centralized network client configuration</b> -
You can create a tailored configuration for certain clients, or for certain
types of clients. The configuration information is stored in one place, in
the DHCP data store. You do not need to log in to a client to change its configuration.
You can make changes for multiple clients just by changing the information
in the data store.</p>
</li>
<li><p><b>Support of BOOTP clients</b> -
Both BOOTP servers and DHCP servers listen and respond to broadcasts from
clients. The DHCP server can respond to requests from BOOTP clients as well
as DHCP clients. BOOTP clients receive an IP address and the information needed
to boot from a server.</p>
</li>
<li><p><b>Support of local clients and remote
clients</b> - BOOTP provides for the relaying of messages from
one network to another network. DHCP takes advantage of the BOOTP relay feature
in several ways. Most network routers can be configured to act as BOOTP relay
agents to pass BOOTP requests to servers that are not on the client's network.
DHCP requests can be relayed in the same manner because, to the router, DHCP
requests are indistinguishable from BOOTP requests. The Solaris DHCP server
can also be configured to behave as a BOOTP relay agent, if a router that
supports BOOTP relay is not available.</p>
</li>
<li><p><b>Network booting</b> -
Clients can use DHCP to obtain the information that is needed to boot from
a server on the network, instead of using RARP (Reverse Address Resolution
Protocol) and the <tt>bootparams</tt> file. The DHCP server can
give a client all the information that the client needs to function, including
IP address, boot server, and network configuration information. Because DHCP
requests can be relayed across subnets, you can deploy fewer boot servers
in your network when you use DHCP network booting. RARP booting requires that
each subnet have a boot server.</p>
</li>
<li><p><b>Large network support</b> -
Networks with millions of DHCP clients can use Solaris DHCP. The DHCP server
uses multithreading to process many client requests simultaneously. The server
also supports data stores that are optimized to handle large amounts of data.
Data store access is handled by separate processing modules. This data store
approach enables you to add support for any database that you require.</p>
</li>
</ul>
<A NAME="dhcp-overview-3"></A><h2>How DHCP Works</h2>
<p><A NAME="indexterm-1340"></A>You must first install and configure the DHCP server. During configuration,
you specify information about the network that clients need to operate on
the network. After this information is in place, clients are able to request
and receive network information.</p>
<p>The sequence of events for DHCP service is shown in the following diagram.
The numbers in circles correlate to the numbered items in the description
following the diagram.</p>
<A NAME="dhcp-overview-fig-20"></A><p><b>Figure 12-1 </b>Sequence of Events for DHCP Service</p>
<IMG src="figures/dhcp-diag.gif" class="figure" alt="Diagram shows communication sequence between a DHCP client
and server. The description that follows the diagram explains the sequence." title="Diagram shows communication sequence between a DHCP client
and server. The description that follows the diagram explains the sequence."><p>The preceding diagram shows the following steps:</p>
<ol Type="1"><li><p>The client discovers a DHCP server by broadcasting a <b>discover
message</b> to the limited broadcast address (<tt>255.255.255.255</tt>)
on the local subnet. If a router is present and configured to behave as a
BOOTP relay agent, the request is passed to other DHCP servers on different
subnets. The client's <b>broadcast</b> includes its unique ID,
which, in the Solaris DHCP implementation, is derived from the client's Media
Access Control (MAC) address. On an Ethernet network, the MAC address is the
same as the Ethernet address.</p>
<p>DHCP servers that receive the discover message can determine the client's
network by looking at the following information:</p><ul><li><p>Which network interface did the request come in on? The server
determines either that the client is on the network to which the interface
is connected, or that the client is using a BOOTP relay agent connected to
that network.</p>
</li>
<li><p>Does the request include the IP address of a BOOTP relay agent?
 When a request passes through a relay agent, the relay agent inserts its
address in the request header. When the server detects a <b>relay agent
address</b>, the server  knows that the network portion of the address
indicates the client's network address because the relay agent must be connected
to the client's network.</p>
</li>
<li><p>Is the client's network subnetted?  The server consults the <tt>netmasks</tt> table to find the subnet mask used on the network indicated
by the relay agent's address or by the address of the network interface that
received the request. Once the server knows the subnet mask used, it can determine
which portion of the network address is the host portion, and then it can
select an IP address appropriate for the client. See the <tt>netmasks</tt>(4) man page for information on <tt>netmasks</tt>.</p>
</li>
</ul>
</li>
<li><p>After the DHCP servers determine the client's network, the
servers select an appropriate IP address and verify that the address is not
already in use. The DHCP servers then respond to the client by broadcasting
an <b>offer message</b>. The offer message includes the selected
IP address and information about services that can be configured for the client.
Each server temporarily reserves the offered IP address until the client determines
whether to use the IP address.</p>
</li>
<li><p>The client selects the best offer, based on the number and
type of services offered. The client broadcasts a request that specifies the
IP address of the server that made the best offer. The broadcast ensures that
all the responding DHCP servers know that the client has chosen a server.
The servers that are not chosen can cancel the reservations for the IP addresses
that they had offered.</p>
</li>
<li><p>The selected server allocates the IP address for the client
and stores the information in the DHCP data store. The server also sends an
acknowledgement message (ACK) to the client. The <b>acknowledgement
message</b> contains the network configuration parameters for the client.
The client uses the <tt>ping</tt> utility to test the IP address
to make sure no other system is using it. The client then continues booting
to join the network.</p>
</li>
<li><p>The client monitors the lease time. When a set period of time
has elapsed, the client sends a new message to the chosen server to increase
the lease time.</p>
</li>
<li><p>The DHCP server that receives the request extends the lease
time if the lease still adheres to the local lease policy set by the administrator.
If the server does not respond within 20 seconds, the client broadcasts a
request so that one of the other DHCP servers can extend the lease.</p>
</li>
<li><p>When the client no longer needs the IP address, the client
notifies the server that the IP address is released. This notification can
happen during an orderly shutdown and can also be done manually.</p>
</li>
</ol>
<A NAME="dhcp-overview-14a"></A><h2>Solaris DHCP Server</h2>
<p><A NAME="indexterm-1341"></A>The Solaris DHCP server runs as a daemon in the Solaris Operating
System (Solaris OS) on a host system. The server has two basic functions:</p><ul><li><p><b>Managing IP addresses</b> -
The DHCP server controls a range of IP addresses and allocates them to clients,
either permanently or for a defined period of time. The server uses a lease
mechanism to determine how long a client can use a nonpermanent address. When
the address is no longer in use, it is returned to the pool and can be reassigned.
The server maintains information about the binding of IP addresses to clients
in its DHCP network tables, ensuring that no address is used by more than
one client.</p>
</li>
<li><p><b>Providing network configuration for
clients</b> - The server assigns an IP address and provides other
information for network configuration, such as a host name, broadcast address,
network subnet mask, default gateway, name service, and potentially much more
information. The network configuration information is obtained from the server's <tt>dhcptab</tt> database.</p>
</li>
</ul>
<p>The Solaris DHCP server can also be configured to perform the following
additional functions:</p><ul><li><p><b>Responding to BOOTP client requests</b> -
The server listens for broadcasts from BOOTP clients discovering a BOOTP server
and provides them with an IP address and boot parameters. The information
must have been configured statically by an administrator. The DHCP server
can simultaneously perform as a BOOTP server and as a DHCP server.</p>
</li>
<li><p><b>Relaying requests</b> -
The server relays BOOTP and DHCP requests to appropriate servers on other
subnets. The server cannot provide DHCP or BOOTP service when configured as
a BOOTP relay agent.</p>
</li>
<li><p><b>Providing network booting support
for DHCP clients</b> - The server can provide DHCP clients with
information needed to boot over the network: an IP address, boot parameters,
and network configuration information. The server can also provide information
that DHCP clients need to boot and install over a wide area network (WAN).</p>
</li>
<li><p><b>Updating DNS tables for clients that
supply a host name</b> - For clients that provide a <tt>Hostname</tt> option and value in their requests for DHCP service, the server
can attempt DNS updates on their behalf.</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p64.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p66.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

