<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p103.html#ipsec-ov-1">19.&nbsp;&nbsp;IP Security Architecture (Overview)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p103.html#ipsec-ov-2">Introduction to IPsec</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p103.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p105.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipsec-ov-14"></A><h3>IPsec RFCs</h3>
<A NAME="indexterm-1620"></A><A NAME="indexterm-1621"></A><p><A NAME="indexterm-1622"></A>The Internet Engineering Task Force (IETF) has published a number
of Requests for Comment (RFCs) that describe the security architecture for
the IP layer. All RFCs are copyrighted by the Internet Society. For a link
to the RFCs, see <A  HREF="http://ietf.org/">http://ietf.org/</A>.
The following list of RFCs covers the more general IP security references:</p>
<ul><li><p>RFC 2411, "IP Security Document Roadmap," November
1998</p>
</li>
<li><p>RFC 2401, "Security Architecture for the Internet Protocol,"
November 1998</p>
</li>
<li><p>RFC 2402, "IP Authentication Header," November
1998</p>
</li>
<li><p>RFC 2406, "IP Encapsulating Security Payload (ESP),"
November 1998</p>
</li>
<li><p>RFC 2408, "Internet Security Association and Key Management
Protocol (ISAKMP)," November 1998</p>
</li>
<li><p><A NAME="indexterm-1623"></A>RFC 2407, "The Internet IP Security Domain of Interpretation
for ISAKMP," November 1998</p>
</li>
<li><p>RFC 2409, "The Internet Key Exchange (IKE)," November
1998</p>
</li>
<li><p><A NAME="indexterm-1624"></A>RFC 3554, "On the Use of Stream Control Transmission Protocol
(SCTP) with IPsec," July 2003 [ not implemented in the Solaris 10 release
]</p>
</li>
</ul>
<A NAME="ipsec-ov-17"></A><h3>IPsec Terminology</h3>
<A NAME="indexterm-1625"></A><p>The IPsec RFCs define a number of terms that are useful to recognize
when implementing IPsec on your systems. The following table lists IPsec terms,
provides their commonly used acronyms, and defines each term. For a list of
terminology used in key negotiation, see <A HREF="p117.html#ike-tbl-2">Table 22-1</A>.</p>
<A NAME="ipsec-ov-tbl-4"></A><p><b>Table 19-1 </b>IPsec Terms, Acronyms, and
Uses</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>IPsec Term</p></th><th scope="col"><p>Acronym</p></th><th scope="col"><p>Definition</p></th></tr>
<tr><td><p>Security association</p></td><td><p>SA</p></td><td><p>A unique connection between two nodes on a network. The connection is
defined by a triplet: a security protocol, a security parameter index, and
an IP destination. The IP destination can be an IP address or a socket.</p></td></tr>
<tr><td><p>Security associations database</p></td><td><p>SADB</p></td><td><p>Database that contains all active security associations.</p></td></tr>
<tr><td><p>Security parameter index</p></td><td><p>SPI</p></td><td><p>The indexing value for a security association. An SPI is a 32-bit value
that distinguishes among SAs that have the same IP destination and security
protocol.</p></td></tr>
<tr><td><p><A NAME="indexterm-1626"></A><A NAME="indexterm-1627"></A>Security policy database</p></td><td><p>SPD</p></td><td><p>Database that determines if outbound packets and inbound packets have
the specified level of protection.</p></td></tr>
<tr><td><p>Key exchange</p></td><td><p>&nbsp;</p></td><td><p>The process of generating keys for asymmetric cryptographic algorithms.
The two main methods are RSA protocols and the Diffie-Hellman protocol.</p></td></tr>
<tr><td><p>Diffie-Hellman protocol</p></td><td><p>DH</p></td><td><p>A key exchange protocol that involves key generation and key authentication.
Often called <b>authenticated key exchange</b>.</p></td></tr>
<tr><td><p>RSA protocol</p></td><td><p>RSA</p></td><td><p>A key exchange protocol that involves key generation and key distribution.
The protocol is named for its three creators, Rivest, Shamir, and Adleman.</p></td></tr>
<tr><td><p>Internet Security Association and Key Management Protocol</p></td><td><p>ISAKMP</p></td><td><p>The common framework for establishing the format of SA attributes, and
for negotiating, modifying, and deleting SAs. ISAKMP is the IETF standard
for handling IPsec SAs.</p></td></tr>
</table><A NAME="ipsec-ov-54"></A><h2>IPsec Packet Flow</h2>
<p><A NAME="indexterm-1628"></A><A NAME="indexterm-1629"></A><A NAME="indexterm-1630"></A><A HREF="p104.html#ipsec-ov-fig-2">Figure 19-1</A> shows
how an IP addressed packet, as part of an <A HREF="p193.html#glossary-121">IP datagram</A>, proceeds when IPsec has been invoked on an outbound packet.
The flow diagram illustrates where authentication header (AH) and encapsulating
security payload (ESP) entities can be applied to the packet. How to apply
these entities, as well as how to choose the algorithms, are described in
subsequent sections.</p>
<p><A NAME="indexterm-1631"></A><A NAME="indexterm-1632"></A><A HREF="p104.html#ipsec-ov-fig-3">Figure 19-2</A> shows
the IPsec inbound process.</p>
<A NAME="ipsec-ov-fig-2"></A><p><b>Figure 19-1 </b>IPsec Applied to Outbound Packet Process</p>
<IMG src="figures/Outgoing-datagrams.gif" class="figure" alt="Flow diagram shows that the outbound packet is first
protected by ESP, and then by AH. The packet then goes to a tunnel or a physical
interface." title="Flow diagram shows that the outbound packet is first
protected by ESP, and then by AH. The packet then goes to a tunnel or a physical
interface."><A NAME="ipsec-ov-fig-3"></A><p><b>Figure 19-2 </b>IPsec Applied to Inbound Packet Process</p>
<IMG src="figures/Incoming-datagrams.gif" class="figure" alt="Flow diagram shows that IPsec first processes the AH
header, then the ESP header on inbound packets. A packet that is not protected
enough is dropped." title="Flow diagram shows that IPsec first processes the AH
header, then the ESP header on inbound packets. A packet that is not protected
enough is dropped."><A NAME="ipsec-ov-5"></A><h2>IPsec Security Associations</h2>
<A NAME="indexterm-1633"></A><A NAME="indexterm-1634"></A><A NAME="indexterm-1635"></A><A NAME="indexterm-1636"></A><A NAME="indexterm-1637"></A><p>An IPsec <b>security association</b> (SA) specifies
security properties that are recognized by communicating hosts. A single SA
protects data in one direction. The protection is either to a single host
or to a group (multicast) address. Because most communication is either peer-to-peer
or client-server, two SAs must be present to secure traffic in both directions.</p>
<p>The following three elements uniquely identify an IPsec SA:</p>
<ul><li><p>The security protocol (AH or ESP)</p>
</li>
<li><p>The destination IP address</p>
</li>
<li><p>The <A HREF="p193.html#glossary-94">security parameter index (SPI)</A></p>
</li>
</ul>
<p>The SPI, an arbitrary 32-bit value, is transmitted with an AH or ESP
packet. The <tt>ipsecah</tt>(7P) and <tt>ipsecesp</tt>(7P) man pages
explain the extent of protection that is provided by AH and ESP. An integrity
checksum value is used to authenticate a packet. If the authentication fails,
the packet is dropped.</p>
<p><A NAME="indexterm-1638"></A>Security associations are stored in a <b>security associations
database</b> (SADB). A socket-based administration engine, the <tt>pf_key</tt> interface, enables privileged applications to manage the database.</p>
<ul><li><p>For a more complete description of the IPsec SADB, see <A HREF="p116.html#ipsecref-24">Security Associations Database for IPsec</A>.</p>
</li>
<li><p>For more information about how to manage the SADB, see the <tt>pf_key</tt>(7P) man page.</p>
</li>
</ul>
<A NAME="ipsec-ov-6"></A><h3>Key Management in IPsec</h3>
<A NAME="indexterm-1639"></A><A NAME="indexterm-1640"></A><A NAME="indexterm-1641"></A><p>Security associations (SAs) require material to create the keys for
authentication and for encryption. The managing of this <b>keying material</b> is called <b>key management</b>. The Internet Key
Exchange (IKE) protocol handles key management automatically. You can also
manage keys manually with the <tt>ipseckey</tt> command. </p>
<p>SAs on IPv4 and IPv6 packets can use either method of key management.
Unless you have an overriding reason to use manual key management, automatic
key management is preferred. For example, to interoperate with systems other
than Solaris systems might require manual key management.</p>
<ul><li><p><A NAME="indexterm-1642"></A><A NAME="indexterm-1643"></A>The <tt>in.iked</tt> daemon provides automatic key management.
For a description of IKE, see <A HREF="p117.html#ike-1">Chapter&nbsp;22, Internet Key Exchange (Overview)</A>. For more information on the <tt>in.iked</tt> daemon,
see the <tt>in.iked</tt>(1M) man
page.</p>
</li>
<li><p><A NAME="indexterm-1644"></A><A NAME="indexterm-1645"></A><A NAME="indexterm-1646"></A>The <tt>ipseckey</tt> command provides manual key management.
For a description of the command, see <A HREF="p116.html#ipsecref-25">Utilities for Key Generation in IPsec</A>. For a detailed description of the <tt>ipseckey</tt> command options, see the <tt>ipseckey</tt>(1M) man page.</p>
</li>
</ul>
<A NAME="ipsec-ov-7"></A><h2>IPsec Protection Mechanisms</h2>
<A NAME="indexterm-1647"></A><A NAME="indexterm-1648"></A><A NAME="indexterm-1649"></A><A NAME="indexterm-1650"></A><A NAME="indexterm-1651"></A><A NAME="indexterm-1652"></A><p><A NAME="indexterm-1653"></A>IPsec provides two security protocols for protecting data:</p>
<ul><li><p>Authentication Header (AH)</p>
</li>
<li><p>Encapsulating Security Payload (ESP)</p>
</li>
</ul>
<p>An AH protects data with an authentication algorithm. An ESP protects
data with an encryption algorithm. Optionally, an ESP protects data with an
authentication algorithm. Each implementation of an algorithm is called a <b>mechanism</b>.</p>
<A NAME="ipsec-ov-27"></A><h3>Authentication Header</h3>
<A NAME="indexterm-1654"></A><A NAME="indexterm-1655"></A><p>The <A HREF="p193.html#glossary-34">authentication header</A> provides
data authentication, strong integrity, and replay protection to IP datagrams.
AH protects the greater part of the IP datagram. As the
following illustration shows, AH is inserted between the IP header and the
transport header.</p>
<IMG src="figures/IPsecHdr3.gif" class="figure" alt="Diagram shows the AH header between the IP header and
the TCP header." title="Diagram shows the AH header between the IP header and
the TCP header."><p>The transport header can be TCP, UDP, SCTP, or ICMP. If a <A HREF="p193.html#glossary-95">tunnel</A> is being used, the transport header
can be another IP header.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p103.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p105.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

