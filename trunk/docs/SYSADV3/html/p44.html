<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p41.html#ipv6-admintasks-1">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p42.html#ipconfig-142">Monitoring Network Status With the <tt>netstat</tt> Command</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p43.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p45.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipv6-admintasks-48"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Display the Status of Transmissions
for Packets of a Specific Address Type</h3>
<p>Use the <tt>-f</tt> option of the <tt>netstat</tt> command
to view statistics related to packet transmissions of a particular address
family.</p>
<ul><li><p><b>View statistics for transmissions of either IPv4 or IPv6 packets.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>$ netstat -f <i>inet  |  inet6</i></pre>
</td></table><br><p>To view IPv4 transmission information, type <tt>inet</tt> as
the argument to <tt>netstat -f</tt>. Use <tt>inet6</tt> as
the argument to <tt>netstat -f</tt> to view IPv6 information.</p>
</li>
</ul><A NAME="ipv6-admintasks-50"></A><h5>Example 8-10 &nbsp;&nbsp;Status of IPv4 Packet Transmission</h5>
<p>The following example shows output from the <tt>netstat</tt> <tt>-f</tt> <tt>inet</tt> command.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>TCP: IPv4
   Local Address        Remote Address    Swind Send-Q Rwind Recv-Q  State
-------------------- -------------------- ----- ------ ----- ------ -------
host58.734         host19.nfsd       49640      0 49640      0 ESTABLISHED
host58.38063       host19.32782      49640      0 49640      0 CLOSE_WAIT
host58.38146       host41.43601      49640      0 49640      0 ESTABLISHED
host58.996         remote-host.login 49640      0 49206      0 ESTABLISHED</pre>
</td></table><br><A NAME="ipv6-admintasks-51"></A><h5>Example 8-11 &nbsp;&nbsp;Status of IPv6 Packet Transmission</h5>
<p>The following example shows output from the <tt>netstat</tt> <tt>-f</tt> <tt>inet6</tt> command.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>TCP: IPv6
 Local Address          Remote Address        Swind Send-Q Rwind Recv-Q   State    If
------------------ ------------------------- ----- ------ ----- ------ --------- -----
localhost.38065         localhost.32792       49152   0 49152      0    ESTABLISHED  
localhost.32792         localhost.38065       49152   0 49152      0    ESTABLISHED 
localhost.38089         localhost.38057       49152   0 49152      0    ESTABLISHED </pre>
</td></table><br><A NAME="ipconfig-145"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Display the Status of Known Routes</h3>
<A NAME="indexterm-842"></A><A NAME="indexterm-843"></A><A NAME="indexterm-844"></A><p>The <tt>-r</tt> option of the <tt>netstat</tt> command
displays the routing table for the local host. This table shows the status
of all routes that the host knows about. You can run this option of <tt>netstat</tt> from your user account.</p>
<ul><A NAME="ipconfig-step-59"></A><li><p><b>Display the IP routing table.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>$ <tt><b>netstat -r</b></tt></pre>
</td></table><br></li>
</ul><A NAME="eojao"></A><h5>Example 8-12 &nbsp;&nbsp;Routing Table Output by the <tt>netstat</tt> Command</h5>
<p>The following example shows output from the <tt>netstat</tt> <tt>-r</tt> command.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Routing Table: IPv4
  Destination           Gateway           Flags  Ref   Use   Interface
-------------------- -------------------- ----- ----- ------ ---------
host15               myhost               U         1  31059  hme0
10.0.0.14            myhost               U         1      0  hme0
default              distantrouter        UG        1      2  hme0
localhost            localhost            UH        42019361  lo0

Routing Table: IPv6
  Destination/Mask            Gateway                   Flags Ref   Use   If  
--------------------------- --------------------------- ----- --- ------ -----
2002:0a00:3010:2::/64    2002:0a00:3010:2:1b2b:3c4c:5e6e:abcd U  1      0 hme0:1
fe80::/10                fe80::1a2b:3c4d:5e6f:12a2    U       1     23 hme0 
ff00::/8                 fe80::1a2b:3c4d:5e6f:12a2    U       1      0 hme0 
default                  fe80::1a2b:3c4d:5e6f:12a2    UG      1      0 hme0 
localhost                localhost                   UH      9  21832 lo0 </pre>
</td></table><br>
<table cellspacing="5" border="1">
<tr><th scope="col"><p>Parameter</p></th><th scope="col"><p>Description</p></th></tr>
<tr><td><p><tt>Destination</tt></p><p><tt>Destination/Mask</tt></p></td><td><p>Specifies the host that is the destination endpoint of the route. Note
that the IPv6 routing table shows the prefix for a 6to4 tunnel endpoint (<tt>2002:0a00:3010:2::/64</tt>) as the route destination endpoint.</p></td></tr>
<tr><td><p><tt>Gateway</tt></p></td><td><p>Specifies the gateway to use for forwarding packets.</p></td></tr>
<tr><td><p><tt>Flags</tt></p></td><td><p>Indicates the current status of the route. The <tt>U</tt> flag
indicates that the route is up. The <tt>G</tt> flag indicates that
the route is to a gateway. </p></td></tr>
<tr><td><p><tt>Use</tt></p></td><td><p>Shows the number of packets sent.</p></td></tr>
<tr><td><p><tt>Interface</tt></p></td><td><p>Indicates the particular interface on the local host that is the source
endpoint of the transmission.</p></td></tr>
</table><A NAME="ipv6-admintasks-53"></A><h2>Probing Remote Hosts With the <tt>ping</tt> Command</h2>
<p>You can use the <tt>ping</tt> command to determine the status
of a remote host. When you run <tt>ping</tt>, the ICMP protocol
sends a datagram to the host that you specify, asking for a response. ICMP
is the protocol responsible for error handling on a TCP/IP network. When you
use <tt>ping</tt>, you can find out whether an IP connection exists
for the specified remote host. </p>
<p><A NAME="indexterm-845"></A><A NAME="indexterm-846"></A><A NAME="indexterm-847"></A><A NAME="indexterm-848"></A><A NAME="indexterm-849"></A><A NAME="indexterm-850"></A><A NAME="indexterm-851"></A><A NAME="indexterm-852"></A><A NAME="indexterm-853"></A>The following is the basic syntax of <tt>ping</tt>:</p>
<p><tt>/usr/sbin/ping</tt> <i>host [timeout]</i></p>
<p><A NAME="indexterm-854"></A><A NAME="indexterm-855"></A>In this syntax, <i>host</i> is the name of
the remote host. The optional <i>timeout</i> argument
indicates the time in seconds for the <tt>ping</tt> command to continue
trying to reach the remote host. The default is 20 seconds. For additional
syntax and options, refer to the <tt>ping</tt>(1M) man
page.</p>
<A NAME="ipv6-admintasks-54"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Determine if a Remote Host Is
Running</h3>
<ul><li><p><b>Type the following form of the <tt>ping</tt> command:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>$ <tt><b>ping</b></tt> <i>hostname</i></pre>
</td></table><br><p>If host <i>hostname</i> is accepting ICMP transmissions,
this message is displayed:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>hostname</i> is alive</pre>
</td></table><br><p>This message indicates that <i>hostname</i> responded
to the ICMP request. However, if <i>hostname</i> is down
or cannot receive the ICMP packets, you receive the following response from
the <tt>ping</tt> command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>no answer from <i>hostname</i></pre>
</td></table><br></li>
</ul><A NAME="ipv6-admintasks-56"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Determine if a Host Is Dropping
Packets</h3>
<p><A NAME="indexterm-856"></A><A NAME="indexterm-857"></A><A NAME="indexterm-858"></A><A NAME="indexterm-859"></A><A NAME="indexterm-860"></A><A NAME="indexterm-861"></A><A NAME="indexterm-862"></A>Use the <tt>-s</tt> option of the <tt>ping</tt> command
to determine if a remote host is running but nevertheless losing packets.</p>
<ul><li><p><b>Type the following form of the <tt>ping</tt> command:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>$ <tt><b>ping -s</b></tt> <i>hostname</i></pre>
</td></table><br></li>
</ul><A NAME="ipv6-admintasks-58"></A><h5>Example 8-13 &nbsp;&nbsp;<tt>ping</tt> Output for Detecting Packet Dropping</h5>
<p>The <tt>ping -s</tt> <i>hostname</i> command
continually sends packets to the specified host until you send an interrupt
character or a time out occurs. The responses on your screen resemble the
following:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&amp; <tt><b>ping -s host1.domain8</b></tt>
PING host1.domain8 : 56 data bytes
64 bytes from host1.domain8.COM (172.16.83.64): icmp_seq=0. time=1.67 ms
64 bytes from host1.domain8.COM (172.16.83.64): icmp_seq=1. time=1.02 ms
64 bytes from host1.domain8.COM (172.16.83.64): icmp_seq=2. time=0.986 ms
64 bytes from host1.domain8.COM (172.16.83.64): icmp_seq=3. time=0.921 ms
64 bytes from host1.domain8.COM (172.16.83.64): icmp_seq=4. time=1.16 ms
64 bytes from host1.domain8.COM (172.16.83.64): icmp_seq=5. time=1.00 ms
64 bytes from host1.domain8.COM (172.16.83.64): icmp_seq=5. time=1.980 ms

^C

----host1.domain8  PING Statistics----
7 packets transmitted, 7 packets received, 0% packet loss
round-trip (ms)  min/avg/max/stddev = 0.921/1.11/1.67/0.26</pre>
</td></table><br><p><A NAME="indexterm-863"></A><A NAME="indexterm-864"></A><A NAME="indexterm-865"></A><A NAME="indexterm-866"></A>The packet-loss statistic indicates whether the host has dropped
packets. <A NAME="indexterm-867"></A><A NAME="indexterm-868"></A><A NAME="indexterm-869"></A><A NAME="indexterm-870"></A><A NAME="indexterm-871"></A><A NAME="indexterm-872"></A><A NAME="indexterm-873"></A><A NAME="indexterm-874"></A>If <tt>ping</tt> fails, check the status of the network
that is reported by the <tt>ifconfig</tt> and <tt>netstat</tt> commands.
Refer to <A HREF="p41.html#ipconfig-141">Monitoring the Interface Configuration With the <tt>ifconfig</tt> Command</A> and <A HREF="p42.html#ipconfig-142">Monitoring Network Status With the <tt>netstat</tt> Command</A>. </p>
<A NAME="ipv6-admintasks-5"></A><h2>Administering and Logging Network Status
Displays</h2>
<p>The following tasks show how to check the status of the network by using
well-known networking commands.</p>
<A NAME="ipv6-admintasks-22"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Control the Display Output of
IP-Related Commands</h3>
<A NAME="indexterm-875"></A><A NAME="indexterm-876"></A><p>You can control the output of the <tt>netstat</tt> and <tt>ifconfig</tt> commands to display IPv4 information only, or both IPv4 and IPv6
information.</p>
<ol><li><p><b>Create the <tt>/etc/default/inet_type</tt> file.</b></p></li>
<li><p><b>Add one of the following entries to <tt>/etc/default/inet_type</tt>,
as required for your network:</b></p><ul><li><p>To display IPv4 information only:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>DEFAULT_IP=IP_VERSION4</pre>
</td></table><br></li>
<li><p>To display both IPv4 and IPv6 information:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>DEFAULT_IP=BOTH</pre>
</td></table><br><p>Or</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>DEFAULT_IP=IP_VERSION6</pre>
</td></table><br><p>For more information about the <tt>inet_type</tt> file,
see the <tt>inet_type</tt>(4) man
page.</p>
</li>
</ul>
<p><hr size="1" noshade><p><b>Note - </b>The <tt>-4</tt> and <tt>-6</tt> flags in the <tt>ifconfig</tt> command override the values set in the <tt>inet_type</tt> file.
The <tt>-f</tt> flag in the <tt>netstat</tt> command also
overrides the values set in the <tt>inet_type</tt> file. </p>
<hr size="1" noshade></p></li>
</ol><A NAME="eojat"></A><h5>Example 8-14 &nbsp;&nbsp;Controlling Output to Select IPv4 and IPv6 Information</h5>
<ul><li><p>When you specify the <tt>DEFAULT_IP=BOTH</tt> or <tt>DEFAULT_IP=IP_VERSION6</tt> variable in the <tt>inet_type</tt> file,
you should have the following output:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>% <tt><b>ifconfig -a</b></tt>
lo0: flags=1000849 mtu 8232 index 1
        inet 10.10.0.1 netmask ff000000 
qfe0: flags=1000843 mtu 1500 index 2
        inet 10.46.86.54 netmask ffffff00 broadcast 10.46.86.255
        ether 8:0:20:56:a8 
lo0: flags=2000849 mtu 8252 index 1
        inet6 ::1/128 
qfe0: flags=2000841 mtu 1500 index 2
        ether 8:0:20:56:a8 
        inet6 fe80::a00:fe73:56a8/10 
qfe0:1: flags=2080841 mtu 1500 index 2
        inet6 2001:db8:3c4d:5:a00:fe73:56a8/64 </pre>
</td></table><br></li>
<li><p>When you specify the <tt>DEFAULT_IP=IP_VERSION4</tt> or <tt>DEFAULT_IP=IP_VERSION6</tt> variable in the <tt>inet_type</tt> file,
you should have the following output:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>% <tt><b>ifconfig -a</b></tt>
lo0: flags=849 mtu 8232
        inet 10.10.0.1 netmask ff000000 
qfe0: flags=843 mtu 1500
        inet 10.46.86.54 netmask ffffff00 broadcast 10.46.86.255
        ether 8:0:20:56:a8</pre>
</td></table><br></li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p43.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p45.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

