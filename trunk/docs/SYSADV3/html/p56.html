<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p55.html#ipv6-ref-76">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p55.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p57.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipv6-ref-2"></A><h2>IPv6 Packet Header Format</h2>
<A NAME="indexterm-1185"></A><A NAME="indexterm-1186"></A><p>The IPv6 protocol defines a set of headers, including the basic IPv6
header and the IPv6 extension headers. The following figure shows the fields
that appear in the IPv6 header and the order in which the fields appear.</p>
<A NAME="ipv6-ref-fig-80"></A><p><b>Figure 11-3 </b>IPv6 Basic Header Format</p>
<IMG src="figures/HeaderFormat.gif" class="figure" alt="Diagram shows that the 128 bit IPv6 header consist of
eight fields, including the source and destination addresses." title="Diagram shows that the 128 bit IPv6 header consist of
eight fields, including the source and destination addresses."><p><A NAME="indexterm-1187"></A>The following list describes the function of each header field.</p>
<ul><li><p><b>Version</b> - 4-bit version
number of Internet Protocol = 6.</p>
</li>
<li><p><b>Traffic class</b> - 8-bit
traffic class field.</p>
</li>
<li><p><b>Flow label</b> - 20-bit
field. </p>
</li>
<li><p><b>Payload length</b> -
16-bit unsigned integer, which is the rest of the packet that follows the
IPv6 header, in octets.</p>
</li>
<li><p><b>Next header</b> - 8-bit
selector. Identifies the type of header that immediately follows the IPv6
header. Uses the same values as the IPv4 protocol field.</p>
</li>
<li><p><b>Hop limit</b> - 8-bit
unsigned integer. Decremented by one by each node that forwards the packet.
The packet is discarded if the hop limit is decremented to zero.</p>
</li>
<li><p><b>Source address</b> -
128 bits. The address of the initial sender of the packet. </p>
</li>
<li><p><b>Destination address</b> -
128 bits. The address of the intended recipient of the packet. The intended
recipient is not necessarily the recipient if an optional routing header is
present.</p>
</li>
</ul>
<A NAME="ipv6-ref-3"></A><h3>IPv6 Extension Headers</h3>
<p>IPv6 options are placed in separate extension headers that are located
between the IPv6 header and the transport-layer header in a packet. Most IPv6
extension headers are not examined or processed by any router along a packet's
delivery path until the packet arrives at its final destination. This feature
provides a major improvement in router performance for packets that contain
options. In IPv4, the presence of any options requires the router to examine
all options.</p>
<p><A NAME="indexterm-1188"></A>Unlike IPv4 options, IPv6 extension headers can be of arbitrary
length. Also, the number of options that a packet carries is not limited to
40 bytes. This feature, in addition to the manner in which IPv6 options are
processed, permits IPv6 options to be used for functions that are not practical
in IPv4. </p>
<p>To improve performance when handling subsequent option headers, and
the transport protocol that follows, IPv6 options are always an integer multiple
of 8 octets long. The integer multiple of 8 octets retains the alignment of
subsequent headers.</p>
<p>The following IPv6 extension headers are currently defined:</p>
<ul><li><p><b>Routing</b> - Extended
routing, such as IPv4 loose source route</p>
</li>
<li><p><b>Fragmentation</b> - Fragmentation
and reassembly</p>
</li>
<li><p><b>Authentication</b> -
Integrity and authentication, and security </p>
</li>
<li><p><b>Encapsulating Security Payload</b> -
Confidentiality</p>
</li>
<li><p><b>Hop-by-Hop options</b> -
Special options that require hop-by-hop processing</p>
</li>
<li><p><b>Destination options</b> -
Optional information to be examined by the destination node</p>
</li>
</ul>
<A NAME="ipv6-ref-81"></A><h2>Dual-Stack Protocols</h2>
<A NAME="indexterm-1189"></A><p>The term <b>dual-stack</b> normally refers to a complete
duplication of all levels in the protocol stack from applications to the network
layer. One example of complete duplication is a system that runs both the
OSI and TCP/IP protocols. </p>
<p>The Solaris OS is <b>dual-stack</b>, meaning that the
Solaris OS implements both IPv4 and IPv6 protocols. When you install the operating
system, you can choose to enable the IPv6 protocols in the IP layer or use
only the default IPv4 protocols. The remainder of the TCP/IP stack is identical.
Consequently, the same transport protocols, TCP UDP and SCTP, can run over
both IPv4 and IPv6. Also, the same applications can run over both IPv4 and
IPv6. <A HREF="p56.html#ipv6-ref-fig-82">Figure 11-4</A> shows how
the IPv4 and IPv6 protocols work as a dual-stack throughout the various layers
of the Internet protocol suite.</p>
<A NAME="ipv6-ref-fig-82"></A><p><b>Figure 11-4 </b>Dual-Stack Protocol Architecture</p>
<IMG src="figures/dual.gif" class="figure" alt="Illustrates IPv4 and IPv6 protocols work as a dual-stack
through the various OSI layers." title="Illustrates IPv4 and IPv6 protocols work as a dual-stack
through the various OSI layers."><p>In the dual-stack scenario, subsets of both hosts and routers are upgraded
to support IPv6, in addition to IPv4. The dual-stack approach ensures that
the upgraded nodes can always interoperate with IPv4-only nodes by using IPv4.</p>
<A NAME="ipv6-ref-83"></A><h2>Solaris 10 IPv6 Implementation</h2>
<p>This section describes the files, commands, and daemons that enable
IPv6 in the Solaris OS.</p>
<A NAME="ipv6-ref-72"></A><h3>IPv6 Configuration Files</h3>
<p>This section describes the configuration files that are part of an IPv6
implementation:</p>
<ul><li><p><A HREF="p56.html#ipv6-ref-10"><tt>ndpd.conf</tt> Configuration File</A></p>
</li>
<li><p><A HREF="p57.html#ipv6-ref-73">IPv6 Interface Configuration File</A></p>
</li>
<li><p><A HREF="p57.html#ipv6-ref-16"><tt>/etc/inet/ipaddrsel.conf</tt> Configuration File</A></p>
</li>
</ul>
<A NAME="ipv6-ref-10"></A><h4><tt>ndpd.conf</tt> Configuration
File</h4>
<A NAME="indexterm-1190"></A><A NAME="indexterm-1191"></A><A NAME="indexterm-1192"></A><p>The <tt>/etc/inet/ndpd.conf</tt> file is used to configure
options that are used by the <tt>in.ndpd</tt> Neighbor Discovery
daemon. For a router, you primarily use <tt>ndpd.conf</tt> to
configure the site prefix to be advertised to the link. For a host, you use <tt>ndpd.conf</tt> to turn off address autoconfiguration or to configure
temporary addresses.</p>
<p>The next table shows the keywords that are used in the <tt>ndpd.conf</tt> file.</p>
<A NAME="ipv6-ref-tbl-84"></A><p><b>Table 11-2 </b><tt>/etc/inet/ndpd.conf</tt> Keywords</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Variable</p></th><th scope="col"><p>Description</p></th></tr>
<tr><td><p><tt>ifdefault</tt></p></td><td><p>Specifies the router behavior for all interfaces. Use the following
syntax to set router parameters and corresponding values:</p><p><tt>ifdefault [<i>variable-value</i>]</tt></p></td></tr>
<tr><td><p><tt>prefixdefault</tt></p></td><td><p>Specifies the default behavior for prefix advertisements. Use the following
syntax to set router parameters and corresponding values:</p><p><tt>prefixdefault [<i>variable-value</i>]</tt></p></td></tr>
<tr><td><p><tt>if</tt></p></td><td><p>Sets per-interface parameters. Use the following syntax:</p><p><tt>if <i>interface</i> [<i>variable-value</i>]</tt></p></td></tr>
<tr><td><p><tt>prefix</tt></p></td><td><p>Advertises per-interface prefix information. Use the following syntax:</p><p><tt>prefix <i>prefix</i>/<i>length</i> <i>interface</i> [<i>variable-value</i>]</tt></p></td></tr>
</table><p>In the <tt>ndpd.conf</tt> file, you use the keywords in
this table with a set of router configuration variables. These variables are
defined in detail in <A  HREF="http://www.ietf.org/rfc/rfc2461.txt?number=2461">RFC 2461, Neighbor Discovery for IP Version 6 (IPv6)</A>. </p>
<p>The next table shows the variables for configuring an interface, along
with brief definitions.<A NAME="indexterm-1193"></A><A NAME="indexterm-1194"></A><A NAME="indexterm-1195"></A></p>
<A NAME="ipv6-ref-tbl-105"></A><p><b>Table 11-3 </b><tt>/etc/inet/ndpd.conf</tt> Interface Configuration Variables</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Variable</p></th><th scope="col"><p>Default</p></th><th scope="col"><p>Definition</p></th></tr>
<tr><td><p><tt>AdvRetransTimer</tt></p></td><td><p>0</p></td><td><p>Specifies the value in the Retrans Timer field in the advertisement
messages sent by the router.</p></td></tr>
<tr><td><p><tt>AdvCurHopLimit</tt></p></td><td><p>Current diameter of the Internet</p></td><td><p>Specifies the value to be placed in the current hop limit in the advertisement
messages sent by the router.</p></td></tr>
<tr><td><p><tt>AdvDefaultLifetime</tt></p></td><td><p>3 + <tt>MaxRtrAdvInterval</tt></p></td><td><p>Specifies the default lifetime of the router advertisements.</p></td></tr>
<tr><td><p><tt>AdvLinkMTU</tt></p></td><td><p>0</p></td><td><p>Specifies a maximum transmission unit (MTU) value to be sent by the
router. The zero indicates that the router does not specify MTU options.</p></td></tr>
<tr><td><p><tt>AdvManaged Flag</tt></p></td><td><p>False</p></td><td><p>Indicates the value to be placed in the Manage Address Configuration
flag in the router advertisement.</p></td></tr>
<tr><td><p><tt>AdvOtherConfigFlag</tt></p></td><td><p>False</p></td><td><p>Indicates the value to be placed in the Other Stateful Configuration
flag in the router advertisement.</p></td></tr>
<tr><td><p><tt>AdvReachableTime</tt></p></td><td><p>0</p></td><td><p>Specifies the value in the Reachable Time field in the advertisement
messages sent by the router.</p></td></tr>
<tr><td><p><tt>AdvSendAdvertisements</tt></p></td><td><p>False</p></td><td><p>Indicates whether the node should send out advertisements and respond
to router solicitations. You need to explicitly set this variable to "TRUE"
in the <tt>ndpd.conf</tt> file to turn on router advertisement
functions. For more information, refer to <A HREF="p34.html#ipv6-config-tasks-21">How to Configure an IPv6-Enabled Router</A>.</p></td></tr>
<tr><td><p><tt>DupAddrDetect</tt></p><p><tt>Transmits</tt></p></td><td><p>1</p></td><td><p>Defines the number of consecutive neighbor solicitation  messages that
the Neighbor Discovery protocol should send during duplicate address detection
of the local node's address.</p></td></tr>
<tr><td><p><tt>MaxRtrAdvInterval</tt></p></td><td><p>600 seconds</p></td><td><p>Specifies the maximum time to wait between sending unsolicited multicast
advertisements.</p></td></tr>
<tr><td><p><tt>MinRtrAdvInterval</tt></p></td><td><p>200 seconds</p></td><td><p>Specifies the minimum time to wait between sending unsolicited multicast
advertisements.</p></td></tr>
<tr><td><p><tt>StatelessAddrConf</tt></p></td><td><p>True</p></td><td><p>Controls whether the node configures its IPv6 address through stateless
address autoconfiguration. If False is declared in <tt>ndpd.conf</tt>,
then the address must be manually configured. For more information, refer
to <A HREF="p36.html#ipv6-config-tasks-70">How to Configure a User-Specified IPv6 Token</A>.</p></td></tr>
<tr><td><p><tt>TmpAddrsEnabled</tt></p></td><td><p>False</p></td><td><p>Indicates whether a temporary address should be created for all interfaces
or for a particular interface of a node. For more information, refer to <A HREF="p35.html#ipv6-config-tasks-106">How to Configure a Temporary Address</A>.</p></td></tr>
<tr><td><p><tt>TmpMaxDesyncFactor</tt></p></td><td><p>600 seconds</p></td><td><p>Specifies a random value to be subtracted from the preferred lifetime
variable <tt>TmpPreferredLifetime</tt> when <tt>in.ndpd</tt> starts.
The purpose of the <tt>TmpMaxDesyncFactor</tt> variable is to prevent
all the systems on your network from regenerating their temporary addresses
at the same time. <tt>TmpMaxDesyncFactor</tt> allows you to change
the upper bound on that random value.</p></td></tr>
<tr><td><p><tt>TmpPreferredLifetime</tt></p></td><td><p>False</p></td><td><p>Sets the preferred lifetime of a temporary address. For more information,
refer to <A HREF="p35.html#ipv6-config-tasks-106">How to Configure a Temporary Address</A>.</p></td></tr>
<tr><td><p><tt>TmpRegenAdvance</tt></p></td><td><p>False</p></td><td><p>Specifies the lead time in advance of address deprecation for a temporary
address. For more information, refer to <A HREF="p35.html#ipv6-config-tasks-106">How to Configure a Temporary Address</A>.</p></td></tr>
<tr><td><p><tt>TmpValidLifetime</tt></p></td><td><p>False</p></td><td><p>Sets the valid lifetime for a temporary address. For more information,
refer to <A HREF="p35.html#ipv6-config-tasks-106">How to Configure a Temporary Address</A>.</p></td></tr>
</table><p>The next table shows the variables that are used for configuring IPv6
prefixes.<A NAME="indexterm-1196"></A><A NAME="indexterm-1197"></A><A NAME="indexterm-1198"></A></p>
<A NAME="ipv6-ref-tbl-106"></A><p><b>Table 11-4 </b><tt>/etc/inet/ndpd.conf</tt> Prefix Configuration Variables</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Variable</p></th><th scope="col"><p>Default</p></th><th scope="col"><p>Definition</p></th></tr>
<tr><td><p><tt>AdvAutonomousFlag</tt></p></td><td><p>True</p></td><td><p>Specifies the value to be placed in the Autonomous Flag field in the
Prefix Information option. </p></td></tr>
<tr><td><p><tt>AdvOnLinkFlag</tt></p></td><td><p>True</p><p>&nbsp;</p></td><td><p>Specifies the value to be placed in the on-link  flag ("L-bit")
in the Prefix Information option.</p></td></tr>
<tr><td><p><tt>AdvPreferredExpiration</tt></p></td><td><p>Not set</p></td><td><p>Specifies the preferred expiration date of the prefix.</p></td></tr>
<tr><td><p><tt>AdvPreferredLifetime</tt></p></td><td><p>604800 seconds</p></td><td><p>Specifies the value to be placed in the preferred lifetime in the Prefix
Information option. </p></td></tr>
<tr><td><p><tt>AdvValidExpiration</tt></p></td><td><p>Not set</p></td><td><p>Specifies the valid expiration date of the prefix.</p></td></tr>
<tr><td><p><tt>AdvValidLifetime</tt></p></td><td><p>2592000 seconds</p></td><td><p>Specifies the valid lifetime of the prefix that is being configured.</p></td></tr>
</table>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p55.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p57.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

