<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p73.html#dhcp-admin-9">15.&nbsp;&nbsp;Administering DHCP (Tasks)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p75.html#dhcp-admin-51">Modifying DHCP Service Options (Task Map)</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p75.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p77.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="dhcp-admin-117"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Enable and Disable DHCP Transaction
Logging (DHCP Manager)</h3>
<p>This procedure enables and disables transaction logging for all subsequent
DHCP server sessions.</p>
<ol><A NAME="dhcp-admin-step-63sm"></A><li><p><b>In DHCP Manager, choose Modify from
the Service menu.</b></p><p>See <A HREF="p74.html#dhcp-admin-4">How to Start and Stop DHCP Manager</A> for information about DHCP Manager.</p>
</li>
<A NAME="dhcp-admin-step-64"></A><li><p><b>Select Log Transactions to Syslog Facility.</b></p><p>To disable transaction logging, deselect this option.</p>
</li>
<A NAME="dhcp-admin-step-65"></A><li><p>(Optional) <b>Select a local
facility from 0 to 7 to use for logging DHCP transactions.</b></p><p>By
default, DHCP transactions are logged to the location where system notices
are logged, which depends on how <tt>syslogd</tt> is configured.
If you want the DHCP transactions to be logged to a file separate from other
system notices, see <A HREF="p76.html#dhcp-admin-14">How to Log DHCP Transactions to a Separate <tt>syslog</tt> File</A>.</p>
<p>Message files can quickly become
very large when transaction logging is enabled.</p>
</li>
<A NAME="dhcp-admin-step-66sm"></A><li><p><b>Select Restart Server.</b></p></li>
<A NAME="dhcp-admin-step-132"></A><li><p><b>Click OK.</b></p><p>The daemon logs
transactions to the selected <tt>syslog</tt> facility for this session
and each subsequent session until you disable logging.</p>
</li>
</ol><A NAME="dhcp-admin-16"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Enable and Disable DHCP Transaction
Logging (Command Line)</h3>
<ol><li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-admin-step-274sm"></A><li><p><b>Choose one of the following steps:</b></p><ul><li><p><b>To enable DHCP transaction logging, type the following command:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/dhcpconfig -P LOGGING_FACILITY=</tt><i>syslog-local-facility<tt></i></b></tt></pre>
</td></table><br><p><i>syslog-local-facility</i> is a number from 0
through 7. If you omit this option, 0 is used.</p>
<p>By default, DHCP
transactions are logged to the location where system notices are logged, which
depends on how <tt>syslogd</tt> is configured. If you want the DHCP
transactions to be logged to a file separate from other system notices, see <A HREF="p76.html#dhcp-admin-14">How to Log DHCP Transactions to a Separate <tt>syslog</tt> File</A>.</p>
<p>Message files can quickly become very large when
transaction logging is enabled.</p>
</li>
<A NAME="dhcp-admin-step-1210"></A><li><p><b>To disable DHCP transaction logging,
type the following command:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/dhcpconfig -P LOGGING_FACILITY=</b></tt></pre>
</td></table><br><p>Note that you supply no value for the parameter.</p>
</li>
</ul>
</li>
</ol><A NAME="dhcp-admin-14"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Log DHCP Transactions to a Separate <tt>syslog</tt> File</h3>
<ol><li><p><b>Become superuser or assume an equivalent role on the DHCP server
system.</b></p><p>Roles contain authorizations and privileged commands.
For more information about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
<p>A role that is assigned to the DHCP
Management profile might not be sufficient for this task. The role must have
permission to edit <tt>syslog</tt> files.</p>
</li>
<A NAME="dhcp-admin-step-68"></A><li><p><b>Edit the <tt>/etc/syslog.conf</tt> file
on the server system to add a line of the following format:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>local<i>n</i>.notice     <i>path-to-logfile</i></pre>
</td></table><br><p><i>n</i> is the <tt>syslog</tt> facility
number you specified for transaction logging, and <i>path-to-logfile</i> is
the complete path to the file to use for logging transactions.</p>
<p>For
example, you might add the following line:</p>
<p><tt>local0.notice
   /var/log/dhcpsrvc</tt></p>
<p>See the <tt>syslog.conf</tt>(4) man page for more information
about the <tt>syslog.conf</tt> file.</p>
</li>
</ol><A NAME="dhcp-admin-202"></A><h3>Enabling Dynamic
DNS Updates by a DHCP Server</h3>
<A NAME="indexterm-1424"></A><A NAME="indexterm-1425"></A><p>DNS provides name-to-address and address-to-name services for the Internet.
Once a DNS mapping is made, a system can be reached through its host name
or its IP address. The system is also reachable from outside its domain.</p>
<p>The DHCP service can use DNS in two ways:</p><ul><li><p>The DHCP server can look up the host name that is mapped to
an IP address that the server is assigning to the client. The server then
returns the client's host name along with the client's other configuration
information.</p>
</li>
<li><p>The DHCP server can attempt to make a DNS mapping on a client's
behalf, if the DHCP server is configured to update DNS. The client can supply
its own host name when requesting DHCP service. If configured to make DNS
updates, the DHCP server attempts to update DNS with the client's suggested
host name. If the DNS update is successful, the DHCP server returns the requested
host name to the client. If the DNS update is not successful, the DHCP server
returns a different host name to the client.</p>
</li>
</ul>
<p>You can enable the DHCP service to update the DNS service for DHCP clients
that supply their own host names. For the DNS update feature to work, the
DNS server, the DHCP server, and the DHCP client must be set up correctly.
In addition, the requested host name must not be in use by another system
in the domain.</p>
<p>The DHCP server's DNS update feature works if the following statements
are true:</p><ul><li><p>The DNS server supports RFC 2136.</p>
</li>
<li><p>The DNS software is based on BIND v8.2.2, patch level 5 or
later, whether on the DHCP server system or the DNS server system.</p>
</li>
<li><p>The DNS server is configured to accept dynamic DNS updates
from the DHCP server.</p>
</li>
<li><p>The DHCP server is configured to make dynamic DNS updates.</p>
</li>
<li><p>DNS support is configured for the DHCP client's network on
the DHCP server.</p>
</li>
<li><p>The DHCP client is configured to supply a requested host name
in its DHCP request message.</p>
</li>
<li><p>The requested host name corresponds to a DHCP-owned address.
The host name could also have no corresponding address.</p>
</li>
</ul>
<A NAME="dhcp-admin-303"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Enable Dynamic DNS Updating for DHCP
Clients</h3>
<p><hr size="1" noshade><p><b>Note - </b>Be aware that dynamic DNS updates are a <b>security risk</b>.</p>
<p>By default, the Solaris DNS daemon (<tt>in.named</tt>)
does not allow dynamic updates. Authorization for dynamic DNS updates is granted
in the <tt>named.conf</tt> configuration file on the DNS server
system. No other security is provided. You must carefully weigh the convenience
of this facility for users against the security risk created when you enable
dynamic DNS updates.</p>
<hr size="1" noshade></p><ol><A NAME="dhcp-admin-step-14"></A><li><p><b>On the DNS server, edit the <tt>/etc/named.conf</tt> file as superuser.</b></p></li>
<A NAME="dhcp-admin-step-1212"></A><li><p><b>Find the <tt>zone</tt> section
for the appropriate domain in the <tt>named.conf</tt> file.</b></p></li>
<A NAME="dhcp-admin-step-505"></A><li><p><b>Add the DHCP server's IP addresses to
the <tt>allow-update</tt> keyword.</b></p><p>If the <tt>allow-update</tt> keyword does not exist, insert the keyword.</p>
<p>For example,
if the DHCP server resides at addresses <tt>10.0.0.1</tt> and <tt>10.0.0.2</tt>, a <tt>named.conf</tt> file for the <tt>dhcp.domain.com</tt> zone should be modified as follows: </p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>zone "dhcp.domain.com" in {
             type master;
             file "db.dhcp";
             allow-update { 10.0.0.1; 10.0.0.2; }; 
};  
 
zone "10.IN-ADDR.ARPA" in {
             type master;
             file "db.10"; 
             allow-update { 10.0.0.1; 10.0.0.2; };
}; </pre>
</td></table><br><p>Note that <tt>allow-update</tt> for both zones must be enabled
to allow the DHCP server to update both A and PTR records on the DNS server.</p>
</li>
<A NAME="dhcp-admin-step-506"></A><li><p><b>On the DHCP server, start DHCP Manager.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sadm/admin/bin/dhcpmgr &amp;</b></tt></pre>
</td></table><br><p>See <A HREF="p74.html#dhcp-admin-4">How to Start and Stop DHCP Manager</A> for
more detailed information.</p>
</li>
<A NAME="dhcp-admin-step-507"></A><li><p><b>Choose Modify from the Service menu.</b></p><p>The Modify Service Options dialog box opens.</p>
</li>
<A NAME="dhcp-admin-step-508"></A><li><p><b>Select Update DNS Host Information Upon
Client Request.</b></p></li>
<A NAME="dhcp-admin-step-19"></A><li><p><b>Specify the number of seconds to wait
for a response from the DNS server before timing out, then click OK.</b></p><p>The default value of 15 seconds should be adequate. If you have time
out problems, you can increase the value later.</p>
</li>
<A NAME="dhcp-admin-step-20"></A><li><p><b>Click the Macros tab, and ensure that
the correct DNS domain is specified.</b></p><p>The <tt>DNSdmain</tt> option
must be passed with the correct domain name to any client that expects dynamic
DNS update support. By default, <tt>DNSdmain</tt> is specified in
the server macro, which is used as the configuration macro bound to each IP
address.</p>
</li>
<A NAME="dhcp-admin-step-21"></A><li><p><b>Set up the DHCP client to specify its
host name when requesting DHCP service.</b></p><p>If you use the Solaris
DHCP client, see <A HREF="p92.html#dhcp-admin-1058sm">How to Enable a Solaris Client to Request a Specific Host Name</A>. If your client is not a Solaris
DHCP client, see the documentation for your DHCP client for information about
how to specify a host name.</p>
</li>
</ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p75.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p77.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

