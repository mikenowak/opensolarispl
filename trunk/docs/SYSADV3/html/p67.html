<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p65.html#dhcp-overview-1">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p65.html#dhcp-overview-14a">Solaris DHCP Server</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p66.html#dhcp-overview-7">DHCP Server Configuration</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p66.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p68.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<p>You can also configure the DHCP server using the <tt>dhcpconfig</tt> command.
This utility automatically gathers information from existing system files
to provide a useful initial configuration. Therefore, you must ensure that
the files are correct before running <tt>dhcpconfig</tt>. See the <tt>dhcpconfig</tt>(1M) man page
for information about the files that <tt>dhcpconfig</tt> uses to
obtain information.</p>
<A NAME="dhcp-overview-8"></A><h3>IP Address Allocation</h3>
<p><A NAME="indexterm-1355"></A>The Solaris DHCP server supports the following types of IP address
allocation:</p><ul><li><p><b>Manual allocation</b> -
The server provides a specific IP address that you choose for a specific DHCP
client. The address cannot be reclaimed or assigned to another client.</p>
</li>
<li><p><b>Automatic, or permanent, allocation</b> -
The server provides an IP address that has no expiration time, making it permanently
associated with the client until you change the assignment or the client releases
the address.</p>
</li>
<li><p><b>Dynamic allocation</b> -
The server provides an IP address to a requesting client, with a lease for
a specific period of time. When the lease expires, the address is taken back
by the server and can be assigned to another client. The period of time is
determined by the lease time configured for the server.</p>
</li>
</ul>
<A NAME="dhcp-overview-18a"></A><h3>Network Configuration Information</h3>
<p><A NAME="indexterm-1356"></A>You determine what information to provide to DHCP clients. When
you configure the DHCP server, you provide essential information about the
network. Later, you can add more information that you want to provide to clients.</p>
<p>The DHCP server stores network configuration information in the <tt>dhcptab</tt> table, in the form of option/value pairs and macros. Options are
keywords for network data that you want to supply to clients. Values are assigned
to options and passed to clients in DHCP messages. For example, the NIS server
address is passed by way of an option called <tt>NISservs</tt>.
The <tt>NISservs</tt> option has a value that is equal to a list
of IP addresses, which is assigned by the DHCP server. Macros provide a convenient
way to group together any number of options that you want to supply to clients.
You can use DHCP Manager to create macros to group options and to assign values
to the options. If you prefer a command-line tool, you can use <tt>dhtadm</tt>,
the DHCP configuration table management utility, to work with options and
macros.</p>
<A NAME="dhcp-overview-19a"></A><h3>About DHCP Options</h3>
<p><A NAME="indexterm-1357"></A>In Solaris DHCP, an <b>option</b> is a piece of
network information to be passed to a client. The DHCP literature also refers
to options as <b>symbols</b> or <b>tags</b>. An
option is defined by a numeric code and a text label. An option receives a
value when it is used in the DHCP service.</p>
<p>The DHCP protocol defines a large number of standard options for commonly
specified network data: <tt>Subnet</tt>, <tt>Router</tt>, <tt>Broadcst</tt>, <tt>NIS+dom</tt>, <tt>Hostname</tt>,
and <tt>LeaseTim</tt> are a few examples. A complete list of standard
options is shown in the <tt>dhcp_inittab</tt>(4) man page. You cannot modify the standard option keywords
in any way. However, you can assign values to the options that are relevant
to your network when you include the options in macros.</p>
<p>You can create new options for data that is not represented by the standard
options. Options you create must be classified in one of three categories:</p><ul><li><p><b>Extended</b> - Reserved
for options that have become standard DHCP options but are not yet included
in the DHCP server implementation. You might use an extended option if you
know of a standard option that you want to use, but you do not want to upgrade
your DHCP server.</p>
</li>
<li><p><b>Site</b> - Reserved for
options that are unique to your site. You create these options.</p>
</li>
<li><p><b>Vendor</b> - Reserved
for options that should apply only to clients of a particular class, such
as a hardware or vendor platform. The Solaris DHCP implementation includes
a number of vendor options for Solaris clients. For example, the option <tt>SrootIP4</tt> is used to specify the IP address of a server that a client
that boots from the network should use for its root (/) file system.</p>
</li>
</ul>
<p><A HREF="p73.html#dhcp-admin-9">Chapter&nbsp;15, Administering DHCP (Tasks)</A> includes procedures for creating, modifying, and deleting
DHCP options.</p>
<A NAME="dhcp-overview-9"></A><h3>About DHCP Macros</h3>
<p><A NAME="indexterm-1358"></A><A NAME="indexterm-1359"></A>In the Solaris DHCP service, a <b>macro</b> is
a collection of network configuration options and the values that you assign
to them. Macros are created to group options together to be passed to specific
clients or types of clients. For example, a macro intended for all clients
of a particular subnet might contain option/value pairs for subnet mask, router
IP address, broadcast address, NIS+ domain, and lease time.</p>
<A NAME="dhcp-overview-16"></A><h4>Macro Processing by the DHCP Server</h4>
<p><A NAME="indexterm-1360"></A>When the DHCP server processes a macro, it places the network
options and values defined in the macro in a DHCP message to a client. The
server processes some macros automatically for clients of a particular type.</p>
<p><A NAME="indexterm-1361"></A>For the server to process a macro automatically, the name of the
macro must comply with one of the categories shown in the following table.</p>
<A NAME="dhcp-overview-tbl-17"></A><p><b>Table 12-3 </b>DHCP Macro Categories
for Automatic Processing</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Macro Category</p></th><th scope="col"><p>Description</p></th></tr>
<tr><td><p>Client class</p></td><td><p><A NAME="indexterm-1362"></A>The macro name matches a class of client, indicated by the client
machine type, operating system, or both. For example, if a server has a macro
named <tt>SUNW.Sun-Blade-100</tt>, any client whose hardware implementation
is <tt>SUNW,Sun-Blade-100</tt> automatically receives the values
in the <tt>SUNW.Sun-Blade-100</tt> macro.</p></td></tr>
<tr><td><p>Network address</p></td><td><p><A NAME="indexterm-1363"></A>The macro name matches a DHCP-managed network IP address. For
example, if a server has a macro named <tt>10.53.224.0</tt>, any
client connected to the <tt>10.53.224.0</tt> network automatically
receives the values in the <tt>10.53.224.0</tt> macro.</p></td></tr>
<tr><td><p>Client ID</p></td><td><p><A NAME="indexterm-1364"></A><A NAME="indexterm-1365"></A>The macro name matches some unique identifier for the client,
usually derived from an Ethernet or MAC address. For example, if a server
has a macro named <tt>08002011DF32</tt>, the client with the client
ID <tt>08002011DF32</tt> (derived from the Ethernet address <tt>8:0:20:11:DF:32</tt>) automatically receives the values in the macro named <tt>08002011DF32</tt>.</p></td></tr>
</table><p>A macro with a name that does not use one of the categories listed in <A HREF="p67.html#dhcp-overview-tbl-17">Table 12-3</A> can be processed
only if one of the following is true: </p><ul><li><p>The macro is mapped to an IP address.</p>
</li>
<li><p>The macro is included in another macro that is processed automatically.</p>
</li>
<li><p>The macro is included in another macro that is mapped to an
IP address.</p>
</li>
</ul>
<p><hr size="1" noshade><p><b>Note - </b>When you configure a server, a macro that is named to match the
server's name is created by default. This server macro is <b>not</b> processed
automatically for any client because it is not named with one of the name
types that cause automatic processing. When you later create IP addresses
on the server, the IP addresses are mapped to use the server macro by default.</p>
<hr size="1" noshade></p><A NAME="dhcp-overview-10"></A><h4>Order of Macro Processing</h4>
<p><A NAME="indexterm-1366"></A>When a DHCP client requests DHCP services, the DHCP server determines
which macros match the client. The server processes the macros, using the
macro categories to determine the order of processing. The most general category
is processed first, and the most specific category is processed last. The
macros are processed in the following order:</p><ol Type="1"><li><p>Client class macros - The most general category</p>
</li>
<li><p>Network address macros - More specific than Client class</p>
</li>
<li><p>Macros mapped to IP addresses - More specific than Network
address</p>
</li>
<li><p>Client ID macros - The most specific category, pertaining
to one client</p>
</li>
</ol>
<p>A macro that is included in another macro is processed as part of the
container macro.</p>
<p>If the same option is included in more than one macro, the value for
that option in the macro with the most specific category is used because it
is processed last. For example, if a Network address macro contains the lease
time option with a value of 24 hours, and a Client ID macro contains the lease
time option with a value of 8 hours, the client receives a lease time of 8
hours.</p>
<A NAME="eyatk"></A><h4>Size Limit for DHCP Macros</h4>
<A NAME="indexterm-1367"></A><p>The sum total of the values assigned to all the options in a macro must
not exceed 255 bytes, including the option codes and length information. This
limit is dictated by the DHCP protocol.</p>
<p>The macros that are most likely to be impacted by this limit are macros
that are used to pass paths to files on Solaris installation servers. Generally,
you should pass the minimum amount of vendor information needed. You should
use short path names in options that require path names. If you create symbolic
links to long paths, you can pass the shorter link names.</p>
<A NAME="dhcp-overview-36a"></A><h2>Solaris DHCP Client</h2>
<p><A NAME="indexterm-1368"></A>The term "client" is sometimes used to refer to a
physical machine that is performing a client role on the network. However,
the DHCP client described in this document is a software entity. The Solaris
DHCP client is a daemon (<tt>dhcpagent</tt>) that runs in the Solaris
OS on a system that is configured to receive its network configuration from
a DHCP server. DHCP clients from other vendors can also use the services of
the Solaris DHCP server. However, this document describes only the Solaris
DHCP client.</p>
<p>See <A HREF="p90.html#eyatl">Chapter&nbsp;16, Configuring and Administering  DHCP Clients</A> for detailed information
about the Solaris DHCP client.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p66.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p68.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

