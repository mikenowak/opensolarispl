<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p54.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p56.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipv6-ref-76"></A><b>Chapter&nbsp;11</b><h1>IPv6 in Depth
(Reference)</h1>
<p>This chapter contains the following reference information about the
Solaris 10 IPv6 implementation.</p>
<ul><li><p><A HREF="p55.html#ipv6-ref-77">IPv6 Addressing Formats Beyond the Basics</A></p>
</li>
<li><p><A HREF="p56.html#ipv6-ref-2">IPv6 Packet Header Format</A></p>
</li>
<li><p><A HREF="p56.html#ipv6-ref-81">Dual-Stack Protocols</A></p>
</li>
<li><p><A HREF="p56.html#ipv6-ref-83">Solaris 10 IPv6 Implementation</A></p>
</li>
<li><p><A HREF="p60.html#ipv6-ref-34">IPv6 Neighbor Discovery Protocol</A></p>
</li>
<li><p><A HREF="p61.html#ipv6-ref-33">IPv6 Routing</A></p>
</li>
<li><p><A HREF="p62.html#ipv6-ref-47">IPv6 Tunnels</A></p>
</li>
<li><p><A HREF="p63.html#ipv6-ref-64">IPv6 Extensions to Solaris Name Services</A></p>
</li>
<li><p><A HREF="p63.html#ipv6-ref-71">NFS and RPC IPv6 Support</A></p>
</li>
<li><p><A HREF="p63.html#ipv6-ref-103">IPv6 Over ATM Support</A></p>
</li>
</ul>
<p>For an overview of IPv6, refer to <A HREF="p10.html#ipv6-overview-7">Chapter&nbsp;3, Planning an IPv6 Addressing Scheme (Overview)</A>. For tasks on configuring
an IPv6-enabled network, refer to <A HREF="p33.html#ipv6-config-tasks-1">Chapter&nbsp;7, Enabling IPv6 on a Network (Tasks)</A>.</p>
<A NAME="ipv6-ref-77"></A><h2>IPv6 Addressing Formats Beyond the Basics</h2>
<p><A HREF="p10.html#ipv6-overview-7">Chapter&nbsp;3, Planning an IPv6 Addressing Scheme (Overview)</A> introduces the most common IPv6 addressing
formats: unicast site address and link-local address. This section includes
in-depth explanations of addressing formats that are not covered in detail
in <A HREF="p10.html#ipv6-overview-7">Chapter&nbsp;3, Planning an IPv6 Addressing Scheme (Overview)</A>:</p>
<ul><li><p><A HREF="p55.html#ipv6-ref-107">6to4-Derived Addresses</A></p>
</li>
<li><p><A HREF="p55.html#ipv6-overview-201">IPv6 Multicast Addresses in Depth</A></p>
</li>
</ul>
<A NAME="ipv6-ref-107"></A><h3>6to4-Derived Addresses</h3>
<p><A NAME="indexterm-1175"></A><A NAME="indexterm-1176"></A><A NAME="indexterm-1177"></A><A NAME="indexterm-1178"></A>If you plan to configure a 6to4 tunnel from a router or host endpoint,
you must advertise the 6to4 site prefix  in the <tt>/etc/inet/ndpd.conf</tt> file
on the endpoint system. For an introduction and tasks for configuring 6to4
tunnels, refer to <A HREF="p38.html#ipv6-config-tasks-24">How to Configure a 6to4 Tunnel</A>. </p>
<p>The next figure shows the parts of a 6to4 site prefix.</p>
<A NAME="ipv6-ref-fig-78"></A><p><b>Figure 11-1 </b>Parts of a 6to4 Site Prefix</p>
<IMG src="figures/six-4-prefix.gif" class="figure" alt="This figure shows the format of a 6to4 site prefix and
shows a site prefix example. The cited tables explain the information in the
figure." title="This figure shows the format of a 6to4 site prefix and
shows a site prefix example. The cited tables explain the information in the
figure."><p>The next figure shows the parts of a subnet prefix for a 6to4 site,
such as you would include in the <tt>ndpd.conf</tt> file.</p>
<A NAME="ipv6-ref-fig-79"></A><p><b>Figure 11-2 </b>Parts of a 6to4 Subnet Prefix</p>
<IMG src="figures/six-4-advert.gif" class="figure" alt="This figure shows the format of a 6to4 prefix and shows
a prefix example. The following context explains the information in the figure." title="This figure shows the format of a 6to4 prefix and shows
a prefix example. The following context explains the information in the figure."><p><A NAME="indexterm-1179"></A>This table explains the parts of a 6to4 subnet prefix.</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Part</p></th><th scope="col"><p>Length</p></th><th scope="col"><p>Definition</p></th></tr>
<tr><td><p>Prefix</p></td><td><p>16 bits</p></td><td><p>6to4 prefix label 2002 (0x2002).</p></td></tr>
<tr><td><p>IPv4 address</p></td><td><p>32 bits</p></td><td><p>Unique IPv4 address that is already configured on the 6to4 interface.
For the advertisement, you specify the hexadecimal representation of the IPv4
address, rather than the IPv4 dotted-decimal representation.</p></td></tr>
<tr><td><p>Subnet ID</p></td><td><p>16 bits</p></td><td><p>Subnet ID, which must be a value that is unique for the link at your
6to4 site.</p></td></tr>
</table><A NAME="ipv6-ref-53"></A><h4>6to4-Derived Addressing on a Host</h4>
<p><A NAME="indexterm-1180"></A><A NAME="indexterm-1181"></A>When an IPv6 host receives the 6to4-derived prefix by way of a
router advertisement, the host  automatically reconfigures a 6to4-derived
address on an interface. The address has the following format:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>prefix:IPv4-address:subnet-ID:interface-ID</i>/64</pre>
</td></table><br><p>The output from the <tt>ifconfig</tt> <tt>-a</tt> command
on a host with a 6to4 interface might resemble the following:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>qfe1:3: flags=2180841&lt;UP,RUNNING,MULTICAST,ADDRCONF,ROUTER,IPv6>
 mtu 1500 index 7
        inet6 2002:8192:56bb:9258:a00:20ff:fea9:4521/64 </pre>
</td></table><br><p>In this output, the 6to4-derived address follows <tt>inet6</tt>.</p>
<p>This table explains the parts of the 6to4-derived address.</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Address Part</p></th><th scope="col"><p>Length</p></th><th scope="col"><p>Definition</p></th></tr>
<tr><td><p><i>prefix</i></p></td><td><p>16 bits</p></td><td><p><tt>2002</tt>, which is the 6to4 prefix</p></td></tr>
<tr><td><p><i>IPv4-address</i></p></td><td><p>32 bits</p></td><td><p><tt>8192:56bb</tt>, which is the IPv4 address, in hexadecimal
notation, for the 6to4 pseudo-interface that is configured on the 6to4 router</p></td></tr>
<tr><td><p><b>subnet-ID</b></p></td><td><p>16 bits</p></td><td><p><tt>9258</tt>, which is the address of the subnet of which
this host is a member</p></td></tr>
<tr><td><p><b>interface-ID</b></p></td><td><p>64 bits</p></td><td><p><tt>a00:20ff:fea9:4521</tt>, which is the interface ID of
the host interface that is configured for 6to4</p></td></tr>
</table><A NAME="ipv6-overview-201"></A><h3>IPv6 Multicast Addresses in Depth</h3>
<A NAME="indexterm-1182"></A><A NAME="indexterm-1183"></A><A NAME="indexterm-1184"></A><p>The IPv6 multicast address provides a method for distributing identical
information or services to a defined group of interfaces, called the <b>multicast
group</b>. Typically, the interfaces of the multicast group are on
different nodes. An interface can belong to any number of multicast groups.
Packets sent to the multicast address go to all members of the multicast group.
For example, one use of multicast addresses is for broadcasting information,
similar to the capability of the IPv4 broadcast address.</p>
<p>The following table shows the format of the multicast address.</p>
<A NAME="chapter1-tbl-22"></A><p><b>Table 11-1 </b>IPv6 Multicast Address Format</p>

<table cellspacing="5" border="1">
<tr><td><p>8 bits</p></td><td><p>4 bits</p></td><td><p>4 bits</p></td><td><p>8 bits</p></td><td><p>8 bits</p></td><td><p>64 bits</p></td><td><p>32 bits</p></td></tr>
<tr><td><p><tt>11111111</tt></p></td><td><p><i>FLGS</i></p></td><td><p><tt>SCOP</tt></p></td><td><p><i>Reserved</i></p></td><td><p><i>Plen</i></p></td><td><p><i>Network prefix</i></p></td><td><p><i>Group ID</i></p></td></tr>
</table><p>The following is a summary of the contents of each field.</p>
<ul><li><p><tt>11111111</tt> - Identifies the address
as a multicast address.</p>
</li>
<li><p><i>FLGS</i> - Set of the four flags
0,0,P,T. The first two flags must be zero. The P field has one of the following
values:</p>
<ul><li><p>0 = Multicast address that is not assigned based on the network
prefix</p>
</li>
<li><p>1 = Multicast address that is assigned based on the network
prefix</p>
</li>
</ul>
<p>If P is set to 1, then T must also be 1.</p>
</li>
<li><p><i>Reserved</i> - Reserved value of zero.</p>
</li>
<li><p><i>Plen</i> - Number of bits in the site
prefix that identify the subnet, for a multicast address that is assigned
based on a site prefix.</p>
</li>
<li><p><i>Group ID</i> - Identifier for the multicast
group, either permanent or dynamic.</p>
</li>
</ul>
<p>For complete details about the multicast format, refer to <A  HREF="ftp://ftp.rfc-editor.org/in-notes/rfc3306.txt">RFC 3306,
"Unicast-Prefix-based IPv6 Multicast Addresses</A>.</p>
<p>Some IPv6 multicast addresses are permanently assigned by the Internet
Assigned Numbers Authority (IANA). Some examples are the All Nodes Multicast
Addresses and All Routers Multicast Addresses that are required by all IPv6
hosts and IPv6 routers. IPv6 multicast addresses can also be dynamically allocated.
For more information about the proper use of multicast addresses and groups,
see <A  HREF="ftp://ftp.rfc-editor.org/in-notes/rfc3307.txt">RFC
3307, "Allocation Guidelines for IPv6 Multicast Addresses"</A>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p54.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p56.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

