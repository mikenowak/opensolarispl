<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p55.html#ipv6-ref-76">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p56.html#ipv6-ref-83">Solaris 10 IPv6 Implementation</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p57.html#ipv6-ref-74">IPv6-Related Commands</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p57.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p59.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipv6-ref-17"></A><h4><tt>6to4relay</tt> Command</h4>
<p><A NAME="indexterm-1210"></A><A NAME="indexterm-1211"></A><b>6to4 tunneling</b> enables communication between
isolated 6to4 sites. However, to transfer packets with a native, non-6to4
IPv6 site, the 6to4 router must establish a tunnel with a 6to4 relay router.
 The <b>6to4 relay router</b> then forwards the 6to4 packets
to the IPv6 network and ultimately, to the native IPv6 site. If your 6to4-enabled
site must exchange data with a native IPv6 site, you use the <tt>6to4relay</tt> command
to enable the appropriate tunnel.</p>
<p>Because the use of relay routers is insecure, tunneling to a relay router
is disabled by default in the Solaris OS. Carefully consider the issues that
are involved in creating a tunnel to a 6to4 relay router before deploying
this scenario. For detailed information on 6to4 relay routers, refer to <A HREF="p63.html#ipv6-ref-56">Considerations for Tunnels to a 6to4 Relay Router</A>.
If you decide to enable 6to4 relay router support, you can find the related
procedures in <A HREF="p38.html#ipv6-config-tasks-24">How to Configure a 6to4 Tunnel</A>.</p>
<A NAME="ipv6-ref-18"></A><h5>Syntax of <tt>6to4relay</tt></h5>
<p><A NAME="indexterm-1212"></A>The <tt>6to4relay</tt> command has the following syntax:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>6to4relay -e [-a <b>IPv4-address</b>] -d -h</pre>
</td></table><br><table border="0" cellspacing="5"><tr><td valign="top"><p><tt>-e</tt></p></td><td valign="top"><p>Enables support for tunnels between the 6to4 router and an
anycast 6to4 relay router. The tunnel endpoint address is then set to <tt>192.88.99.1</tt>, the default address for the anycast group of 6to4 relay routers.</p>
</td></tr><tr><td valign="top"><p><tt>-a</tt> <i>IPv4-address</i></p></td><td valign="top"><p>Enables support for tunnels between the 6to4 router and a
6to4 relay router with the specified <i>IPv4-address</i>.</p>
</td></tr><tr><td valign="top"><p><tt>-d</tt></p></td><td valign="top"><p>Disables support for tunneling to the 6to4 relay router, the
default for the Solaris OS.</p>
</td></tr><tr><td valign="top"><p><tt>-h</tt></p></td><td valign="top"><p>Displays help for <tt>6to4relay</tt>.</p>
</td></tr></table>
<p>For more information, refer to the <tt>6to4relay</tt>(1M)
man page.</p>
<A NAME="eobon"></A><p><b>Example 11-3 </b>Default Status Display of 6to4 Relay Router Support</p>
<p><A NAME="indexterm-1213"></A>The <tt>6to4relay</tt> command, without arguments, shows
the current status of 6to4 relay router support. This example shows the default
for the Solaris OS implementation of IPv6.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/6to4relay</b></tt>
6to4relay:6to4 Relay Router communication support is disabled</pre>
</td></table><br><A NAME="eobog"></A><p><b>Example 11-4 </b>Status Display With 6to4 Relay Router Support Enabled</p>
<p>If relay router support is enabled, <tt>6to4relay</tt> displays
the following output:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/6to4relay</b></tt>
6to4relay:6to4 Relay Router communication support is enabled
IPv4 destination address of Relay Router=192.88.99.1</pre>
</td></table><br><A NAME="eobok"></A><p><b>Example 11-5 </b>Status Display With a 6to4 Relay Router Specified</p>
<p>If you specify the <tt>-a</tt> option and an IPv4 address to
the <tt>6to4relay</tt> command, the IPv4 address that you give with <tt>-a</tt> is displayed instead of <tt>192.88.99.1</tt>.</p>
<p><tt>6to4relay</tt> does not report successful execution of
the <tt>-d</tt>, <tt>-e</tt>, and<tt>-a</tt> <i>IPv4
address</i> options. However, <tt>6to4relay</tt> does
display any error messages that might be generated when you run these options.</p>
<A NAME="ipv6-ref-21"></A><h4><tt>ifconfig</tt> Command Extensions
for IPv6 Support</h4>
<p><A NAME="indexterm-1214"></A><A NAME="indexterm-1215"></A>The <tt>ifconfig</tt> command enables IPv6 interfaces
and the tunneling module to be plumbed. <tt>ifconfig</tt> uses an
extended set of ioctls to configure both IPv4 and IPv6 network interfaces.
The following describes <tt>ifconfig</tt> options that support IPv6
operations. See <A HREF="p41.html#ipconfig-141">Monitoring the Interface Configuration With the <tt>ifconfig</tt> Command</A> for a range of both IPv4 and IPv6 tasks
that involve <tt>ifconfig</tt>.</p>
<table border="0" cellspacing="5"><tr><td valign="top"><p><tt>index</tt></p></td><td valign="top"><p>Sets the interface index.</p>
</td></tr><tr><td valign="top"><p><tt>tsrc</tt>/<tt>tdst</tt></p></td><td valign="top"><p>Sets the tunnel source or destination.</p>
</td></tr><tr><td valign="top"><p><tt>addif</tt></p></td><td valign="top"><p>Creates the next available logical interface.</p>
</td></tr><tr><td valign="top"><p><tt>removeif</tt></p></td><td valign="top"><p>Deletes a logical interface with a specific IP address.</p>
</td></tr><tr><td valign="top"><p><tt>destination</tt></p></td><td valign="top"><p>Sets the point-to-point destination address for an interface.</p>
</td></tr><tr><td valign="top"><p><tt>set</tt></p></td><td valign="top"><p>Sets an address, netmask, or both for an interface.</p>
</td></tr><tr><td valign="top"><p><tt>subnet</tt></p></td><td valign="top"><p>Sets the subnet address of an interface.</p>
</td></tr><tr><td valign="top"><p><tt>xmit</tt>/<tt>-xmit</tt></p></td><td valign="top"><p>Enables or disables packet transmission on an interface.</p>
</td></tr></table>
<p><A HREF="p33.html#ipv6-config-tasks-1">Chapter&nbsp;7, Enabling IPv6 on a Network (Tasks)</A> provides IPv6 configuration procedures.</p>
<A NAME="eobol"></A><p><b>Example 11-6 </b>Adding a Logical IPv6 Interface With the <tt>-addif</tt> Option of the <tt>ifconfig</tt> Command</p>
<p>The following form of the <tt>ifconfig</tt> command creates
the <tt>hme0:3</tt> logical interface:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig hme0 inet6 addif up</b></tt>
Created new logical interface hme0:3</pre>
</td></table><br><p>This form of <tt>ifconfig</tt> verifies the creation of the
new interface:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig hme0:3 inet6</b></tt>
hme0:3: flags=2000841&lt;UP,RUNNING,MULTICAST,IPv6> mtu 1500 index 2
		inet6  inet6 fe80::203:baff:fe11:b321/10</pre>
</td></table><br><A NAME="eobob"></A><p><b>Example 11-7 </b>Removing a Logical IPv6 Interface With the <tt>-removeif</tt> Option of the <tt>ifconfig</tt> Command</p>
<p>The following form of the <tt>ifconfig</tt> command removes
the <tt>hme0:3</tt> logical interface.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig hme0:3 inet6 down</b></tt>

# <tt><b>ifconfig hme0 inet6 removeif 1234::5678</b></tt></pre>
</td></table><br><A NAME="ipv6-ref-ex-86"></A><p><b>Example 11-8 </b>Using <tt>ifconfig</tt> to Configure
an IPv6 Tunnel Source</p>
<A NAME="indexterm-1216"></A><A NAME="indexterm-1217"></A><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig ip.tun0 inet6 plumb index 13</b></tt></pre>
</td></table><br><p>Opens the tunnel to be associated with the physical interface name.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig ip.tun0 inet6</b></tt>
ip.tun0: flags=2200850&lt;POINTOPOINT,RUNNING,MULTICAST,NONUD,
#IPv6> mtu 1480 index 13
		inet tunnel src 0.0.0.0 
		inet6 fe80::/10 --> :: </pre>
</td></table><br><p>Configures the streams that are needed for TCP/IP to use the tunnel
device and report the status of the device.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig ip.tun0 inet6 tsrc 120.46.86.158 tdst 120.46.86.122</b></tt></pre>
</td></table><br><p>Configures the source and the destination address for the tunnel.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig ip.tun0 inet6</b></tt>
ip.tun0: flags=2200850&lt;POINTOPOINT,RUNNING,MULTICAST,NONUD,
IPv6> mtu 1480 index 13
		inet tunnel src 120.46.86.158  tunnel dst 120.46.86.122
		inet6 fe80::8192:569e/10 --> fe80::8192:567a</pre>
</td></table><br><p>Reports the new status of the device after the configuration.</p>
<A NAME="ipv6-ref-ex-88"></A><p><b>Example 11-9 </b>Configuring a 6to4 Tunnel Through <tt>ifconfig</tt> (Long Form)</p>
<p>This example of a 6to4 pseudo-interface configuration uses the subnet
ID of 1 and specifies the host ID, in hexadecimal form.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig ip.6to4tun0 inet6 plumb</b></tt>
# <tt><b>ifconfig ip.6to4tun0 inet tsrc 129.146.86.187 \
2002:8192:56bb:1::8192:56bb/64 up</b></tt></pre>
</td></table><br><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig ip.6to4tun0 inet6</b></tt>
ip.6to4tun0: flags=2200041&lt;UP,RUNNING,NONUD,IPv6>mtu 1480 index 11
        inet tunnel src 129.146.86.187 
        tunnel hop limit 60 
        inet6 2002:8192:56bb:1::8192:56bb/64 </pre>
</td></table><br><A NAME="ipv6-ref-ex-89"></A><p><b>Example 11-10 </b>Configuring a 6to4 Tunnel Through <tt>ifconfig</tt> (Short Form)</p>
<p>This example shows the short form for configuring a 6to4 tunnel.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig ip.6to4tun0 inet6 plumb</b></tt>
# <tt><b>ifconfig ip.6to4tun0 inet tsrc 129.146.86.187 up</b></tt></pre>
</td></table><br><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig ip.6to4tun0 inet6</b></tt>
ip.6to4tun0: flags=2200041&lt;UP,RUNNING,NONUD,IPv6>mtu 1480 index 11
        inet tunnel src 129.146.86.187 
        tunnel hop limit 60 
        inet6 2002:8192:56bb::1/64 </pre>
</td></table><br><A NAME="ipv6-ref-23"></A><h4><tt>netstat</tt> Command Modifications
for IPv6 Support</h4>
<p><A NAME="indexterm-1218"></A><A NAME="indexterm-1219"></A>The <tt>netstat</tt> command displays both IPv4 and
IPv6 network status. You can choose which protocol information to display
by setting the <tt>DEFAULT_IP</tt> value in the <tt>/etc/default/inet_type</tt> file or by using the <tt>-f</tt> command-line option. With
a permanent setting of <tt>DEFAULT_IP</tt>, you can ensure that <tt>netstat</tt> displays only IPv4 information. You can override this setting
by using the <tt>-f</tt> option. For more information on the <tt>inet_type</tt> file, see the <tt>inet_type</tt>(4) man
page.</p>
<p>The <tt>-p</tt> option of the <tt>netstat</tt> command
displays the net-to-media table, which is the ARP table for IPv4 and the neighbor
cache for IPv6. See the <tt>netstat</tt>(1M) man
page for details. See <A HREF="p43.html#ipv6-admintasks-16">How to Display the Status of Sockets</A> for descriptions of procedures that use this
command.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p57.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p59.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

