<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p55.html#ipv6-ref-76">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p56.html#ipv6-ref-83">Solaris 10 IPv6 Implementation</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p59.html#ipv6-ref-75">IPv6-Related Daemons</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p59.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p61.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="fapcd"></A><h5>Considerations When Configuring a Service for IPv6</h5>
<p>When you add or modify a service for IPv6, keep in mind the following
caveats:</p>
<ul><li><p>You need to specify the <tt>proto</tt> value as <tt>tcp6</tt>, <tt>sctp6</tt>, or <tt>udp6</tt> to enable
both IPv4 or IPv6 connections. If you specify the value for <tt>proto</tt> as <tt>tcp</tt>, <tt>sctp</tt>, or <tt>udp</tt>, the service
uses only IPv4.</p>
</li>
<li><p>Though you can add a service instance that uses one-to-many
style SCTP sockets for <tt>inetd</tt>, this is not recommended. <tt>inetd</tt> does not work with one-to-many style SCTP sockets.</p>
</li>
<li><p>If a service requires two entries because its <tt>wait-status</tt> or <tt>exec</tt>  properties differ, then you must create
two instances/services  from the original service.</p>
</li>
</ul>
<A NAME="ipv6-ref-34"></A><h2>IPv6 Neighbor Discovery Protocol</h2>
<A NAME="indexterm-1239"></A><A NAME="indexterm-1240"></A><p>IPv6 introduces the Neighbor Discovery protocol, as described in  <A  HREF="http://www.ietf.org/rfc/rfc2461.txt?number=2461">RFC
2461, Neighbor Discovery for IP Version 6 (IPv6)</A>. For an overview
of major Neighbor Discovery features, refer to <A HREF="p12.html#chapter1-40">IPv6 Neighbor Discovery Protocol Overview</A>.</p>
<p>This section discusses the following features of the Neighbor Discovery
protocol:</p>
<ul><li><p><A HREF="p60.html#ipv6-overview-21">ICMP Messages From Neighbor Discovery</A></p>
</li>
<li><p><A HREF="p60.html#chapter1-43">Autoconfiguration Process</A></p>
</li>
<li><p><A HREF="p61.html#ipv6-ref-38">Neighbor Solicitation and Unreachability</A></p>
</li>
<li><p><A HREF="p61.html#chapter1-52">Duplicate Address Detection Algorithm</A></p>
</li>
<li><p><A HREF="p61.html#chapter1-41">Comparison of Neighbor Discovery to ARP and Related IPv4 Protocols</A></p>
</li>
</ul>
<A NAME="ipv6-overview-21"></A><h3>ICMP Messages From Neighbor Discovery</h3>
<A NAME="indexterm-1241"></A><p>Neighbor Discovery defines five new Internet Control Message Protocol
(ICMP) messages. The messages serve the following purposes:</p>
<ul><li><p><A NAME="indexterm-1242"></A><A NAME="indexterm-1243"></A><b>Router solicitation</b> -
When an interface becomes enabled, hosts can send router solicitation messages.
The solicitations request routers to generate router advertisements immediately,
rather than at their next scheduled time.</p>
</li>
<li><p><A NAME="indexterm-1244"></A><A NAME="indexterm-1245"></A><b>Router advertisement</b> -
Routers advertise their presence, various link parameters, and various Internet
parameters. Routers advertise either periodically, or in response to a router
solicitation  message. Router advertisements contain prefixes that  are used
for on-link determination or address configuration, a suggested hop-limit
value, and so on.</p>
</li>
<li><p><A NAME="indexterm-1246"></A><A NAME="indexterm-1247"></A><b>Neighbor solicitation</b> -
Nodes send neighbor solicitation messages to determine the link-layer address
of a neighbor. Neighbor solicitation messages are also sent to verify that
a neighbor is still reachable by a cached link-layer address. Neighbor solicitations
are also used for duplicate address detection.</p>
</li>
<li><p><b>Neighbor advertisement</b> -
A node sends neighbor advertisement messages in response to a neighbor solicitation
message. The node can also send unsolicited neighbor advertisements to announce
a link-layer address change.</p>
</li>
<li><p><A NAME="indexterm-1248"></A><A NAME="indexterm-1249"></A><b>Redirect</b> - Routers use
redirect messages to inform hosts of a better first hop for a destination,
or that the destination is on the same link.</p>
</li>
</ul>
<A NAME="chapter1-43"></A><h3>Autoconfiguration Process</h3>
<p><A NAME="indexterm-1250"></A><A NAME="indexterm-1251"></A><A NAME="indexterm-1252"></A><A NAME="indexterm-1253"></A>This section provides an overview of the typical steps that are
performed by an interface during autoconfiguration. Autoconfiguration is performed
only on multicast-capable links. </p>
<ol Type="1"><li><p>A multicast-capable interface is enabled, for example, during
system startup of a node.</p>
</li>
<li><p>The node begins the autoconfiguration process by generating
a link-local address for the interface.</p>
<p>The link-local address
is formed from the Media Access Control (MAC) address of the interface.</p>
</li>
<li><p>The node sends a neighbor solicitation message that contains
the tentative link-local address as the target. </p>
<p>The purpose of
the message is to verify that the prospective address is not already in use
by another node on the link. After verification, the link-local address can
be assigned to an interface. </p>
<ol Type="a"><li><p>If another node already uses the proposed address, that node
returns a neighbor advertisement stating that the address is already in use.</p>
</li>
<li><p>If another node is also attempting to use the same address,
the node also sends a neighbor solicitation for the target. </p>
<p>The
number of neighbor solicitation transmissions or retransmissions, and the
delay between consecutive solicitations, are link specific. You can set these
parameters, if necessary.</p>
</li>
</ol>
</li>
<li><p>If a node determines that its prospective link-local address
is not unique, autoconfiguration stops. At that point, you must manually configure
the link-local address of the interface. </p>
<p>To simplify recovery,
you can supply an alternate interface ID that overrides the default identifier.
Then, the autoconfiguration mechanism can resume by using the new, presumably
unique, interface ID. </p>
</li>
<li><p>When a node determines that its prospective link-local address
is unique, the node assigns the address to the interface.</p>
<p>At this
point, the node has IP-level connectivity with neighboring nodes. The remaining
autoconfiguration steps are performed only by hosts. </p>
</li>
</ol>
<A NAME="chapter1-53"></A><h4>Obtaining a Router Advertisement</h4>
<p><A NAME="indexterm-1254"></A><A NAME="indexterm-1255"></A><A NAME="indexterm-1256"></A><A NAME="indexterm-1257"></A>The next phase of autoconfiguration involves obtaining a router
advertisement or determining that no routers are present. If routers are present,
the routers send router advertisements that specify what type of autoconfiguration
a host should perform.</p>
<p><A NAME="indexterm-1258"></A><A NAME="indexterm-1259"></A>Routers send router advertisements periodically. However, the
delay between successive advertisements is generally longer than a host that
performs autoconfiguration can wait. To quickly obtain an advertisement, a
host sends one or more router solicitations to the all-routers multicast group. </p>
<A NAME="chapter1-54"></A><h4>Prefix Configuration Variables</h4>
<p><A NAME="indexterm-1260"></A><A NAME="indexterm-1261"></A><A NAME="indexterm-1262"></A><A NAME="indexterm-1263"></A><A NAME="indexterm-1264"></A>Router advertisements also contain prefix variables with information
that stateless address autoconfiguration uses to generate prefixes. The Stateless
Address Autoconfiguration field in router advertisements are processed independently.
One option field that contains prefix information, the Address Autoconfiguration
flag, indicates whether the option even applies to stateless autoconfiguration.
If the option field does apply, additional option fields contain a subnet
prefix with lifetime values. These values indicate the length of time that
addresses created from the prefix remain preferred and valid.</p>
<p>Because routers periodically generate router advertisements, hosts continually
receive new advertisements. IPv6-enabled hosts process the information that
is contained in each advertisement. Hosts add to the information. They also
refresh the information that is received in previous advertisements.</p>
<A NAME="chapter1-55"></A><h4>Address Uniqueness</h4>
<p><A NAME="indexterm-1265"></A><A NAME="indexterm-1266"></A><A NAME="indexterm-1267"></A><A NAME="indexterm-1268"></A>For security reasons, all addresses must be tested for uniqueness
prior to their assignment to an interface. The situation is different for
addresses that are created through stateless autoconfiguration. The uniqueness
of an address is determined primarily by the portion of the address that is
formed from an  interface ID. Thus, if a node has already verified the uniqueness
of a link-local address, additional addresses need not be tested individually.
The addresses must be created from the same interface ID. In contrast, all
addresses that are obtained manually should be tested individually for uniqueness.
System administrators at some sites believe that the overhead of performing
duplicate address detection outweighs its benefits. For these sites, the use
of duplicate address detection can be disabled by setting a per-interface
configuration flag.</p>
<p>To accelerate the autoconfiguration process, a host can generate its
link-local address, and verify its uniqueness, while the host waits for a
router advertisement. A router might delay a response to a router solicitation
for a few seconds. Consequently, the total time necessary to complete autoconfiguration
can be significantly longer if the two steps are done serially.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p59.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p61.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

