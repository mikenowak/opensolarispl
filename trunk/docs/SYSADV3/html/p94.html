<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p93.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p95.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="dhcp-trouble-1"></A><b>Chapter&nbsp;17</b><h1>Troubleshooting
DHCP (Reference)</h1>
<p>This chapter provides information to help you solve problems that you might
encounter when you configure a DHCP server or client. The chapter also helps you with
problems you might have in using DHCP after configuration is complete.</p>
<p>The chapter includes the following information:</p><ul><li><p><A HREF="p94.html#dhcp-trouble-2">Troubleshooting DHCP Server Problems</A></p>
</li>
<li><p><A HREF="p96.html#dhcp-trouble-5">Troubleshooting DHCP Client Configuration Problems</A></p>
</li>
</ul>
<p>See <A HREF="p71.html#chapter3-20">Chapter&nbsp;14, Configuring the DHCP Service (Tasks)</A> for information about configuring your DHCP server. See<A HREF="p90.html#dhcp-config-67">Enabling and Disabling a Solaris DHCP Client</A> for information about configuring
your DHCP client.</p>
<A NAME="dhcp-trouble-2"></A><h2>Troubleshooting DHCP Server Problems</h2>
<p><A NAME="indexterm-1548"></A><A NAME="indexterm-1549"></A>The problems that you might encounter when you configure the server fall
into the following categories:</p><ul><li><p><A HREF="p94.html#dhcp-trouble-7">NIS+ Problems and the DHCP Data Store</A></p>
</li>
<li><p><A HREF="p95.html#dhcp-trouble-35">IP Address Allocation Errors in DHCP</A></p>
</li>
</ul>
<A NAME="dhcp-trouble-7"></A><h3>NIS+ Problems and the DHCP Data Store</h3>
<A NAME="indexterm-1550"></A><p>If you use NIS+ as the DHCP data store, problems that you might encounter can
be categorized as follows:</p><ul><li><p><A HREF="p94.html#dhcp-trouble-3">Cannot Select NIS+ as the DHCP Data Store</A></p>
</li>
<li><p><A HREF="p94.html#dhcp-trouble-6">NIS+ Is Not Adequately Configured for DHCP Data Store</A></p>
</li>
<li><p><A HREF="p94.html#dhcp-trouble-11">NIS+ Access Problems for the DHCP Data Store</A></p>
</li>
</ul>
<A NAME="dhcp-trouble-3"></A><h4>Cannot Select NIS+ as the DHCP Data Store</h4>
<p>If you try to use NIS+ as your data store, DHCP Manager might not offer NIS+
as a choice for the data store. If you use the <tt>dhcpconfig</tt> command,
you might see a message stating that NIS+ does not appear to be installed and running.
Both these symptoms mean that NIS+ has not been configured for this server, although
NIS+ might be in use on the network. Before you can select NIS+ as a data store, the
server system must be configured as an NIS+ client.</p>
<p>Before you set up the DHCP server system as an NIS+ client, the following statements
must be true:</p><ul><li><p>The domain must have already been configured.</p>
</li>
<li><p>The NIS+ domain's master server must be running.</p>
</li>
<li><p>The master server's tables must be populated.</p>
</li>
<li><p>The hosts table must have an entry for the new client system, the
DHCP server system.</p>
</li>
</ul>
<p>"Setting Up NIS+ Client Machines" in <i>System Administration Guide: Naming and Directory Services (NIS+)</i> provides detailed
information about configuring an NIS+ client.</p>
<A NAME="dhcp-trouble-6"></A><h4>NIS+ Is Not Adequately Configured for DHCP Data
Store</h4>
<p>After you successfully use NIS+ with DHCP, you might encounter errors if changes
are made to NIS+. The changes could introduce configuration problems. Use the following
explanations of problems and solutions to help you determine the cause of configuration
problems.</p>
<p><b>Problem: </b>Root object does not exist in the NIS+ domain.</p>
<p><b>Solution: </b>Type the following command: </p>
<p><tt>/usr/lib/nis/nisstat</tt></p>
<p><A NAME="indexterm-1551"></A>This command displays statistics for the domain. If the root object does
not exist, no statistics are returned.</p>
<p>Set up the NIS+ domain using the <i>System Administration Guide: Naming and Directory Services (NIS+)</i>.</p>
<p><b>Problem: </b>NIS+ is not used for <tt>passwd</tt> and <tt>publickey</tt> information.</p>
<p><b>Solution: </b>Type the following command to view the configuration file for the name
service switch:</p>
<p><tt>cat /etc/nsswitch.conf</tt></p>
<p>Check the <tt>passwd</tt> and <tt>publickey</tt> entries for the "nisplus"
keyword. Refer to the <i>System Administration Guide: Naming and Directory Services (NIS+)</i> for information about
configuring the name service switch.</p>
<p><b>Problem: </b>The domain name is empty.</p>
<p><b>Solution: </b>Type the following command:</p>
<p><tt>domainname</tt></p>
<p>If the command lists an empty string, no domain name has been set for the domain.
Use local files for your data store, or set up an NIS+ domain for your network. Refer
to the <i>System Administration Guide: Naming and Directory Services (NIS+)</i>.</p>
<p><b>Problem: </b>The <tt>NIS_COLD_START</tt> file does not exist.</p>
<p><b>Solution: </b>Type the following command on the server system to determine if the
file exists:</p>
<p><tt>cat /var/nis/NIS_COLD_START</tt></p>
<p>Use local files for your data store, or create an NIS+ client. Refer to the <i>System Administration Guide: Naming and Directory Services (NIS+)</i>.</p>
<A NAME="dhcp-trouble-11"></A><h4>NIS+ Access Problems for the DHCP Data Store</h4>
<p>NIS+ access problems might cause error messages about incorrect DES credentials,
or inadequate permissions to update NIS+ objects or tables. Use the following explanations
of problems and solutions to determine the cause of NIS+ access errors you receive.</p>
<p><b>Problem: </b>The DHCP server system does not have create access to the <tt>org_dir</tt> object in the NIS+ domain.</p>
<p><b>Solution: </b>Type the following command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>nisls -ld org_dir</b></tt></pre>
</td></table><br><p><A NAME="indexterm-1552"></A>The access rights are listed in the form <tt>r---rmcdrmcdr---</tt>,
where the permissions apply respectively to nobody, owner, group, and world. The owner
of the object is listed next.</p>
<p>Normally, the <tt>org_dir</tt> directory
object provides full rights to both the owner and the group. Full rights consist of
read, modify, create, and destroy. The <tt>org_dir</tt> directory object
provides only read access to the world and nobody classes.</p>
<p>The DHCP server
name must either be listed as the owner of the <tt>org_dir</tt> object,
or be listed as a principal in the group. The group must have create access. List
the group with the command: </p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>nisls -ldg org_dir</b></tt></pre>
</td></table><br><p><A NAME="indexterm-1553"></A>Use the <tt>nischmod</tt> command to change the permissions
for <tt>org_dir</tt> if necessary. For example, to add create access to
the group, you would type the following command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>nischmod g+c org_dir</b></tt></pre>
</td></table><br><p>See the <tt>nischmod</tt>(1) man page for
more information.</p>
<p><b>Problem: </b>The DHCP server does not have access rights to create a table under
the <tt>org_dir</tt> object.</p>
<p>Usually, this problem means the
server system's principal name is not a member of the owning group for the <tt>org_dir</tt> object, or no owning group exists.</p>
<p><b>Solution: </b>Type this command to find the owning group name:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>niscat -o org_dir</b></tt></pre>
</td></table><br><p>Look for a line that is similar to:</p>
<p><tt>Group : "admin.example.com."</tt></p>
<p>List the principal names in the group using the command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>nisgrpadm -l</b></tt> <i>groupname</i></pre>
</td></table><br><p>For example, this command lists the principal names of the group <tt>admin.example.com</tt>:</p>
<p><tt>nisgrpadm -l admin.example.com</tt></p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p93.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p95.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

