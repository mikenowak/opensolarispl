<chapter id="dhcp-admin-9"><title>Administering DHCP (Tasks)</title><highlights><para>This chapter describes tasks that you might find useful when you administer
the Solaris DHCP service. The chapter includes tasks for the server, BOOTP
relay agent, and client. Each task includes a procedure to help you perform
the task in DHCP Manager and a procedure for the equivalent task with DHCP
command-line utilities. DHCP command-line utilities are more fully documented
in man pages.</para><para>You should have already completed the initial configuration of your
DHCP service and initial network before you use this chapter. <olink targetptr="chapter3-20" remap="internal">Chapter&#160;14, Configuring the DHCP Service (Tasks)</olink> discusses
DHCP configuration.</para><para>This chapter contains the following information:</para><itemizedlist><listitem><para><olink targetptr="dhcp-admin-1" remap="internal">About DHCP Manager</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-rbac1211" remap="internal">Setting Up User Access
to DHCP Commands</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-32" remap="internal">Starting and Stopping the
DHCP Service</olink></para>
</listitem><listitem><para><olink targetptr="faayz" remap="internal">DHCP Service and the Service Management
Facility</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-51" remap="internal">Modifying DHCP Service Options
(Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-15" remap="internal">Adding, Modifying, and Removing
DHCP Networks (Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-94" remap="internal">Supporting BOOTP Clients
With the DHCP Service (Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-124" remap="internal">Working With IP Addresses
in the DHCP Service (Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-125" remap="internal">Working With DHCP Macros
(Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-206" remap="internal">Working With DHCP Options
(Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-38" remap="internal">Supporting Solaris Network
Installation With the DHCP Service</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-122" remap="internal">Supporting Remote Boot and
Diskless Boot Clients (Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-1211" remap="internal">Setting Up DHCP Clients
to Receive Information Only (Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-cv1211" remap="internal">Converting to a New DHCP
Data Store</olink></para>
</listitem><listitem><para><olink targetptr="dhcp-admin-mv1211" remap="internal">Moving Configuration
Data Between DHCP Servers (Task Map)</olink></para>
</listitem>
</itemizedlist>
</highlights><sect1 id="dhcp-admin-1"><title>About DHCP Manager</title><para>DHCP Manager is a graphical user interface (GUI) tool that you can use
to perform administration tasks on the DHCP service.</para><sect2 id="dhcp-admin-2"><title>DHCP Manager Window</title><para>The DHCP Manager window's appearance depends on how the DHCP server
is configured on the system on which DHCP Manager is running.</para><itemizedlist><para>DHCP Manager uses a tab-based window when the system is configured
as a DHCP server. You select a tab for the type of information you want to
work with. DHCP Manager features the following tabs:</para><listitem><para><emphasis role="strong">Addresses</emphasis>tab &#8211; Lists
all networks and IP addresses placed under DHCP management. From the Addresses
tab, you can work with networks and IP addresses. You can add or delete items
individually or in blocks. You can also modify the properties of individual
networks or IP addresses or simultaneously make the same property modifications
for a block of addresses. When you start DHCP Manager, the Addresses tab opens
first.</para>
</listitem><listitem><para><emphasis role="strong">Macros</emphasis> tab &#8211; Lists
all available macros in the DHCP configuration table (<literal>dhcptab</literal>)
and the options contained within the macros. From the Macros tab, you can
create or delete macros. You can also modify macros by adding options and
providing values for the options.</para>
</listitem><listitem><para><emphasis role="strong">Options</emphasis> tab &#8211; Lists
all options that have been defined for this DHCP server. Options that are
listed on this tab are not the standard options defined in the DHCP protocol.
The options are extensions to the standard options, and have a class of Extended,
Vendor, or Site. Standard options cannot be changed in any way so those options
are not listed here.</para>
</listitem>
</itemizedlist><para>The following figure shows how the DHCP Manager window might look when
you start DHCP Manager on a DHCP server.</para><figure id="dhcp-admin-fig-223"><title>DHCP Manager on a DHCP Server System</title><mediaobject><imageobject><imagedata entityref="dhcp-addresses-tab.tif"/>
</imageobject><textobject><simpara>Shows Addresses tab with network numbers, client names,
and lease information.</simpara>
</textobject>
</mediaobject>
</figure><para>When the server is configured as a BOOTP relay agent, the DHCP Manager
window does not show these tabs. The BOOTP relay agent does not need the same
information. You can only modify the BOOTP relay agent's properties and stop
or start the DHCP daemon with DHCP Manager. The following figure shows how
DHCP Manager might look on a system that is configured as a BOOTP relay agent.</para><figure id="dhcp-admin-fig-224"><title>DHCP Manager on a BOOTP Relay Agent</title><mediaobject><imageobject><imagedata entityref="dhcp-relay.tif"/>
</imageobject><textobject><simpara>The window displays the BOOTP Relay tab, which tells
you to manage the relay service through the Service menu.</simpara>
</textobject>
</mediaobject>
</figure>
</sect2><sect2 id="dhcp-admin-2sm"><title>DHCP Manager Menus</title><itemizedlist><para>DHCP Manager menus include the following items:</para><listitem><para><emphasis role="strong">File</emphasis> &#8211; Exit DHCP
Manager.</para>
</listitem><listitem><para><emphasis role="strong">Edit</emphasis> &#8211; Perform management
tasks for networks, addresses, macros, and options.</para>
</listitem><listitem><para><emphasis role="strong">View</emphasis> &#8211; Change the
look of the tab currently selected.</para>
</listitem><listitem><para><emphasis role="strong">Service</emphasis> &#8211; Manage
the DHCP daemon and data store.</para>
</listitem><listitem><para><emphasis role="strong">Help</emphasis> &#8211; Open your
web browser and display help for DHCP Manager.</para>
</listitem>
</itemizedlist><para>When DHCP Manager runs on a BOOTP relay agent, the Edit and View menus
are disabled.</para><para>All DHCP management tasks are accomplished through the Edit and Service
menus.</para><para>You use the commands in the Edit menu to create, delete, and modify
items in the selected tab. Items can include networks, addresses, macros,
and options. When the Addresses tab is selected, the Edit menu also lists
wizards. Wizards are sets of dialogs that help you create networks and multiple
IP addresses.</para><itemizedlist><para>The Service menu lists commands that enable you to manage the DHCP daemon.
From the Service menu, you can perform the following tasks:</para><listitem><para>Start and stop the DHCP daemon.</para>
</listitem><listitem><para>Enable and disable the DHCP daemon.</para>
</listitem><listitem><para>Modify the server configuration.</para>
</listitem><listitem><para>Unconfigure the server.</para>
</listitem><listitem><para>Convert the data store.</para>
</listitem><listitem><para>Export and import data on the server.</para>
</listitem>
</itemizedlist>
</sect2><sect2 id="dhcp-admin-12"><title>Starting and Stopping DHCP Manager</title><para>You must run DHCP Manager on a DHCP server system as superuser. If you
must run DHCP Manager remotely, you can send the display to your system by
using the X Window remote display feature.</para>
</sect2><task id="dhcp-admin-4"><title>How to Start and Stop DHCP Manager</title><procedure><step id="dhcp-admin-step-226sm"><para>Become superuser on the DHCP server system.</para>
</step><step performance="optional" id="dhcp-admin-step-13"><para>If you are logged
in to the DHCP server system remotely, display DHCP Manager on your local
system as follows.</para><substeps><step id="dhcp-admin-step-217sm"><para>Type the following on the local system:</para><screen># <userinput>xhost +</userinput><replaceable>server-name</replaceable></screen>
</step><step id="dhcp-admin-step-207"><para>Type the following on the remote DHCP
server system:</para><screen># <userinput>DISPLAY=<replaceable>local-hostname;</replaceable>export DISPLAY</userinput></screen>
</step>
</substeps>
</step><step id="dhcp-admin-step-227sm"><para>Start DHCP Manager.</para><screen># <userinput>/usr/sadm/admin/bin/dhcpmgr &#38;</userinput></screen><para>The DHCP Manager window opens. If the server is configured as a DHCP
server, the window displays the Addresses tab. If the server is configured
as a BOOTP relay agent, the window displays with no tabs.</para>
</step><step id="dhcp-admin-step-517"><para>To stop DHCP Manager, choose Exit from
the File menu.</para><para>The DHCP Manager window closes.</para>
</step>
</procedure>
</task>
</sect1><sect1 id="dhcp-admin-rbac1211"><title>Setting Up User Access to DHCP Commands</title><para>By default, only root or superuser can execute <literal>dhcpconfig</literal>, <literal>dhtadm</literal>, and <literal>pntadm</literal> commands. If you want non
root users to use the commands, you can set up role-based access control (RBAC)
for those commands.</para><para>Roles contain authorizations and privileged commands. For more information
about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.</para><para>You might also find the following man pages helpful: <olink targetdoc="refman5" targetptr="rbac-5" remap="external"><citerefentry><refentrytitle>rbac</refentrytitle><manvolnum>5</manvolnum></citerefentry></olink>, <olink targetdoc="refman4" targetptr="exec-attr-4" remap="external"><citerefentry><refentrytitle>exec_attr</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink>, and <olink targetdoc="refman4" targetptr="user-attr-4" remap="external"><citerefentry><refentrytitle>user_attr</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink>.</para><para>The following procedure explains how to assign the DHCP Management profile,
which enables the user to execute the DHCP commands.</para><task id="dhcp-admin-518"><title>How to Grant Users Access to DHCP Commands</title><procedure><step id="dhcp-admin-step-520"><para>Become superuser on the DHCP server system.</para>
</step><step id="dhcp-admin-step-521"><para>Edit the file <literal>/etc/user_attr</literal> to
add an entry of the following form. Add one entry for each user or role that
should manage the DHCP service.</para><screen><replaceable>username</replaceable>::::type=normal;profiles=DHCP Management</screen><para>For example, for user <literal>ram</literal>, you would add the following
entry:</para><para><literal>ram::::type=normal;profiles=DHCP Management</literal></para>
</step>
</procedure>
</task>
</sect1><sect1 id="dhcp-admin-32"><title>Starting and Stopping the DHCP Service</title><para>This section describes starting and stopping the DHCP service by using
DHCP Manager and the <command>dhcpconfig</command> command. The DHCP service
can also be started and stopped by using the Service Management Facility (SMF)
commands. See <olink targetptr="faayz" remap="internal">DHCP Service and the Service Management
Facility</olink> for more information about using SMF commands with the DHCP
service.</para><itemizedlist><para>Starting and stopping the DHCP service encompasses several degrees of
action you can take to affect the operation of the DHCP daemon. You must understand
what each action means in order to select the correct procedure to obtain
the result that you want. The terms for the actions are as follows:</para><listitem><para><emphasis role="strong">Start, stop, and restart commands</emphasis> affect
the daemon only for the current session. For example, if you stop the DHCP
service, the daemon terminates but restarts when you reboot the system. DHCP
data tables are not affected when you stop the service. You can use DHCP Manager
or SMF commands to temporarily start and stop the DHCP service without enabling
and disabling the service.</para>
</listitem><listitem><para><emphasis role="strong">Enable and disable commands</emphasis> affect
the daemon for current and future sessions. If you disable the DHCP service,
the currently running daemon terminates and does not start when you reboot
the server. You must enable the DHCP daemon for automatic startup at system
boot to occur. DHCP data tables are not affected. You can use DHCP Manager,
the <command>dhcpconfig</command> command, or SMF commands to enable and disable
the DHCP service.</para>
</listitem><listitem><para>The <emphasis role="strong">unconfigure command</emphasis> shuts
down the daemon, prevents the daemon from starting on system reboot, and enables
you to remove the DHCP data tables. You can use DHCP Manager or the <command>dhcpconfig</command> command to unconfigure the DHCP service. Unconfiguration is described
in <olink targetptr="chapter3-20" remap="internal">Chapter&#160;14, Configuring the DHCP Service (Tasks)</olink>.</para>
</listitem>
</itemizedlist><note><para>If a server has multiple network interfaces but you do not want
to provide DHCP services on all the networks, see <olink targetptr="dhcp-admin-93" remap="internal">Specifying Network Interfaces for DHCP Monitoring</olink>.</para>
</note><para>The following procedures help you start, stop, enable, and disable the
DHCP service.</para><task id="dhcp-admin-109"><title>How to Start and Stop the DHCP Service (DHCP
Manager)</title><procedure><step id="dhcp-admin-step-35sm"><para>Become superuser on the DHCP server
system.</para>
</step><step id="dhcp-admin-step-441"><para>Start DHCP Manager.</para><screen># <userinput>/usr/sadm/admin/bin/dhcpmgr &#38;</userinput></screen>
</step><step id="dhcp-admin-step-45"><para>Select one of the following:</para><stepalternatives><step><para>Choose Start from the Service menu to start the DHCP service.</para>
</step><step><para>Choose Stop from the Service menu to stop the DHCP service.</para><para>The DHCP daemon stops until it is restarted, or the system reboots.</para>
</step><step><para>Choose Restart from the Service menu to stop and immediately restart
the DHCP service.</para>
</step>
</stepalternatives>
</step>
</procedure>
</task><task id="dhcp-admin-7"><title>How to Enable and Disable the DHCP Service
(DHCP Manager)</title><procedure role="single-step"><step id="dhcp-admin-step-48"><para>In DHCP Manager, choose one of the following:</para><stepalternatives><step><para>Choose Enable from the Service menu to configure the DHCP daemon
for automatic startup when the system boots.</para><para>The DHCP service
starts immediately when it is enabled.</para>
</step><step><para>Choose Disable from the Service menu to prevent the DHCP daemon
from automatically starting when the system boots.</para><para>The DHCP service
immediately stops when it is disabled.</para>
</step>
</stepalternatives>
</step>
</procedure>
</task><task id="dhcp-admin-1206"><title>How to Enable and Disable the DHCP Service
(<command>dhcpconfig -S</command>)</title><procedure><step><para>Log in to the DHCP server system.</para>
</step>&roleDHCPstep;<step id="dhcp-admin-step-1208"><para>Choose one of the following:</para><stepalternatives><step><para>To enable the DHCP service, type the following command:</para><screen># <userinput>/usr/sbin/dhcpconfig -S -e</userinput></screen>
</step><step><para>To disable the DHCP service, type the following command:</para><screen># <userinput>/usr/sbin/dhcpconfig -S -d</userinput></screen>
</step>
</stepalternatives>
</step>
</procedure>
</task>
</sect1><sect1 id="faayz"><title>DHCP Service and the Service Management Facility</title><para>The Service Management Facility (SMF) is described in <olink targetdoc="sysadv1" targetptr="hbrunlevels-25516" remap="external">Chapter 14, <citetitle remap="chapter">Managing Services (Overview),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.
The SMF <command>svcadm</command> command can be used to enable and start
the DHCP server, and disable and stop the DHCP server. However, you cannot
use SMF commands to modify the DHCP service options that the DHCP tools allow
you to set. In particular, service options that are stored in the <filename>/etc/dhcp/dhcpsvc.conf</filename> file cannot be set by using the SMF tools.</para><para>The following table maps DHCP commands to the equivalent SMF commands.</para><table frame="topbot" id="fahqn"><title>SMF Commands For DHCP Server Tasks</title><tgroup cols="3" colsep="0" rowsep="0"><colspec colwidth="28.94*"/><colspec colwidth="40.92*"/><colspec colname="colspec0" colwidth="80.12*"/><thead><row rowsep="1"><entry><para>Task</para>
</entry><entry><para>DHCP Command</para>
</entry><entry><para>SMF Command</para>
</entry>
</row>
</thead><tbody><row><entry><para>Enable DHCP service</para>
</entry><entry><para><literal>dhcpconfig -S -e</literal></para>
</entry><entry><para><command>svcadm enable svc:/network/dhcp-server</command></para>
</entry>
</row><row><entry><para>Disable DHCP service</para>
</entry><entry><para><literal>dhcpconfig -S -d</literal></para>
</entry><entry><para><command>svcadm disable svc:/network/dhcp-server</command></para>
</entry>
</row><row><entry><para>Start DHCP service for current session only</para>
</entry><entry><para>None</para>
</entry><entry><para><command>svcadm enable -t svc:/network/dhcp-server</command></para>
</entry>
</row><row><entry><para>Stop DHCP service for current session</para>
</entry><entry><para>None</para>
</entry><entry><para><command>svcadm disable -t svc:/network/dhcp-server</command></para>
</entry>
</row><row><entry><para>Restart DHCP service</para>
</entry><entry><para><literal>dhcpconfig -S -r</literal></para>
</entry><entry><para><command>svcadm restart svc:/network/dhcp-server</command></para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect1><sect1 id="dhcp-admin-51"><title>Modifying DHCP Service Options (Task Map)</title><para>You can change values for some additional features of the DHCP
service, which might not have been offered during the initial configuration
with DHCP Manager. To change service options, you can use the Modify Service
Options dialog box in DHCP Manager. Or you can specify options with the <literal>dhcpconfig</literal> command.</para><para>The following task map shows the tasks related to service options
and the procedures to use.</para><informaltable frame="all" pgwide="1"><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec0" colwidth="28.38*"/><colspec colname="colspec1" colwidth="28.38*"/><colspec colname="colspec2" colwidth="42.24*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Change logging options.</para>
</entry><entry><para>Enable or disable logging, and select a <literal>syslog</literal> facility
to use for logging DHCP transactions.</para>
</entry><entry><para><olink targetptr="dhcp-admin-119" remap="internal">How to Generate Verbose DHCP Log Messages
(DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-118" remap="internal">How to Generate Verbose DHCP Log Messages
(Command Line)</olink></para><para><olink targetptr="dhcp-admin-117" remap="internal">How to Enable and Disable DHCP Transaction
Logging (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-16" remap="internal">How to Enable and Disable DHCP Transaction
Logging (Command Line)</olink></para><para><olink targetptr="dhcp-admin-14" remap="internal">How to Log DHCP Transactions to a Separate
syslog File</olink></para>
</entry>
</row><row><entry><para>Change DNS update options.</para>
</entry><entry><para>Enable or disable server's capability to dynamically add DNS entries
for clients that supply a host name. Determine the maximum time the server
should spend attempting to update DNS.</para>
</entry><entry><para><olink targetptr="dhcp-admin-303" remap="internal">How to Enable Dynamic DNS Updating
for DHCP Clients</olink></para>
</entry>
</row><row><entry><para>Enable or disable duplicate IP address detection.</para>
</entry><entry><para>Enable or disable the DHCP server's capability to determine that an
IP address is not already in use before offering the address to a client.</para>
</entry><entry><para><olink targetptr="dhcp-admin-121" remap="internal">How to Customize DHCP Performance
Options (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-20" remap="internal">How to Customize DHCP Performance Options
(Command Line)</olink></para>
</entry>
</row><row><entry><para>Change options for the DHCP server's reading of configuration information.</para>
</entry><entry><para>Enable or disable the automatic reading of <literal>dhcptab</literal> at
specified intervals, or change the interval between reads.</para>
</entry><entry><para><olink targetptr="dhcp-admin-121" remap="internal">How to Customize DHCP Performance
Options (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-20" remap="internal">How to Customize DHCP Performance Options
(Command Line)</olink></para>
</entry>
</row><row><entry><para>Change the number of relay agent hops.</para>
</entry><entry><para>Increase or decrease the number of networks a request can travel through
before being dropped by the DHCP daemon.</para>
</entry><entry><para><olink targetptr="dhcp-admin-121" remap="internal">How to Customize DHCP Performance
Options (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-20" remap="internal">How to Customize DHCP Performance Options
(Command Line)</olink></para>
</entry>
</row><row><entry><para>Change the length of time an IP address offer is cached.</para>
</entry><entry><para>Increase or decrease the number of seconds that the DHCP service reserves
an offered IP address before offering the address to a new client.</para>
</entry><entry><para><olink targetptr="dhcp-admin-121" remap="internal">How to Customize DHCP Performance
Options (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-20" remap="internal">How to Customize DHCP Performance Options
(Command Line)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>The following figure shows DHCP Manager's Modify Service Options dialog
box.</para><figure id="dhcp-admin-fig-225"><title>Modify Service Options Dialog Box in
DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-modify-serv.tif"/>
</imageobject><textobject><simpara>Dialog box shows the Options tab with many options fields
and check boxes. The context describes the purpose of the dialog box.</simpara>
</textobject>
</mediaobject>
</figure><sect2 id="dhcp-admin-52"><title>Changing DHCP Logging Options</title><para>The DHCP service can log DHCP service messages and DHCP transactions
to <literal>syslog</literal>. See the <olink targetdoc="refman1m" targetptr="syslogd-1m" remap="external"><citerefentry><refentrytitle>syslogd</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> and <olink targetdoc="refman4" targetptr="syslog.conf-4" remap="external"><citerefentry><refentrytitle>syslog.conf</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink> man pages for more information
about <literal>syslog</literal>.</para><itemizedlist><para>DHCP service messages logged to <literal>syslog</literal> include the
following:</para><listitem><para>Error messages, which notify you of conditions that prevent
the DHCP service from fulfilling a request by a client or by you.</para>
</listitem><listitem><para>Warnings and notices, which notify you of conditions that
are abnormal, but do not prevent the DHCP service from fulfilling a request.</para>
</listitem>
</itemizedlist><para>You can increase the amount of information that is reported by using
the verbose option for the DHCP daemon. Verbose message output can help you
troubleshoot DHCP problems. See <olink targetptr="dhcp-admin-119" remap="internal">How to Generate
Verbose DHCP Log Messages (DHCP Manager)</olink>.</para><itemizedlist><para>Another useful troubleshooting technique is transaction logging.
Transactions provide information about every interchange between a DHCP server
or BOOTP relay and clients. DHCP transactions include the following message
types:</para><listitem><para>ASSIGN &#8211; IP address assignment </para>
</listitem><listitem><para>ACK &#8211; Server acknowledges that the client accepts the
offered IP address, and sends configuration parameters</para>
</listitem><listitem><para>EXTEND &#8211; Lease extension</para>
</listitem><listitem><para>RELEASE &#8211; IP address release</para>
</listitem><listitem><para>DECLINE &#8211; Client is declining address assignment </para>
</listitem><listitem><para>INFORM &#8211; Client is requesting network configuration
parameters but not an IP address</para>
</listitem><listitem><para>NAK &#8211; Server does not acknowledge a client's request
to use a previously used IP address</para>
</listitem><listitem><para>ICMP_ECHO &#8211; Server detects potential IP address is already
in use by another host</para>
</listitem>
</itemizedlist><itemizedlist><para>BOOTP relay transactions include the following message types:</para><listitem><para>RELAY-CLNT &#8211; Message is being relayed from the DHCP
client to a DHCP server</para>
</listitem><listitem><para>RELAY&#8211;SRVR &#8211; Message is being relayed from the
DHCP server to the DHCP client</para>
</listitem>
</itemizedlist><para>DHCP transaction logging is disabled by default. When enabled, DHCP
transaction logging uses the <literal>local0</literal> facility in <literal>syslog</literal> by default. DHCP transaction messages are generated with a <literal>syslog</literal> severity level of <firstterm>notice</firstterm>. This security
level causes DHCP transactions to be logged to the file where other system
notices are logged. However, because the <literal>local</literal> facility
is used, the DHCP transaction messages can be logged separately from other
notices. To log the transaction messages separately, you must edit the <literal>syslog.conf</literal> file to specify a separate log file. See the <olink targetdoc="refman4" targetptr="syslog.conf-4" remap="external"><citerefentry><refentrytitle>syslog.conf</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink> man page for
more information about the <literal>syslog.conf</literal> file.</para><para>You can disable or enable transaction logging, and you can specify a
different <literal>syslog</literal> facility, from <literal>local0</literal> through <literal>local7</literal>, as explained in <olink targetptr="dhcp-admin-117" remap="internal">How to
Enable and Disable DHCP Transaction Logging (DHCP Manager)</olink>. In the
server system's <literal>syslog.conf</literal> file, you can also instruct <literal>syslogd</literal> to store the DHCP transaction messages in a separate file.
See <olink targetptr="dhcp-admin-14" remap="internal">How to Log DHCP Transactions to a Separate
syslog File</olink> for more information.</para>
</sect2><task id="dhcp-admin-119"><title>How to Generate Verbose DHCP Log Messages
(DHCP Manager)</title><procedure><step id="dhcp-admin-step-54"><para>In DHCP Manager, choose Modify from the
Service menu.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start
and Stop DHCP Manager</olink> for information about DHCP Manager.</para><para>The
Modify Service Options dialog box opens and displays the Options tab. See <olink targetptr="dhcp-admin-fig-225" remap="internal">Figure 15&#8211;3</olink>.</para>
</step><step id="dhcp-admin-step-55"><para>Select Verbose Log Messages.</para>
</step><step id="dhcp-admin-step-56"><para>Select Restart Server.</para><para>The
Restart Server option is near the bottom of the dialog box.</para>
</step><step id="dhcp-admin-step-57"><para>Click OK.</para><para>The daemon runs
in verbose mode for this session and each subsequent session until you reset
this option. Verbose mode can reduce daemon efficiency because of the time
that is taken to display messages.</para>
</step>
</procedure>
</task><task id="dhcp-admin-118"><title>How to Generate Verbose DHCP Log Messages
(Command Line)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-516"><para>Type the following command to set verbose
mode:</para><screen># <userinput>/usr/sbin/dhcpconfig -P VERBOSE=true</userinput></screen><para>The next time the DHCP server starts, the server runs in verbose mode
until you turn off verbose mode.</para><para>To turn off verbose mode, type
the following command:</para><screen># <userinput>/usr/sbin/dhcpconfig -P VERBOSE=</userinput></screen><para>This command sets the <literal>VERBOSE</literal> keyword to no value,
which causes the keyword to be removed from the server's configuration file.</para><para>Verbose mode can reduce daemon efficiency because of the time that is
taken to display messages.</para>
</step>
</procedure>
</task><task id="dhcp-admin-117"><title>How to Enable and Disable DHCP Transaction
Logging (DHCP Manager)</title><tasksummary><para>This procedure enables and disables transaction logging for all subsequent
DHCP server sessions.</para>
</tasksummary><procedure><step id="dhcp-admin-step-63sm"><para>In DHCP Manager, choose Modify from
the Service menu.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start
and Stop DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-64"><para>Select Log Transactions to Syslog Facility.</para><para>To disable transaction logging, deselect this option.</para>
</step><step performance="optional" id="dhcp-admin-step-65"><para>Select a local
facility from 0 to 7 to use for logging DHCP transactions.</para><para>By
default, DHCP transactions are logged to the location where system notices
are logged, which depends on how <literal>syslogd</literal> is configured.
If you want the DHCP transactions to be logged to a file separate from other
system notices, see <olink targetptr="dhcp-admin-14" remap="internal">How to Log DHCP Transactions
to a Separate syslog File</olink>.</para><para>Message files can quickly become
very large when transaction logging is enabled.</para>
</step><step id="dhcp-admin-step-66sm"><para>Select Restart Server.</para>
</step><step id="dhcp-admin-step-132"><para>Click OK.</para><para>The daemon logs
transactions to the selected <literal>syslog</literal> facility for this session
and each subsequent session until you disable logging.</para>
</step>
</procedure>
</task><task id="dhcp-admin-16"><title>How to Enable and Disable DHCP Transaction
Logging (Command Line)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-274sm"><para>Choose one of the following steps:</para><stepalternatives><step><para>To enable DHCP transaction logging, type the following command:</para><screen># <userinput>/usr/sbin/dhcpconfig -P LOGGING_FACILITY=<replaceable>syslog-local-facility</replaceable></userinput></screen><para><replaceable>syslog-local-facility</replaceable> is a number from 0
through 7. If you omit this option, 0 is used.</para><para>By default, DHCP
transactions are logged to the location where system notices are logged, which
depends on how <literal>syslogd</literal> is configured. If you want the DHCP
transactions to be logged to a file separate from other system notices, see <olink targetptr="dhcp-admin-14" remap="internal">How to Log DHCP Transactions to a Separate syslog
File</olink>.</para><para>Message files can quickly become very large when
transaction logging is enabled.</para>
</step><step id="dhcp-admin-step-1210"><para>To disable DHCP transaction logging,
type the following command:</para><screen># <userinput>/usr/sbin/dhcpconfig -P LOGGING_FACILITY=</userinput></screen><para>Note that you supply no value for the parameter.</para>
</step>
</stepalternatives>
</step>
</procedure>
</task><task id="dhcp-admin-14"><title>How to Log DHCP Transactions to a Separate <literal>syslog</literal> File</title><procedure><step><para>Become superuser or assume an equivalent role on the DHCP server
system.</para><para>Roles contain authorizations and privileged commands.
For more information about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.</para><para>A role that is assigned to the DHCP
Management profile might not be sufficient for this task. The role must have
permission to edit <literal>syslog</literal> files.</para>
</step><step id="dhcp-admin-step-68"><para>Edit the <literal>/etc/syslog.conf</literal> file
on the server system to add a line of the following format:</para><screen>local<replaceable>n</replaceable>.notice     <replaceable>path-to-logfile</replaceable></screen><para><replaceable>n</replaceable> is the <literal>syslog</literal> facility
number you specified for transaction logging, and <replaceable>path-to-logfile</replaceable> is
the complete path to the file to use for logging transactions.</para><para>For
example, you might add the following line:</para><para><literal>local0.notice
   /var/log/dhcpsrvc</literal></para><para>See the <olink targetdoc="refman4" targetptr="syslog.conf-4" remap="external"><citerefentry><refentrytitle>syslog.conf</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink> man page for more information
about the <literal>syslog.conf</literal> file.</para>
</step>
</procedure>
</task><sect2 id="dhcp-admin-202"><title>Enabling Dynamic
DNS Updates by a DHCP Server</title><para>DNS provides name-to-address and address-to-name services for the Internet.
Once a DNS mapping is made, a system can be reached through its host name
or its IP address. The system is also reachable from outside its domain.</para><itemizedlist><para>The DHCP service can use DNS in two ways:</para><listitem><para>The DHCP server can look up the host name that is mapped to
an IP address that the server is assigning to the client. The server then
returns the client's host name along with the client's other configuration
information.</para>
</listitem><listitem><para>The DHCP server can attempt to make a DNS mapping on a client's
behalf, if the DHCP server is configured to update DNS. The client can supply
its own host name when requesting DHCP service. If configured to make DNS
updates, the DHCP server attempts to update DNS with the client's suggested
host name. If the DNS update is successful, the DHCP server returns the requested
host name to the client. If the DNS update is not successful, the DHCP server
returns a different host name to the client.</para>
</listitem>
</itemizedlist><para>You can enable the DHCP service to update the DNS service for DHCP clients
that supply their own host names. For the DNS update feature to work, the
DNS server, the DHCP server, and the DHCP client must be set up correctly.
In addition, the requested host name must not be in use by another system
in the domain.</para><itemizedlist><para>The DHCP server's DNS update feature works if the following statements
are true:</para><listitem><para>The DNS server supports RFC 2136.</para>
</listitem><listitem><para>The DNS software is based on BIND v8.2.2, patch level 5 or
later, whether on the DHCP server system or the DNS server system.</para>
</listitem><listitem><para>The DNS server is configured to accept dynamic DNS updates
from the DHCP server.</para>
</listitem><listitem><para>The DHCP server is configured to make dynamic DNS updates.</para>
</listitem><listitem><para>DNS support is configured for the DHCP client's network on
the DHCP server.</para>
</listitem><listitem><para>The DHCP client is configured to supply a requested host name
in its DHCP request message.</para>
</listitem><listitem><para>The requested host name corresponds to a DHCP-owned address.
The host name could also have no corresponding address.</para>
</listitem>
</itemizedlist>
</sect2><task id="dhcp-admin-303"><title>How to Enable Dynamic DNS Updating for DHCP
Clients</title><tasksummary><note><para>Be aware that dynamic DNS updates are a <emphasis>security risk</emphasis>.</para><para>By default, the Solaris DNS daemon (<literal>in.named</literal>)
does not allow dynamic updates. Authorization for dynamic DNS updates is granted
in the <filename>named.conf</filename> configuration file on the DNS server
system. No other security is provided. You must carefully weigh the convenience
of this facility for users against the security risk created when you enable
dynamic DNS updates.</para>
</note>
</tasksummary><procedure><step id="dhcp-admin-step-14"><para>On the DNS server, edit the <literal>/etc/named.conf</literal> file as superuser.</para>
</step><step id="dhcp-admin-step-1212"><para>Find the <literal>zone</literal> section
for the appropriate domain in the <literal>named.conf</literal> file.</para>
</step><step id="dhcp-admin-step-505"><para>Add the DHCP server's IP addresses to
the <literal>allow-update</literal> keyword.</para><para>If the <literal>allow-update</literal> keyword does not exist, insert the keyword.</para><para>For example,
if the DHCP server resides at addresses <literal>10.0.0.1</literal> and <literal>10.0.0.2</literal>, a <literal>named.conf</literal> file for the <literal>dhcp.domain.com</literal> zone should be modified as follows: </para><screen>zone "dhcp.domain.com" in {
             type master;
             file "db.dhcp";
             allow-update { 10.0.0.1; 10.0.0.2; }; 
};  
 
zone "10.IN-ADDR.ARPA" in {
             type master;
             file "db.10"; 
             allow-update { 10.0.0.1; 10.0.0.2; };
}; </screen><para>Note that <literal>allow-update</literal> for both zones must be enabled
to allow the DHCP server to update both A and PTR records on the DNS server.</para>
</step><step id="dhcp-admin-step-506"><para>On the DHCP server, start DHCP Manager.</para><screen># <userinput>/usr/sadm/admin/bin/dhcpmgr &#38;</userinput></screen><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
more detailed information.</para>
</step><step id="dhcp-admin-step-507"><para>Choose Modify from the Service menu.</para><para>The Modify Service Options dialog box opens.</para>
</step><step id="dhcp-admin-step-508"><para>Select Update DNS Host Information Upon
Client Request.</para>
</step><step id="dhcp-admin-step-19"><para>Specify the number of seconds to wait
for a response from the DNS server before timing out, then click OK.</para><para>The default value of 15 seconds should be adequate. If you have time
out problems, you can increase the value later.</para>
</step><step id="dhcp-admin-step-20"><para>Click the Macros tab, and ensure that
the correct DNS domain is specified.</para><para>The <literal>DNSdmain</literal> option
must be passed with the correct domain name to any client that expects dynamic
DNS update support. By default, <literal>DNSdmain</literal> is specified in
the server macro, which is used as the configuration macro bound to each IP
address.</para>
</step><step id="dhcp-admin-step-21"><para>Set up the DHCP client to specify its
host name when requesting DHCP service.</para><para>If you use the Solaris
DHCP client, see <olink targetptr="dhcp-admin-1058sm" remap="internal">How to Enable a Solaris
Client to Request a Specific Host Name</olink>. If your client is not a Solaris
DHCP client, see the documentation for your DHCP client for information about
how to specify a host name.</para>
</step>
</procedure>
</task><sect2 id="dhcp-overview-5sm"><title>Client Host Name Registration</title><para>If you let the DHCP server generate host names for the IP addresses
that you place in the DHCP service, the DHCP server can register those host
names in NIS+, <literal>/etc/inet/hosts</literal>, or DNS name services. Host
name registration cannot be done in NIS because NIS does not provide a protocol
to allow programs to update and propagate NIS maps.</para><note><para>The DHCP server can update DNS with generated host names only
if the DNS server and the DHCP server are running on the same system.</para>
</note><para>If a DHCP client provides its host name and the DNS server is configured
to allow dynamic updates from the DHCP server, the DHCP server can update
DNS on the client's behalf. Dynamic updates can be done even if the DNS and
DHCP servers are running on different systems. See <olink targetptr="dhcp-admin-202" remap="internal">Enabling Dynamic DNS Updates by a DHCP Server</olink> for
more information about enabling this feature.</para><para>The following table summarizes client host name registration for
DHCP client systems with the various name services.</para><table frame="topbot" id="dhcp-overview-tbl-4"><title>Client Host Name Registration
in Name Services</title><tgroup cols="3" colsep="0" rowsep="0"><colspec colname="colspec5" colwidth="21.12*"/><colspec colname="colspec6" colwidth="38.94*"/><colspec colname="colspec7" colwidth="38.94*"/><thead><row><entry>
</entry><entry namest="colspec6" nameend="colspec7" align="center"><para>Who Registers Host Name</para>
</entry>
</row><row><entry rowsep="1"><para>Name Service</para>
</entry><entry rowsep="1"><para>DHCP-Generated Host Name</para>
</entry><entry rowsep="1"><para>DHCP Client-Supplied Host Name</para>
</entry>
</row>
</thead><tbody><row><entry><para>NIS</para>
</entry><entry><para>NIS Administrator</para>
</entry><entry><para>NIS Administrator</para>
</entry>
</row><row><entry><para>NIS+</para>
</entry><entry><para>DHCP tools</para>
</entry><entry><para>DHCP tools</para>
</entry>
</row><row><entry><para><literal>/etc/hosts</literal></para>
</entry><entry><para>DHCP tools</para>
</entry><entry><para>DHCP tools</para>
</entry>
</row><row><entry><para>DNS</para>
</entry><entry><para>DHCP tools, if the DNS server runs on the same system as the DHCP server</para><para>DNS Administrator, if the DNS server runs on a different system</para>
</entry><entry><para>DHCP server, if configured for dynamic DNS updates</para><para>DNS Administrator, if DHCP server is not configured for dynamic DNS
updates</para>
</entry>
</row>
</tbody>
</tgroup>
</table><para>Solaris DHCP clients can request particular host names in DHCP requests
if configured to do so as described in <olink targetptr="dhcp-admin-1058sm" remap="internal">How
to Enable a Solaris Client to Request a Specific Host Name</olink>. Refer
to the vendor documentation for other DHCP clients to determine if the capability
is supported.</para>
</sect2><sect2 id="dhcp-admin-76"><title>Customizing Performance Options for the DHCP
Server</title><para>You can change options that affect the performance of the DHCP server.
These options are described in the following table.</para><table frame="topbot" pgwide="1" id="dhcp-admin-tbl-276"><title>Options Affecting
DHCP Server Performance</title><tgroup cols="3" colsep="0" rowsep="0"><colspec colname="colspec0" colwidth="119*"/><colspec colname="colspec1" colwidth="252*"/><colspec colname="colspec2" colwidth="156*"/><thead><row rowsep="1"><entry><para>Server Option</para>
</entry><entry><para>Description</para>
</entry><entry><para>Keyword</para>
</entry>
</row>
</thead><tbody><row><entry><para>Maximum number of BOOTP relay agent hops</para>
</entry><entry><para>If a request has traveled through more than a given number of
BOOTP relay agents, the request is dropped. The default maximum number of
relay agent hops is four. This number is likely to be sufficient for most
networks. A network might need more than four hops if DHCP requests pass through
several BOOTP relay agents before reaching a DHCP server.</para>
</entry><entry><para><literal>RELAY_HOPS=</literal><replaceable>integer</replaceable></para>
</entry>
</row><row><entry><para>Detect duplicate addresses</para>
</entry><entry><para>By default, the server pings an IP address before offering the
address to a client. A lack of response to the ping verifies that the address
is not already in use. You can disable this feature to decrease the time that
the server takes to make an offer. However, disabling the feature creates
the risk of having duplicate IP addresses in use.</para>
</entry><entry><para><literal>ICMP_VERIFY=TRUE/FALSE</literal></para>
</entry>
</row><row><entry><para>Reload <literal>dhcptab</literal> automatically at specified intervals</para>
</entry><entry><para>The server can be set to automatically read the <literal>dhcptab</literal> at
the interval, in minutes, that you specify. If your network configuration
information does not change frequently, and you do not have multiple DHCP
servers, you do not need to reload the <literal>dhcptab</literal> automatically.
Also, note that DHCP Manager gives you the option to have the server reload
the <literal>dhcptab</literal> after you make a change to the data.</para>
</entry><entry><para><literal>RESCAN_INTERVAL=</literal><replaceable>min</replaceable></para>
</entry>
</row><row><entry><para>Cache offers of IP addresses for specified intervals</para>
</entry><entry><para>After a server offers an IP address to a client, the offer is
cached. While the offer is cached, the server does not offer the address again.
You can change the number of seconds for which the offer is cached. The default
is 10 seconds. On slow networks, you might need to increase the offer time.</para>
</entry><entry><para><literal>OFFER_CACHE_TIMEOUT=</literal><replaceable>sec</replaceable></para>
</entry>
</row>
</tbody>
</tgroup>
</table><para>The following procedures describe how to change these options.</para>
</sect2><task id="dhcp-admin-121"><title>How to Customize DHCP Performance Options
(DHCP Manager)</title><procedure><step id="dhcp-admin-step-25"><para>In DHCP Manager, choose Modify from the
Service menu.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start
and Stop DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-26"><para>Change the desired options.</para><para>See <olink targetptr="dhcp-admin-tbl-276" remap="internal">Table 15&#8211;3</olink> for information about
the options.</para>
</step><step id="dhcp-admin-step-30"><para>Select Restart Server.</para>
</step><step id="dhcp-admin-step-31"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-20"><title>How to Customize DHCP Performance Options
(Command Line)</title><tasksummary><para>If you change options with this procedure, the changed options are used
only after the DHCP server is restarted.</para>
</tasksummary><procedure>&roleDHCPstep;<step id="dhcp-admin-step-35"><para>Modify one or more performance options:</para><screen># <userinput>/usr/sbin/dhcpconfig -P <replaceable>keyword=value,keyword=value...</replaceable></userinput></screen><para><replaceable>keyword=value</replaceable> can be any of the following
keywords:</para><variablelist termlength="wide"><varlistentry><term><literal>RELAY_HOPS=</literal><replaceable>integer</replaceable></term><listitem><para>Specifies the maximum number of relay agent hops that can
occur before the daemon drops the DHCP or BOOTP datagram.</para>
</listitem>
</varlistentry><varlistentry><term><literal>ICMP_VERIFY=TRUE/FALSE</literal></term><listitem><para>Enables or disables automatic duplicate IP address detection.
Setting this keyword to <literal>FALSE</literal> is not recommended.</para>
</listitem>
</varlistentry><varlistentry><term><literal>RESCAN_INTERVAL=</literal><replaceable>minutes</replaceable></term><listitem><para>Specifies the interval in minutes that the DHCP server should
use to schedule the automatic rereading of the <literal>dhcptab</literal> information.</para>
</listitem>
</varlistentry><varlistentry><term><literal>OFFER_CACHE_TIMEOUT=</literal><replaceable>seconds</replaceable></term><listitem><para>Specifies the number of seconds the DHCP server should cache
the offers that are extended to discovering DHCP clients. The default setting
is 10 seconds.</para>
</listitem>
</varlistentry>
</variablelist>
</step>
</procedure><example id="ewasm"><title>Setting DHCP Performance Options</title><para>The following is an example of how to specify all the command options.</para><screen># <userinput>dhcpconfig -P RELAY_HOPS=2,ICMP_VERIFY=TRUE,\
RESCAN_INTERVAL=30,OFFER_CACHE_TIMEOUT=20</userinput></screen>
</example>
</task>
</sect1><sect1 id="dhcp-admin-15"><title>Adding, Modifying, and Removing DHCP Networks
(Task Map)</title><para>When you configure a DHCP server, you must also configure at least one
network in order to use the DHCP service. You can add more networks at any
time.</para><para>The following task map lists tasks that you can perform when working
with DHCP networks. The task map includes links to procedures for carrying
out the tasks.</para><informaltable frame="all" pgwide="1"><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec3" colwidth="23.25*"/><colspec colname="colspec4" colwidth="34.70*"/><colspec colname="colspec5" colwidth="41.04*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Enable or disable the DHCP service on server network interfaces</para>
</entry><entry><para>The default behavior is to monitor all network interfaces for DHCP requests.
If you do not want all interfaces to accept DHCP requests, you can remove
an interface from the list of monitored interfaces.</para>
</entry><entry><para><olink targetptr="dhcp-admin-123" remap="internal">How to Specify Network Interfaces
for DHCP Monitoring (DHCP Manager)</olink></para>
</entry>
</row><row><entry><para>Add a new network to the DHCP service.</para>
</entry><entry><para>Places a network under DHCP management, for the purpose of managing
IP addresses on the network.</para>
</entry><entry><para><olink targetptr="dhcp-admin-24" remap="internal">How to Add a DHCP Network (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-127-1115" remap="internal">How to Add a DHCP Network (dhcpconfig)</olink> </para>
</entry>
</row><row><entry><para>Change parameters of a DHCP-managed network.</para>
</entry><entry><para>Modifies the information that is passed to clients of a particular network.</para>
</entry><entry><para><olink targetptr="dhcp-admin-26" remap="internal">How to Modify the Configuration of
a DHCP Network (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-127" remap="internal">How to Modify the Configuration of
a DHCP Network (dhtadm)</olink></para>
</entry>
</row><row><entry><para>Delete a network from the DHCP service.</para>
</entry><entry><para>Removes a network so that IP addresses on the network are no longer
managed by DHCP.</para>
</entry><entry><para><olink targetptr="dhcp-admin-28" remap="internal">How to Remove a DHCP Network (DHCP
Manager)</olink></para><para><olink targetptr="dhcp-admin-27" remap="internal">How to Remove a DHCP Network (pntadm)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><sect2 id="dhcp-admin-93"><title>Specifying Network Interfaces for DHCP Monitoring</title><para>By default, both <literal>dhcpconfig</literal> and DHCP Manager's Configuration
Wizard configure the DHCP server to monitor all the server system's network
interfaces. If you add a new network interface to the server system, the DHCP
server automatically monitors the new interface when you boot the system.
You can then add any networks to be monitored through the network interface.</para><para>However, you can also specify which network interfaces should be monitored,
and which interfaces should be ignored. You might want to ignore an interface
if you do not want to offer DHCP service on that network.</para><para>If you specify that any interface should be ignored, and then install
a new interface, the DHCP server ignores the new interface. You must add the
new interface to the server's list of monitored interfaces. You can specify
interfaces with DHCP Manager or the <literal>dhcpconfig</literal> utility.</para><para>This section includes procedures that enable you to specify which network
interfaces DHCP should monitor or ignore. The DHCP Manager procedure uses
the Interfaces tab of the DHCP Manager's Modify Service Options dialog box,
which is shown in the following figure.</para><figure id="dhcp-admin-fig-39"><title>Interfaces Tab of Modify Service Options
Dialog Box in DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-modify-serv-int.tif"/>
</imageobject><textobject><simpara>Dialog box lists Monitored and Ignored Interfaces on
left and right with selection arrows between lists. OK, Reset, Cancel, and
Help buttons shown.</simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-123"><title>How to Specify Network Interfaces for DHCP
Monitoring (DHCP Manager)</title><procedure><step id="dhcp-admin-step-134"><para>In DHCP Manager, choose Modify from the
Service menu.</para><para>The Modify Service Options dialog box is displayed.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-41"><para>Select the Interfaces tab.</para>
</step><step id="dhcp-admin-step-1213"><para>Select the appropriate network interface.</para>
</step><step id="dhcp-admin-step-42"><para>Click the arrow buttons to move the interface
to the appropriate list.</para><para>For example, to ignore an interface,
select the interface in the Monitored Interfaces list, and then click the
right arrow button. The interface is then shown in the Ignored Interfaces
list.</para>
</step><step id="dhcp-admin-step-43"><para>Select Restart Server, and click OK.</para><para>The changes you make persist across reboots.</para>
</step>
</procedure>
</task><task id="dhcp-admin-1214"><title>How to Specify Network Interfaces for DHCP
Monitoring (<literal>dhcpconfig</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-1216"><para>Type the following command on the DHCP
server system:</para><screen># <userinput>/usr/sbin/dhcpconfig -P INTERFACES=<replaceable>int,int,...</replaceable></userinput></screen><para><replaceable>int, int,...</replaceable> is a list of interfaces to monitor.
The interface names must be separated by commas.</para><para>For example,
you would use the following command to monitor only <literal>ge0</literal> and <literal>ge1</literal>:</para><screen>#<userinput>/usr/sbin/dhcpconfig -P INTERFACES=ge0,ge1</userinput></screen><para>Interfaces that you want to ignore should be omitted from the <command>dhcpconfig</command> command line.</para><para>The changes you make with this command
persist across reboots.</para>
</step>
</procedure>
</task><sect2 id="dhcp-admin-17"><title>Adding DHCP Networks</title><para>When you use DHCP Manager to configure the server, the first network
is also configured at the same time. The first network is usually the local
network on the server system's primary interface. If you want to configure
additional networks, use the DHCP Network Wizard in DHCP Manager.</para><para>If you use the <literal>dhcpconfig -D</literal> command to configure
the server, you must separately configure all networks that you want to use
the DHCP service. See <olink targetptr="dhcp-admin-127-1115" remap="internal">How to Add a
DHCP Network (dhcpconfig)</olink> for more information.</para><para>The following figure shows the initial dialog box for the DHCP
Network Wizard in DHCP Manager.</para><figure id="dhcp-admin-fig-45"><title>DHCP Manager's Network Wizard</title><mediaobject><imageobject><imagedata entityref="dhcp-network-wiz.tif"/>
</imageobject><textobject><simpara>Dialog box shows a Network Address pull-down list and
Subnet Mask field with a right selection arrow. Cancel and Help buttons are
also shown.</simpara>
</textobject>
</mediaobject>
</figure><itemizedlist><para>When you configure a new network, DHCP Manager creates the following
components:</para><listitem><para>A network table in the data store. The new network is shown
in the network list within the Addresses tab of DHCP Manager.</para>
</listitem><listitem><para>A network macro that contains information needed by clients
that reside on this network. The network macro's name matches the IP address
of the network. The network macro is added to the <literal>dhcptab</literal> table
in the data store.</para>
</listitem>
</itemizedlist>
</sect2><task id="dhcp-admin-24"><title>How to Add a DHCP Network (DHCP Manager)</title><procedure><step id="dhcp-admin-step-49"><para>In DHCP Manager, click the Addresses tab.</para><para>Any networks already configured for DHCP service are listed.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for information
about DHCP Manager.</para>
</step><step id="dhcp-admin-step-50"><para>Choose Network Wizard from the Edit menu.</para>
</step><step id="dhcp-admin-step-51"><para>Select options, or type requested information.
Use the decisions that you made during the planning phase to determine what
information to specify.</para><para>Planning is described in <olink targetptr="dhcp-plan-2" remap="internal">Planning DHCP Configuration of Your Remote Networks</olink>.</para><para>If you have difficulty with the wizard, click Help in the wizard
window. Your web browser displays help for the DHCP Network Wizard.</para>
</step><step id="dhcp-admin-step-52"><para>Click Finish to complete the network configuration
when you have finished specifying the requested information.</para><para>The
Network Wizard creates an empty network table, which is listed in the left
pane of the window.</para><para>The Network Wizard also creates a network
macro whose name matches the IP address of the network.</para>
</step><step performance="optional"><para>Select the Macros tab and select the network
macro to view the macro's contents.</para><para>You can confirm that the information
that you provided in the wizard has been inserted as values for options in
the network macro.</para>
</step>
</procedure><taskrelated role="see-also"><para>You must add addresses for the network before the network's IP addresses
can be managed under DHCP. See <olink targetptr="dhcp-admin-126" remap="internal">Adding IP Addresses to the DHCP Service</olink> for
more information.</para><para>If you leave the network table empty, the DHCP server can still provide
configuration information to clients. See <olink targetptr="dhcp-admin-1211" remap="internal">Setting
Up DHCP Clients to Receive Information Only (Task Map)</olink> for more information.</para>
</taskrelated>
</task><task id="dhcp-admin-127-1115"><title>How to Add a DHCP Network (<literal>dhcpconfig</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-529"><para>Type the following command on the DHCP
server system:</para><screen># <userinput>/usr/sbin/dhcpconfig -N <replaceable>network-address</replaceable></userinput></screen><para><replaceable>network-address</replaceable> is the IP address of the
network you want to add to the DHCP service. See the <olink targetdoc="refman1m" targetptr="dhcpconfig-1m" remap="external"><citerefentry><refentrytitle>dhcpconfig</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page for suboptions you
can use with the <option>N</option> option.</para><para>If you do not use
suboptions, <literal>dhcpconfig</literal> uses network files to obtain information
about the network.</para>
</step>
</procedure><taskrelated role="see-also"><para>You must add addresses for the network before the network's IP addresses
can be managed under DHCP. See <olink targetptr="dhcp-admin-126" remap="internal">Adding IP Addresses to the DHCP Service</olink> for
more information.</para><para>If you leave the network table empty, the DHCP server can still provide
configuration information to clients. See <olink targetptr="dhcp-admin-1211" remap="internal">Setting
Up DHCP Clients to Receive Information Only (Task Map)</olink> for more information.</para>
</taskrelated>
</task><sect2 id="dhcp-admin-19"><title>Modifying DHCP Network Configurations</title><para>After you add a network to the DHCP service, you can modify the configuration
information that you originally supplied. The configuration information is
stored in the network macro used to pass information to clients on the network.
You must modify the network macro to change the network configuration.</para><para>The following figure shows the Macros tab of DHCP Manager.</para><figure id="dhcp-admin-fig-54"><title>DHCP Manager's Macros Tab</title><mediaobject><imageobject><imagedata entityref="dhcp-macros-tab.tif"/>
</imageobject><textobject><simpara>Macros tab shows list of macros with one macro selected.
Option names and values contained in macro are shown.</simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-26"><title>How to Modify the Configuration of a DHCP
Network (DHCP Manager)</title><procedure><step id="dhcp-admin-step-58"><para>In DHCP Manager, select the Macros tab.</para><para>All macros that are defined for this DHCP server are listed in the left
pane.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop
DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-59"><para>Select the network macro whose name matches
the network configuration that you are changing.</para><para>The network macro
name is the network IP address.</para>
</step><step id="dhcp-admin-step-60"><para>Choose Properties from the Edit menu.</para><para>The Macro Properties dialog box displays a table of the options included
in the macro.</para>
</step><step id="dhcp-admin-step-61"><para>Select the option that you want to modify.</para><para>The option name and its value are displayed in text fields near the
top of the dialog box.</para>
</step><step performance="optional"><para>Modify the option name, or choose the Select
button to display a list of option names.</para><para>The Select Option dialog
box displays a list of all DHCP standard options, with a brief description
of each option.</para>
</step><step performance="optional"><para>Select an option name in the Select Option
dialog box, and click OK.</para><para>The new option name is displayed in
the Option Name field.</para>
</step><step id="dhcp-admin-step-62"><para>Type the new value for the option, and
click Modify.</para>
</step><step performance="optional"><para>You can also add options to the network
macro by choosing Select in the dialog box.</para><para>See <olink targetptr="dhcp-admin-18" remap="internal">Modifying DHCP Macros</olink> for more general information
about modifying macros.</para>
</step><step id="dhcp-admin-step-63"><para>Select Notify DHCP Server of Change, and
click OK.</para><para>This selection tells the DHCP server to reread the <literal>dhcptab</literal> table to put the change into effect immediately after you
click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-127"><title>How to Modify the Configuration of a DHCP
Network (<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-66"><para>Determine which macro includes information
for all clients of the network.</para><para>The network macro's name matches
the network IP address.</para><para>If you don't know which macro includes
this information, you can display the <literal>dhcptab</literal> table to
list all macros by using the command <literal>dhtadm -P</literal>.</para>
</step><step id="dhcp-admin-step-67"><para>Type a command of the following format
to change the value of the option you want to change:</para><screen># <userinput>dhtadm -M -m <replaceable>macro-name</replaceable> -e '<replaceable>symbol</replaceable>=<replaceable>value</replaceable>' -g</userinput></screen><para>See the <olink targetdoc="refman1m" targetptr="dhtadm-1m" remap="external"><citerefentry><refentrytitle>dhtadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man
page for more information about <command>dhtadm</command> command-line options.</para>
</step>
</procedure><example id="ewavl"><title>Using the <command>dhtadm</command> Command to Modify a DHCP Macro</title><para>For example, to change the <literal>10.25.62.0</literal> macro's lease
time to 57600 seconds and the NIS domain to <literal>sem.example.com</literal>,
you would type the following commands:</para><para># <userinput>dhtadm -M -m 10.25.62.0 -e 'LeaseTim=57600' -g</userinput></para><para># <userinput>dhtadm -M -m 10.25.62.0 -e 'NISdmain=sem.example.com' -g</userinput></para><para>The <option>g</option> option causes the DHCP daemon to reread the <literal>dhcptab</literal> table and put the changes into effect.</para>
</example>
</task><sect2 id="dhcp-admin-69"><title>Removing DHCP Networks</title><para>DHCP Manager enables you to remove multiple networks at once.
You have the option to automatically remove the hosts table entries associated
with the DHCP-managed IP addresses on those networks as well. The following
figure shows DHCP Manager's Delete Networks dialog box.</para><figure id="dhcp-admin-fig-70"><title>Delete Networks Dialog Box in DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-delete-net.tif"/>
</imageobject><textobject><simpara>Dialog box shows two lists, Keep Networks and Delete
Networks, with selection arrows between them. Check box for Delete host table
entries also shown.</simpara>
</textobject>
</mediaobject>
</figure><para>The <literal>pntadm</literal> command requires you to delete each IP
address entry from a network before you delete that network. You can delete
only one network at a time.</para>
</sect2><task id="dhcp-admin-28"><title>How to Remove a DHCP Network (DHCP Manager)</title><procedure><step id="dhcp-admin-step-74"><para>In DHCP Manager, select the Addresses
tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop
DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-75"><para>Choose Delete Networks from the Edit menu.</para><para>The Delete Networks dialog box opens.</para>
</step><step id="dhcp-admin-step-76"><para>In the Keep Networks list, select the
networks that you want to delete.</para><para>Press the Control key while
you click with the mouse to select multiple networks. Press the Shift key
while you click to select a range of networks.</para>
</step><step id="dhcp-admin-step-77"><para>Click the right arrow button to move the
selected networks to the Delete Networks list.</para>
</step><step id="dhcp-admin-step-78"><para>If you want to remove the host table entries
for this network's DHCP addresses, select Delete Host Table Entries.</para><para>Note that deleting host table
entries does not delete the host registrations at the DNS server for these
addresses. Entries are deleted only in the local name service.</para>
</step><step id="dhcp-admin-step-79"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-27"><title>How to Remove a DHCP Network (<literal>pntadm</literal>)</title><tasksummary><para>Note that this procedure deletes the network's IP addresses from the
DHCP network table before removing the network. The addresses are deleted
to ensure that the host names are removed from the <literal>hosts</literal> file
or database.</para>
</tasksummary><procedure>&roleDHCPstep;<step id="dhcp-admin-step-83"><para>Type a command following this format to
remove an IP address and its host name from the name service:</para><screen># <userinput>pntadm -D -y <replaceable>IP-address</replaceable></userinput></screen><para>For example, to remove IP address <literal>10.25.52.1</literal>, you
would type the following command:</para><para># <userinput>pntadm -D -y 10.25.52.1</userinput></para><para>The <literal>-y</literal> option specifies to delete
the host name.</para>
</step><step id="dhcp-admin-step-84"><para>Repeat the <literal>pntadm -D -y</literal> command
for each address in the network.</para><para>You might want to create a script
to run the <command>pntadm</command> command if you are deleting many addresses.</para>
</step><step id="dhcp-admin-step-85"><para>After all addresses are deleted, type
the following command to delete the network from the DHCP service.</para><screen># <userinput>pntadm -R <replaceable>network-IP-address</replaceable></userinput></screen><para>For example, to remove network <literal>10.25.52.0</literal>, you would
type the following command:</para><para># <userinput>pntadm -R 10.25.52.0</userinput></para><para>See the <olink targetdoc="refman1m" targetptr="pntadm-1m" remap="external"><citerefentry><refentrytitle>pntadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man
page for more information about using the <literal>pntadm</literal> utility.</para>
</step>
</procedure>
</task>
</sect1><sect1 id="dhcp-admin-94"><title>Supporting BOOTP Clients With the DHCP Service
(Task Map)</title><para>To support BOOTP clients on your DHCP server, you must set up
your DHCP server to be BOOTP compatible. If you want to specify which BOOTP
clients can use your DHCP, you can register BOOTP clients in the DHCP server's
network table. Alternatively, you can reserve a number of IP addresses for
automatic allocation to BOOTP clients.</para><note><para>BOOTP addresses are permanently assigned, whether or not you explicitly
assign a permanent lease to the address.</para>
</note><para>The following task map lists tasks that you might need to perform
to support BOOTP clients. The task map contains links to the procedures used
to carry out the tasks.</para><informaltable frame="all" pgwide="1"><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec6" colwidth="33*"/><colspec colname="colspec7" colwidth="33*"/><colspec colname="colspec8" colwidth="33*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Set up automatic BOOTP support.</para>
</entry><entry><para>Provides IP address for any BOOTP client on a DHCP-managed network,
or on a network connected by a relay agent to a DHCP-managed network. </para><para>You must reserve a pool of addresses for exclusive use by BOOTP clients.
This option might be more useful if the server must support a large number
of BOOTP clients.</para>
</entry><entry><para><olink targetptr="dhcp-admin-113" remap="internal">How to Set Up Support of Any BOOTP
Client (DHCP Manager)</olink></para>
</entry>
</row><row><entry><para>Set up manual BOOTP support.</para>
</entry><entry><para>Provides IP address for only those BOOTP clients that have been manually
registered with the DHCP service. </para><para>This option requires you to bind a client's ID to a particular IP address
that has been marked for BOOTP clients. This option is useful for a small
number of BOOTP clients, or when you want to restrict the BOOTP clients that
can use the DHCP server.</para>
</entry><entry><para><olink targetptr="dhcp-admin-112" remap="internal">How to Set Up Support of Registered
BOOTP Clients (DHCP Manager)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><task id="dhcp-admin-113"><title>How to Set Up Support of Any BOOTP Client
(DHCP Manager)</title><procedure><step id="dhcp-admin-step-90"><para>In DHCP Manager, select Modify from the
Service menu.</para><para>The Modify Service Options dialog box opens.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-91"><para>In the BOOTP Compatibility section of
the dialog box, select Automatic.</para>
</step><step id="dhcp-admin-step-92"><para>Select Restart Server, and click OK.</para>
</step><step id="dhcp-admin-step-94"><para>Select the Addresses tab.</para>
</step><step id="dhcp-admin-step-95"><para>Select addresses that you want to reserve
for BOOTP clients.</para><para>Select a range of addresses by clicking the
first address, pressing the Shift key, and clicking the last address. Select
multiple nonconcurrent addresses by pressing the Control key while clicking
each address.</para>
</step><step id="dhcp-admin-step-96"><para>Select Properties from the Edit menu.</para><para>The Modify Multiple Addresses dialog box opens.</para>
</step><step id="dhcp-admin-step-97"><para>In the BOOTP section, select Assign All
Addresses Only to BOOTP Clients.</para><para>All other options should be set
to Keep Current Settings.</para>
</step><step id="dhcp-admin-step-98"><para>Click OK.</para><para>Any BOOTP client
can now obtain an address from this DHCP server.</para>
</step>
</procedure>
</task><task id="dhcp-admin-112"><title>How to Set Up Support of Registered BOOTP
Clients (DHCP Manager)</title><procedure><step id="dhcp-admin-step-101"><para>In DHCP Manager, select Modify from the
Service menu.</para><para>The Modify Service Options dialog box opens.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-102"><para>In the BOOTP Compatibility section of
the dialog box, select Manual.</para>
</step><step id="dhcp-admin-step-103"><para>Select Restart Server, and click OK.</para>
</step><step id="dhcp-admin-step-105"><para>Select the Addresses tab.</para>
</step><step id="dhcp-admin-step-106"><para>Select an address that you want to assign
to a particular BOOTP client.</para>
</step><step id="dhcp-admin-step-107"><para>Choose Properties from the Edit menu.</para><para>The Address Properties dialog box opens.</para>
</step><step id="dhcp-admin-step-108"><para>In the Address Properties dialog box,
select the Lease tab.</para>
</step><step id="dhcp-admin-step-109"><para>In the Client ID field, type the client's
identifier.</para><para>For a BOOTP Solaris client on an Ethernet network,
the client ID is a string that is derived from the client's hexadecimal Ethernet
address. The client ID includes a prefix that indicates the Address Resolution
Protocol (ARP) type for Ethernet (01). For example, a BOOTP client with the
Ethernet address <literal>8:0:20:94:12:1e</literal> would use the client ID <literal>0108002094121E</literal>.</para><tip><para>As superuser on a Solaris client system, type the following command
to obtain the Ethernet address for the interface:</para><para><literal># ifconfig
-a</literal></para>
</tip>
</step><step id="dhcp-admin-step-110"><para>Select Reserved to reserve the IP address
for this client.</para>
</step><step id="dhcp-admin-step-111"><para>Select Assign Only to BOOTP Clients,
and click OK.</para><para>In the Addresses tab, BOOTP is displayed in the
Status field, and the client ID you specified is listed in the Client ID field.</para>
</step>
</procedure>
</task>
</sect1><sect1 id="dhcp-admin-124"><title>Working With IP Addresses in the DHCP Service
(Task Map)</title><para>You can use DHCP Manager or the <literal>pntadm</literal> command
to add IP addresses, modify address properties, and remove addresses from
the DHCP service. Before you work with IP addresses, you should refer to <olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> to become familiar
with IP address properties. The table provides information for users of DHCP
Manager and <literal>pntadm</literal>.</para><note><para><olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> includes
examples of using <literal>pntadm</literal> to specify IP address properties
while adding and modifying IP addresses. Refer also to the <olink targetdoc="refman1m" targetptr="pntadm-1m" remap="external"><citerefentry><refentrytitle>pntadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page for more information
about <literal>pntadm</literal>.</para>
</note><para>The following task map lists tasks that you must perform to add,
modify, or remove IP addresses. The task map also contains links to the procedures
used to carry out the tasks.</para><informaltable frame="all" pgwide="1"><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec12" colwidth="33*"/><colspec colname="colspec13" colwidth="33*"/><colspec colname="colspec14" colwidth="33*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Add single or multiple IP addresses to the DHCP service.</para>
</entry><entry><para>Adds IP addresses on networks that are already managed by the DHCP service
by using DHCP Manager.</para>
</entry><entry><para><olink targetptr="dhcp-admin-32art" remap="internal">How to Add a Single IP Address (DHCP
Manager)</olink></para><para><olink targetptr="dhcp-admin-33art" remap="internal">How to Duplicate an Existing IP
Address (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-34art" remap="internal">How to Add Multiple IP Addresses
(DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-34pnt" remap="internal">How to Add IP Addresses (pntadm)</olink></para>
</entry>
</row><row><entry><para>Change properties of an IP address.</para>
</entry><entry><para>Changes any of the IP address properties described in <olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink>.</para>
</entry><entry><para><olink targetptr="dhcp-admin-35art" remap="internal">How to Modify IP Address Properties
(DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-35pnt" remap="internal">How to Modify IP Address Properties
(pntadm)</olink></para>
</entry>
</row><row><entry><para>Remove IP addresses from the DHCP service.</para>
</entry><entry><para>Prevents the use of specified IP addresses by DHCP.</para>
</entry><entry><para><olink targetptr="dhcp-admin-36art" remap="internal">How to Mark IP Addresses as Unusable
(DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-36pnt" remap="internal">How to Mark IP Addresses as Unusable
(pntadm)</olink></para><para><olink targetptr="dhcp-admin-37art" remap="internal">How to Delete IP Addresses From
DHCP Service (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-37pnt" remap="internal">How to Delete IP Addresses From
the DHCP Service (pntadm)</olink></para>
</entry>
</row><row><entry><para>Assign a consistent IP address to a DHCP client.</para>
</entry><entry><para>Sets up a client to receive the same IP address each time the client
requests its configuration.</para>
</entry><entry><para><olink targetptr="dhcp-admin-38art" remap="internal">How to Assign a Consistent IP Address
to a DHCP Client (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-38pnt" remap="internal">How to Assign a Consistent IP Address
to a DHCP Client (pntadm)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>The following table lists and describes the properties of IP addresses. </para><table frame="topbot" pgwide="1" id="dhcp-admin-tbl-146"><title>IP Address
Properties</title><tgroup cols="3" colsep="0" rowsep="0"><colspec colname="colspec0" colwidth="86.00*"/><colspec colname="colspec1" colwidth="185.46*"/><colspec colname="colspec2" colwidth="254.54*"/><thead><row rowsep="1"><entry><para>Property</para>
</entry><entry><para>Description</para>
</entry><entry><para>How to Specify in <literal>pntadm</literal> Command</para>
</entry>
</row>
</thead><tbody><row><entry><para>Network address</para>
</entry><entry><para>The address of the network that contains the IP address that you are
working with.</para><para>The network address is displayed in the Networks list within the Addresses
tab in DHCP Manager.</para>
</entry><entry><para>The network address must be the last argument on the <literal>pntadm</literal> command
line used to create, modify, or delete an IP address.</para><para>For example, to add an IP address to network <literal>10.21.0.0</literal>,
you would type:</para><para><userinput>pntadm -A <replaceable>ip-address options</replaceable> 10.21.0.0</userinput></para>
</entry>
</row><row><entry><para>IP address</para>
</entry><entry><para>The address you are working with, whether you are creating, modifying,
or deleting the address.</para><para>The IP address is displayed in the first column of the DHCP Manager's
Addresses tab.</para>
</entry><entry><para>The IP address must accompany the <option>A</option>, <option>M</option>,
and <option>D</option> options to the <literal>pntadm</literal> command.</para><para>For example, to modify IP address <literal>10.21.5.12</literal>, you
would type:</para><para><userinput>pntadm -M 10.21.5.12 <replaceable>options</replaceable> 10.21.0.0</userinput></para>
</entry>
</row><row><entry><para>Client name</para>
</entry><entry><para>The host name mapped to the IP address in the hosts table. This name
can be automatically generated by DHCP Manager when addresses are created.
If you create a single address, you can supply the name.</para>
</entry><entry><para>Specify the client name with the <option>h</option> option.</para><para>For example, to specify client name <literal>carrot12</literal> for <literal>10.21.5.12</literal>, you would type:</para><para><userinput>pntadm -M 10.21.5.12 -h carrot12 10.21.0.0</userinput></para>
</entry>
</row><row><entry><para>Owned by server</para>
</entry><entry><para>The DHCP server that manages the IP address and responds to the DHCP
client's request for IP address allocation.</para>
</entry><entry><para>Specify the owning server name with the <option>s</option> option.</para><para>For example to specify server <literal>blue2</literal> to own <literal>10.21.5.12</literal>, you would type:</para><para><userinput>pntadm -M 10.21.5.12 -s blue2 10.21.0.0</userinput></para>
</entry>
</row><row><entry><para>Configuration macro</para>
</entry><entry><para>The macro that the DHCP server uses to obtain network configuration
options from the <literal>dhcptab</literal> table. Several macros are created
automatically when you configure a server, and when you add networks. See <olink targetptr="dhcp-overview-9" remap="internal">About DHCP Macros</olink> for more information
about macros. When addresses are created, a server macro is also created.
The server macro is assigned as the configuration macro for each address.</para>
</entry><entry><para>Specify the macro name with the <option>m</option> option.</para><para>For example, to assign the server macro <literal>blue2</literal> to
address <literal>10.21.5.12</literal>, you would type:</para><para><userinput>pntadm -M 10.21.5.12 -m blue2 10.21.0.0</userinput></para>
</entry>
</row><row><entry><para>Client ID</para>
</entry><entry><para>A text string that is unique within the DHCP service.</para><para>If the client ID is listed as 00, the address is not allocated to any
client. If you specify a client ID when modifying the properties of an IP
address, the address is bound exclusively to that client.</para><para>The client ID is determined by the vendor of the DHCP client. If your
client is not a Solaris DHCP client, consult your DHCP client documentation
for more information.</para>
</entry><entry><para>Specify the client ID with the <option>i</option> option.</para><para>For example, to assign client ID <literal>08002094121E</literal> to
address <literal>10.21.5.12</literal>, you would type:</para><para><userinput>pntadm -M 10.21.5.12 -i 0108002094121E 10.21.0.0</userinput></para>
</entry>
</row><row><entry>
</entry><entry><para>For Solaris DHCP clients, the client ID is derived from the client's
hexadecimal hardware address. The client ID includes a prefix that represents
the ARP code for the type of network, such as 01 for Ethernet. The ARP codes
are assigned by the Internet Assigned Numbers Authority (IANA) in the ARP
Parameters section of the Assigned Numbers standard at <ulink type="url" url="http://www.iana.com/numbers.html"></ulink></para><para>For example, a Solaris client with the hexadecimal Ethernet address <literal>8:0:20:94:12:1e</literal> uses the client ID <literal>0108002094121E</literal>.
The client ID is listed in DHCP Manager and <literal>pntadm</literal> when
a client is currently using an address.</para><para><emphasis role="strong">Tip:</emphasis> As superuser on the Solaris
client system, type the following command to obtain the Ethernet address for
the interface: <literal>ifconfig -a</literal></para>
</entry><entry><para></para>
</entry>
</row><row><entry><para>Reserved</para>
</entry><entry><para>The setting that specifies the address is reserved exclusively
for the client indicated by the client ID, and the DHCP server cannot reclaim
the address. If you choose this option, you manually assign the address to
the client.</para>
</entry><entry><para>Specify that the address is reserved, or manual, with the <option>f</option> option. </para><para>For example, to specify that IP address <literal>10.21.5.12</literal> is
reserved for a client, you would type:</para><para><userinput>pntadm -M 10.21.5.12 -f MANUAL 10.21.0.0</userinput></para>
</entry>
</row><row><entry><para>Lease type or policy</para>
</entry><entry><para>The setting that determines how DHCP manages the use of IP addresses
by clients. A lease is either dynamic or permanent. See <olink targetptr="chapter2-22" remap="internal">Dynamic and Permanent Lease Types</olink> for a complete
explanation.</para>
</entry><entry><para>Specify that the address is permanently assigned with the <option>f</option> option.
Addresses are dynamically leased by default.</para><para>For example, to specify that IP address <literal>10.21.5.12</literal> has
a permanent lease, you would type:</para><para><userinput>pntadm -M 10.21.5.12 -f PERMANENT 10.21.0.0</userinput></para>
</entry>
</row><row><entry><para>Lease expiration date</para>
</entry><entry><para>The date when the lease expires, applicable only when a dynamic
lease is specified. The date is specified in <replaceable>mm/dd/yyyy</replaceable> format.</para>
</entry><entry><para>Specify a lease expiration date with the <option>e</option> option.</para><para>For example, to specify an expiration date of January 1, 2006, you would
type:</para><para><userinput>pntadm -M 10.21.5.12 -e 01/01/2006 10.21.0.0</userinput></para>
</entry>
</row><row><entry><para>BOOTP setting</para>
</entry><entry><para>The setting that marks the address as reserved for BOOTP clients. See <olink targetptr="dhcp-admin-94" remap="internal">Supporting BOOTP Clients With the DHCP Service (Task
Map)</olink> for more information about supporting BOOTP clients.</para>
</entry><entry><para>Reserve an address for BOOTP clients with the <option>f</option> option.</para><para>For example, to reserve IP address <literal>10.21.5.12</literal> for
BOOTP clients, you would type:</para><para><userinput>pntadm -M 10.21.5.12 -f BOOTP 10.21.0.0</userinput></para>
</entry>
</row><row><entry><para>Unusable setting</para>
</entry><entry><para>The setting that marks the address to prevent assignment of the
address to any client.</para>
</entry><entry><para>Mark an address as unusable with the <option>f</option> option.</para><para>For example, to mark IP address <literal>10.21.5.12</literal> as unusable,
you would type:</para><para><userinput>pntadm -M 10.21.5.12 -f UNUSABLE 10.21.0.0</userinput></para>
</entry>
</row>
</tbody>
</tgroup>
</table><sect2 id="dhcp-admin-126"><title>Adding IP Addresses to the DHCP Service</title><para>Before you add IP addresses, you must add the network that owns
the addresses to the DHCP service. See <olink targetptr="dhcp-admin-17" remap="internal">Adding
DHCP Networks</olink> for information about adding networks.</para><para>You can add addresses with DHCP Manager or the <literal>pntadm</literal> command.</para><itemizedlist><para>On networks that are already managed by the DHCP service, you can add
addresses in several ways with DHCP Manager: </para><listitem><para><emphasis role="strong">Add a single IP address</emphasis> &#8211;
Place one new IP address under DHCP management. </para>
</listitem><listitem><para><emphasis role="strong">Duplicate an existing IP address</emphasis> &#8211;
Copy the properties of an existing IP address managed by DHCP, and supply
a new IP address and client name.</para>
</listitem><listitem><para><emphasis role="strong">Add a range of multiple IP addresses</emphasis> &#8211;
Use the Address Wizard to place a series of IP addresses under DHCP management.</para>
</listitem>
</itemizedlist><para>The following figure shows the Create Address dialog box. The Duplicate
Address dialog box is identical to the Create Address dialog box, except that
the text fields display the values for an existing address.</para><figure id="dhcp-admin-fig-136"><title>Create Address Dialog Box in DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-address-create.tif"/>
</imageobject><textobject><simpara>Dialog box shows Address tab, which includes fields IP
Address, Client Name, Comment. Shows pull-down list called Configuration Macro.</simpara>
</textobject>
</mediaobject>
</figure><para>The following figure shows the first dialog of the Add Addresses to
Network wizard, used to add a range of IP addresses.</para><figure id="dhcp-admin-fig-138"><title>Add Addresses to Network Wizard in
DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-address-wiz.tif"/>
</imageobject><textobject><simpara>The context describes the purpose of the graphic. Shows
Number of IP Addresses and Comment fields, back and forward arrows, Cancel,
and Help buttons. </simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-32art"><title>How to Add a Single IP Address (DHCP Manager)</title><procedure><step id="dhcp-admin-step-142"><para>In DHCP Manager, select the Addresses
tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop
DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-143"><para>Select the network where the new IP address
is to be added.</para>
</step><step id="dhcp-admin-step-144"><para>Choose Create from the Edit menu.</para><para>The Create Address dialog box opens.</para>
</step><step id="dhcp-admin-step-145"><para>Select or type values for the address
settings on the Address and Lease tabs.</para><para>Select the Help button
to open a web browser to display help for the dialog box. Also, see <olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> for detailed information
about the settings.</para>
</step><step id="dhcp-admin-step-146"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-33art"><title>How to Duplicate an Existing IP Address
(DHCP Manager)</title><procedure><step id="dhcp-admin-step-149"><para>In DHCP Manager, select the Addresses
tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop
DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-150"><para>Select the network where the new IP address
is located.</para>
</step><step id="dhcp-admin-step-151"><para>Select the address with properties that
you want to duplicate.</para>
</step><step id="dhcp-admin-step-152"><para>Choose Duplicate from the Edit menu.</para>
</step><step id="dhcp-admin-step-153"><para>Specify the new IP address in the IP
Address field.</para>
</step><step performance="optional"><para>Specify a new client name for the address.</para><para>You cannot use the same name that is used by the address that you are
duplicating.</para>
</step><step performance="optional"><para>Modify other option values, if necessary.</para><para>Most other option values should remain the same.</para>
</step><step id="dhcp-admin-step-154"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-34art"><title>How to Add Multiple IP Addresses (DHCP
Manager)</title><procedure><step id="dhcp-admin-step-157"><para>In DHCP Manager, select the Addresses
tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop
DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-158"><para>Select the network where the new IP addresses
are to be added.</para>
</step><step id="dhcp-admin-step-159"><para>Choose Address Wizard from the Edit menu.</para><para>The Add Addresses to Network dialog box prompts you to provide values
for the IP address properties. See <olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> for more information about the properties, or select the
Help button in the dialog box. <olink targetptr="chapter2-30" remap="internal">Making Decisions
for IP Address Management (Task Map)</olink> includes more extensive information.</para>
</step><step id="dhcp-admin-step-160"><para>Click the right arrow button as you finish
each screen, and click Finish on the last screen.</para><para>The Addresses
tab is updated with the new addresses.</para>
</step>
</procedure>
</task><task id="dhcp-admin-34pnt"><title>How to Add IP Addresses (<literal>pntadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-533"><para>Add IP addresses by typing a command
of the following format:</para><screen># <userinput>pntadm -A <replaceable>ip-address</replaceable> <replaceable>options  network-address</replaceable></userinput></screen><para>Refer to the <olink targetdoc="refman1m" targetptr="pntadm-1m" remap="external"><citerefentry><refentrytitle>pntadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man
page for a list of options you can use with <literal>pntadm -A</literal>.
In addition, <olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> shows
some sample <literal>pntadm</literal> commands that specify options.</para><note><para>You can write a script to add multiple addresses with <literal>pntadm</literal>. See <olink targetptr="dhcp-ref-ex-1206" remap="internal">Example 18&#8211;1</olink> for
an example.</para>
</note>
</step>
</procedure>
</task><sect2 id="dhcp-admin-222"><title>Modifying IP Addresses in the DHCP Service</title><para>You can modify any of the address properties described in <olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> by using DHCP Manager
or the <literal>pntadm -M</literal> command. See the <olink targetdoc="refman1m" targetptr="pntadm-1m" remap="external"><citerefentry><refentrytitle>pntadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page for more information
about <literal>pntadm -M</literal>. </para><para>The following figure shows the Address Properties dialog box that you
use to modify IP address properties.</para><figure id="dhcp-admin-fig-162"><title>Address Properties Dialog Box in DHCP
Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-address-props.tif"/>
</imageobject><textobject><simpara>Address tab with fields called IP Address, Client Name,
Owned by Server, and Comment. Also shows Configuration Macro with pull-down
list.</simpara>
</textobject>
</mediaobject>
</figure><para>The following figure shows the Modify Multiple Addresses dialog box
that you use to modify multiple IP addresses.</para><figure id="dhcp-admin-fig-164"><title>Modify Multiple Addresses Dialog Box
in DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-address-props-multi.tif"/>
</imageobject><textobject><simpara>Dialog box shows pull-down lists labeled Managing Server
and Configuration Macro. Shows selections for BOOTP, Unusable addresses, and
Lease Type.</simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-35art"><title>How to Modify IP Address Properties (DHCP
Manager)</title><procedure><step id="dhcp-admin-step-168"><para>In DHCP Manager, select the Addresses
tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop
DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-169"><para>Select the IP address's network.</para>
</step><step id="dhcp-admin-step-170"><para>Select one or more IP addresses to modify.</para><para>If you want to modify more than one address, press the Control key while
you click with the mouse to select multiple addresses. You can also press
the Shift key while you click to select a block of addresses.</para>
</step><step id="dhcp-admin-step-171"><para>Choose Properties from the Edit menu.</para><para>The Address Properties dialog box or the Modify Multiple Address dialog
box opens. </para>
</step><step id="dhcp-admin-step-172"><para>Change the appropriate properties.</para><para>Click the Help button, or refer to <olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> for information about the properties.</para>
</step><step id="dhcp-admin-step-173"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-35pnt"><title>How to Modify IP Address Properties (<literal>pntadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-536"><para>Modify IP address properties by typing
a command of the following format:</para><screen># <userinput>pntadm -M <replaceable>ip-address options network-address</replaceable></userinput></screen><para>Many options can be used with the <literal>pntadm</literal> command,
which are documented in the <olink targetdoc="refman1m" targetptr="pntadm-1m" remap="external"><citerefentry><refentrytitle>pntadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man
page.</para><para><olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> shows
some sample <literal>pntadm</literal> commands that specify options.</para>
</step>
</procedure>
</task><sect2 id="dhcp-admin-150"><title>Removing IP Addresses From the DHCP Service</title><itemizedlist><para>At times, you might want the DHCP service to stop managing a particular
IP address or group of addresses. The method that you use to remove an address
from DHCP depends on whether you want the change to be temporary or permanent.</para><listitem><para>To temporarily prevent the use of addresses, you can mark the
addresses as unusable in the Address Properties dialog box as described in <olink targetptr="dhcp-admin-234" remap="internal">Marking IP Addresses as Unusable by the DHCP Service</olink>. </para>
</listitem><listitem><para>To permanently prevent the use of addresses by DHCP clients,
delete the addresses from the DHCP network tables, as described in <olink targetptr="dhcp-admin-235" remap="internal">Deleting IP Addresses From the DHCP Service</olink>.</para>
</listitem>
</itemizedlist>
</sect2><sect2 id="dhcp-admin-234"><title>Marking IP Addresses as Unusable by the
DHCP Service</title><para>You can use the <literal>pntadm -M</literal> command with the <literal>-f UNUSABLE</literal> option to mark addresses as unusable.</para><para>In DHCP Manager, you use the Address Properties dialog box, shown in <olink targetptr="dhcp-admin-fig-162" remap="internal">Figure 15&#8211;10</olink>, to mark individual
addresses. You use the Modify Multiple Addresses dialog box, show in <olink targetptr="dhcp-admin-fig-164" remap="internal">Figure 15&#8211;11</olink>, to mark multiple
addresses, as described in the following procedure. </para>
</sect2><task id="dhcp-admin-36art"><title>How to Mark IP Addresses as Unusable (DHCP
Manager)</title><procedure><step id="dhcp-admin-step-181"><para>In DHCP Manager, select the Addresses
tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop
DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-182"><para>Select the IP address's network.</para>
</step><step id="dhcp-admin-step-183"><para>Select one or more IP addresses to mark
as unusable.</para><para>If you want to mark more than one address as unusable,
press the Control key while you click with the mouse to select multiple addresses.
You can also press the Shift key while you click to select a block of addresses.</para>
</step><step id="dhcp-admin-step-184"><para>Choose Properties from the Edit menu.</para><para>The Address Properties dialog box or the Modify Multiple Address dialog
box opens.</para>
</step><step id="dhcp-admin-step-185"><para>If you are modifying one address, select
the Lease tab.</para>
</step><step id="dhcp-admin-step-186"><para>Select Address is Unusable.</para><para>If
you are editing multiple addresses, select Mark All Addresses Unusable.</para>
</step><step id="dhcp-admin-step-187"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-36pnt"><title>How to Mark IP Addresses as Unusable (<literal>pntadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-539"><para>Mark IP addresses as unusable by typing
a command of the following format:</para><screen># <userinput>pntadm -M <replaceable>ip-address</replaceable> -f UNUSABLE <replaceable>network-address</replaceable></userinput></screen><para>For example, to mark address <literal>10.64.3.3</literal> as unusable,
type:</para><para><userinput>pntadm -M 10.64.3.3 -f UNUSABLE 10.64.3.0</userinput></para>
</step>
</procedure>
</task><sect2 id="dhcp-admin-235"><title>Deleting IP Addresses From the DHCP Service</title><para>You should delete IP addresses from the DHCP network tables if you no
longer want the address to be managed by DHCP. You can use the <literal>pntadm
-D</literal> command or DHCP Manager's Delete Address dialog box.</para><para>The following figure shows the Delete Address dialog box.</para><figure id="dhcp-admin-fig-177"><title>Delete Address Dialog Box in DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-address-delete.tif"/>
</imageobject><textobject><simpara>Dialog box shows list of IP addresses to delete and a
check box labeled Delete from hosts table. Shows OK, Cancel, and Help buttons.</simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-37art"><title>How to Delete IP Addresses From DHCP Service
(DHCP Manager)</title><procedure><step id="dhcp-admin-step-190"><para>In DHCP Manager, select the Addresses
tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop
DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-191"><para>Select the IP address's network.</para>
</step><step id="dhcp-admin-step-192"><para>Select one or more IP addresses to delete.</para><para>If you want to delete more than one address, press the Control key while
you click with the mouse to select multiple addresses. You can also press
the Shift key while you click to select a block of addresses.</para>
</step><step id="dhcp-admin-step-193"><para>Choose Delete from the Edit menu.</para><para>The Delete Address dialog box lists the address that you selected so
that you can confirm the deletion.</para>
</step><step id="dhcp-admin-step-194"><para>If you want to delete the host names
from the hosts table, select Delete From Hosts Table.</para><para>If the host
names were generated by DHCP Manager, you might want to delete the names from
the hosts table. </para>
</step><step id="dhcp-admin-step-195"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-37pnt"><title>How to Delete IP Addresses From the DHCP
Service (<literal>pntadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-542"><para>Delete IP addresses by typing a command
of the following format:</para><screen># <userinput>pntadm -D <replaceable>ip-address</replaceable> <replaceable>options</replaceable> <replaceable>network-address</replaceable></userinput></screen><para>If you include the <option>y</option> option, the host name is deleted
from the name service that maintains the host name.</para><para>For example,
to delete address <literal>10.64.3.3</literal> from network <literal>10.64.3.0</literal>,
and delete the corresponding host name, type:</para><para><userinput>pntadm
-D 10.64.3.3 -y 10.64.3.0</userinput></para>
</step>
</procedure>
</task><sect2 id="dhcp-admin-161"><title>Assigning a Reserved IP Address to a DHCP
Client</title><para>The Solaris DHCP service attempts to provide the same IP address
to a client that has previously obtained an address through DHCP. However,
sometimes an address has already been reassigned to another client.</para><para>Routers, NIS or NIS+ servers, DNS servers, and other hosts that are
critical to the network should not be DHCP clients. Hosts that provide services
to the network should not rely on the network to obtain their IP addresses.
Clients such as print servers or file servers should have consistent IP addresses
as well. These clients can receive their network configurations and also be
assigned a consistent IP address from the DHCP server.</para><para>You can set up the DHCP server to supply the same IP address to a client
each time the client requests its configuration. You reserve the IP address
for the client by manually assigning the client's ID to the address that you
want the client to use. You can set up the reserved address to use either
a dynamic lease or a permanent lease. If the client's address uses a dynamic
lease, you can easily track the use of the address. A diskless client is an
example of a client that should use a reserved address with a dynamic lease.
If the client's address uses a permanent lease, you cannot track address use.
Once a client obtains a permanent lease, the client does not contact the server
again. The client can obtain updated configuration information only by releasing
the IP address and restarting the DHCP lease negotiation. </para><para>You can use the <literal>pntadm -M</literal> command or DHCP Manager's
Address Properties dialog box to set up lease properties.</para><para>The following figure shows the Lease tab of the Address Properties dialog
box, which is used to modify the lease.</para><figure id="dhcp-admin-fig-197"><title>Address Properties Lease Tab in DHCP
Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-address-props-lease.tif"/>
</imageobject><textobject><simpara>Dialog box shows Lease tab, which includes Client ID
field, Reserved check box, and settings for Lease Policy, BOOTP clients, and
Address is unusable.</simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-38art"><title>How to Assign a Consistent IP Address to
a DHCP Client (DHCP Manager)</title><procedure><step id="dhcp-admin-step-202"><para>In DHCP Manager, select the Addresses
tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop
DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-203"><para>Select the appropriate network.</para>
</step><step id="dhcp-admin-step-204"><para>Double-click the IP address that you
want to the client to use.</para><para>The Address Properties window opens.</para>
</step><step id="dhcp-admin-step-205"><para>Select the Lease tab.</para>
</step><step id="dhcp-admin-step-206"><para>In the Client ID field, type the client
ID.</para><para>The client ID is derived from the client's hardware address.
See the Client ID entry in <olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> for more information.</para>
</step><step id="dhcp-admin-step-209"><para>Select the Reserved option to prevent
the IP address from being reclaimed by the server.</para>
</step><step id="dhcp-admin-step-208"><para>In the Lease Policy area of the window,
select Dynamic or Permanent assignment.</para><para>Select Dynamic if you
want the client to negotiate to renew leases, which enables you to track when
the address is used. Because you selected Reserved, the address cannot be
reclaimed even when a dynamic lease is assigned. You do not need to specify
an expiration date for this lease. The DHCP server calculates the expiration
date by using the lease time.</para><para>If you select Permanent, you cannot
track the use of the IP address unless you enable transaction logging.</para>
</step><step><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-38pnt"><title>How to Assign a Consistent IP Address to
a DHCP Client (<literal>pntadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-545"><para>Set the lease flags by typing a command
of the following format:</para><screen># <userinput>pntadm -M <replaceable>ip-address</replaceable> -i <replaceable>client-id</replaceable> -f MANUAL+BOOTP <replaceable>network-address</replaceable></userinput></screen><para>For example, to enable the Solaris DHCP client whose MAC address is <literal>08:00:20:94:12:1E</literal> to always receive IP address <literal>10.21.5.12</literal>,
you would type:</para><para><userinput>pntadm -M 10.21.5.12 -i 0108002094121E
-f MANUAL+BOOTP 10.21.0.0</userinput></para><tip><para>Refer to the Client ID entry in <olink targetptr="dhcp-admin-tbl-146" remap="internal">Table 15&#8211;4</olink> for more information about how to determine client
identifiers.</para>
</tip>
</step>
</procedure>
</task>
</sect1><sect1 id="dhcp-admin-125"><title>Working With DHCP Macros (Task Map)</title><para><emphasis>DHCP macros</emphasis> are containers of DHCP options.
The Solaris DHCP service uses macros to gather options that should be passed
to clients. DHCP Manager and the <literal>dhcpconfig</literal> utility create
a number of macros automatically when you configure the server. See <olink targetptr="dhcp-overview-9" remap="internal">About DHCP Macros</olink> for background information
about macros. See <olink targetptr="chapter3-20" remap="internal">Chapter&#160;14, Configuring the DHCP Service (Tasks)</olink> for information about macros created by default.</para><para>You might find that when changes occur on your network, you need to
make changes to the configuration information that is passed to clients. To
change configuration  information, you need to work with DHCP macros. You
can view, create, modify, duplicate, and delete DHCP macros.</para><para>When you work with macros, you must know about DHCP standard options,
which are described in the <olink targetdoc="refman4" targetptr="dhcp-inittab-4" remap="external"><citerefentry><refentrytitle>dhcp_inittab</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink> man page.</para><para>The following task map lists tasks to help you view, create, modify,
and delete DHCP macros.</para><informaltable frame="all" pgwide="1"><tgroup cols="3" colsep="0" rowsep="0"><colspec colwidth="84.94*"/><colspec colwidth="121.77*"/><colspec colwidth="210.28*"/><thead><row rowsep="1"><entry colsep="1" rowsep="1"><para>Task</para>
</entry><entry colsep="1" rowsep="1"><para>Description</para>
</entry><entry colsep="1" rowsep="1"><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry colsep="1" rowsep="1"><para>View DHCP macros.</para>
</entry><entry colsep="1" rowsep="1"><para>Display a list of all the macros that are defined on the DHCP server.</para>
</entry><entry colsep="1" rowsep="1"><para><olink targetptr="dhcp-admin-13" remap="internal">How to View Macros Defined on a DHCP
Server (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-13dh" remap="internal">How to View Macros Defined on a DHCP
Server (dhtadm)</olink> </para>
</entry>
</row><row><entry colsep="1" rowsep="1"><para>Create DHCP macros.</para>
</entry><entry colsep="1" rowsep="1"><para>Create new macros to support DHCP clients.</para>
</entry><entry colsep="1" rowsep="1"><para><olink targetptr="dhcp-admin-42art" remap="internal">How to Create a DHCP Macro (DHCP
Manager)</olink></para><para><olink targetptr="dhcp-admin-42dh" remap="internal">How to Create a DHCP Macro (dhtadm)</olink></para>
</entry>
</row><row><entry colsep="1" rowsep="1"><para>Modify values that are passed in macros to DHCP clients.</para>
</entry><entry colsep="1" rowsep="1"><para>Change macros by modifying existing options, adding options to macros,
or removing options from macros.</para>
</entry><entry colsep="1" rowsep="1"><para><olink targetptr="dhcp-admin-39art" remap="internal">How to Change Values for Options
in a DHCP Macro (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-39dh" remap="internal">How to Change Values for Options
in a DHCP Macro (dhtadm)</olink></para><para><olink targetptr="dhcp-admin-40art" remap="internal">How to Add Options to a DHCP Macro
(DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-40dh" remap="internal">How to Add Options to a DHCP Macro
(dhtadm)</olink></para><para><olink targetptr="dhcp-admin-41art" remap="internal">How to Delete Options From a DHCP
Macro (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-41dh" remap="internal">How to Delete Options From a DHCP
Macro (dhtadm)</olink></para>
</entry>
</row><row><entry colsep="1" rowsep="1"><para>Delete DHCP macros.</para>
</entry><entry colsep="1" rowsep="1"><para>Remove DHCP macros that are no longer used.</para>
</entry><entry colsep="1" rowsep="1"><para><olink targetptr="dhcp-admin-43art" remap="internal">How to Delete a DHCP Macro (DHCP
Manager)</olink></para><para><olink targetptr="dhcp-admin-43dh" remap="internal">How to Delete a DHCP Macro (dhtadm)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>The following figure shows the Macros tab in the DHCP Manager window.</para><figure id="dhcp-admin-fig-211"><title>DHCP Manager's Macros Tab</title><mediaobject><imageobject><imagedata entityref="dhcp-macros-tab.tif"/>
</imageobject><textobject><simpara>Macros tab shows list of macros with one macro selected.
Option names and values contained in macro are shown. Find field and Next
button are shown.</simpara>
</textobject>
</mediaobject>
</figure><task id="dhcp-admin-13"><title>How to View Macros Defined on a DHCP Server
(DHCP Manager)</title><procedure><step id="dhcp-admin-step-215"><para>In DHCP Manager, select the Macros tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para><para>The Macros area on the left side
of the window displays, in alphabetical order, all the macros defined on the
DHCP server. Macros preceded by a folder icon include references to other
macros, whereas macros preceded by a document icon do not reference other
macros.</para>
</step><step id="dhcp-admin-step-216"><para>To open a macro folder, click the handle
icon to the left of the folder icon.</para><para>The macros that are included
in the selected macro are listed.</para>
</step><step id="dhcp-admin-step-217"><para>To view the content of a macro, click
the macro name. </para><para>Options and their assigned values are displayed.</para>
</step>
</procedure>
</task><task id="dhcp-admin-13dh"><title>How to View Macros Defined on a DHCP Server
(<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-548"><para>Display the macros by typing the following
command:</para><screen># <userinput>dhtadm -P</userinput></screen><para>This command prints to standard output the formatted contents of the <literal>dhcptab</literal> table, including all macros and symbols defined on the DHCP
server.</para>
</step>
</procedure>
</task><sect2 id="dhcp-admin-18"><title>Modifying DHCP Macros</title><para>You might need to modify macros when some aspect of your network
changes and one or more DHCP clients need to know about the change. For example,
you might add a router or an NIS server, create a new subnet, or change the
lease policy.</para><para>Before you modify a macro, determine the name of the DHCP option you
want to change, add, or delete. The standard DHCP options are listed in the
DHCP Manager help and in the <olink targetdoc="refman4" targetptr="dhcp-inittab-4" remap="external"><citerefentry><refentrytitle>dhcp_inittab</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink> man page.</para><para>You can use the <literal>dhtadm -M -m</literal> command or DHCP
Manager to modify macros. See the <olink targetdoc="refman1m" targetptr="dhtadm-1m" remap="external"><citerefentry><refentrytitle>dhtadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page for more information
about <literal>dhtadm</literal>.</para><para>The following figure shows DHCP Manager's Macro Properties dialog box.</para><figure id="dhcp-admin-fig-219"><title>Macro Properties Dialog Box in DHCP
Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-macro-props.tif"/>
</imageobject><textobject><simpara>Dialog box shows list of options and their values. Shows
Select, Add, Modify, up and down, and Delete buttons. Shows check box to notify
server.</simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-39art"><title>How to Change Values for Options in a DHCP
Macro (DHCP Manager)</title><procedure><step id="dhcp-admin-step-223"><para>In DHCP Manager, select the Macros tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-224"><para>Select the macro that you want to change.</para>
</step><step id="dhcp-admin-step-225"><para>Choose Properties from the Edit menu.</para><para>The Macro Properties dialog box opens.</para>
</step><step id="dhcp-admin-step-226"><para>In the table of Options, select the option
that you want to change.</para><para>The option's name and its value are displayed
in the Option Name and Option Value fields.</para>
</step><step id="dhcp-admin-step-227"><para>In the Option Value field, select the
old value and type the new value for the option.</para>
</step><step id="dhcp-admin-step-228"><para>Click Modify.</para><para>The new value
is displayed in the options table.</para>
</step><step id="dhcp-admin-step-229"><para>Select Notify DHCP Server of Change.</para><para>This selection tells the DHCP server to reread the <literal>dhcptab</literal> table
to put the change into effect immediately after you click OK.</para>
</step><step id="dhcp-admin-step-230"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-39dh"><title>How to Change Values for Options in a DHCP
Macro (<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-551"><para>Change option values by typing a command
of the following format:</para><screen># <userinput>dhtadm -M -m <replaceable>macroname</replaceable> -e '<replaceable>option</replaceable>=<replaceable>value</replaceable>:<replaceable>option</replaceable>=<replaceable>value</replaceable>' -g</userinput></screen><para>For example, to change the lease time and the Universal Time Offset
in the macro <literal>bluenote</literal>, you would type:</para><para># <userinput>dhtadm -M -m bluenote -e 'LeaseTim=43200:UTCOffst=28800' -g</userinput></para>
</step>
</procedure>
</task><task id="dhcp-admin-40art"><title>How to Add Options to a DHCP Macro (DHCP
Manager)</title><procedure><step id="dhcp-admin-step-233"><para>In DHCP Manager, select the Macros tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-234"><para>Select the macro that you want to change.</para>
</step><step id="dhcp-admin-step-235"><para>Choose Properties from the Edit menu.</para><para>The Macro Properties dialog box opens.</para>
</step><step id="dhcp-admin-step-236"><para>In the Option Name field, specify the
name of an option by using one of the following methods:</para><stepalternatives><step id="dhcp-admin-step-237"><para>Click the Select button next to the Option
Name field to select an option to add to the macro.</para><para>The Select
Option dialog box displays an alphabetized list of names of standard category
options and descriptions. If you want to add an option that is not in the
standard category, use the Category list to select a category.</para><para>See <olink targetptr="dhcp-overview-9" remap="internal">About DHCP Macros</olink> for more information
about macro categories.</para>
</step><step id="dhcp-admin-step-238"><para>Type <userinput>Include</userinput> if
you want to include a reference to an existing macro in the new macro.</para>
</step>
</stepalternatives>
</step><step id="dhcp-admin-step-239"><para>Type the value for the option in the
Option Value field.</para><para>If you typed <userinput>Include</userinput> as
the option name, you must specify the name of an existing macro in the Option
Value field.</para>
</step><step id="dhcp-admin-step-240"><para>Click Add.</para><para>The option is
added to the bottom of the list of options in this macro.  To change the option's
position in the macro, select the option and click the arrow buttons to move
the option up or down in the list.</para>
</step><step id="dhcp-admin-step-241"><para>Select Notify DHCP Server of Change.</para><para>This selection tells the DHCP server to reread the <literal>dhcptab</literal> table
to put the change into effect immediately after you click OK.</para>
</step><step id="dhcp-admin-step-242"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-40dh"><title>How to Add Options to a DHCP Macro (<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-554"><para>Add options to a macro by typing a command
of the following format:</para><screen># <userinput>dhtadm -M -m <replaceable>macroname</replaceable> -e '<replaceable>option</replaceable>=<replaceable>value</replaceable>' -g</userinput></screen><para>For example, to add the ability to negotiate leases in the macro <literal>bluenote</literal>, you would type the following command:</para><para># <userinput>dhtadm
-M -m bluenote -e 'LeaseNeg=_NULL_VALUE' -g</userinput></para><para>Note that
if an option does not require a value, you must use <literal>_NULL_VALUE</literal> as
the value for the option.</para>
</step>
</procedure>
</task><task id="dhcp-admin-41art"><title>How to Delete Options From a DHCP Macro
(DHCP Manager)</title><procedure><step id="dhcp-admin-step-245"><para>In DHCP Manager, select the Macros tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-246"><para>Select the macro that you want to change.</para>
</step><step id="dhcp-admin-step-247"><para>Choose Properties from the Edit menu.</para><para>The Macro Properties dialog box opens.</para>
</step><step id="dhcp-admin-step-248"><para>Select the option that you want to remove
from the macro.</para>
</step><step id="dhcp-admin-step-249"><para>Click Delete.</para><para>The option
is removed from the list of options for this macro.</para>
</step><step id="dhcp-admin-step-250"><para>Select Notify DHCP Server of Change.</para><para>This selection tells the DHCP server to reread the <literal>dhcptab</literal> table
to put the change into effect immediately after you click OK.</para>
</step><step id="dhcp-admin-step-251"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-41dh"><title>How to Delete Options From a DHCP Macro
(<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-557"><para>Delete an option from a macro by typing
a command of the following format:</para><screen># <userinput>dhtadm -M -m <replaceable>macroname</replaceable> -e '<replaceable>option</replaceable>=' -g</userinput></screen><para>For example, to remove the ability to negotiate leases in the macro <literal>bluenote</literal>, you would type the following command:</para><para># <userinput>dhtadm -M -m bluenote -e 'LeaseNeg=' -g</userinput></para><para>If an option
is specified with no value, the option is removed from the macro.</para>
</step>
</procedure>
</task><sect2 id="dhcp-admin-75"><title>Creating DHCP Macros</title><para>You might want to add new macros to your DHCP service to support
clients with specific needs. You can use the <literal>dhtadm -A -m</literal> command
or DHCP Manager's Create Macro dialog box to add macros. See the <olink targetdoc="refman1m" targetptr="dhtadm-1m" remap="external"><citerefentry><refentrytitle>dhtadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page for more information
about the <literal>dhtadm</literal> command.</para><para>The following figure shows DHCP Manager's Create Macro dialog box.</para><figure id="dhcp-admin-fig-37"><title>Create Macro Dialog Box in DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-macro-create.tif"/>
</imageobject><textobject><simpara>Dialog box shows Name, Option Name, and Option Value
fields. Shows Select button, empty list of options, and check box to notify
the DHCP server. </simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-42art"><title>How to Create a DHCP Macro (DHCP Manager)</title><procedure><step id="dhcp-admin-step-257"><para>In DHCP Manager, select the Macros tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-258"><para>Choose Create from the Edit menu.</para><para>The Create Macro dialog box opens.</para>
</step><step id="dhcp-admin-step-259"><para>Type a unique name for the macro.</para><para>The name can be up to 128 alphanumeric characters. If you use a name
that matches a vendor class identifier, network address, or client ID, the
macro is processed automatically for appropriate clients. If you use a different
name, the macro is not processed automatically.  The macro must be assigned
to a specific IP address or included in another macro that is processed automatically.
See <olink targetptr="dhcp-overview-16" remap="internal">Macro Processing by the DHCP Server</olink> for
more detailed information.</para>
</step><step id="dhcp-admin-step-260"><para>Click the Select button, which is next
to the Option Name field.</para><para>The Select Option dialog box displays
an alphabetized list of names of standard category options and their descriptions.
If you want to add an option that is not in the standard category, use the
Category list. Select the category that you want from the Category list. See <olink targetptr="dhcp-overview-19a" remap="internal">About DHCP Options</olink> for more information
about option categories.</para>
</step><step id="dhcp-admin-step-262"><para>Select the option to add to the macro,
and click OK.</para><para>The Macro Properties dialog box displays the selected
option in the Option Name field.</para>
</step><step id="dhcp-admin-step-263"><para>Type the value for the option in the
Option Value field, and click Add.</para><para>The option is added to the
bottom of the list of options in  this macro. To change the option's position
in the macro, select the option and click the arrow buttons to move the option
up or down in the list.</para>
</step><step id="dhcp-admin-step-265"><para>Repeat <olink targetptr="dhcp-admin-step-262" remap="internal">Step&#160;5</olink> and <olink targetptr="dhcp-admin-step-263" remap="internal">Step&#160;6</olink> for each option you want
to add to the macro.</para>
</step><step id="dhcp-admin-step-266"><para>Select Notify DHCP Server of Change when
you are finished adding options.</para><para>This selection tells the DHCP
server to reread the <literal>dhcptab</literal> table to put the change into
effect immediately after you click OK.</para>
</step><step id="dhcp-admin-step-267"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-42dh"><title>How to Create a DHCP Macro (<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-560"><para>Create a macro by typing a command of
the following format:</para><screen># <userinput>dhtadm -A -m <replaceable>macroname</replaceable> -d ':<replaceable>option</replaceable>=<replaceable>value</replaceable>:<replaceable>option</replaceable>=<replaceable>value</replaceable>:<replaceable>option</replaceable>=<replaceable>value:</replaceable>' -g</userinput></screen><para>There is no limit to the number of <replaceable>option=value</replaceable> pairs
that can be included in the argument to <option>d</option>. The argument must
begin and end with colons, with colons between each <replaceable>option=value</replaceable> pair.
The complete string must be enclosed in quotation marks.</para><para>For example,
to create the macro <literal>bluenote</literal>, type the following command:</para><literallayout># <userinput>dhtadm -A -m bluenote -d ':Router=10.63.6.121\
:LeaseNeg=_NULL_VALUE:DNSserv=10.63.28.12:' -g</userinput></literallayout><para>Note
that if an option does not require a value, you must use <literal>_NULL_VALUE</literal> as
the value for the option.</para>
</step>
</procedure>
</task><sect2 id="dhcp-admin-162"><title>Deleting DHCP Macros</title><para>You might want to delete a macro from the DHCP service. For example,
if you delete a network from the DHCP service, you can also delete the associated
network macro.</para><para>You can use the <literal>dhtadm -D -m</literal> command or DHCP Manager
to delete macros.</para>
</sect2><task id="dhcp-admin-43art"><title>How to Delete a DHCP Macro (DHCP
Manager)</title><procedure><step id="dhcp-admin-step-271"><para>In DHCP Manager, select the Macros tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-272"><para>Select the macro to delete.</para><para>The
Delete Macro dialog box prompts you to confirm that you want to delete the
specified macro.</para>
</step><step id="dhcp-admin-step-273"><para>Select Notify DHCP Server of Change.</para><para>This selection tells the DHCP server to reread the <literal>dhcptab</literal> table
to put the change into effect immediately after you click OK.</para>
</step><step id="dhcp-admin-step-274"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-43dh"><title>How to Delete a DHCP Macro (<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-563"><para>Delete a macro by typing a command of
the following format:</para><screen># <userinput>dhtadm -D -m <replaceable>macroname</replaceable> -g</userinput></screen><para>For example, to delete the macro <literal>bluenote</literal>, you would
type the following command:</para><para># <userinput>dhtadm -D -m bluenote
-g</userinput></para>
</step>
</procedure>
</task>
</sect1><sect1 id="dhcp-admin-206"><title>Working With DHCP Options (Task Map)</title><para>Options are keywords for network configuration parameters that
the DHCP server can pass to clients. In the Solaris DHCP service, you cannot
create, delete, or modify the standard DHCP options. The standard options
are defined by the DHCP protocol, so the options cannot change. You can only
perform tasks on options that you create for your site. For this reason, when
you first set up your DHCP service, the Options tab in DHCP Manager is empty
until you create options for your site.</para><para>If you create options on the DHCP server, you must also add information
about the options on the DHCP client. For the Solaris DHCP client, you must
edit the <literal>/etc/dhcp/inittab</literal> file to add entries for the
new options. See the <olink targetdoc="refman4" targetptr="dhcp-inittab-4" remap="external"><citerefentry><refentrytitle>dhcp_inittab</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink> man page for more information about this file.</para><para>If you have DHCP clients that are not Solaris clients, refer to the
documentation for those clients for information about adding options or symbols.
See <olink targetptr="dhcp-overview-19a" remap="internal">About DHCP Options</olink> for more
information about options in Solaris DHCP.</para><para>You can use either DHCP Manager or the <literal>dhtadm</literal> command
to create, modify, or delete options.</para><tip><para>Options are called <emphasis>symbols</emphasis> in the DHCP literature.
The <literal>dhtadm</literal> command and its related man page also refer
to options as symbols.</para>
</tip><para>The following task map lists tasks that you must perform to create,
modify, and delete DHCP options. The task map contains links to procedures
for the tasks. </para><informaltable frame="all" pgwide="1"><tgroup cols="3" colsep="0" rowsep="0"><colspec colwidth="109*"/><colspec colwidth="137*"/><colspec colwidth="150*"/><thead><row rowsep="1"><entry colsep="1" rowsep="1"><para>Task</para>
</entry><entry colsep="1" rowsep="1"><para>Description</para>
</entry><entry colsep="1" rowsep="1"><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry colsep="1" rowsep="1"><para>Create DHCP options.</para>
</entry><entry colsep="1" rowsep="1"><para>Add new options for information not covered by a standard DHCP option.</para>
</entry><entry colsep="1" rowsep="1"><para><olink targetptr="dhcp-admin-44art" remap="internal">How to Create DHCP Options (DHCP
Manager)</olink></para><para><olink targetptr="dhcp-admin-45art" remap="internal">How to Create DHCP Options (dhtadm)</olink></para><para><olink targetptr="dhcp-admin-49" remap="internal">Modifying the Solaris DHCP Client's
Option Information</olink></para>
</entry>
</row><row><entry colsep="1" rowsep="1"><para>Modify DHCP options.</para>
</entry><entry colsep="1" rowsep="1"><para>Change properties of DHCP options you have created.</para>
</entry><entry colsep="1" rowsep="1"><para><olink targetptr="dhcp-admin-46art" remap="internal">How to Modify DHCP Option Properties
(DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-47art" remap="internal">How to Modify DHCP Option Properties
(dhtadm)</olink></para>
</entry>
</row><row><entry colsep="1" rowsep="1"><para>Delete DHCP options.</para>
</entry><entry colsep="1" rowsep="1"><para>Remove DHCP options that you have created.</para>
</entry><entry colsep="1" rowsep="1"><para><olink targetptr="dhcp-admin-48art" remap="internal">How to Delete DHCP Options (DHCP
Manager)</olink></para><para><olink targetptr="dhcp-admin-49art" remap="internal">How to Delete DHCP Options (dhtadm)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>Before you create DHCP options, you should be familiar with the
option properties listed in the following table.</para><table frame="topbot" id="dhcp-admin-tbl-243"><title>DHCP Option Properties</title><tgroup cols="2" colsep="0" rowsep="0"><colspec colname="colspec0" colwidth="160*"/><colspec colname="colspec1" colwidth="423*"/><thead><row rowsep="1"><entry><para>Option Property</para>
</entry><entry><para>Description</para>
</entry>
</row>
</thead><tbody><row><entry><para>Category</para>
</entry><entry><para>The <emphasis>category</emphasis> of an option must be one of the following:</para><itemizedlist><listitem><para>Vendor &#8211; Options specific to a client's vendor platform,
either hardware or software.</para>
</listitem><listitem><para>Site &#8211; Options specific to your site.</para>
</listitem><listitem><para>Extend &#8211; Newer options that have been added to the DHCP
protocol, but not yet implemented as standard options in Solaris DHCP. </para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>Code</para>
</entry><entry><para>The <emphasis>code</emphasis> is a unique number that you assign to
an option. The same code cannot be used for any other option within its option
category. The code must be appropriate for the option category:</para><itemizedlist><listitem><para>Vendor &#8211; Code values of 1&#8211;254 for each vendor
class</para>
</listitem><listitem><para>Site &#8211; Code values of 128&#8211;254</para>
</listitem><listitem><para>Extend &#8211; Code values of 77&#8211;127</para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>Data type</para>
</entry><entry><para>The <emphasis>data type</emphasis> specifies what kind of data can be
assigned as a value for the option. The valid data types are described in
the following list.</para><itemizedlist><listitem><para>ASCII &#8211; Text string value.</para>
</listitem><listitem><para>BOOLEAN &#8211; No value is associated with the Boolean data
type. The presence of the option indicates that a condition is true, while
the absence of the option indicates that a condition is false. For example,
the <literal>Hostname</literal> option is Boolean. The presence of <literal>Hostname</literal> in a macro causes the DHCP server to look up the host name associated
with the assigned address.</para>
</listitem><listitem><para>IP &#8211; One or more IP addresses, in dotted decimal format
(<replaceable>xxx.xxx.xxx.xxx</replaceable>).</para>
</listitem><listitem><para>OCTET &#8211; Uninterpreted ASCII representation of binary
data. For example, a client ID uses the octet data type. Valid characters
are 0&#8211;9, A&#8211;F, and a&#8211;f. Two ASCII characters are needed to
represent an 8-bit quantity.</para>
</listitem><listitem><para>UNUMBER8, UNUMBER16, UNUMBER32, UNUMBER64, SNUMBER8, SNUMBER16,
SNUMBER32, or SNUMBER64 &#8211; Numeric value. An initial U or S indicates
whether the number is unsigned or signed. The digits at the end indicate how
many bits are in the number.</para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>Granularity</para>
</entry><entry><para>The <emphasis>granularity</emphasis> specifies how many &#8220;instances&#8221;
of the data type are needed to represent a complete option value. For example,
a data type of IP and a granularity of 2 would mean that the option value
must contain two IP addresses.</para>
</entry>
</row><row><entry><para>Maximum</para>
</entry><entry><para>The maximum number of values that can be specified for the option. For
example, suppose the maximum is 2, the granularity is 2, and the data type
is IP. In this case, the option value could contain a maximum of two pairs
of IP addresses.</para>
</entry>
</row><row><entry><para>Vendor client classes</para>
</entry><entry><para>This option is available only when the option category is Vendor. Vendor
client classes identify the client classes with which the Vendor option is
associated. The class is an ASCII string that represents the client machine
type or operating system. For example, the class string for some models of
Sun workstations is <literal>SUNW.Sun-Blade-100</literal>. This type of option
enables you to define configuration parameters that are passed to all clients
of the same class, and <emphasis>only</emphasis> clients of that class.</para><para>You can specify multiple client classes. Only those DHCP clients with
a client class value that matches a class that you specify receive the options
scoped by that class.</para><para>The client class is determined by the vendor of the DHCP client. For
DHCP clients that are not Solaris clients, refer to the vendor documentation
for the DHCP client for the client class.</para><para>For Solaris clients, the Vendor client class can be obtained by typing
the <literal>uname -i</literal> command on the client. To specify the Vendor
client class, substitute periods for any commas in the string returned by
the <literal>uname</literal> command. For example, if the string <literal>SUNW,Sun-Blade-100</literal> is returned by the <literal>uname
-i</literal> command, you should specify the Vendor client class as <literal>SUNW.Sun-Blade-100</literal>.</para>
</entry>
</row>
</tbody>
</tgroup>
</table><sect2 id="dhcp-admin-247"><title>Creating DHCP Options</title><para>If you need to pass client information for which there is not
already an existing option in the DHCP protocol, you can create an option.
See the <olink targetdoc="refman4" targetptr="dhcp-inittab-4" remap="external"><citerefentry><refentrytitle>dhcp_inittab</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink> man page for a list of all the options that are defined
in Solaris DHCP before you create your own option.</para><para>You can use the <literal>dhtadm -A -s</literal> command or DHCP
Manager's Create Option dialog box to create new options.</para><para>The following figure shows DHCP Manager's Create Option dialog box.</para><figure id="dhcp-admin-fig-244"><title>Create Option Dialog Box in DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-option-create.tif"/>
</imageobject><textobject><simpara>Dialog box shows fields that define properties of a new
option. Shows Vendor Client Classes area and Notify DHCP server check box.</simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-44art"><title>How to Create DHCP Options (DHCP Manager)</title><procedure><step id="dhcp-admin-step-283"><para>In DHCP Manager, select the Options tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-284"><para>Choose Create from the Edit menu.</para><para>The Create Options dialog box opens.</para>
</step><step id="dhcp-admin-step-285"><para>Type a short descriptive name for the
new option.</para><para>The name can contain up to 128 alphanumeric characters
and spaces.</para>
</step><step id="dhcp-admin-step-286"><para>Type or select values for each setting
in the dialog box.</para><para>Refer to <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink> for information about each setting, or view the DHCP Manager
help.</para>
</step><step id="dhcp-admin-step-287"><para>Select Notify DHCP Server of Change if
you are finished creating options.</para><para>This selection tells the DHCP
server to reread the <literal>dhcptab</literal> table to put the change into
effect immediately after you click OK.</para>
</step><step id="dhcp-admin-step-288"><para>Click OK.</para><para>You can now add
the option to macros, and assign a value to the option to pass to clients.</para>
</step>
</procedure>
</task><task id="dhcp-admin-45art"><title>How to Create DHCP Options (<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-292"><para>Create a DHCP option by typing a command
using the following format:</para><screen># <userinput>dhtadm -A -s <replaceable>option-name</replaceable> -d '<replaceable>category,code,data-type,granularity,maximum</replaceable>' -g</userinput></screen><variablelist><varlistentry><term><replaceable>option-name</replaceable></term><listitem><para>Is an alphanumeric string of 128 characters of less.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>category</replaceable></term><listitem><para>Is one of the following: <literal>Site</literal>, <literal>Extend</literal>, or <literal>Vendor=</literal><replaceable>list-of-classes</replaceable>. <replaceable>list-of-classes</replaceable> is a space-separated list of vendor client classes
to which the option applies. See <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink> for information about how to determine the vendor client
class. </para>
</listitem>
</varlistentry><varlistentry><term><replaceable>code</replaceable></term><listitem><para>Is a numeric value that is appropriate to the option category,
as explained in <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink>.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>data-type</replaceable></term><listitem><para>Is specified by a keyword that indicates the type of data
that is passed with the option, as explained in <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink>.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>granularity</replaceable></term><listitem><para>Is specified as a nonnegative number, as explained in <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink>.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>maximum</replaceable></term><listitem><para>Is a nonnegative number, as explained in <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink>.</para>
</listitem>
</varlistentry>
</variablelist>
</step>
</procedure><example id="ewicy"><title>Creating a DHCP Option With <command>dhtadm</command></title><para>The following command would create an option called <literal>NewOpt</literal>,
which is a Site category option. The option's code is 130. The option's value
can be set to a single 8-bit unsigned integer.</para><literallayout># <userinput>dhtadm -A -s NewOpt -d 'Site,130,UNUMBER8,1,1' -g</userinput></literallayout><para>The following command would create an option called <literal>NewServ</literal>,
which is a Vendor category option that applies to clients whose machine type
is <literal>SUNW,Sun-Blade-100</literal> or <literal>SUNW,Sun-Blade-1000</literal>.
The option's code is 200. The option's value can be set to one IP address.</para><literallayout># <userinput>dhtadm -A -s NewServ -d 'Vendor=SUNW.Sun-Blade-100 \ 
SUNW.Sun-Blade-1000,200,IP,1,1' -g</userinput></literallayout>
</example>
</task><sect2 id="dhcp-admin-253"><title>Modifying DHCP Options</title><para>If you have created options for your DHCP service, you can change
the properties for these options. You can use the <literal>dhtadm -M -s</literal> command
or DHCP Manager's Option Properties dialog box to modify options.</para><para>Note that you should modify the Solaris DHCP client's option information
to reflect the same modification that you make to the DHCP service. See <olink targetptr="dhcp-admin-49" remap="internal">Modifying the Solaris DHCP Client's Option Information</olink>.</para><para>The following figure shows DHCP Manager's Option Properties dialog box.</para><figure id="dhcp-admin-fig-294"><title>Option Properties Dialog Box in DHCP
Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-option-props.tif"/>
</imageobject><textobject><simpara>Dialog box shows current properties of selected option.
Shows Vendor Client Classes and Notify DHCP server check box.</simpara>
</textobject>
</mediaobject>
</figure>
</sect2><task id="dhcp-admin-46art"><title>How to Modify DHCP Option Properties (DHCP
Manager)</title><procedure><step id="dhcp-admin-step-298"><para>In DHCP Manager, select the Options tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-299"><para>Select the option that you want to modify.</para>
</step><step id="dhcp-admin-step-300"><para>Choose Properties from the Edit menu.</para><para>The Option Properties dialog box opens.</para>
</step><step id="dhcp-admin-step-301"><para>Edit the properties as needed.</para><para>See <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink> for information about
the properties, or view the DHCP Manager help.</para>
</step><step id="dhcp-admin-step-302"><para>Select Notify DHCP Server of Change when
you are finished with options.</para><para>The change is made to the <literal>dhcptab</literal> table. The DHCP server is signaled to reread the <literal>dhcptab</literal> table
to put the changes into effect.</para>
</step><step id="dhcp-admin-step-303"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-47art"><title>How to Modify DHCP Option Properties (<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-307"><para>Modify an option by typing a command
using the following format:</para><screen># <userinput>dhtadm -M -s <replaceable>option-name</replaceable> -d '<replaceable>category,code,data-type,granularity,maximum</replaceable>' -g</userinput></screen><variablelist><varlistentry><term><replaceable>option-name</replaceable></term><listitem><para>Specifies the name of the option that you want to change.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>category</replaceable></term><listitem><para>Can be <literal>Site</literal>, <literal>Extend</literal>,
or <literal>Vendor=</literal><replaceable>list-of-classes</replaceable>. <replaceable>list-of-classes</replaceable> is a space-separated list of vendor client classes
to which the option applies. For example, <literal>SUNW.Sun-Blade-100 SUNW.Ultra-80
SUNWi86pc</literal>.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>code</replaceable></term><listitem><para>Specifies a numeric value that is appropriate to the option
category, as explained in <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink>.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>data-type</replaceable></term><listitem><para>Specifies a keyword that indicates the type of data that is
passed with the option, as explained in <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink>.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>granularity</replaceable></term><listitem><para>Is a nonnegative number, as explained in <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink>.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>maximum</replaceable></term><listitem><para>Is a nonnegative number, as explained in as explained in <olink targetptr="dhcp-admin-tbl-243" remap="internal">Table 15&#8211;5</olink>.</para>
</listitem>
</varlistentry>
</variablelist><para>Note that you must specify all of the DHCP option properties with the <literal>-d</literal> switch, not just the properties that you want to change.</para>
</step>
</procedure><example id="ewicw"><title>Modifying a DHCP Option With <command>dhtadm</command></title><para>The following command would modify an option called <literal>NewOpt</literal>.
The option is a Site category option. The option's code is 135. The option's
value can be set to a single 8-bit unsigned integer.</para><literallayout># <userinput>dhtadm -M -s NewOpt -d 'Site,135,UNUMBER8,1,1'</userinput></literallayout><para>The following command would modify an option called <literal>NewServ</literal>,
which is a Vendor category option. The option now applies to clients whose
machine type is <literal>SUNW,Sun-Blade-100</literal> or <literal>SUNW,i86pc</literal>.
The option's code is 200. The option's value can be set to one IP address.</para><literallayout># <userinput>dhtadm -M -s NewServ -d 'Vendor=SUNW.Sun-Blade-100 \
SUNW.i86pc,200,IP,1,1' -g</userinput></literallayout>
</example>
</task><sect2 id="dhcp-admin-260"><title>Deleting DHCP Options</title><para>You cannot delete standard DHCP options. However, if you have defined
options for your DHCP service, you can delete these options by using DHCP
Manager or the <literal>dhtadm</literal> command.</para>
</sect2><task id="dhcp-admin-48art"><title>How to Delete DHCP Options (DHCP Manager)</title><procedure><step id="dhcp-admin-step-311"><para>In DHCP Manager, select the Options tab.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step><para>Select the option that you want to delete.</para>
</step><step id="dhcp-admin-step-312sm"><para>Choose Delete from the Edit menu.</para><para>The Delete Option dialog box opens.</para>
</step><step><para>Select Notify DHCP Server of Change if you are finished deleting
options.</para><para>This selection tells the DHCP server to reread the <literal>dhcptab</literal> table to put the change into effect immediately after you
click OK.</para>
</step><step id="dhcp-admin-step-313"><para>Click OK.</para>
</step>
</procedure>
</task><task id="dhcp-admin-49art"><title>How to Delete DHCP Options (<literal>dhtadm</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-317"><para>Delete a DHCP option by typing a command
using the following format:</para><screen># <userinput>dhtadm -D -s <replaceable>option-name</replaceable> -g</userinput></screen>
</step>
</procedure>
</task><sect2 id="dhcp-admin-49"><title>Modifying the Solaris DHCP Client's Option
Information</title><para>If you add a new DHCP option to your DHCP server, you must add
a complementary entry to each DHCP client's option information. If you have
a DHCP client that is not a Solaris DHCP client, refer to that client's documentation
for information about adding options or symbols.</para><para>On a Solaris DHCP client, you must edit the <literal>/etc/dhcp/inittab</literal> file and add an entry for each option that you add to the DHCP
server. If you later modify the option on the server, you must also modify
the entry in the client's <literal>/etc/dhcp/inittab</literal> file.</para><para>Refer to the <olink targetdoc="refman4" targetptr="dhcp-inittab-4" remap="external"><citerefentry><refentrytitle>dhcp_inittab</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink> man page for detailed information about the syntax
of the <literal>/etc/dhcp/inittab</literal> file.</para><note><para>If you added DHCP options to the <literal>dhcptags</literal> file
in a previous Solaris release, you must add the options to the <literal>/etc/dhcp/inittab</literal> file. See <olink targetptr="dhcp-ref-9" remap="internal">DHCP Option Information</olink> for
more information.</para>
</note>
</sect2>
</sect1><sect1 id="dhcp-admin-38"><title>Supporting Solaris Network Installation With
the DHCP Service</title><para>You can use DHCP to install the Solaris Operating System on certain
client systems on your network. Only <literal>sun4u</literal>-based systems
and x86 systems that meet the hardware requirements for running the Solaris
OS can use this feature. For information about using DHCP to automatically
configure client systems for the network as they boot, see <olink targetdoc="solinstallnet" targetptr="preconsysid-15630" remap="external">Chapter 2, <citetitle remap="chapter">Preconfiguring System Configuration Information (Tasks),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Network-Based Installations</citetitle></olink>.</para><para>DHCP also supports Solaris client systems that boot and install
remotely from servers across a wide area network (WAN) using HTTP. This method
of remote booting and installing is called the <emphasis>WAN boot installation</emphasis> method.
Using WAN boot, you can install the Solaris OS on SPARC based systems over
a large public network where the network infrastructure might be untrustworthy.
You can use WAN boot with security features to protect data confidentiality
and installation image integrity.</para><itemizedlist><para>Before you can use DHCP for booting and installing client systems remotely
using WAN boot, the DHCP server must be configured to supply the following
information to clients:</para><listitem><para>The proxy server's IP address</para>
</listitem><listitem><para>The location of the <literal>wanboot&#8212;cgi</literal> program</para>
</listitem>
</itemizedlist><para>For details about configuring the DHCP server to provide this information,
see <olink targetdoc="solinstallnet" targetptr="preconsysid-15630" remap="external">Chapter 2, <citetitle remap="chapter">Preconfiguring System Configuration Information (Tasks),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Network-Based Installations</citetitle></olink>. For information about
booting and installing client systems with a DHCP server across a WAN, see <olink targetdoc="solinstallnet" targetptr="wanbootoverview-1" remap="external">Chapter 9, <citetitle remap="chapter">WAN Boot (Overview),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Network-Based Installations</citetitle></olink>.</para><para>For information about supporting diskless clients, see <olink targetptr="dhcp-admin-122" remap="internal">Supporting Remote Boot and Diskless Boot Clients
(Task Map)</olink>.</para>
</sect1><sect1 id="dhcp-admin-122"><title>Supporting Remote Boot and Diskless Boot
Clients (Task Map)</title><para>The Solaris DHCP service can support Solaris client systems that
mount their operating system files remotely from another machine (the OS server).
Such clients are often called <emphasis>diskless clients</emphasis>. Diskless
clients can be thought of as persistent remote boot clients. Each time a diskless
client boots,  the client must obtain the name and IP address of the server
that hosts the client's operating system files. The diskless client can then
boot remotely from those files.</para><para>Each diskless client has its own root partition on the OS server, which
is shared to the client host name. The DHCP server must always return the
same IP address to a diskless client. That address must remain mapped to the
same host name in the name service, such as DNS. When a diskless client receives
a consistent IP address, the client uses a consistent host name, and can access
its root partition on the OS server.</para><para>In addition to providing the IP address and host name, the DHCP
server can supply the location of the diskless client's operating system files.
However, you must create options and macros to pass the information in a DHCP
message packet.</para><para>The following task map lists the tasks required to support diskless
clients or any other persistent remote boot clients. The task map also provides
links to procedures to help you carry out the tasks.</para><informaltable frame="all" pgwide="1"><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec15" colwidth="33*"/><colspec colname="colspec16" colwidth="33*"/><colspec colname="colspec17" colwidth="33*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Set up OS services on a Solaris server.</para>
</entry><entry><para>Use the <literal>smosservice</literal> command to create operating system
files for clients.</para>
</entry><entry><para><olink targetdoc="sysadv1" targetptr="clientsetup-1" remap="external">Chapter 7, <citetitle remap="chapter">Managing Diskless Clients (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink> </para><para>Also, see the <olink targetdoc="refman1m" targetptr="smosservice-1m" remap="external"><citerefentry><refentrytitle>smosservice</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page.</para>
</entry>
</row><row><entry><para>Set up the DHCP service to support network boot clients.</para>
</entry><entry><para>Use DHCP Manager or the <literal>dhtadm</literal> command to create
new Vendor options and macros, which the DHCP server can use to pass booting
information to the clients.</para><para>If you already created the options for network install clients, you
need only to create macros for the Vendor client types of the diskless clients.</para>
</entry><entry><para><olink targetdoc="solinstallnet" targetptr="preconsysid-15630" remap="external">Chapter 2, <citetitle remap="chapter">Preconfiguring System Configuration Information (Tasks),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Network-Based Installations</citetitle></olink></para>
</entry>
</row><row><entry><para>Assign reserved IP addresses to the diskless clients.</para>
</entry><entry><para>Use DHCP Manager to mark address as reserved, or use the <literal>pntadm</literal> command
to mark addresses as <literal>MANUAL</literal> for diskless clients.</para>
</entry><entry><para><olink targetptr="dhcp-admin-161" remap="internal">Assigning a Reserved IP Address to
a DHCP Client</olink></para>
</entry>
</row><row><entry><para>Set up diskless clients for OS service.</para>
</entry><entry><para>Use the <literal>smdiskless</literal> command to add operating system
support on the OS server for each client. Specify the IP addresses that you
reserved for each client.</para>
</entry><entry><para><olink targetdoc="sysadv1" targetptr="clientsetup-1" remap="external">Chapter 7, <citetitle remap="chapter">Managing Diskless Clients (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink></para><para>Also, see the <olink targetdoc="refman1m" targetptr="smdiskless-1m" remap="external"><citerefentry><refentrytitle>smdiskless</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page.</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1><sect1 id="dhcp-admin-1211"><title>Setting Up DHCP Clients to Receive Information
Only (Task Map)</title><para>In some networks, you might want the DHCP service to provide only configuration
information to clients. Client systems that need information, not leases,
can use the DHCP client to issue an <literal>INFORM</literal> message. The <literal>INFORM</literal> message asks the DHCP server to send the appropriate configuration
information to the client.</para><para>You can set up the Solaris DHCP server to support clients that need
information only. You need to create an empty network table that corresponds
to the network that is hosting the clients. The table must exist so that the
DHCP server can respond to clients from that network.</para><para>The following task map lists the tasks required to support information-only
clients. The task map also includes links to procedures to help you carry
out the tasks.</para><informaltable frame="all" pgwide="1"><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec0" colwidth="23.55*"/><colspec colname="colspec1" colwidth="35.66*"/><colspec colname="colspec2" colwidth="39.79*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Create an empty network table.</para>
</entry><entry><para>Use DHCP Manager or the <literal>pntadm</literal> command to create
a network table for the information-only clients' network.</para>
</entry><entry><para><olink targetptr="dhcp-admin-17" remap="internal">Adding DHCP Networks</olink></para>
</entry>
</row><row><entry><para>Create macros to contain information that is needed by clients.</para>
</entry><entry><para>Use DHCP Manager or the <literal>dhtadm</literal> command to create
macros to pass the required information to clients.</para>
</entry><entry><para><olink targetptr="dhcp-admin-75" remap="internal">Creating DHCP Macros</olink></para>
</entry>
</row><row><entry><para>Have the DHCP client issue an <literal>INFORM</literal> message.</para>
</entry><entry><para>Use the <command>ifconfig <replaceable>int</replaceable> dhcp inform</command> command
to make the DHCP client issue an <literal>INFORM</literal> message.</para>
</entry><entry><para><olink targetptr="dhcp-overview-31a" remap="internal">DHCP Client Startup</olink></para><para><olink targetptr="dhcp-overview-21" remap="internal">ifconfig Command Options Used With
the DHCP Client</olink></para><para><olink targetdoc="refman1m" targetptr="ifconfig-1m" remap="external"><citerefentry><refentrytitle>ifconfig</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>man
page</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1><sect1 id="dhcp-admin-cv1211"><title>Converting to a New DHCP Data Store</title><para>Solaris DHCP provides a utility to convert the DHCP configuration data
from one data store to another data store. Several reasons might exist for
converting to a new data store. For example, you might have more DHCP clients,
requiring higher performance or higher capacity from the DHCP service. You
also might  want to share the DHCP server duties among multiple servers. See <olink targetptr="chapter2-39" remap="internal">Choosing the DHCP Data Store</olink> for a comparison
of the relative benefits and drawbacks of each type of data store.</para><note><para>If you upgraded from a Solaris release that is older than the
Solaris 8 7/01 release, you should read this note.</para><para>When you run
any Solaris DHCP tool after Solaris installation, you are prompted to convert
to the new data store. The conversion is required because the format of the
data stored in both files and NIS+ changed in the Solaris 8 7/01 release.
If you do not convert to the new data store, the DHCP server continues to
read the old data tables. However, the server can only extend leases for existing
clients. You cannot register new DHCP clients or use DHCP management tools
with the old data tables.</para>
</note><para>The conversion utility is also useful for sites that are converting
from a Sun provided data store to a third-party data store. The conversion
utility looks up entries in the existing data store and adds new entries that
contain the same data to the new data store. Data store access is implemented
in separate modules for each data store. This modular approach enables the
conversion utility to convert DHCP data from any data store format to any
other data store format. Each data store must have a module that the DHCP
service can use. </para><para>The data store conversion can be accomplished with DHCP Manager through
the Data Store Conversion wizard, or with the <literal>dhcpconfig -C</literal> command.</para><para>The initial dialog box of the Data Store Conversion wizard is shown
in the following figure.</para><figure id="dhcp-admin-fig-335"><title>Data Store Conversion Wizard Dialog
Box in DHCP Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-convert-wiz.tif"/>
</imageobject><textobject><simpara>Dialog box lists steps to convert to a new data store.
Shows new data store options. Shows back and forward, Cancel, and Help buttons.</simpara>
</textobject>
</mediaobject>
</figure><para>Before the conversion begins, you must specify whether to save the old
data store's tables <literal>(dhcptab</literal> and network tables). The conversion
utility then stops the DHCP server, converts the data store, and restarts
the server when the conversion has completed successfully. If you did not
specify to save the old tables, the utility deletes the tables after determining
the conversion is successful. The process of converting can be time-consuming.
The conversion runs in the background with a meter to inform you of its progress. </para><task id="dhcp-admin-572"><title>How to Convert the DHCP Data Store (DHCP
Manager)</title><procedure><step id="dhcp-admin-step-574"><para>In DHCP Manager, choose Convert Data
Store from the Service menu.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How
to Start and Stop DHCP Manager</olink> for information about DHCP Manager.</para><para>The Data Store Conversion wizard opens.</para>
</step><step id="dhcp-admin-step-575"><para>Answer the wizard's prompts.</para><para>If
you have trouble providing the requested information, click Help to view detailed
information about each dialog box.</para>
</step><step><para>Review your selections, and then click Finish to convert the data
store.</para><para>The DHCP server restarts when the conversion is complete.
The server immediately uses the new data store.</para>
</step>
</procedure>
</task><task id="dhcp-admin-576"><title>How to Convert the DHCP Data Store <literal>(dhcpconfig
-C</literal>)</title><procedure>&roleDHCPstep;<step id="dhcp-admin-step-579"><para>Convert the data store by typing a command
of the following format:</para><screen># <userinput>/usr/sbin/dhcpconfig -C -r <replaceable>resource</replaceable> -p <replaceable>path</replaceable></userinput></screen><variablelist termlength="narrow"><varlistentry><term><replaceable>resource</replaceable></term><listitem><para>is the new data store type, such as <literal>SUNWbinfiles</literal></para>
</listitem>
</varlistentry><varlistentry><term><replaceable>path</replaceable></term><listitem><para>is the path to the data, such as <literal>/var/dhcp</literal></para>
</listitem>
</varlistentry>
</variablelist><para>Note that if you want to keep the original data in the old data store
after the conversion, specify the <option>k</option> option. For example,
to convert your data store to <literal>SUNWbinfiles</literal> and save the
old data store, you would type:</para><screen># /usr/sbin/dhcpconfig -C -r SUNWbinfiles -p /var/dhcp -k</screen><para>See the <olink targetdoc="refman1m" targetptr="dhcpconfig-1m" remap="external"><citerefentry><refentrytitle>dhcpconfig</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page for more information about the <command>dhcpconfig</command> utility.</para>
</step>
</procedure>
</task>
</sect1><sect1 id="dhcp-admin-mv1211"><title>Moving Configuration Data Between DHCP
Servers (Task Map)</title><para>DHCP Manager and the <literal>dhcpconfig</literal> utility enable you
to move some or all the DHCP configuration data from one Solaris DHCP server
to another server. You can move entire networks and all the IP addresses,
macros, and options associated with the networks. Alternatively, you can select
specific IP addresses, macros, and options to move. You can also copy macros
and options without removing the macros and options from the first server.</para><itemizedlist><para>You might want to move data if you are going to do any of the following
tasks:</para><listitem><para>Add a server to share DHCP duties.</para>
</listitem><listitem><para>Replace the DHCP server's system.</para>
</listitem><listitem><para>Change the path for the data store, while still using the
same data store.</para>
</listitem>
</itemizedlist><para>The following task map identifies the procedures that you must
perform when you move DHCP configuration data.</para><informaltable frame="all" pgwide="1"><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec18" colwidth="24.09*"/><colspec colname="colspec19" colwidth="33.55*"/><colspec colname="colspec20" colwidth="41.36*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>1. Export the data from the first server.</para>
</entry><entry><para>Select the data that you want to move to another server, and create
a file of exported data.</para>
</entry><entry><para><olink targetptr="dhcp-admin-proc-1204" remap="internal">How to Export Data From a DHCP
Server (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-proc-1205" remap="internal">How to Export Data From a DHCP
Server (dhcpconfig -X)</olink></para>
</entry>
</row><row><entry><para>2. Import the data to the second server.</para>
</entry><entry><para>Copy exported data to another DHCP server's data store.</para>
</entry><entry><para><olink targetptr="dhcp-admin-proc-510" remap="internal">How to Import Data on a DHCP
Server (DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-proc-317" remap="internal">How to Import Data on a DHCP
Server (dhcpconfig -I)</olink></para>
</entry>
</row><row><entry><para>3. Modify the imported data for the new server environment.</para>
</entry><entry><para>Change server-specific configuration data to match the new server's
information.</para>
</entry><entry><para><olink targetptr="dhcp-admin-proc-257" remap="internal">How to Modify Imported DHCP Data
(DHCP Manager)</olink></para><para><olink targetptr="dhcp-admin-proc-324" remap="internal">How to Modify Imported DHCP Data
(pntadm, dhtadm)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>In DHCP Manager, you use the Export Data wizard and the Import Data
wizard to move the data from one server to the other server. You then modify
macros in the Macros tab. The following figures show the initial dialog boxes
for the wizards.</para><figure id="dhcp-admin-fig-336"><title>Export Data Wizard Dialog Box in DHCP
Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-export-wiz.tif"/>
</imageobject><textobject><simpara>Dialog box lists steps to export data to a file. Shows
two lists of networks, titled Do Not Export and Export. Shows arrow buttons
between the lists.</simpara>
</textobject>
</mediaobject>
</figure><figure id="dhcp-admin-fig-337"><title>Import Data Wizard Dialog Box in DHCP
Manager</title><mediaobject><imageobject><imagedata entityref="dhcp-import-wiz.tif"/>
</imageobject><textobject><simpara>Dialog box lists steps to import data from a file. Shows
Import File field and Overwrite existing data check box.</simpara>
</textobject>
</mediaobject>
</figure><task id="dhcp-admin-proc-1204"><title>How to Export Data From a DHCP Server
(DHCP Manager)</title><procedure><step id="dhcp-admin-step-583"><para>Start DHCP Manager on the server from
which you want to move or copy data.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for information
about DHCP Manager.</para>
</step><step id="dhcp-admin-step-584"><para>Choose Export Data from the Service menu.</para><para>The Export Data wizard opens as shown in <olink targetptr="dhcp-admin-fig-336" remap="internal">Figure 15&#8211;20</olink>.</para>
</step><step id="dhcp-admin-step-585"><para>Answer the wizard's prompts.</para><para>If
you have difficulty, click Help for detailed information about the prompts.</para>
</step><step id="dhcp-admin-step-586"><para>Move the export file to a file system
that is accessible to the DHCP server that must import the data.</para>
</step>
</procedure><taskrelated role="see-also"><para>Import the data as described in <olink targetptr="dhcp-admin-proc-510" remap="internal">How
to Import Data on a DHCP Server (DHCP Manager)</olink>.</para>
</taskrelated>
</task><task id="dhcp-admin-proc-1205"><title>How to Export Data From a DHCP Server
(<literal>dhcpconfig -X</literal>)</title><procedure><step id="dhcp-admin-step-604"><para>Log in to the server from which you want
to move or copy data.</para>
</step>&roleDHCPstep;<step id="dhcp-admin-step-605"><para>Export the data.</para><para>You can
export all of the DHCP data, or specific parts of the data.</para><stepalternatives><step><para>To export specific addresses, macros, and options, type a command
that uses the following format:</para><screen># <userinput>dhcpconfig -X</userinput> <replaceable>filename</replaceable> <userinput>-a</userinput> <replaceable>network-addresses</replaceable> <userinput>-m</userinput> <replaceable>macros</replaceable> <userinput>-o</userinput> <replaceable>options</replaceable></screen><para><replaceable>filename</replaceable> is the full path name that you want
to use to store the compressed exported data. You specify particular network
addresses, DHCP macros, and DHCP options in comma-separated lists. The following
example shows how to export specific networks, macros, and options.</para><literallayout># <userinput>dhcpconfig -X /var/dhcp/0dhcp1065_data \
-a 10.63.0.0,10.62.0.0 \
-m 10.63.0.0,10.62.0.0,SUNW.Sun-Blade-100 -o Sterm</userinput></literallayout>
</step><step><para>To export all DHCP data, type a command that uses the <literal>ALL</literal> keyword.</para><screen># <userinput>dhcpconfig -X</userinput> <replaceable>filename</replaceable> <userinput>-a ALL -m ALL -o ALL</userinput></screen><para><replaceable>filename</replaceable> is the full path name that you want
to use to store the compressed exported data. The keyword <literal>ALL</literal> can
be used with the command options to export all the network addresses, macros,
or options. The following example shows how to use the <literal>ALL</literal> keyword.</para><literallayout># <userinput>dhcpconfig -X /var/dhcp/dhcp1065_data -a ALL -m ALL -o ALL</userinput></literallayout>
</step>
</stepalternatives><tip><para>You can omit the export of a particular kind of data by not specifying
the <command>dhcpconfig</command> command option for that type of data. For
example, if you do not specify the <option>m</option> option, no DHCP macros
are exported.</para>
</tip><para>See the <olink targetdoc="refman1m" targetptr="dhcpconfig-1m" remap="external"><citerefentry><refentrytitle>dhcpconfig</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page for more information about the <literal>dhcpconfig</literal> command.</para>
</step><step id="dhcp-admin-step-606"><para>Move the export file to a location that
is accessible to the server that must import the data.</para>
</step>
</procedure><taskrelated role="see-also"><para>Import the data as described in <olink targetptr="dhcp-admin-proc-317" remap="internal">How
to Import Data on a DHCP Server (dhcpconfig -I)</olink>.</para>
</taskrelated>
</task><task id="dhcp-admin-proc-510"><title>How to Import Data on a DHCP Server
(DHCP Manager)</title><procedure><step id="dhcp-admin-step-588"><para>Start DHCP Manager on the server to which
you want to move data that you previously exported from a DHCP server.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to Start and Stop DHCP Manager</olink> for
information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-589"><para>Choose Import Data from the Service menu.</para><para>The Import Data wizard opens, as shown in <olink targetptr="dhcp-admin-fig-337" remap="internal">Figure 15&#8211;21</olink>.</para>
</step><step id="dhcp-admin-step-590"><para>Answer the wizard's prompts.</para><para>If
you have difficulty, click Help for detailed information about the prompts.</para>
</step><step><para>Modify the imported data, if necessary.</para><para>See <olink targetptr="dhcp-admin-proc-257" remap="internal">How to Modify Imported DHCP Data (DHCP Manager)</olink></para>
</step>
</procedure>
</task><task id="dhcp-admin-proc-317"><title>How to Import Data on a DHCP Server
(<literal>dhcpconfig -I</literal>)</title><procedure><step id="dhcp-admin-step-608"><para>Log in to the server to which you want
to import the data.</para>
</step>&roleDHCPstep;<step id="dhcp-admin-step-609"><para>Import the data by typing a command of
the following format:</para><screen># <userinput>dhcpconfig -I <replaceable>filename</replaceable></userinput></screen><para><replaceable>filename</replaceable> is the name of the file that contains
the exported data.</para>
</step><step><para>Modify the imported data, if necessary.</para><para>See <olink targetptr="dhcp-admin-proc-324" remap="internal">How to Modify Imported DHCP Data (pntadm,
dhtadm)</olink>.</para>
</step>
</procedure>
</task><task id="dhcp-admin-proc-257"><title>How to Modify Imported DHCP Data (DHCP
Manager)</title><procedure><step id="dhcp-admin-step-592"><para>Start DHCP Manager on the server to which
you imported data.</para><para>See <olink targetptr="dhcp-admin-4" remap="internal">How to
Start and Stop DHCP Manager</olink> for information about DHCP Manager.</para>
</step><step id="dhcp-admin-step-593"><para>Examine imported data for network-specific
information that needs modification.</para><para>For example, if you moved
networks, you must open the Addresses tab and change the owning server of
addresses in the imported networks. You might also need to open the Macros
tab to specify the correct domain names for NIS, NIS+ or DNS in some macros.</para>
</step><step id="dhcp-admin-step-594"><para>Open the Addresses, tab and select a
network that you imported.</para>
</step><step id="dhcp-admin-step-595"><para>To select all the addresses, click the
first address, press and hold the Shift key, and click the last address.</para>
</step><step id="dhcp-admin-step-596"><para>From the Edit menu, choose Properties.</para><para>The Modify Multiple Addresses dialog box opens.</para>
</step><step id="dhcp-admin-step-597"><para>At the Managing Server prompt, select
the new server's name.</para>
</step><step id="dhcp-admin-step-598"><para>At the Configuration Macro prompt, select
the macro that should be used for all clients on this network, and then click
OK.</para>
</step><step id="dhcp-admin-step-600"><para>Open the Macros tab.</para>
</step><step id="dhcp-admin-step-601"><para>Use the Find button to locate the options
that are likely to need modified values.</para><para>The Find button is located
at the bottom of the window.</para><para><literal>DNSdmain</literal>, <literal>DNSserv</literal>, <literal>NISservs</literal>, <literal>NIS+serv</literal>, and <literal>NISdmain</literal> are examples of options that might need modification on
the new server.</para>
</step><step id="dhcp-admin-step-602"><para>Change the options in the appropriate
macros.</para><para>See <olink targetptr="dhcp-admin-46art" remap="internal">How to Modify
DHCP Option Properties (DHCP Manager)</olink> for the procedure for changing
options.</para>
</step>
</procedure>
</task><task id="dhcp-admin-proc-324"><title>How to Modify Imported DHCP Data (<literal>pntadm</literal>, <literal>dhtadm</literal>)</title><procedure><step id="dhcp-admin-step-613"><para>Log in to the server to which you imported
data.</para>
</step>&roleDHCPstep;<step id="dhcp-admin-step-614"><para>Examine the network tables for data that
needs to be modified.</para><para>If you moved networks, use the <literal>pntadm
-P</literal> <replaceable>network-address</replaceable> command to print out
the network tables for the networks you moved.</para>
</step><step id="dhcp-admin-step-615"><para>Modify IP address information by using
the <command>pntadm</command> command.</para><para>You might need to change
the owning server and the configuration macro for imported addresses. For
example, to change the owning server (<literal>10.60.3.4</literal>) and macro
(<literal>dhcpsrv-1060</literal>) for address <literal>10.63.0.2</literal>,
you would use the following command:</para><para><userinput>pntadm -M 10.63.0.2
-s 10.60.3.4 -m dhcpsrv-1060 10.60.0.0</userinput></para><para>If you have
a large number of addresses, you should create a script file that contains
commands to modify each address. Execute the script with the <literal>pntadm
-B</literal> command, which runs <literal>pntadm</literal> in batch mode.
See the <olink targetdoc="refman1m" targetptr="pntadm-1m" remap="external"><citerefentry><refentrytitle>pntadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man
page.</para>
</step><step id="dhcp-admin-step-616"><para>Examine the <literal>dhcptab</literal> macros
for options with values that need modification.</para><para>Use the <literal>dhtadm
-P</literal> command to print the entire <literal>dhcptab</literal> table
to your screen. Use <literal>grep</literal> or some other tool to search for
options or values that you might want to change.</para>
</step><step id="dhcp-admin-step-617"><para>Modify options in macros, if necessary,
by using the <literal>dhtadm -M</literal> command.</para><para>For example,
you might need to modify some macros to specify the correct domain names and
servers for NIS, NIS+ or DNS. For example, the following command changes the
values of <literal>DNSdmain</literal> and <literal>DNSserv</literal> in the
macro <literal>mymacro</literal>:</para><para><userinput>dhtadm -M -m mymacro
-e 'DNSserv=dnssrv2:DNSdmain=example.net' -g</userinput></para>
</step>
</procedure>
</task>
</sect1>
</chapter>