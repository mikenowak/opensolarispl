<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Monitoring Network Performance
(Tasks) - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p171.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p173.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="netmonitor-1"></a>Chapter&nbsp;30<h3>Monitoring Network Performance
(Tasks)</h3><p>This chapter describes the how to monitor network performance.
The following is a list of the step-by-step instructions in this
chapter.</p>
<ul><li><p><a href="p172.html#netmonitor-4">How to Check the Response of Hosts on the Network</a></p>
</li>
<li><p><a href="p172.html#netmonitor-6">How to Send Packets to Hosts on the Network</a></p>
</li>
<li><p><a href="p172.html#netmonitor-8">How to Capture Packets From the Network</a></p>
</li>
<li><p><a href="p172.html#netmonitor-9">How to Check the Network Status</a></p>
</li>
<li><p><a href="p173.html#netmonitor-12">How to Display NFS Server and Client Statistics</a></p>
</li>
</ul>
<a name="netmonitor-2"></a><h3>Monitoring Network Performance</h3>
<p><a name="spnetwork-ix4867"></a><a name="spnetwork-ix4868"></a><a name="spnetwork-ix4869"></a><a name="spnetwork-ix4871"></a><a name="spnetwork-ix4872"></a><a name="spnetwork-ix4873"></a><a name="spnetwork-ix4870"></a><a name="spnetwork-ix4874"></a><a name="spnetwork-ix4875"></a><a name="spnetwork-ix4876"></a><a name="spnetwork-ix4877"></a><a name="spnetwork-ix4878"></a><a name="spnetwork-ix4879"></a><a name="spnetwork-ix4882"></a><a name="spnetwork-ix4883"></a><a name="spnetwork-ix4884"></a><a name="spnetwork-ix4880"></a><a name="spnetwork-ix4881"></a><a href="p172.html#netmonitor-3">Table 30-1</a> describes
the commands that are available for monitoring network performance.
            </p>
<a name="netmonitor-3"></a>Table 30-1 Network Monitoring
Commands<table><tr><th><p>Command</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>ping</tt></p>
</td><td><p>Look at the response of hosts on the network.</p>
</td></tr>
<tr><td><p><tt>spray</tt></p>
</td><td><p>Test the reliability of your packet sizes. This command can
tell you whether the network is delaying packets or dropping packets.</p>
</td></tr>
<tr><td><p><tt>snoop</tt></p>
</td><td><p>Capture packets from the network and trace the calls from
each client to each server.</p>
</td></tr>
<tr><td><p><tt>netstat</tt></p>
</td><td><p>Display network status, including state of the interfaces
that are used for TCP/IP traffic, the IP routing table, and the
per-protocol statistics for <tt>UDP</tt>, <tt>TCP</tt>, <tt>ICMP</tt>, and <tt>IGMP</tt>.</p>
</td></tr>
<tr><td><p><tt>nfsstat</tt></p>
</td><td><p>Display a summary of server and client statistics that can
be used to identify NFS problems.</p>
</td></tr>
</table><a name="netmonitor-4"></a><h4>How to Check the Response of Hosts
on the Network</h4>
<p><a name="spnetwork-ix4885"></a><a name="spnetwork-ix4886"></a>Check the response of hosts on the network with the <tt>ping</tt> command.</p>
<pre>$ <tt><b>ping</b></tt> <i>hostname</i></pre><p><a name="spnetwork-ix4887"></a><a name="spnetwork-ix4888"></a><a name="spnetwork-ix4889"></a><a name="spnetwork-ix4890"></a><a name="spnetwork-ix4891"></a>If you suspect a physical problem, you can use <tt>ping</tt> to find the response time of several hosts on the network.
If the response from one host is not what you would expect, you
can investigate that host. Physical problems could be caused by
the following:</p>
<ul><li><p>Loose cables or connectors</p>
</li>
<li><p>Improper grounding</p>
</li>
<li><p>No termination</p>
</li>
<li><p><a name="spnetwork-ix4892"></a><a name="spnetwork-ix4893"></a><a name="spnetwork-ix4894"></a><a name="spnetwork-ix4895"></a>Signal reflection    </p>
</li>
</ul>
<p>For more information about this command, see <tt>ping</tt>(1M).</p>
<a name="netmonitor-5"></a>Example 30-1 Checking the Response of Hosts
on the Network<p><a name="spnetwork-ix4896"></a><a name="spnetwork-ix4897"></a>The simplest version of <tt>ping</tt> sends
a single packet to a host on the network. If <tt>ping</tt> receives
the correct response, the command prints the message <i>host</i> <tt>is alive</tt>.  </p>
<pre>$ <tt><b>ping elvis</b></tt>
elvis is alive</pre><p>With the <tt>-s</tt> option, <tt>ping</tt> sends
one datagram per second to a host. The command then prints each
response and the time that was required for the round trip. An example
follows.</p>
<pre>$ <tt><b>ping -s pluto</b></tt>
64 bytes from pluto (123.456.78.90): icmp_seq=0. time=3.82 ms
64 bytes from pluto (123.456.78.90): icmp_seq=5. time=0.947 ms
64 bytes from pluto (123.456.78.90): icmp_seq=6. time=0.855 ms
^C
----pluto PING Statistics----
3 packets transmitted, 3 packets received, 0% packet loss
 
round-trip (ms) min/avg/max/sttdev = 0.855/1.87/3.82/1.7</pre><a name="netmonitor-6"></a><h4>How to Send Packets to Hosts on
the Network</h4>
<p><a name="spnetwork-ix4898"></a><a name="spnetwork-ix4899"></a><a name="spnetwork-ix4900"></a><a name="spnetwork-ix4901"></a>Test the reliability of your packet sizes with the <tt>spray</tt> command.    </p>
<pre>$ <tt><b>spray</b></tt> [ -c <i>count</i> -d <i>interval</i> -l <i>packet-size</i>] <i>hostname</i></pre><dl><dt><tt>-i</tt> <i>count</i></dt>
<dd><p>Number of packets to send.</p>
</dd>
<dt><tt>-d</tt> <i>interval</i></dt>
<dd><p>Number of microseconds to pause between sending
packets. If you do not use a delay, you might deplete the buffers.</p>
</dd>
<dt><tt>-l</tt> <i>packet-size</i></dt>
<dd><p>Is the packet size.</p>
</dd>
<dt><i>hostname</i></dt>
<dd><p>Is the system to send packets.</p>
</dd>
</dl>
<p>For more information about this command, see <tt>spray</tt>(1M).</p>
<a name="netmonitor-7"></a>Example 30-2 Sending Packets to Hosts on the
Network<p>The following example sends 100 packets to a host (<tt>-c
100</tt>), with a packet size of 2048 bytes (<tt>-l 2048</tt>).
The packets are sent with a delay time of 20 microseconds between
each burst (<tt>-d 20</tt>). </p>
<pre>$ <tt><b>spray -c 100 -d 20 -l 2048 pluto</b></tt>
sending 100 packets of length 2048 to pluto ...
no packets dropped by pluto
279 packets/sec, 573043 bytes/sec</pre><a name="netmonitor-8"></a><h4>How to Capture Packets From the
Network</h4>
<p><a name="spnetwork-ix4902"></a><a name="spnetwork-ix4903"></a><a name="spnetwork-ix4904"></a><a name="spnetwork-ix4905"></a><a name="spnetwork-ix4906"></a><a name="spnetwork-ix4907"></a>To capture packets from the network and trace the calls
from each client to each server, use <tt>snoop</tt>. This
command provides accurate timestamps that enable some network performance
problems to be isolated quickly. For more information, see <tt>snoop</tt>(1M).</p>
<pre># <tt><b>snoop</b></tt></pre><p><a name="spnetwork-ix4908"></a>Dropped packets could be caused by insufficient buffer
space or an overloaded CPU. </p>
<a name="netmonitor-9"></a><h4>How to Check the Network Status</h4>
<p><a name="spnetwork-ix4909"></a><a name="spnetwork-ix4910"></a><a name="spnetwork-ix4911"></a><a name="spnetwork-ix4912"></a><a name="spnetwork-ix4913"></a><a name="spnetwork-ix4914"></a><a name="spnetwork-ix4915"></a>To display network status information, such as statistics
about the state of network interfaces, routing tables, and various
protocols, use the <tt>netstat</tt> command.</p>
<pre>$ <tt><b>netstat</b></tt> [-i] [-r] [-s]</pre><dl><dt><tt>-i</tt></dt>
<dd><p>Displays the state of the TCP/IP interfaces</p>
</dd>
<dt><tt>-r</tt></dt>
<dd><p>Displays the IP routing table</p>
</dd>
<dt><tt>-s</tt></dt>
<dd><p>Displays statistics for the <tt>UDP</tt>, <tt>TCP</tt>, <tt>ICMP</tt>, and <tt>IGMP</tt> protocols</p>
</dd>
</dl>
<p>For more information, see <tt>netstat</tt>(1M).</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p171.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p173.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

