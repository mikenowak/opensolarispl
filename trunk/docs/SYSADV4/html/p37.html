<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Using the <tt>mount</tt> Command - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p31.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a> > <a href="p36.html">NFS Commands</a> > <a href="p36.html#rfsrefer-15"><tt>mount</tt> Command</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p36.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p38.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rfsrefer-18"></a><h5>Using the <tt>mount</tt> Command</h5>
<p>Refer to the following examples.</p>
<ul><li><p><a name="indexterm-569"></a><a name="indexterm-570"></a><a name="indexterm-571"></a><a name="indexterm-572"></a><a name="indexterm-573"></a><a name="indexterm-574"></a><a name="indexterm-575"></a>In NFS version 2 or version 3, both of these commands mount an
NFS file system from the server <tt>bee</tt> read-only.</p>
<pre># <tt><b>mount -F nfs -r bee:/export/share/man /usr/man</b></tt></pre><pre># <tt><b>mount -F nfs -o ro bee:/export/share/man /usr/man</b></tt></pre><p>In NFS version 4, the following command line would accomplish the same
mount.</p>
<pre># <tt><b>mount -F nfs -o vers=4 -r bee:/export/share/man /usr/man</b></tt></pre></li>
<li><p><a name="indexterm-576"></a><a name="indexterm-577"></a><a name="indexterm-578"></a>In NFS version 2 or version 3, this command uses the <tt>-O</tt> option
to force the man pages from the server <tt>bee</tt> to be mounted
on the local system even if <tt>/usr/man</tt> has already been
mounted. See the following.</p>
<pre># <tt><b>mount -F nfs -O bee:/export/share/man /usr/man</b></tt></pre><p>In NFS version 4, the following command line would accomplish the same
mount.</p>
<pre># <tt><b>mount -F nfs -o vers=4 -O bee:/export/share/man /usr/man</b></tt></pre></li>
<li><p><a name="indexterm-579"></a><a name="indexterm-580"></a>In NFS version 2 or version 3, this command uses client failover.</p>
<pre># <tt><b>mount -F nfs -r bee,wasp:/export/share/man /usr/man</b></tt></pre><p><a name="indexterm-581"></a><a name="indexterm-582"></a>In NFS version 4, the following command line uses client failover.</p>
<pre># <tt><b>mount -F nfs -o vers=4 -r bee,wasp:/export/share/man /usr/man</b></tt></pre><hr>
<p><b>Note - </b>When used from the command line, the listed servers must support
the same version of the NFS protocol. Do not use both version 2 and version
3 servers when running <tt>mount</tt> from the command line. You
can use both servers with autofs. Autofs automatically selects the best subset
of version 2 or version 3 servers.</p>
<hr>
</li>
<li><p><a name="indexterm-583"></a><a name="indexterm-584"></a>Here is an example of using an NFS URL with the <tt>mount</tt> command
in NFS version 2 or version 3.</p>
<pre># <tt><b>mount -F nfs nfs://bee//export/share/man /usr/man</b></tt></pre><p>Here is an example of using an NFS URL with the <tt>mount</tt> command
in NFS version 4.</p>
<pre># <tt><b>mount -F nfs -o vers=4 nfs://bee//export/share/man /usr/man</b></tt></pre></li>
<li><p>Use the <tt>forcedirectio</tt> mount
option to enable the client to permit concurrent writes, as well as concurrent
reads and  writes, to a file. Here is an example. </p>
<pre># <tt><b>mount -F nfs -o forcedirectio bee:/home/somebody /mnt</b></tt></pre><p>In this example, the command mounts an NFS file system from the server <tt>bee</tt> and enables concurrent reads and writes for each file in the
directory <tt>/mnt</tt>.  When support for concurrent reads and
writes is enabled, the following occurs.</p>
<ul><li><p>The client permits applications to write to a file in parallel.</p>
</li>
<li><p>Caching is disabled on the client. Consequently, data from
reads and writes is kept on the server. More explicitly, because the client
does not cache the data that is read or written, any data that the application
does not already have cached for itself is read from the server. The client's
operating system does not have a copy of this data. Normally, the NFS client
caches data in the kernel for applications to use.</p>
<p>Because caching
is disabled on the client, the read-ahead and write-behind processes are disabled.
A read-ahead process occurs when the kernel anticipates the data that an application
might request next. The kernel then starts the process of gathering that data
in advance. The kernel's goal is to have the data ready before the application
makes a request for the data.</p>
<p>The client uses the write-behind
process to increase write throughput. Instead of immediately starting an I/O
operation every time an application writes data to a file, the data is cached
in memory. Later, the data is written to the disk.</p>
<p>Potentially,
the write-behind process permits the data to be written in larger chunks or
to be written asynchronously from the application. Typically, the result of
using larger chunks is increased throughput. Asynchronous writes permit overlap
between application processing and I/O processing. Also, asynchronous writes
permit the storage subsystem to optimize    the I/O by providing a better
sequencing of the I/O. Synchronous writes force a sequence of I/O on the storage
subsystem that might not be optimal.</p>
</li>
<li><p>Significant performance degradation can occur if the application
is not prepared to handle the semantics of data that is not being cached.
Multithreaded applications avoid this problem.</p>
</li>
</ul>
<hr>
<p><b>Note - </b>If support for concurrent writes is not enabled, all write requests
are serialized. When requests are serialized, the following occurs. When a
write request is in progress, a second write request has to wait for the first
write request to be completed before proceeding.</p>
<hr>
</li>
<li><p><a name="indexterm-585"></a><a name="indexterm-586"></a>Use the <tt>mount</tt> command with no arguments to
display file systems that are mounted on a client. See the following.</p>
<pre>% <tt><b>mount</b></tt>
/ on /dev/dsk/c0t3d0s0 read/write/setuid on Wed Apr 7 13:20:47 2004
/usr on /dev/dsk/c0t3d0s6 read/write/setuid on Wed Apr 7 13:20:47 20041995
/proc on /proc read/write/setuid on Wed Apr 7 13:20:47 2004
/dev/fd on fd read/write/setuid on Wed Apr 7 13:20:47 2004
/tmp on swap read/write on Wed Apr 7 13:20:51 2004
/opt on /dev/dsk/c0t3d0s5 setuid/read/write on Wed Apr 7 13:20:51 20041995
/home/kathys on bee:/export/home/bee7/kathys              
  intr/noquota/nosuid/remote on Wed Apr 24 13:22:13 2004</pre></li>
</ul>
<a name="rfsrefer-19"></a><h4><tt>umount</tt> Command</h4>
<a name="indexterm-587"></a><p><a name="indexterm-588"></a><a name="indexterm-589"></a>This command enables you to remove a remote file system that is
currently mounted. The <tt>umount</tt> command supports the <tt>-V</tt> option
to allow for testing. You might also use the <tt>-a</tt> option to
unmount several file systems at one time. If <i>mount-points</i> are
included with the <tt>-a</tt> option, those file systems are unmounted.
If no mount points are included, an attempt is made to unmount all file systems
that are listed in <tt>/etc/mnttab</tt> except for the &ldquo;required&rdquo;
file systems, such as <tt>/</tt>, <tt>/usr</tt>, <tt>/var</tt>, <tt>/proc</tt>, <tt>/dev/fd</tt>,
and <tt>/tmp</tt>. Because the file system is already mounted
and should have an entry in <tt>/etc/mnttab</tt>, you do not need
to include a flag for the file-system type.  </p>
<p>The <tt>-f</tt> option forces a busy file system to be unmounted.
You can use this option to unhang a client that is hung while trying to mount
an unmountable file system.</p>
<hr>
<p><b>Caution - </b>By forcing an unmount of a file system, you can cause data
loss if files are being written to.</p>
<hr>
<p>See the following examples.</p>
<a name="rfsrefer-ex-152"></a>Example 6-1 Unmounting a File System<p><a name="indexterm-590"></a>This example unmounts a file system that is mounted on <tt>/usr/man</tt>: </p>
<pre># <tt><b>umount /usr/man</b></tt></pre><a name="rfsrefer-ex-153"></a>Example 6-2 Using Options with <tt>umount</tt><p>This example displays the results of running <tt>umount</tt> <tt>-a -V</tt>: </p>
<pre># <tt><b>umount -a -V</b></tt>
umount /home/kathys
umount /opt
umount /home
umount /net</pre><p>Notice that this command does not actually unmount the file systems.</p>
<a name="rfsrefer-21"></a><h4><tt>mountall</tt> Command</h4>
<a name="indexterm-591"></a><p>Use this command to mount all file systems or a specific group of file
systems that are listed in a file-system table. The command provides a way
of doing the following:</p>
<ul><li><p>Selecting the file-system type to be accessed with the <tt>-F</tt> <i>FSType</i> option</p>
</li>
<li><p>Selecting all the remote file systems that are listed in a
file-system table with the <tt>-r</tt> option</p>
</li>
<li><p><a name="indexterm-592"></a>Selecting all the local file systems with the <tt>-l</tt> option</p>
</li>
</ul>
<p>Because all file systems that are labeled as NFS file-system type are
remote file systems, some of these options are redundant. For more information,
see the <tt>mountall</tt>(1M) man
page.  </p>
<p>Note that the following two examples of user input are equivalent: </p>
<pre># <tt><b>mountall -F nfs</b></tt></pre><pre># <tt><b>mountall -F nfs -r</b></tt></pre><a name="rfsrefer-23"></a><h4><tt>umountall</tt> Command</h4>
<a name="indexterm-593"></a><p><a name="indexterm-594"></a><a name="indexterm-595"></a><a name="indexterm-596"></a><a name="indexterm-597"></a><a name="indexterm-598"></a><a name="indexterm-599"></a><a name="indexterm-600"></a><a name="indexterm-601"></a><a name="indexterm-602"></a><a name="indexterm-603"></a><a name="indexterm-604"></a><a name="indexterm-605"></a><a name="indexterm-606"></a><a name="indexterm-607"></a>Use this command to unmount a group of file systems. The <tt>-k</tt> option
runs the <tt>fuser</tt> <tt>-k</tt> <i>mount-point</i> command
to kill any processes that are associated with the <i>mount-point</i>. The <tt>-s</tt> option indicates that unmount is not to be performed in parallel. <tt>-l</tt> specifies that only local file systems are to be used, and <tt>-r</tt> specifies
that only remote file systems are to be used. The <tt>-h</tt> <i>host</i> option indicates that all file systems from the named host
should be unmounted. You cannot combine the <tt>-h</tt> option with <tt>-l</tt> or <tt>-r</tt>.             </p>
<p>The following is an example of unmounting all file systems that are
mounted from remote hosts: </p>
<pre># <tt><b>umountall -r</b></tt></pre><p>The following is an example of unmounting all file systems that are
currently mounted from the server <tt>bee</tt>: </p>
<pre># <tt><b>umountall -h bee</b></tt></pre>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p36.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p38.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

