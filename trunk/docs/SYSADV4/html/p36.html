<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>NFS Commands - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p31.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p35.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p37.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rfsrefer-13"></a><h3>NFS Commands</h3>
<p><a name="indexterm-542"></a>These commands must be run as <tt>root</tt> to be fully
effective, but requests for information can be made by all users: </p>
<ul><li><p><a href="p36.html#rfsrefer-64"><tt>automount</tt> Command</a></p>
</li>
<li><p><a href="p36.html#rfsrefer-14"><tt>clear_locks</tt> Command</a></p>
</li>
<li><p><a href="p36.html#gcays"><tt>fsstat</tt> Command</a></p>
</li>
<li><p><a href="p36.html#rfsrefer-15"><tt>mount</tt> Command</a></p>
</li>
<li><p><a href="p37.html#rfsrefer-21"><tt>mountall</tt> Command</a></p>
</li>
<li><p><a href="p45.html#rfsrefer-36"><tt>setmnt</tt> Command</a></p>
</li>
<li><p><a href="p38.html"><tt>sharemgr</tt> Command</a></p>
</li>
<li><p><a href="p43.html"><tt>sharectl</tt> Command</a></p>
</li>
<li><p><a href="p44.html"><tt>share</tt> Command</a></p>
</li>
<li><p><a href="p45.html#rfsrefer-30"><tt>shareall</tt> Command</a></p>
</li>
<li><p><a href="p45.html#rfsrefer-34"><tt>showmount</tt> Command</a></p>
</li>
<li><p><a href="p37.html#rfsrefer-19"><tt>umount</tt> Command</a></p>
</li>
<li><p><a href="p37.html#rfsrefer-23"><tt>umountall</tt> Command</a></p>
</li>
<li><p><a href="p45.html"><tt>unshare</tt> Command</a></p>
</li>
<li><p><a href="p45.html#rfsrefer-32"><tt>unshareall</tt> Command</a></p>
</li>
</ul>
<a name="rfsrefer-64"></a><h4><tt>automount</tt> Command</h4>
<a name="indexterm-543"></a><p>This command installs autofs mount points and associates the information
in the automaster files with each mount point. The syntax of the command is
as follows:</p>
<p><tt>automount</tt> <tt>[</tt> <tt>-t</tt> <i>duration</i> <tt>]</tt> <tt>[</tt> <tt>-v</tt> <tt>]</tt></p>
<p><tt>-t</tt> <i>duration</i> sets the time,
in seconds, that a file system is to remain mounted, and <tt>-v</tt> selects
the verbose mode. Running this command in the verbose mode allows for easier
troubleshooting.</p>
<p>If not specifically set, the value for duration is set to 5 minutes.
In most circumstances, this value is good. However, on systems that have many
automounted file systems, you might need to increase the duration value. In
particular, if a server has many users active, checking the automounted file
systems every 5 minutes can be inefficient. Checking the autofs file systems
every 1800 seconds, which is 30 minutes, could be more optimal. By not unmounting
the file systems every 5 minutes, <tt>/etc/mnttab</tt> can become
large. To reduce the output when <tt>df</tt> checks each entry in <tt>/etc/mnttab</tt>, you can filter the output from <tt>df</tt> by
using the <tt>-F</tt> option (see the <tt>df</tt>(1M) man page) or by using <tt>egrep</tt>.</p>
<p>You should consider that adjusting the duration also changes how quickly
changes to the automounter maps are reflected. Changes cannot be seen until
the file system is unmounted. Refer to <a href="p23.html">Modifying the Maps</a> for instructions on how to modify automounter maps.</p>
<a name="rfsrefer-14"></a><h4><tt>clear_locks</tt> Command</h4>
<a name="indexterm-544"></a><a name="indexterm-545"></a><p>This command enables you to remove all file, record, and share locks
for an NFS client. You must be <tt>root</tt> to run this command.
From an NFS server, you can clear the locks for a specific client. From an
NFS client, you can clear locks for that client on a specific server. The
following example would clear the locks for the NFS client that is named <tt>tulip</tt> on the current system. </p>
<pre># <tt><b>clear_locks tulip</b></tt></pre><p>Using the <tt>-s</tt> option enables you to specify which NFS
host to clear the locks from. You must run this option from the NFS client,
which created the locks. In this situation, the locks from the client would
be removed from the NFS server that is named <tt>bee</tt>.</p>
<pre># <tt><b>clear_locks -s bee</b></tt></pre><hr>
<p><b>Caution - </b>This command should only be run when a client crashes and cannot
clear its locks. To avoid data corruption problems, do not clear locks for
an active client.</p>
<hr>
<a name="gcays"></a><h4><tt>fsstat</tt> Command</h4>
<p>Starting in the Solaris 10 11/06 release, the <tt>fsstat</tt> utility
enables you to monitor file system operations by file system type and by mount
point. Various options allow you to customize the output. See the following
examples.</p>
<p>This example shows output for NFS version 3, version 4, and the <tt>root</tt> mount point.</p>
<pre>% fsstat nfs3 nfs4 /
  new     name   name    attr    attr   lookup   rddir   read   read   write   write
 file    remov   chng     get     set      ops     ops    ops  bytes     ops   bytes
3.81K       90  3.65K   5.89M   11.9K    35.5M   26.6K   109K   118M   35.0K   8.16G  nfs3
  759      503    457   93.6K   1.44K     454K   8.82K  65.4K   827M     292    223K  nfs4
25.2K    18.1K  1.12K   54.7M    1017     259M   1.76M  22.4M  20.1G   1.43M   3.77G  /</pre><p>This example uses the <tt>-i</tt> option to provide statistics
about the I/O operations for NFS version 3,  version 4, and the <tt>root</tt> mount
point.</p>
<pre>% fsstat -i nfs3 nfs4 /
 read    read    write   write   rddir   rddir   rwlock   rwulock
  ops   bytes      ops   bytes     ops   bytes      ops       ops
 109K    118M    35.0K   8.16G   26.6K   4.45M     170K      170K  nfs3
65.4K    827M      292    223K   8.82K   2.62M    74.1K     74.1K  nfs4
22.4M   20.1G    1.43M   3.77G   1.76M   3.29G    25.5M     25.5M  /</pre><p>This example uses the <tt>-n</tt> option to provide statistics
about the naming operations for NFS version 3, version 4, and the <tt>root</tt> mount
point.</p>
<pre>% fsstat -n nfs3 nfs4 /
lookup   creat   remov  link   renam  mkdir  rmdir   rddir  symlnk  rdlnk
 35.5M   3.79K      90     2   3.64K      5      0   26.6K      11   136K  nfs3
  454K     403     503     0     101      0      0   8.82K     356  1.20K  nfs4
  259M   25.2K   18.1K   114    1017     10      2   1.76M      12  8.23M  /</pre><p>For more information, see the <tt>fsstat</tt>(1M) man page.</p>
<a name="rfsrefer-15"></a><h4><tt>mount</tt> Command</h4>
<a name="indexterm-546"></a><p>With this command, you can attach a named file system, either local
or remote, to a specified mount point. For more information, see the <tt>mount</tt>(1M) man page. Used without arguments, <tt>mount</tt> displays a list of file systems that are currently mounted
on your computer. </p>
<p>Many types of file systems are included in the standard Solaris installation.
Each file-system type has a specific man page that lists the options to <tt>mount</tt> that are appropriate for that file-system type. The man page
for NFS file systems is <tt>mount_nfs</tt>(1M).
For UFS file systems, see <tt>mount_ufs</tt>(1M). </p>
<p>The Solaris 7 release includes the ability to select a path name to
mount from an NFS server by using an NFS URL instead of the standard <tt>server:/pathname</tt> syntax. See <a href="p18.html#rfsadmin-92">How to Mount an NFS File System Using an NFS URL</a> for further information.</p>
<hr>
<p><b>Caution - </b>The version of the <tt>mount</tt> command that is
included in any Solaris release from 2.6 to the current release does not warn
about invalid options. The command silently ignores any options that cannot
be interpreted. Ensure that you verify all of the options that were used so
that you can prevent unexpected behavior.</p>
<hr>
<a name="rfsrefer-16"></a><h5><tt>mount</tt> Options for NFS
File Systems</h5>
<a name="indexterm-547"></a><p>The subsequent text lists some of the options that can follow the <tt>-o</tt> flag when you are mounting an NFS file system. For a complete list
of options, refer to the <tt>mount_nfs</tt>(1M) man
page. </p>
<dl><dt>bg|fg</dt>
<dd><p><a name="indexterm-548"></a><a name="indexterm-549"></a><a name="indexterm-550"></a><a name="indexterm-551"></a><a name="indexterm-552"></a><a name="indexterm-553"></a>These options can be used to select the retry behavior if a mount
fails. The <tt>bg</tt> option causes the mount attempts
to be run in the background. The <tt>fg</tt> option
causes the mount attempt to be run in the foreground. The default is <tt>fg</tt>, which is the best selection for file systems that
must be available. This option prevents further processing until the mount
is complete. <tt>bg</tt> is a good selection for noncritical
file systems because the client can do other processing while waiting for
the mount request to be completed.      </p>
</dd>
<dt>forcedirectio</dt>
<dd><p><a name="indexterm-554"></a><a name="indexterm-555"></a>This option improves performance of large sequential data transfers.
Data is copied directly to a user buffer. No caching is performed in the kernel
on the client. This option is off by default. </p>
<p>Previously, all write requests were serialized by both the NFS client
and the NFS server. The NFS client has been modified to permit an application
to issue concurrent writes, as well as concurrent reads and writes, to a single
file. You can enable this functionality on the client by using the <tt>forcedirectio</tt> mount option.  When you use this option,
you are enabling this functionality for all files within the mounted file
system. You could also enable this functionality on a single file on the client
by using the <tt>directio()</tt> interface. Unless this functionality
has been enabled, writes to files are serialized. Also, if concurrent writes
or concurrent reads and writes are occurring, then POSIX semantics are no
longer being supported for that file.</p>
<p><a name="indexterm-556"></a>For an example of how to use this option, refer to <a href="p37.html">Using the <tt>mount</tt> Command</a>.</p>
</dd>
<dt>largefiles</dt>
<dd><p><a name="indexterm-557"></a>With this option, you can access files that are larger than 2
Gbytes on a server that is running the Solaris 2.6 release. Whether a large
file can be accessed can only be controlled on the server, so this option
is silently ignored on NFS version 3 mounts. Starting with release 2.6, by
default, all UFS file systems are mounted with <tt>largefiles</tt>.
For mounts that use the NFS version 2 protocol, the <tt>largefiles</tt> option causes the mount to fail with an error.</p>
</dd>
<dt>nolargefiles</dt>
<dd><p><a name="indexterm-558"></a>This option for UFS mounts guarantees that no large files can
exist on the file system. See the <tt>mount_ufs</tt>(1M) man page. Because the existence
of large files can only be controlled on the NFS server, no option for <tt>nolargefiles</tt> exists when using NFS mounts. Attempts
to NFS-mount a file system by using this option are rejected with an error.</p>
</dd>
<dt>nosuid|suid</dt>
<dd><p>Starting in the Solaris 10 release, the <tt>nosuid</tt> option is the equivalent of specifying the <tt>nodevices</tt> option with the <tt>nosetuid</tt> option.
When the <tt>nodevices</tt> option is specified, the
opening of device-special files on the mounted file system is disallowed.
When the <tt>nosetuid</tt> option is specified, the <tt>setuid</tt> bit and <tt>setgid</tt> bit in binary files that
are located  in the file system are ignored. The processes run with the  privileges
of the user who executes the binary file.</p>
<p>The <tt>suid</tt> option is the equivalent of
specifying the <tt>devices</tt> option with the <tt>setuid</tt> option. When the <tt>devices</tt> option
is specified, the opening of device-special files on the mounted file system
is allowed. When the <tt>setuid</tt> option is specified,
the <tt>setuid</tt> bit and the <tt>setgid</tt> bit in
binary files that are located in the file  system are honored by the kernel.</p>
<p>If neither option is specified, the default option is <tt>suid</tt>, which provides the default behavior of  specifying the <tt>devices</tt> option with the <tt>setuid</tt> option.</p>
<p>The following table describes the effect of combining <tt>nosuid</tt> or <tt>suid</tt> with <tt>devices</tt> or <tt>nodevices</tt>, and <tt>setuid</tt> or <tt>nosetuid</tt>.
Note that in each combination of options, the most restrictive option determines
the behavior.</p>
<table><tr><th><p>Behavior From the Combined Options</p>
</th><th><p>Option</p>
</th><th><p>Option</p>
</th><th><p>Option</p>
</th></tr>
<tr><td><p>The equivalent of <tt>nosetuid</tt> with <tt>nodevices</tt></p>
</td><td><p><tt>nosuid</tt></p>
</td><td><p><tt>nosetuid</tt></p>
</td><td><p><tt>nodevices</tt></p>
</td></tr>
<tr><td><p>The equivalent of <tt>nosetuid</tt> with <tt>nodevices</tt></p>
</td><td><p><tt>nosuid</tt></p>
</td><td><p><tt>nosetuid</tt></p>
</td><td><p><tt>devices</tt></p>
</td></tr>
<tr><td><p>The equivalent of <tt>nosetuid</tt> with <tt>nodevices</tt></p>
</td><td><p><tt>nosuid</tt></p>
</td><td><p><tt>setuid</tt></p>
</td><td><p><tt>nodevices</tt></p>
</td></tr>
<tr><td><p>The equivalent of <tt>nosetuid</tt> with <tt>nodevices</tt></p>
</td><td><p><tt>nosuid</tt></p>
</td><td><p><tt>setuid</tt></p>
</td><td><p><tt>devices</tt></p>
</td></tr>
<tr><td><p>The equivalent of <tt>nosetuid</tt> with <tt>nodevices</tt></p>
</td><td><p><tt>suid</tt></p>
</td><td><p><tt>nosetuid</tt></p>
</td><td><p><tt>nodevices</tt></p>
</td></tr>
<tr><td><p>The equivalent of <tt>nosetuid</tt> with <tt>devices</tt></p>
</td><td><p><tt>suid</tt></p>
</td><td><p><tt>nosetuid</tt></p>
</td><td><p><tt>devices</tt></p>
</td></tr>
<tr><td><p>The equivalent of <tt>setuid</tt> with <tt>nodevices</tt></p>
</td><td><p><tt>suid</tt></p>
</td><td><p><tt>setuid</tt></p>
</td><td><p><tt>nodevices</tt></p>
</td></tr>
<tr><td><p>The equivalent of <tt>setuid</tt> with <tt>devices</tt></p>
</td><td><p><tt>suid</tt></p>
</td><td><p><tt>setuid</tt></p>
</td><td><p><tt>devices</tt></p>
</td></tr>
</table><p>The <tt>nosuid</tt> option provides
additional security for NFS  clients that access potentially untrusted servers.
The  mounting of remote file systems with this option reduces  the chance
of privilege escalation through importing  untrusted devices or importing
untrusted <tt>setuid</tt> binary  files. All these options are available
in all Solaris file systems.</p>
</dd>
<dt>public</dt>
<dd><p><a name="indexterm-559"></a>This option forces the use of the public file handle when contacting
the NFS server. If the public file handle is supported by the server, the
mounting operation is faster because the MOUNT protocol is not used. Also,
because the MOUNT protocol is not used, the public option allows mounting
to occur through a firewall.</p>
</dd>
<dt>rw|ro</dt>
<dd><p><a name="indexterm-560"></a><a name="indexterm-561"></a><a name="indexterm-562"></a><a name="indexterm-563"></a><a name="indexterm-564"></a><a name="indexterm-565"></a><a name="indexterm-566"></a>The <tt>-rw</tt> and <tt>-ro</tt> options indicate
whether a file system is to be mounted read-write or read-only. The default
is read-write, which is the appropriate option for remote home directories,
mail-spooling directories, or other file systems that need to be changed by
users. The read-only option is appropriate for directories that should not
be changed by users. For example, shared copies of the man pages should not
be writable by users.      </p>
</dd>
<dt>sec=<i>mode</i></dt>
<dd><p>You can use this option to specify the authentication mechanism
to be used during the mount transaction. The value for <i>mode</i> can
be one of the following.</p>
<ul><li><p>Use <tt>krb5</tt> for Kerberos version 5 authentication
service.</p>
</li>
<li><p>Use <tt>krb5i</tt> for Kerberos version 5 with integrity.</p>
</li>
<li><p>Use <tt>krb5p</tt> for Kerberos version 5 with privacy.</p>
</li>
<li><p>Use <tt>none</tt> for no authentication.</p>
</li>
<li><p>Use <tt>dh</tt> for Diffie-Hellman (DH) authentication.</p>
</li>
<li><p>Use <tt>sys</tt> for standard UNIX authentication.</p>
</li>
</ul>
<p>The modes are also defined in <tt>/etc/nfssec.conf</tt>.</p>
</dd>
<dt>soft|hard</dt>
<dd><p><a name="indexterm-567"></a><a name="indexterm-568"></a>An NFS file system that is mounted with the <tt>soft</tt> option returns an error if the server does not respond. The <tt>hard</tt> option causes the mount to continue to retry until
the server responds. The default is <tt>hard</tt>, which
should be used for most file systems. Applications frequently do not check
return values from <tt>soft</tt>-mounted file systems,
which can make the application fail or can lead to corrupted files. If the
application does check the return values, routing problems and other conditions
can still confuse the application or lead to file corruption if the <tt>soft</tt> option is used. In most situations, the <tt>soft</tt> option should not be used. If a file system is
mounted by using the <tt>hard</tt> option and becomes
unavailable, an application that uses this file system hangs until the file
system becomes available.   </p>
</dd>
</dl>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p35.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p37.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

