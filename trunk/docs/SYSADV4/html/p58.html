<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Analyzing a <tt>snoop slp</tt> Trace - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p57.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a> > <a href="p57.html#slp.setup-13">Using <tt>snoop</tt> to Monitor SLP Activity</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p57.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p59.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="slp.setup-18"></a><h4>Analyzing a <tt>snoop slp</tt> Trace</h4>
<p><a name="indexterm-943"></a><a name="indexterm-944"></a>In the following example, <tt>slpd</tt> runs on <b>slphost1</b> in the default mode as an SA server. The SLP daemon initializes
and registers <b>slphost2</b> as an echo server. Then, the <tt>snoop slp</tt> process is invoked on <b>slphost1</b>.</p>
<hr>
<p><b>Note - </b>To simplify the description of the trace results, the lines in
the following <tt>snoop</tt> output are flagged with line numbers.</p>
<hr>
<pre>(1) slphost1 -> 239.255.255.253 SLP V@ SrvRqst [24487] service:directory-agent []
(2) slphost2 -> slphost1 SLP V2 DAAdvert [24487] service:directory-agent://129
(3) slphost1 -> 239.255.255.253 SLP V2 SrvRqst [24487] service:directory-agent []
(4) slphost1 -> 239.255.255.253 SLP V2 SrvRqst [24487] service:directory-agent []
(5) slphost1 -> slphost2 SLP V2 SrvReg [24488/tcp]service:echo.sun:tcp://slphost1:
(6) slphost2 -> slphost1 SLP V2 SrvAck [24488/tcp] ok
(7) slphost1 -> slphost2 SLP V2 SrvDereg [24489/tcp] service:echo.sun:tcp://slphost1:
(8) slphost2 -> slphost1 SLP V2 SrvAck [24489/tcp] ok</pre><ol><li><p>Shows <tt>slpd</tt> on <b>slphost1</b> performing
active directory agent discovery by multicasting to the SLP multicast group
address in search of directory agents.  The message number, 24487, for the
active discovery is indicated in square brackets in the trace display.</p>
</li>
<li><p>Indicates that the active discovery request 24487 from trace
1 is answered by <tt>slpd</tt>, which is running as a DA on the
host <b>slphost2</b>.  The service URL from <b>slphost2</b> has
been truncated to fit on a single line. The DA has sent a DA advertisement
in reply to the multicast directory agent discovery message, as indicated
by the matching message numbers in traces 1 and 2.</p>
</li>
<li><p>Shows multicasts from the UAs on <b>slphost1</b> for
additional DAs.  Because <b>slphost2</b> has already answered
the request, it refrains from responding again, and no other DAs reply.</p>
</li>
<li><p>Repeats the multicast operation that is shown in the previous
line.</p>
</li>
<li><p>Shows a <tt>slpd</tt> on <b>slphost1</b> forwarding
SA client registrations to the DA on <b>slphost2</b>. A unicast
service registration (<tt>SrvReg</tt>) for an echo server is made
by <b>slphost1</b> to the DA on <b>slphost2</b>.</p>
</li>
<li><p>Shows <b>slphost2</b> responding to the <b>slphost1</b> <tt>SrvReg</tt> with a service acknowledgment (<tt>SrvAck</tt>) that indicates the registration is successful.</p>
<p>Traffic
between the echo server that runs the SA client and the SLP daemon on <b>slphost1</b> does not appear in the <tt>snoop</tt> trace. This absence
of information is because the <tt>snoop</tt> operation is performed
over the network loopback.</p>
</li>
<li><p>Shows the echo server on <b>slphost1</b> deregistering
the echo service advertisement. The SLP daemon on <b>slphost1</b> forwards
the deregistration to the DA on <b>slphost2</b>.</p>
</li>
<li><p>Shows <b>slphost2</b> responding to the <b>slphost1</b> with a service acknowledgment (<tt>SrvAck</tt>) that
indicates that the deregistration is successful.</p>
<p>The <tt>/tcp</tt> parameter
that is appended to the message number on lines 5, 6, 7, and 8 indicates that
the message exchange occurred by TCP.</p>
</li>
</ol>
<a name="considerations.xx-36"></a><h5>Where to Go From Here</h5>
<p>After monitoring the SLP traffic, you can use the information that was
collected from the <tt>snoop</tt> traces to help determine whether
any reconfiguration of the SLP defaults is needed. Use the related information
in <a href="p59.html">Chapter&nbsp;9, Administering SLP (Tasks)</a> for configuring SLP property settings. For more information
about SLP messaging and service registrations, refer to <a href="p69.html">Chapter&nbsp;11, SLP (Reference)</a>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p57.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p59.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

