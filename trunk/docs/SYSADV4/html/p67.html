<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Incorporating Legacy Services - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p66.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p68.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="legacy-7"></a>Chapter&nbsp;10<h3>Incorporating Legacy Services</h3><p>Legacy services are network services that predate the development
and implementation of SLP. Solaris services such as the line printer daemon
(<tt>lpsc</tt><tt></tt><tt>hed</tt>), the
NFS file service, and NIS/NIS+ name service, for example, do not contain
internal SAs for SLP. This chapter describes when and how to advertise legacy
services.</p>
<ul><li><p><a href="p67.html#legacy-8">When to Advertise Legacy Services</a></p>
</li>
<li><p><a href="p67.html#legacy-11">Advertising Legacy Services</a></p>
</li>
<li><p><a href="p68.html">Considerations When Advertising Legacy Services</a></p>
</li>
</ul>
<a name="legacy-8"></a><h3>When to Advertise Legacy Services</h3>
<a name="indexterm-1097"></a><a name="indexterm-1098"></a><p>With legacy service advertising, you can enable the SLP UAs to find
devices and services such as the following on your networks. You can find
hardware devices and software services that do that do not contain SLP SAs.
When applications with SLP UAs need to find printers or databases that do
not contain SLP SAs, for example, legacy advertising might be required.</p>
<a name="legacy-11"></a><h3>Advertising Legacy Services</h3>
<a name="indexterm-1099"></a><p>You use any of the following methods to advertise legacy services.</p>
<ul><li><p>Modify the service to incorporate an SLP SA.</p>
</li>
<li><p>Write a small program that advertises on behalf of a service
that is not SLP enabled.</p>
</li>
<li><p><a name="indexterm-1100"></a><a name="indexterm-1101"></a>Use proxy advertising to have <tt>slpd</tt> advertise
the service.</p>
</li>
</ul>
<a name="legacy-12"></a><h4>Modifying the Service</h4>
<p>If the source code for the software server is available, you can incorporate
a SLP SA. The C and Java APIs for SLP are relatively straightforward to
use. See the man pages for information on the C API and documentation on
the Java API. If the service is a hardware device, the manufacturer might
have an updated PROM that incorporates SLP. Contact the device manufacturer
for more information.</p>
<a name="legacy-13"></a><h4>Advertising a Service That Is Not SLP Enabled</h4>
<a name="indexterm-1102"></a><p>If the source code or an updated PROM that contains SLP is not available,
you can write a small application that uses the SLP client library to advertise
the service. This application could function as a small daemon that you
start or stop from the same shell script you use to start and stop the service.</p>
<a name="legacy-14"></a><h4>SLP Proxy Registration</h4>
<p><a name="indexterm-1103"></a><a name="indexterm-1104"></a><a name="indexterm-1105"></a><a name="indexterm-1106"></a>Solaris <tt>slpd</tt> supports legacy service advertising
with a proxy registration file. The proxy registration file is a list of
service advertisements in a portable format.</p>
<a name="slp.setupprproc"></a><h4><img src="graphics/procedure.gif"> How to Enable SLP Proxy Registration</h4>
<ol><li><a name="slp.legacy-step-6"></a><b>Create a proxy registration file on the
host file system or in any network directory that is accessible by HTTP. </b></li><li><a name="slp.legacy-step-7"></a><b>Determine if a service type template
exists for the service. </b><p>The template is a description of the
service URL and attributes of a service type. A template is used to define
the components of an advertisement for a particular service type:</p><ul><li><p>If a service type template exists, use the template to construct
the proxy registration. See RFC 2609 for more information on service-type
templates.</p>
</li>
<li><p>If a service type template is not available for the service,
select a collection of attributes that precisely describe the service. Use
a naming authority other than the default for the advertisement. The default
naming authority is allowed only for service types that have been standardized.
See RFC 2609 for more information on naming authorities.</p>
<p>For
example, suppose a company that is called <b>BizApp</b> has
a local database that is used to track software defects. To advertise the
database, the company might use a URL with the service type <tt>service:bugdb.bizapp</tt>. The naming authority would then be <tt>bizapp</tt>.</p>
</li>
</ul>
</li><li><a name="slp.setup-step-pr1"></a><b><a name="indexterm-1107"></a>Follow the next steps to configure the <tt>net.slp.serializedRegURL</tt> property in the <tt>/etc/inet/slp.conf</tt> file with the location of the registration file that was created
in the previous steps.</b></li><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="slp.setup-step-pr2"></a><b>Stop <tt>slpd</tt> and all
SLP activity on the host.</b><pre># <tt><b>svcadm disable network/slp</b></tt></pre></li><li><a name="slp.setup-step-pr3"></a><b><a name="indexterm-1108"></a>Back
up the default <tt>/etc/inet/slp.conf</tt> file before you change
the configuration settings.</b></li><li><a name="slp.setup-step-pr4"></a><b>Specify the location of the proxy registration
file in the <tt>net.slp.serializedRegURL</tt> property of the <tt>/etc/inet/slp.conf</tt> file.</b><pre>net.slp.net.slp.serializedRegURL=<i>proxy registration file URL</i></pre><p>For example, if the serialized registration file is <tt>/net/inet/slp.reg</tt>, you configure the property as shown in the following:</p><pre>net.slp.serializedRegURL=file:/etc/inet/slp.reg</pre></li><li><a name="slp.setup-step-pr5"></a><b>Save your changes and close the file.</b></li><li><a name="slp.setup-step-pr6"></a><b><a name="indexterm-1109"></a>Restart <tt>slpd</tt> to
activate your changes.</b><pre># <tt><b>svcadm enable network/slp</b></tt></pre></li></ol><a name="slp.legacy-1"></a><h4>Using SLP Proxy Registration to Advertise</h4>
<p><a name="indexterm-1110"></a><a name="indexterm-1111"></a><tt></tt> A
service advertisement consists of lines that identify the service URL, an
optional scope, and a series of attribute definitions. The SLP daemon reads,
registers, and maintains proxy advertisements exactly as an SA client would.
The following is an example of an advertisement from a proxy registration
file. </p>
<p>In the example, a legacy printer that supports LPR protocol and an
FTP server are advertised. Line numbers have been added for description
purposes and are not part of the file.</p>
<pre> (1) #Advertise legacy printer. 
 (2) 
 (3) service:lpr://bizserver/mainspool,en,65535
 (4) scope=eng,corp
 (5) make-model=Laserwriter II
 (6) location-description=B16-2345
 (7) color-supported=monochromatic
 (8) fonts-supported=Courier,Times,Helvetica 9 10
 (9) 
 (10) #Advertise FTP server
 (11) 
 (12) ftp://archive/usr/src/public,en,65535,src-server
 (13) content=Source code for projects
 (14) </pre><hr>
<p><b>Note - </b><a name="indexterm-1112"></a><a name="indexterm-1113"></a>The proxy registration file supports the same convention for
escaping non-ASCII characters as the configuration file does. For more information
about the format of the proxy registration file, see RFC 2614.</p>
<hr>
<a name="slp.legacy-tbl-5"></a>Table 10-1 SLP Proxy Registration
File Description<table><tr><th><p>Line Numbers</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p>1 and 10</p>
</td><td><p>Comment lines begin with a cross-hatch symbol (#) and do not affect
the file's operation. All characters through the end of a comment line are
ignored.</p>
</td></tr>
<tr><td><p>2, 9, and 14</p>
</td><td><p>Blank lines that delimit the advertisements.</p>
</td></tr>
<tr><td><p>3, 12</p>
</td><td><p>Service URLs that each have three required fields and one optional
field that are separated by commas:</p>
<ul><li><p>Generic or <tt>service: URL</tt> advertised. See
RFC 2609 for the specification of how to form a service: URL.</p>
</li>
<li><p>Language of the advertisement. In the previous example,
the field is designated English, <b>en</b>. Language is an
RFC 1766 language tag.</p>
</li>
<li><p>Lifetime of the registration, measured in seconds. The lifetime
is restricted to an unsigned 16 bit-integer. If the lifetime is less than
the maximum, 65535, <tt>slpd</tt> times out the advertisement.
If the lifetime is 65535, <tt>slpd</tt> refreshes the advertisement
periodically, and the lifetime is considered permanent, until <tt>slpd</tt> exits. </p>
</li>
<li><p>(Optional) Service type field &ndash; If used, this field
defines the service type. If the service URL is defined, you can change
the service type under which the URL is advertised. In the previous example
of a proxy registration file, line 12 contains a generic FTP URL. The optional
type field causes the URL to be advertised under the service type name <b>src-server</b>. The <tt>service</tt> prefix is not added
by default to the type name.</p>
</li>
</ul>
</td></tr>
<tr><td><p>4</p>
</td><td><p>Scope designation.</p>
<p><a name="indexterm-1114"></a>Optional
line consists of the token <tt>scope</tt>, followed by an equal
sign and a comma-separated list of scope names. Scope names are defined
by the <tt>net.slp.useScopes</tt> configuration property. <tt></tt>Only
scopes that are configured for the host should be included in the list.
When a scope line is not added, the registration is made in all scopes with
which <tt>slpd</tt> is configured. The scope line must appear
immediately after the URL line. Otherwise, scope names are recognized as
attributes.</p>
</td></tr>
<tr><td><p>5&ndash;8</p>
</td><td><p>Attribute definitions.</p>
<p>After the optional scope line, the bulk of the service advertisement
contains attribute/value list pair lines. Each pair consists of the attribute
tag, followed by an equal sign, and an attribute value or a comma-separated
list of values. In the previous example of a proxy registration file, line
8 illustrates an attribute list with multiple values. All other lists have
single values. The format for the attribute names and values is the same
as on-the-wire SLP messages.</p>
</td></tr>
</table>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p66.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p68.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

