<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title><tt>sharemgr</tt> Command - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p31.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a> > <a href="p36.html">NFS Commands</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p37.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p39.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="gcrvu"></a><h4><tt>sharemgr</tt> Command</h4>
<p>The
Solaris Express, Developer Edition 2/07 release includes the <tt>sharemgr</tt> utility,
which is an administrative tool that provides an enhanced method of sharing
files and performing related tasks. Previously, such tasks were accomplished
by adding entries to the <tt>/etc/dfs/dfstab</tt> file and using
the <tt>share</tt> command to create a temporary share. You made
the share permanent by rebooting the system or using the <tt>shareall</tt> command.
Related administrative tasks necessitated that you manually edit configuration
files. The <tt>sharemgr</tt> utility simplifies this process by
introducing two concepts:</p>
<ul><li><p><b>Share</b> &ndash; One or more
files or directories in a share group.</p>
</li>
<li><p><b>Share group</b> &ndash; A container
of one or more shared files or directories. Note the following:</p>
<ul><li><p>Options for <tt>sharemgr</tt> are set to a share
group, not to a specific file or directory. All options apply to each file
and directory in the group.</p>
</li>
<li><p>A file or directory can only be assigned to one share group.
However, you can move a file or directory from one group to another.</p>
</li>
<li><p>A share group can be used by multiple file-system types. For
example, the share group <tt>my_group</tt> could be used by NFS
and ZFS and be assigned one set of options for NFS and another set of options
for ZFS.</p>
<hr>
<p><b>Note - </b>When a share is managed by ZFS, <tt>sharemgr</tt> identifies
the share and lists it in a <tt>zfs</tt> share group.</p>
<hr>
</li>
</ul>
</li>
</ul>
<p>The <tt>sharemgr</tt> utility accomplishes different tasks
by using subcommands. Options and their related properties can be used with
each subcommand. The utility uses the following syntax:</p>
<pre># sharemgr [subcommand] [option] [share_group]</pre><hr>
<p><b>Note - </b>The <tt>sharemgr</tt> utility provides a unique way
of checking the validity of a desired configuration. The <tt>-n</tt> option
allows you to test the validity of the options and properties you want to
use with a specific subcommand. The test does not change your configuration.
For example, if you use the <tt>-n</tt> option with the subcommand <tt>create</tt>, no share group is created.</p>
<hr>
<p>The following tables describes the subcommands supported by the <tt>sharemgr</tt> utility.</p>
<a name="gcsrw"></a>Table 6-2 Subcommands Supported by <tt>sharemgr</tt><table><tr><th><p>Subcommand</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><a href="p38.html#gcrwl">create</a></p>
</td><td><p>Makes (or creates) a new share group</p>
</td></tr>
<tr><td><p><a href="p39.html">delete</a></p>
</td><td><p>Removes a share group</p>
</td></tr>
<tr><td><p><a href="p39.html#gcrvm">list</a></p>
</td><td><p>Lists the current share groups</p>
</td></tr>
<tr><td><p><a href="p39.html#gcrvv">show</a></p>
</td><td><p>Lists the shares by share group</p>
</td></tr>
<tr><td><p><a href="p40.html">set</a></p>
</td><td><p>Sets a share group's properties, including the group's security property</p>
</td></tr>
<tr><td><p><a href="p40.html#gcswk">unset</a></p>
</td><td><p>Removes (or unsets) properties from a share group</p>
</td></tr>
<tr><td><p><a href="p40.html#gcryf">add-share</a></p>
</td><td><p>Adds a new share to a share group</p>
</td></tr>
<tr><td><p><a href="p41.html">move-share</a></p>
</td><td><p>Moves a share from one share group to another</p>
</td></tr>
<tr><td><p><a href="p41.html#gcryv">remove-share</a></p>
</td><td><p>Removes a share from a share group</p>
</td></tr>
<tr><td><p><a href="p41.html#gcrxq">set-share</a></p>
</td><td><p>Updates the properties associated with a share</p>
</td></tr>
<tr><td><p><a href="p42.html">disable</a></p>
</td><td><p>Unshares one or more share groups</p>
</td></tr>
<tr><td><p><a href="p41.html#gcrxj">enable</a></p>
</td><td><p>Shares one or more share groups</p>
</td></tr>
<tr><td><p><a href="p42.html#gcryq">start</a></p>
</td><td><p>Used by the <tt>smf</tt> utility to share one or more share
groups</p>
</td></tr>
<tr><td><p><a href="p42.html#gcryx">stop</a></p>
</td><td><p>Used by the <tt>smf</tt> utility to unshare one or more share
groups</p>
</td></tr>
<tr><td><p><a href="p42.html#gcrxi">-h</a></p>
</td><td><p>Provides online-help descriptions of <tt>sharemgr</tt> and
its subcommands and options, and shows the syntax to use</p>
</td></tr>
</table><p>The following table describes the properties supported by the <tt>sharemgr</tt> utility.</p>
<a name="gcrwf"></a>Table 6-3 Properties Supported by <tt>sharemgr</tt> Utility<table><tr><th><p>Property</p>
</th><th><p>Value</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>aclok</tt></p>
</td><td><p>boolean</p>
</td><td><p>Enable access control lists (ACL) for NFS version 2.</p>
</td></tr>
<tr><td><p><tt>anon</tt></p>
</td><td><p>UID</p>
</td><td><p>Specify the User ID for unknown users.</p>
</td></tr>
<tr><td><p><tt>index</tt></p>
</td><td><p>file path</p>
</td><td><p>Include the specified file in a content list for a directory.</p>
</td></tr>
<tr><td><p><tt>log</tt></p>
</td><td><p>tag</p>
</td><td><p>Specify a tag for NFS server logging. Note that these tags are defined
in the <tt>/etc/nfs/nfslog.conf</tt> file.</p>
</td></tr>
<tr><td><p><tt>nosub</tt></p>
</td><td><p>boolean</p>
</td><td><p>Disallow clients from mounting subdirectories of shares.</p>
</td></tr>
<tr><td><p><tt>nosuid</tt></p>
</td><td><p>boolean</p>
</td><td><p>Disallow the use of the <tt>setuid()</tt> and <tt>setgid()</tt> functions.</p>
</td></tr>
<tr><td><p><tt>public</tt></p>
</td><td><p>boolean</p>
</td><td><p>Move the location of a public file handle from <tt>root</tt> to
an exported directory for WebNFS-enabled 	browsers and clients. Only one
file system (or share) on each server can use this property. This property
is not accepted by a share group. For more information, see <tt>share_nfs</tt>(1M) man page.</p>
</td></tr>
<tr><td><p><tt>ro</tt></p>
</td><td><p>access-list, boolean, or an asterisk (<tt>*</tt>)</p>
</td><td><p>If the property is set to an access-list, permissions for the list are
set to read-only. For information about access lists, see the <tt>share_nfs</tt>(1M) man page.</p>
<p>If you set the property to no value or <tt>true</tt>, permissions
for the share group are set to read-only.</p>
<p>If you set the property to an asterisk (<tt>*</tt>), permissions
for all hosts are set to read-only.</p>
<hr>
<p><b>Note - </b>To use this property, you must use the <tt>-S</tt> option
to set the security mode. For more information about setting a security mode,
see <a href="p40.html"><tt>set</tt> Subcommand</a>.</p>
<hr>
</td></tr>
<tr><td><p><tt>root</tt></p>
</td><td><p>access-list or an asterisk (<tt>*</tt>)</p>
</td><td><p>If the property is set to an access-list, permissions for the list are
set to <tt>root</tt> access. For information about access-lists,
see the <tt>share_nfs</tt>(1M) man
page.</p>
<p>If you set the property to an asterisk (<tt>*</tt>), all hosts
have <tt>root</tt> access.</p>
<hr>
<p><b>Note - </b>To use this property, you must use the <tt>-S</tt> option
to set the security mode. For more information about setting a security mode,
see <a href="p40.html"><tt>set</tt> Subcommand</a>.</p>
<hr>
</td></tr>
<tr><td><p><tt>rw</tt></p>
</td><td><p>access-list, boolean, or an asterisk (<tt>*</tt>)</p>
</td><td><p>If the property is set to an access-list, permissions for the list are
set to read-write. For information about access-lists, see the <tt>share_nfs</tt>(1M) man page.</p>
<p>If you set the property to no value or <tt>true</tt>, permissions
for the share group are set to read-write.</p>
<p>If you set the property to an asterisk (<tt>*</tt>), permissions
for all hosts are set to read-write.</p>
<hr>
<p><b>Note - </b>To use this property, you must use the <tt>-S</tt> option
to set the security mode. For more information about setting a security mode,
see <a href="p40.html"><tt>set</tt> Subcommand</a>.</p>
<hr>
</td></tr>
<tr><td><p><tt>window</tt></p>
</td><td><p>integer</p>
</td><td><p>For the <tt>dh</tt> security mode, set the number of seconds
a credential is available.</p>
<hr>
<p><b>Note - </b>To use this property, you must use the <tt>-S</tt> option
to set the security mode. For more information about setting a security mode,
see <a href="p40.html"><tt>set</tt> Subcommand</a>.</p>
<hr>
</td></tr>
</table><hr>
<p><b>Note - </b><tt>sharemgr</tt> and <tt>sharectl</tt> are
the preferred utilities for managing your file systems and file-sharing protocols.</p>
<hr>
<p>For
procedures that use the <tt>sharemgr</tt> utility, see the following:</p>
<ul><li><p><a href="p15.html#rfsadmin-56">Automatic File-System Sharing</a></p>
</li>
<li><p><a href="p17.html">Mounting File Systems</a></p>
</li>
<li><p><a href="p21.html">Administering the Secure NFS System</a></p>
</li>
</ul>
<p>Also, see the <tt>sharemgr</tt>(1M) man page.</p>
<p>The <tt>sharectl</tt> utility is an administrative tool that enables you to configure
and manage file-sharing protocols, such as NFS. For more information, see
the following:</p>
<ul><li><p><tt>sharectl</tt>(1M) man page</p>
</li>
<li><p><a href="p43.html"><tt>sharectl</tt> Command</a>.</p>
</li>
</ul>
<p>The sections that follow describe each subcommand for <tt>sharemgr</tt> and
provide examples.</p>
<ul><li><p><a href="p38.html#gcrwl"><tt>create</tt> Subcommand</a></p>
</li>
<li><p><a href="p39.html"><tt>delete</tt> Subcommand</a></p>
</li>
<li><p><a href="p39.html#gcrvm"><tt>list</tt> Subcommand</a></p>
</li>
<li><p><a href="p39.html#gcrvv"><tt>show</tt> Subcommand</a></p>
</li>
<li><p><a href="p40.html"><tt>set</tt> Subcommand</a></p>
</li>
<li><p><a href="p40.html#gcswk"><tt>unset</tt> Subcommand</a></p>
</li>
<li><p><a href="p40.html#gcryf"><tt>add-share</tt> Subcommand</a></p>
</li>
<li><p><a href="p41.html"><tt>move-share</tt> Subcommand</a></p>
</li>
<li><p><a href="p41.html#gcryv"><tt>remove-share</tt> Subcommand</a></p>
</li>
<li><p><a href="p41.html#gcrxq"><tt>set-share</tt> Subcommand</a></p>
</li>
<li><p><a href="p41.html#gcrxj"><tt>enable</tt> Subcommand</a></p>
</li>
<li><p><a href="p42.html"><tt>disable</tt> Subcommand</a></p>
</li>
<li><p><a href="p42.html#gcryq"><tt>start</tt> Subcommand</a></p>
</li>
<li><p><a href="p42.html#gcryx"><tt>stop</tt> Subcommand</a></p>
</li>
<li><p><a href="p42.html#gcrxi"><tt>-h</tt> Feature</a></p>
</li>
</ul>
<a name="gcrwl"></a><h5><tt>create</tt> Subcommand</h5>
<p>The <tt>create</tt> subcommand makes (or creates) a share group. After you create
a share group,  use the add-share subcommand to add shares to the group. Note
the following:</p>
<ul><li><p>The group name is restricted to alphanumeric characters, the
hyphen (-), and the underscore (_). The first character must be alphabetic.</p>
</li>
<li><p>By default, a newly created share group is enabled.</p>
</li>
<li><p>If a file-system type is not specified, all supported protocols
are added to the share group.</p>
</li>
<li><p>When adding options to the share group, you must explicitly
define the protocol associated with the options.</p>
</li>
</ul>
<p>This subcommand supports the following options:</p>
<dl><dt><tt>-n</tt></dt>
<dd><p>Checks the validity of a desired configuration.</p>
</dd>
<dt><tt>-P</tt></dt>
<dd><p>Specifies a file-system type. The default is NFS.</p>
</dd>
<dt><tt>-p</tt></dt>
<dd><p>Specifies a property for the new share group.</p>
</dd>
<dt><tt>-h</tt></dt>
<dd><p>Provides an online-help description.</p>
</dd>
</dl>
<p>The create subcommand uses the following syntax:</p>
<pre># sharemgr create [-h] [-n] [-P protocol] [-p property=value] share_group</pre><p>The
following example creates <tt>my_group</tt> with the following parameters:</p>
<ul><li><p>The share group uses NFS.</p>
</li>
<li><p>The permissions for the group are set to read-write.</p>
</li>
<li><p>The functions, <tt>setuid()</tt> and <tt>setgid()</tt>,
cannot be used on <tt>my_group</tt>.</p>
</li>
</ul>
<pre>example# <tt><b>sharemgr create -P nfs -p rw=true -p nosuid=true my_group</b></tt></pre>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p37.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p39.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

