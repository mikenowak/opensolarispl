<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Starting and Stopping NIS Service on the Master
Server - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-09-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)<?GenHTML /ReferencePage> > <a href="p16.html">5.&nbsp;&nbsp;Setting Up and Configuring NIS Service</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p18.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p20.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="cnis1-37475"></a><h3>Starting and Stopping NIS Service on the Master
Server</h3>
<a name="indexterm-257"></a><a name="indexterm-258"></a><p><a name="indexterm-259"></a><a name="indexterm-260"></a><a name="indexterm-261"></a><a name="indexterm-262"></a><a name="indexterm-263"></a>Now that the master maps are created, you can start the NIS daemons
on the master server and begin service. When you enable the NIS service, <tt>ypserv</tt> and <tt>ypbind</tt> start on the server. When a
client requests information from the server, <tt>ypserv</tt> is
the daemon that answers information requests from clients after looking them
up in the NIS maps. The <tt>ypserv</tt> and <tt>ypbind</tt> daemons
are administered as a unit.</p>
<p>There are three ways that NIS service can be started or stopped on a
server:</p>
<ul><li><p>By automatically invoking the <tt>/usr/lib/netsvc/yp/ypstart</tt> script during the boot process</p>
</li>
<li><p><a name="indexterm-264"></a><a name="indexterm-265"></a>By using the Service Management Facility <tt>svcadm
enable</tt> <i>&lt;fmri></i> and <tt>svcadm
disable</tt> <i>&lt;fmri></i> commands from the command
line</p>
<p>See <tt>svcadm</tt>(1M) for
more information about SMF.</p>
</li>
<li><p>By using the <tt>ypstart</tt>(1M) and <tt>ypstop</tt>(1M) commands
from the command line</p>
</li>
</ul>
<a name="cnis1-23"></a><h4>Starting NIS Service Automatically</h4>
<p><a name="indexterm-266"></a><a name="indexterm-267"></a>After the NIS master server has been configured by running <tt>ypinit</tt>, <tt>ypstart</tt> is automatically invoked to start up <tt>ypserv</tt> when the machine is booted. See <a href="p18.html#cnis1-28187">Setting Up the Master Server With <tt>ypinit</tt></a>.</p>
<a name="cnis1-24"></a><h4>Starting and Stopping NIS From the Command Line</h4>
<p>Use the Service Management Facility <tt>svcadm</tt> commands
or the <tt>ypstart/ypstop</tt> commands to start and stop NIS from
the command line. When using <tt>svcadm</tt>, the instance name
is needed only if you are running more than one instance of the service. For
more information, see <a href="p16.html#cnis1-55">NIS and the Service Management Facility</a>, or see the <tt>svcadm</tt>(1M), <tt>ypstart</tt>(1M), and <tt>ypstop</tt>(1M) man pages.</p>
<p><a name="indexterm-268"></a><a name="indexterm-269"></a>To begin NIS service from the command line, run the <tt>svcadm
enable</tt> command or the <tt>ypstart</tt> command.</p>
<pre># <tt><b>svcadm enable network/nis/server:</tt><i>&lt;instance></i><tt></b></tt>
# <tt><b>svcadm enable network/nis/client:</tt><i>&lt;instance></i><tt></b></tt>
or
# <tt><b>ypstart</b></tt></pre><hr>
<p><b>Note - </b>Because there is a slight delay before <tt>ypserv</tt> is
ready to respond to calls after startup, you should issue a three to five
second sleep after <tt>svcadm</tt> when calling it from inside a
program or script.</p>
<hr>
<p><a name="indexterm-270"></a><a name="indexterm-271"></a>To stop NIS service, run the <tt>svcadm disable</tt> command
or the <tt>ypstop</tt>.</p>
<pre># <tt><b>svcadm disable network/nis/server:</tt><i>&lt;instance></i><tt></b></tt>
# <tt><b>svcadm disable network/nis/client:</tt><i>&lt;instance></i><tt></b></tt>
or
# <tt><b>ypstop</b></tt></pre><p><a name="indexterm-272"></a><a name="indexterm-273"></a>To stop and immediately restart an NIS service, use the <tt>svcadm
restart</tt> command.</p>
<pre># <tt><b>svcadm restart network/nis/server:</tt><i>&lt;instance></i><tt></b></tt>
# <tt><b>svcadm restart network/nis/client:</tt><i>&lt;instance></i><tt></b></tt></pre><a name="cnis1-16428"></a><h3>Setting Up NIS Slave Servers</h3>
<a name="indexterm-274"></a><a name="indexterm-275"></a><a name="indexterm-276"></a><p>Your network can have one or more slave servers. Having slave servers
ensures the continuity of NIS services when the master server is not available.</p>
<a name="cnis1-27"></a><h4>Preparing a Slave Server</h4>
<p><a name="indexterm-277"></a><a name="indexterm-278"></a>Before actually running <tt>ypinit</tt> to create the
slave servers, you should run the <tt>domainname</tt> command on
each NIS slave to make sure the domain name is consistent with the master
server.</p>
<hr>
<p><b>Note - </b>Domain names are case-sensitive.</p>
<hr>
<p><a name="indexterm-279"></a>Make sure that the network is working properly before you configure
an NIS slave server. In particular, check to be sure you can use <tt>rcp</tt> to
send files from the master NIS server to NIS slaves. </p>
<a name="cnis1-28"></a><h4>Setting Up a Slave Server</h4>
<a name="indexterm-280"></a><a name="indexterm-281"></a><a name="indexterm-282"></a><a name="indexterm-283"></a><p>The following procedure shows how to set up a slave server.</p>
<a name="cnis1-proc-29"></a><h4><img src="graphics/procedure.gif"> How to Set Up a Slave Server</h4>
<ol><li><a name="cnis1-step-2"></a><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Chapter 8, Using Role-Based Access Control (Tasks), in <i>System Administration Guide: Security Services</i>.</p></li><li><a name="cnis1-step-30"></a><b><a name="indexterm-284"></a><a name="indexterm-285"></a>Edit the <tt>/etc/hosts</tt> or <tt>/etc/inet/ipnodes</tt> file on the slave server to add the name and IP addresses of all
the other NIS servers.</b></li><li><a name="cnis1-step-31"></a><b><a name="indexterm-286"></a>Change directory to <tt>/var/yp</tt> on the slave
server.</b><hr>
<p><b>Note - </b>You must first configure the new slave server as an NIS client
so that it can get the NIS maps from the master for the first time. See <a href="p20.html">Setting Up NIS Clients</a> for details.</p>
<hr>
</li><li><a name="cnis1-step-32"></a><b>Initialize the slave server as a client.</b><pre># <tt><b>/usr/sbin/ypinit</b></tt> <tt>-c</tt><tt><b></b></tt></pre><p>The <tt>ypinit</tt> command prompts you for a list of NIS
servers. Enter the name of the local slave you are working on first, then
the master server, followed by the other NIS slave servers in your domain
in order from the physically closest to the furthest in network terms. </p></li><li><a name="cnis1-step-33"></a><b>Determine if the NIS client is running, then
start the client service as needed.</b><pre># <tt><b>svcs network/nis/client</b></tt>
STATE          STIME     FMRI
online         20:32:56  svc:/network/nis/client:default</pre><p>If <tt>svc:/network/nis/client</tt> is displayed with an <tt>online</tt> state, then NIS is running. If the service state is disabled,
then NIS is not running.</p><ol><li><b>If the NIS client is running, restart the client service.</b><pre># <tt><b>svcadm restart network/nis/client</b></tt></pre></li><li><b>If the NIS client is not running, start the client service.</b><pre># <tt><b>svcadm enable network/nis/client</b></tt></pre></li></ol></li><li><a name="cnis1-step-34"></a><b>If NIS is running, stop and restart the service.</b><pre># <tt><b>/usr/lib/netsvc/yp/ypstop</b></tt></pre></li><li><a name="cnis1-step-35"></a><b>Type the following to restart <tt>ypbind</tt>.</b><pre># <tt><b>/usr/lib/netsvc/yp/ypstart</b></tt></pre></li><li><a name="cnis1-step-36"></a><b>Initialize this machine as a slave.</b><pre># <tt><b>/usr/sbin/ypinit</b></tt> <tt>-s</tt> <tt><b></tt><i>master</i><tt></b></tt></pre><p>Where <i>master</i> is the machine name of the existing
NIS master server.</p><p>Repeat the procedures described in this section
for each machine you want configured as an NIS slave server.</p></li></ol><a name="cnis1-proc-51"></a><h4><img src="graphics/procedure.gif"> How to Start NIS on a Slave Server</h4>
<p>The following procedure shows how to start NIS on a slave server.</p>
<ol><li><a name="cnis1-step-54"></a><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Chapter 8, Using Role-Based Access Control (Tasks), in <i>System Administration Guide: Security Services</i>.</p></li><li><a name="cnis1-step-52"></a><b>Stop the client service and
start all NIS server processes.</b><pre># <tt><b>svcadm disable network/nis/client</b></tt>
# <tt><b>svcadm enable network/nis/server</b></tt></pre></li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p18.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p20.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2006 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

