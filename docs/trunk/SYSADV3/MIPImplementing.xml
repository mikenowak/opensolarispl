<chapter id="mipimplementing-1"><title>Administering Mobile IP (Tasks)</title><highlights><para>This chapter provides procedures for modifying, adding, deleting, and displaying
parameters in the Mobile IP configuration file. This chapter also shows you how to
display mobility agent status.</para><para>This chapter contains the following information:</para><itemizedlist><listitem><para><olink targetptr="mipimplementing-64" remap="internal">Creating the Mobile IP Configuration File (Task
Map)</olink></para>
</listitem><listitem><para><olink targetptr="mipimplementing-2" remap="internal">Creating the Mobile IP Configuration
File</olink></para>
</listitem><listitem><para><olink targetptr="mipimplementing-63" remap="internal">Modifying the Mobile IP Configuration
File</olink></para>
</listitem><listitem><para><olink targetptr="ettmw" remap="internal">Modifying the Mobile IP Configuration File
(Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="mipimplementing-5" remap="internal">Displaying Mobility Agent Status</olink></para>
</listitem><listitem><para><olink targetptr="mipimplementing-97" remap="internal">Displaying Mobility Routes on a
Foreign Agent</olink></para>
</listitem>
</itemizedlist><para>For an introduction to Mobile IP, refer to <olink targetptr="mipoverview-1" remap="internal">Chapter&#160;27, Mobile IP (Overview)</olink>. For detailed information about Mobile
IP, refer to <olink targetptr="mipmanaging-22" remap="internal">Chapter&#160;29, Mobile IP Files and Commands (Reference)</olink>.</para>
</highlights><sect1 id="mipimplementing-64"><title>Creating the Mobile IP Configuration File (Task
Map)</title><informaltable frame="all" pgwide="100"><tgroup cols="3" colsep="1" rowsep="1"><colspec colwidth="33*"/><colspec colwidth="33*"/><colspec colwidth="33*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Create the Mobile IP configuration file.</para>
</entry><entry><para>Involves creating the <filename>/etc/inet/mipagent.conf</filename> file or copying
one of the sample files.</para>
</entry><entry><para><olink targetptr="mipimplementing-90" remap="internal">How to Create the Mobile IP Configuration
File</olink></para>
</entry>
</row><row><entry><para>Configure the <literal>General</literal> section.</para>
</entry><entry><para>Involves typing the version number into the <literal>General</literal> section
of the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-66" remap="internal">How to Configure the General Section</olink></para>
</entry>
</row><row><entry><para>Configure the <literal>Advertisements</literal> section.</para>
</entry><entry><para>Involves adding labels and values, or changing them, in the <literal>Advertisements</literal> section of the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-67" remap="internal">How to Configure the Advertisements Section</olink></para>
</entry>
</row><row><entry><para>Configure the <literal>GlobalSecurityParameters</literal> section.</para>
</entry><entry><para>Involves adding labels and values, or changing them, in the  <literal>GlobalSecurityParameters</literal> section of the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-68" remap="internal">How to Configure the GlobalSecurityParameters
Section</olink></para>
</entry>
</row><row><entry><para>Configure the <literal>Pool</literal> section.</para>
</entry><entry><para>Involves adding labels and values, or changing them, in the <literal>Pool</literal> section
of the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-70" remap="internal">How to Configure the Pool Section</olink></para>
</entry>
</row><row><entry><para>Configure the <literal>SPI</literal> section.</para>
</entry><entry><para>Involves adding labels and values, or changing them, in the  <literal>SPI</literal> section
of the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-69" remap="internal">How to Configure the SPI Section</olink></para>
</entry>
</row><row><entry><para>Configure the <literal>Address</literal> section.</para>
</entry><entry><para>Involves adding labels and values, or changing them, in the <literal>Address</literal> section of the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-71" remap="internal">How to Configure the Address Section</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1><sect1 id="mipimplementing-2"><title>Creating the Mobile IP Configuration File</title><para>This section explains how to plan for Mobile IP and create the <filename>/etc/inet/mipagent.conf</filename>file.</para><task id="esqdj"><title>How to Plan for Mobile IP</title><tasksummary><para>When you configure the <filename>mipagent.conf</filename> file for the first time, you need to perform the following tasks:</para>
</tasksummary><procedure><step><para>Depending on your organization's requirements for its hosts, determine
what functionality your Mobile IP agent can provide:</para><itemizedlist><listitem><para>Foreign agent functionality only</para>
</listitem><listitem><para>Home agent functionality only</para>
</listitem><listitem><para>Both foreign agent and home agent functionality</para>
</listitem>
</itemizedlist>
</step><step><para>Create the <filename>/etc/inet/mipagent.conf</filename> file
and specify the settings you require by using the procedures that are described in
this section. You can also copy one of the following files to <filename>/etc/inet/mipagent.conf</filename> and modify it according to your requirements:</para><itemizedlist><listitem><para>For foreign agent functionality, copy <filename>/etc/inet/mipagent.conf.fa-sample</filename>.</para>
</listitem><listitem><para>For home agent functionality, copy <filename>/etc/inet/mipagent.conf.ha-sample</filename>.</para>
</listitem><listitem><para>For both foreign agent and home agent functionality, copy <filename>/etc/inet/mipagent.conf-sample</filename>.</para>
</listitem>
</itemizedlist>
</step><step><para>You
can reboot your system to invoke the boot script that starts the <command>mipagent</command> daemon. Or, you can also start <command>mipagent</command>  by typing the
following command:</para><screen># /etc/inet.d/mipagent start</screen>
</step>
</procedure>
</task><task id="mipimplementing-90"><title>How to Create the Mobile IP Configuration File</title><procedure><step><para>Assume the Primary Administrator role, or become superuser, on the system
where you want to enable Mobile IP.</para><para>The Primary Administrator role includes
the Primary Administrator profile. To create the role and assign the role to a user,
see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="mipimplementing-step-93"><para>Create the <filename>/etc/inet/mipagent.conf</filename> file by using one of the following options:</para><itemizedlist><listitem><para>In the <filename>/etc/inet</filename> directory, create an empty file
named <filename>mipagent.conf</filename>.</para>
</listitem><listitem><para>From the following list, copy the sample file that provides the functionality
you want for the <filename>/etc/inet/mipagent.conf</filename> file.</para><itemizedlist><listitem><para><filename>/etc/inet/mipagent.conf.fa-sample</filename></para>
</listitem><listitem><para><filename>/etc/inet/mipagent.conf.ha-sample</filename></para>
</listitem><listitem><para><filename>/etc/inet/mipagent.conf-sample</filename></para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</step><step id="mipimplementing-step-96"><para>Add or change configuration parameters in
the <filename>/etc/inet/mipagent.conf</filename> file to conform to your configuration
requirements.</para><para>The remaining procedures in this section describe the steps
to modify sections in <filename>/etc/inet/mipagent.conf</filename>.</para>
</step>
</procedure>
</task><task id="mipimplementing-66"><title>How to Configure the <literal>General</literal> Section</title><tasksummary><para>If you copied one of the sample files in the <filename>/etc/inet</filename> directory,
you can omit this procedure because the sample file contains this entry. <olink targetptr="mipmanaging-12" remap="internal">General Section</olink> provides descriptions of the labels and values that are used
in this section.</para>
</tasksummary><procedure role="single-step"><step id="mipimplementing-step-78"><para>Edit the <filename>/etc/inet/mipagent.conf</filename> file and add the following lines:</para><screen>[General]
     Version = 1.0</screen><note><para>The <filename>/etc/inet/mipagent.conf</filename> file must contain this
entry.</para>
</note>
</step>
</procedure>
</task><task id="mipimplementing-67"><title>How to Configure the <literal>Advertisements</literal> Section</title><tasksummary><para><olink targetptr="mipmanaging-13" remap="internal">Advertisements Section</olink> provides descriptions
of the labels and values that are used in this section.</para>
</tasksummary><procedure role="single-step"><step id="mipimplementing-step-80"><para>Edit the <filename>/etc/inet/mipagent.conf</filename> file and add or change the following lines by using the values that are
required for your configuration.</para><screen>[Advertisements <replaceable>interface</replaceable>]
     HomeAgent = &#60;yes/no>
     ForeignAgent = &#60;yes/no>
     PrefixFlags = &#60;yes/no>
     AdvertiseOnBcast = &#60;yes/no>
     RegLifetime = <replaceable>n</replaceable>
     AdvLifetime = <replaceable>n</replaceable>
     AdvFrequency = <replaceable>n</replaceable>
     ReverseTunnel = &#60;yes/no/FA/HA/both>
     ReverseTunnelRequired = &#60;yes/no/FA/HA></screen><note><para>You must include
a different <literal>Advertisements</literal> section for each interface on the local
host that provides Mobile IP services.</para>
</note>
</step>
</procedure>
</task><task id="mipimplementing-68"><title>How to Configure the <literal>GlobalSecurityParameters</literal> Section</title><tasksummary><para><olink targetptr="mipmanaging-16" remap="internal">GlobalSecurityParameters
Section</olink> provides descriptions of the labels and values that are used in this
section.</para>
</tasksummary><procedure role="single-step"><step id="mipimplementing-step-82"><para>Edit the <filename>/etc/inet/mipagent.conf</filename> file and add or change the following lines by using the values that are
required for your configuration:</para><screen>[GlobalSecurityParameters]
     MaxClockSkew = <replaceable>n</replaceable>
     HA-FAauth = &#60;yes/no>
     MN-FAauth = &#60;yes/no>
     Challenge = &#60;yes/no>
     KeyDistribution = files</screen>
</step>
</procedure>
</task><task id="mipimplementing-70"><title>How to Configure the <literal>Pool</literal> Section</title><tasksummary><para><olink targetptr="mipmanaging-17" remap="internal">Pool Section</olink> provides descriptions of the labels and values that are used
in this section:</para>
</tasksummary><procedure><step id="mipimplementing-step-86"><para>Edit the <filename>/etc/inet/mipagent.conf</filename> file</para>
</step><step><para>Add or change the following lines by using the values that are required
for your configuration:</para><screen>[Pool <replaceable>pool-identifier</replaceable>]
     BaseAddress = <replaceable>IP-address</replaceable>
     Size = <replaceable>size</replaceable></screen>
</step>
</procedure>
</task><task id="mipimplementing-69"><title>How to Configure the <literal>SPI</literal> Section</title><tasksummary><para><olink targetptr="mipmanaging-14" remap="internal">SPI Section</olink> provides descriptions
of the labels and values that are used in this section.</para>
</tasksummary><procedure><step id="mipimplementing-step-84"><para>Edit the <filename>/etc/inet/mipagent.conf</filename> file. </para>
</step><step><para>Add or change the following lines by using the values that are required
for your configuration:</para><screen>[SPI <replaceable>SPI-identifier</replaceable>]
     ReplayMethod = &#60;none/timestamps>
     Key = <replaceable>key</replaceable></screen><note><para>You must include a different <literal>SPI</literal> section
for each security context that is deployed.</para>
</note>
</step>
</procedure>
</task><task id="mipimplementing-71"><title>How to Configure the <literal>Address</literal> Section</title><tasksummary><para><olink targetptr="mipmanaging-15" remap="internal">Address Section</olink> provides descriptions
of the labels and values that are used in this section.</para>
</tasksummary><procedure><step id="mipimplementing-step-88"><para>Edit the <filename>/etc/inet/mipagent.conf</filename> file.</para>
</step><step><para>Add or change the following lines by using the values that are required
for your configuration:</para><itemizedlist><listitem><para><emphasis role="strong">For a mobile node,
use the following:</emphasis></para><screen>[Address <replaceable>address</replaceable>]
     Type = node
     SPI = SPI-identifier</screen>
</listitem><listitem><para><emphasis role="strong">For an agent, use the following:</emphasis></para><screen>[Address <replaceable>address</replaceable>]
     Type = agent
     SPI = <replaceable>SPI-identifier</replaceable>
     IPsecRequest = <replaceable>action</replaceable> {<replaceable>properties</replaceable>} [: <replaceable>action</replaceable> {<replaceable>properties</replaceable>}]
     IPsecReply = <replaceable>action</replaceable> {<replaceable>properties</replaceable>} [: <replaceable>action</replaceable> {<replaceable>properties</replaceable>}]
     IPsecTunnel = <replaceable>action</replaceable> {<replaceable>properties</replaceable>} [: <replaceable>action</replaceable> {<replaceable>properties</replaceable>}]</screen><para>where <replaceable>action</replaceable> and <replaceable>{properties}</replaceable> are
any action and associated properties that are defined in the <olink targetdoc="refman7" targetptr="ipsec-7p" remap="external"><citerefentry><refentrytitle>ipsec</refentrytitle><manvolnum>7P</manvolnum></citerefentry></olink> man page.</para><note><para>The SPI that is configured previously corresponds to the MD5 protection
mechanism that is required by RFC 2002. The SPI that is configured previously does
not correspond to the SPI that is used by IPsec. For more information about IPsec,
see <olink targetptr="ipsec-ov-1" remap="internal">Chapter&#160;19, IP Security Architecture (Overview)</olink> and <olink targetptr="ipsec-mgtasks-1" remap="internal">Chapter&#160;20, Configuring IPsec (Tasks)</olink>. Also see the <olink targetdoc="refman7" targetptr="ipsec-7p" remap="external"><citerefentry><refentrytitle>ipsec</refentrytitle><manvolnum>7P</manvolnum></citerefentry></olink> man
page.</para>
</note>
</listitem><listitem><para><emphasis role="strong">For a mobile node that is identified by its NAI,
use the following:</emphasis></para><screen>[Address <replaceable>NAI</replaceable>]
     Type = Node
     SPI = <replaceable>SPI-identifier</replaceable>
     Pool = <replaceable>pool-identifier</replaceable></screen>
</listitem><listitem><para><emphasis role="strong">For a default mobile node, use the following:</emphasis></para><screen>[Address Node-Default]
     Type = Node
     SPI = <replaceable>SPI-identifier</replaceable>
     Pool = <replaceable>pool-identifier</replaceable></screen>
</listitem>
</itemizedlist>
</step>
</procedure>
</task>
</sect1><sect1 id="ettmw"><title>Modifying the Mobile IP Configuration File (Task Map)</title><informaltable frame="all" pgwide="100"><tgroup cols="3" colsep="1" rowsep="1"><colspec colwidth="33*"/><colspec colwidth="33*"/><colspec colwidth="33*"/><tbody><row><entry valign="bottom"><para>Task</para>
</entry><entry valign="bottom"><para>Description</para>
</entry><entry valign="bottom"><para>For Instructions</para>
</entry>
</row><row><entry><para>Modify the <literal>General</literal> section.</para>
</entry><entry><para>Uses the <command>mipagentconfig</command> <command>change</command> command
to change the value of a label in the <literal>General</literal> section of the Mobile
IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-6" remap="internal">How to Modify the General Section</olink></para>
</entry>
</row><row><entry><para>Modify the <literal>Advertisements</literal> section.</para>
</entry><entry><para>Uses the <command>mipagentconfig</command> <command>change</command> command
to change the value of a label in the <literal>Advertisements</literal> section of
the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-12" remap="internal">How to Modify the Advertisements Section</olink></para>
</entry>
</row><row><entry><para>Modify the <literal>GlobalSecurityParameters</literal> section.</para>
</entry><entry><para>Uses the <command>mipagentconfig</command> <command>change</command> command
to change the value of a label in the <literal>GlobalSecurityParameters</literal> section
of the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-17" remap="internal">How to Modify the GlobalSecurityParameters
Section</olink></para>
</entry>
</row><row><entry><para>Modify the <literal>Pool</literal> section.</para>
</entry><entry><para>Uses the <command>mipagentconfig</command> <command>change</command> command
to change the value of a label in the <literal>Pool</literal> section of the Mobile
IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-27" remap="internal">How to Modify the Pool Section</olink></para>
</entry>
</row><row><entry><para>Modify the <literal>SPI</literal> section.</para>
</entry><entry><para>Uses the <command>mipagentconfig</command> <command>change</command> command
to change the value of a label in the <literal>SPI</literal> section of the Mobile
IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-22" remap="internal">How to Modify the SPI Section</olink></para>
</entry>
</row><row><entry><para>Modify the <literal>Address</literal> section.</para>
</entry><entry><para>Uses the <command>mipagentconfig</command> <command>change</command> command
to change the value of a label in the <literal>Address</literal> section of the Mobile
IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-32" remap="internal">How to Modify the Address Section</olink></para>
</entry>
</row><row><entry><para>Add or delete parameters.</para>
</entry><entry><para>Uses the <command>mipagentconfig</command> <command>add</command> or <command>delete</command> commands to add new parameters, labels, and values or to delete existing
ones in any section of the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-44" remap="internal">How to Add or Delete Configuration File
Parameters</olink></para>
</entry>
</row><row><entry><para>Display the current settings of parameter destinations.</para>
</entry><entry><para>Uses the <command>mipagentconfig</command> <command>get</command> command to
display current settings of any section of the Mobile IP configuration file.</para>
</entry><entry><para><olink targetptr="mipimplementing-46" remap="internal">How to Display Current Parameter Values in the
Configuration File</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1><sect1 id="mipimplementing-63"><title>Modifying the Mobile IP Configuration File</title><para>This section
shows you how to modify the Mobile IP configuration file by using the <command>mipagentconfig</command> command. This section also shows you how to display the current settings
of parameter destinations.</para><para><olink targetptr="mipmanaging-1" remap="internal">Configuring the Mobility IP Agent</olink> provides
a conceptual description of the <command>mipagentconfig</command> command's usage.
You can also review the <olink targetdoc="refman1m" targetptr="mipagentconfig-1m" remap="external"><citerefentry><refentrytitle>mipagentconfig</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man
page.</para><task id="mipimplementing-6"><title>How to Modify the <literal>General</literal> Section</title><procedure><step><para>Assume the Primary Administrator role, or become superuser on the system
where you want to enable Mobile IP.</para><para>The Primary Administrator role includes
the Primary Administrator profile. To create the role and assign the role to a user,
see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="mipimplementing-step-11"><para>On a command line, type the following command
for each label that you want to modify in the <literal>General</literal> section.</para><screen># mipagentconfig change &#60;label> &#60;value></screen>
</step>
</procedure><example id="eojbt"><title>Modifying a Parameter in the <literal>General</literal> Section</title><para>The following example shows how you might change the version number in the configuration
file's <literal>General</literal> section.</para><screen># mipagentconfig change version 2</screen>
</example>
</task><task id="mipimplementing-12"><title>How to Modify the <literal>Advertisements</literal> Section</title><procedure><step><para>Assume the Primary Administrator role, or become superuser, on the system
where you want to enable Mobile IP.</para><para>The Primary Administrator role includes
the Primary Administrator profile. To create the role and assign the role to a user,
see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="mipimplementing-step-16"><para>Type the following command for each label
that you want to modify in the <literal>Advertisements</literal> section:</para><screen># mipagentconfig change adv <replaceable>device-name</replaceable> &#60;label> &#60;value></screen><para>For
example, if you are changing the agent's advertised lifetime to 300 seconds for device <literal>hme0</literal>, use the following command.</para><screen># mipagentconfig change adv hme0 AdvLifetime 300</screen>
</step>
</procedure><example id="eojbs"><title>Modifying the <literal>Advertisements</literal> Section</title><para>The following example shows how you might change other parameters in the configuration
file's <literal>Advertisements</literal> section.</para><screen># mipagentconfig change adv hme0 HomeAgent yes
# mipagentconfig change adv hme0 ForeignAgent no
# mipagentconfig change adv hme0 PrefixFlags no
# mipagentconfig change adv hme0 RegLifetime 300
# mipagentconfig change adv hme0 AdvFrequency 4
# mipagentconfig change adv hme0 ReverseTunnel yes</screen>
</example>
</task><task id="mipimplementing-17"><title>How to Modify the <literal>GlobalSecurityParameters</literal> Section</title><procedure><step><para>Assume the Primary Administrator role, or become superuser, on the system
where you want to enable Mobile IP.</para><para>The Primary Administrator role includes
the Primary Administrator profile. To create the role and assign the role to a user,
see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="mipimplementing-step-21"><para>Type the following command for each label
that you want to modify in the <literal>GlobalSecurityParameters</literal> section:</para><screen># mipagentconfig change &#60;label> &#60;value></screen><para>For example, if you are enabling home agent and foreign agent authentication,
use the following command:</para><screen># mipagentconfig change HA-FAauth yes</screen>
</step>
</procedure><example id="eojbw"><title>Modifying the Global Security Parameters Section</title><para>The following example shows how you might change other parameters in the configuration
file's <literal>GlobalSecurityParameters</literal> section.</para><screen># mipagentconfig change MaxClockSkew 200
# mipagentconfig change MN-FAauth yes
# mipagentconfig change Challenge yes
# mipagentconfig change KeyDistribution files</screen>
</example>
</task><task id="mipimplementing-27"><title>How to Modify the <literal>Pool</literal> Section</title><procedure><step><para>Assume the Primary Administrator role, or become superuser, on the system
where you want to enable Mobile IP.</para><para>The Primary Administrator role includes
the Primary Administrator profile. To create the role and assign the role to a user,
see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="mipimplementing-step-30"><para>Type the following command for each label
that you want to modify in the <literal>Pool</literal> section:</para><screen># mipagentconfig change Pool <replaceable>pool-identifier</replaceable> &#60;label> &#60;value></screen>
</step>
</procedure><example id="eojbx"><title>Modifying the <literal>Pool</literal> Section</title><para>The following example shows the commands to use for changing the base address
to <literal>192.168.1.1</literal> and the size of Pool <literal>10</literal> to <literal>100</literal>.</para><screen># mipagentconfig change Pool 10 BaseAddress 192.168.1.1
# mipagentconfig change Pool 10 Size 100</screen>
</example>
</task><task id="mipimplementing-22"><title>How to Modify the <literal>SPI</literal> Section</title><procedure><step><para>Assume the Primary Administrator role, or become superuser, on the system
where you want to enable Mobile IP.</para><para>The Primary Administrator role includes
the Primary Administrator profile. To create the role and assign the role to a user,
see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="mipimplementing-step-26"><para>Type the following command for each label
that you want to modify in the <literal>SPI</literal> section:</para><screen># mipagentconfig change SPI <replaceable>SPI-identifier</replaceable> &#60;label> &#60;value></screen><para>For example, if you are changing the key
for <literal>SPI 257</literal> to <literal>5af2aee39ff0b332</literal>, use the following
command.</para><screen># mipagentconfig change SPI 257 Key 5af2aee39ff0b332</screen>
</step>
</procedure><example id="eojbz"><title>Modifying the <literal>SPI</literal> Section</title><para>The following example shows how to change the <literal>ReplayMethod</literal> label
in the configuration file's <literal>SPI</literal> section.</para><screen># mipagentconfig change SPI 257 ReplayMethod timestamps</screen>
</example>
</task><task id="mipimplementing-32"><title>How to Modify the <literal>Address</literal> Section</title><procedure><step><para>Assume the Primary Administrator role, or become superuser, on the system
where you want to enable Mobile IP.</para><para>The Primary Administrator role includes
the Primary Administrator profile. To create the role and assign the role to a user,
see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="mipimplementing-step-36"><para>Type the following command for each label
that you want to modify in the <literal>Address</literal> section:</para><screen># mipagentconfig change addr [<replaceable>NAI</replaceable> | <replaceable>IPaddr</replaceable> | node-default] &#60;label> &#60;value></screen><para>See <olink targetptr="mipmanaging-15" remap="internal">Address Section</olink> for a description
of the three configuration methods (NAI, IP address, and node-default).</para><para>For
example, if you are changing the SPI of IP address <literal>10.1.1.1</literal> to <literal>258</literal>, use the following command:</para><screen># mipagentconfig change addr 10.1.1.1 SPI 258</screen>
</step>
</procedure><example id="eojby"><title>Modifying the <literal>Address</literal> Section</title><para>The following example
shows how you can change other parameters that are provided in the sample configuration
file's <literal>Address</literal> section.</para><screen width="100"># mipagentconfig change addr 10.1.1.1 Type agent
# mipagentconfig change addr 10.1.1.1 SPI 259
# mipagentconfig change addr mobilenode@abc.com Type node
# mipagentconfig change addr mobilenode@abc.com SPI 258
# mipagentconfig change addr mobilenode@abc.com Pool 2
# mipagentconfig change addr node-default SPI 259
# mipagentconfig change addr node-default Pool 3
# mipagentconfig change addr 10.68.30.36 Type agent
# mipagentconfig change addr 10.68.30.36 SPI 260
# mipagentconfig change IPsecRequest apply {auth_algs md5 sa shared}</screen>
</example>
</task><task id="mipimplementing-44"><title>How to Add or Delete Configuration File Parameters</title><procedure><step><para>Assume the Primary Administrator role, or become superuser, on the system
where you want to enable Mobile IP.</para><para>The Primary Administrator role includes
the Primary Administrator profile. To create the role and assign the role to a user,
see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="mipimplementing-step-50"><para>Type the appropriate command for each label
that you want to add or delete for the designated section:</para><itemizedlist><listitem><para>For the <literal>General</literal> section use the following:</para><screen># mipagentconfig [add | delete] &#60;label> &#60;value></screen>
</listitem><listitem><para>For the <literal>Advertisements</literal> section use the following:</para><screen># mipagentconfig [add | delete] adv <replaceable>device-name</replaceable> &#60;label> &#60;value></screen><note><para>You can add an interface by typing the following:</para><screen># mipagentconfig add adv <replaceable>device-name</replaceable></screen><para>In this instance, default values are assigned to the interface (for both the
foreign agent and the home agent).</para>
</note>
</listitem><listitem><para>For the <literal>GlobalSecurityParameters</literal>, section use the
following:</para><screen># mipagentconfig [add | delete] &#60;label> &#60;value></screen>
</listitem><listitem><para>For the <literal>Pool</literal> section, use the following:</para><screen># mipagentconfig [add | delete] Pool <replaceable>pool-identifier</replaceable> &#60;label> &#60;value></screen>
</listitem><listitem><para>For the <literal>SPI</literal> section, use the following:</para><screen># mipagentconfig [add | delete] SPI <replaceable>SPI-identifier</replaceable> &#60;label> &#60;value></screen>
</listitem><listitem><para>For the <literal>Address</literal> section, use the following:</para><screen># mipagentconfig [add | delete] addr [<replaceable>NAI</replaceable> | <replaceable>IP-address</replaceable> | node-default] \
&#60;label> &#60;value></screen>
</listitem>
</itemizedlist><note><para>Do not create identical <literal>Advertisements</literal>, <literal>Pool</literal>, <literal>SPI</literal>, and <literal>Address</literal> sections.</para>
</note>
</step>
</procedure><example id="eojca"><title>Modifying File Parameters</title><para>For example, to create a new address pool, Pool 11, that has a base address
of <literal>192.167.1.1</literal> and a size of <literal>100</literal>, use the following
commands.</para><screen># mipagentconfig add Pool 11 BaseAddress 192.167.1.1 
# mipagentconfig add Pool 11 size 100</screen>
</example><example id="ekqws"><title>Deleting SPI</title><para>The following example shows how to delete the SPI security parameter <literal>SPI 257</literal>.</para><screen># mipagentconfig delete SPI 257</screen>
</example>
</task><task id="mipimplementing-46"><title>How to Display Current Parameter Values in the
Configuration File</title><tasksummary><para>You can use the <command>mipagentconfig</command> <literal>get</literal> command
to display current settings that are associated with parameter destinations.</para>
</tasksummary><procedure><step><para>Assume the Primary Administrator role, or become superuser, on the system
where you are enabling Mobile IP.</para><para>The Primary Administrator role includes
the Primary Administrator profile. To create the role and assign the role to a user,
see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="mipimplementing-step-55"><para>Type the following command for each parameter
for which you want to display settings:</para><screen># mipagentconfig get [&#60;parameter> | &#60;label>] </screen><para>For example, if you are displaying the advertisement settings for the <literal>hme0</literal> device, use the following command:</para><screen># mipagentconfig get adv hme0</screen><para>As a result, the
following output might be displayed:</para><screen>[Advertisements hme0]
   HomeAgent = yes
   ForeignAgent = yes</screen>
</step>
</procedure><example id="eojcb"><title>Using the <command>mipagentconfig</command> <literal>get</literal> Command
to Display Parameter Values</title><para>The following example shows the results of using the <command>mipagentconfig</command> <literal>get</literal> command with other parameter destinations.</para><screen># mipagentconfig get MaxClockSkew
      [GlobalSecurityParameters]
         MaxClockSkew=300

# mipagentconfig get HA-FAauth
      [GlobalSecurityParameters]
         HA-FAauth=no

# mipagentconfig get MN-FAauth
      [GlobalSecurityParameters]
         MN-FAauth=no

# mipagentconfig get Challenge
      [GlobalSecurityParameters]
         Challenge=no

# mipagentconfig get Pool 10
      [Pool 10]
         BaseAddress=192.168.1.1
         Size=100

# mipagentconfig get SPI 257
      [SPI 257]
         Key=11111111111111111111111111111111
         ReplayMethod=none

# mipagentconfig get SPI 258
      [SPI 258]
         Key=15111111111111111111111111111111
         ReplayMethod=none

# mipagentconfig get addr 10.1.1.1
      [Address 10.1.1.1]
         SPI=258
         Type=agent

# mipagentconfig get addr 192.168.1.200
      [Address 192.168.1.200]
         SPI=257
         Type=node# mipagentconfig get addr 10.1.1.1
      [Address 10.1.1.1]
         Type=agent
         SPI=258
         IPsecRequest = apply {auth_algs md5 sa shared}
         IPsecReply = permit {auth_algs md5}
         IPsecTunnel = apply {encr_algs 3des sa shared}</screen>
</example>
</task>
</sect1><sect1 id="mipimplementing-5"><title>Displaying Mobility Agent Status</title><para>You can use the <command>mipagentstat</command> command to display a foreign
agent's visitors list and a home agent's binding table. <olink targetptr="mipmanaging-3" remap="internal">Mobile IP Mobility Agent Status</olink> provides a conceptual description of the <command>mipagentstat</command> command. You can also review the <olink targetdoc="refman1m" targetptr="mipagentstat-1m" remap="external"><citerefentry><refentrytitle>mipagentstat</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man page.</para><task id="mipimplementing-57"><title>How to Display Mobility Agent Status</title><procedure><step><para>Become superuser or assume an equivalent role on the system where you
are enabling Mobile IP.</para><para>Roles contain authorizations and privileged commands.
For more information about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.</para>
</step><step id="mipimplementing-step-61"><para>Display the mobility agent status.</para><screen># mipagentstat <replaceable>options</replaceable> </screen><variablelist><varlistentry><term><command>-f</command></term><listitem><para>Shows the list of active mobile nodes in the foreign agent's visitor
list.</para>
</listitem>
</varlistentry><varlistentry><term><command>-h</command></term><listitem><para>Shows the list of active mobile nodes in the home agent's binding
table.</para>
</listitem>
</varlistentry><varlistentry><term><command>-p</command></term><listitem><para>Shows the list of security associations with an agent's mobility agent
peers.</para>
</listitem>
</varlistentry>
</variablelist>
</step>
</procedure><example id="eojcg"><title>Displaying Mobility Agent Status</title><para>This example shows how to display the visitor list for all mobile nodes that
are registered with a foreign agent.</para><screen># mipagentstat -f</screen><para>As a result, output similar to the following is displayed:</para><screen>Mobile Node     Home Agent     Time (s)     Time (s)  Flags
                               Granted      Remaining
--------------- -------------- ------------ --------- -----
foobar.xyz.com  ha1.xyz.com    600          125       .....T.
10.1.5.23       10.1.5.1       1000         10        .....T.</screen><para>This example shows how to display foreign agent security associations.</para><screen># mipagentstat -p</screen><para>As a result, output similar to the following is displayed:</para><screen>Foreign                  ..... Security Association(s).....
Agent                    Requests Replies  FTunnel  RTunnel
----------------------   -------- -------- -------- --------
forn-agent.eng.sun.com   AH       AH       ESP      ESP</screen><para>This example shows how to display home agent security associations.</para><screen># mipagentstat -fp</screen><para>As a result, output similar to the following is displayed:</para><screen>Home                     ..... Security Association(s) .....
Agent                    Requests Replies  FTunnel  RTunnel
----------------------   -------- -------- -------- --------
home-agent.eng.sun.com   AH       AH       ESP      ESP
ha1.xyz.com              AH,ESP   AH       AH,ESP   AH,ESP</screen>
</example>
</task>
</sect1><sect1 id="mipimplementing-97"><title>Displaying Mobility Routes on a Foreign Agent</title><para>You can use the <command>netstat</command> command to display additional
information about source-specific routes that are created by forward tunnels and reverse
tunnels. See the <command>netstat</command>(1M) man page for more information about
this command.</para><task id="mipimplementing-98"><title>How to Display Mobility Routes on a Foreign Agent</title><procedure><step><para>Become superuser or assume an equivalent role on the system where you
are enabling Mobile IP.</para><para>Roles contain authorizations and privileged commands.
For more information about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.</para>
</step><step id="mipimplementing-step-101"><para>Display the mobility routes.</para><screen># netstat -rn </screen>
</step>
</procedure><example id="eojch"><title>Displaying Mobility Routes on a Foreign Agent</title><para>The following example shows the routes for a foreign agent that uses a reverse
tunnel.</para><screen>Routing Table:   IPv4 Source-Specific     
Destination      In If     Source      Gateway Flags  Use  Out If
--------------  ------- ------------ --------- -----  ---- -------
10.6.32.11      ip.tun1      --      10.6.32.97  UH      0 hme1
    --          hme1    10.6.32.11       --      U       0 ip.tun1</screen><para>The first line indicates that the destination IP address <literal>10.6.32.11</literal> and the incoming interface <literal>ip.tun1</literal> select <literal>hme1</literal> as the interface that forwards the packets. The next line indicates
that any packet originating from interface <literal>hme1</literal> and source address <literal>10.6.32.11</literal> must be forwarded to <literal>ip.tun1</literal>. </para>
</example>
</task>
</sect1>
</chapter>