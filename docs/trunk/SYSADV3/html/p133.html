<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p132.html#ipfilter-admin-1">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p132.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p134.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="fabar"></A><h2>Deactivating and Disabling Solaris IP Filter</h2>
<p>You might want to deactivate or disable packet filtering and NAT under
the following circumstances:</p>
<ul><li><p>For testing purposes</p>
</li>
<li><p>To troubleshoot system problems when you think the problems
are caused by Solaris IP Filter</p>
</li>
</ul>
<p>The following task map identifies the procedures associated with deactivating
or disabling Solaris IP Filter features.</p>
<A NAME="euazs"></A><p><b>Table 26-2 </b>Deactivating and Disabling Solaris
IP Filter (Task Map)</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Task</p></th><th scope="col"><p>Description</p></th><th scope="col"><p>For Instructions</p></th></tr>
<tr><td><p>Deactivate packet filtering.</p></td><td><p>Deactivate packet filtering using the <tt>ipf</tt> command.</p></td><td><p><A HREF="p133.html#ettms">How to Deactivate Packet Filtering</A>&nbsp;</p></td></tr>
<tr><td><p>Deactivate NAT.</p></td><td><p>Deactivate NAT using the <tt>ipnat</tt> command.</p></td><td><p><A HREF="p133.html#ettmt">How to Deactivate NAT</A>&nbsp;</p></td></tr>
<tr><td><p>Disable packet filtering and NAT.</p></td><td><p>Disable packet filtering and NAT using the <tt>ipf</tt> command.</p></td><td><p><A HREF="p133.html#ettmo">How to Disable Packet Filtering</A>&nbsp;</p></td></tr>
</table><A NAME="ettms"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Deactivate Packet Filtering</h3>
<A NAME="indexterm-2352"></A><A NAME="indexterm-2353"></A><p>The following procedure deactivates Solaris IP Filter packet filtering
by flushing the packet filtering rules from the active filtering rule set.
The procedure does not disable Solaris IP Filter. You can reactivate Solaris
IP Filter by adding rules to the rule set.</p>
<ol><li><p><b>Assume a role that includes the IP Filter Management rights profile,
or become superuser.</b></p><p>You can assign the IP Filter Management rights
profile to a role that you create. To create the role and assign the role
to a user, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<li><p><b>Use one of the following methods to deactivate Solaris IP Filter
rules:</b></p><ul><li><p>Remove the active rule set from the kernel.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ipf -Fa</b></tt></pre>
</td></table><br><p>This command deactivates all packet filtering rules.</p>
</li>
<li><p>Remove incoming packet filtering rules.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ipf -Fi</b></tt></pre>
</td></table><br><p>This command deactivates packet filtering rules for incoming packets.</p>
</li>
<li><p>Remove outgoing packet filtering rules.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ipf -Fo</b></tt></pre>
</td></table><br><p>This command deactivates packet filtering rules for outgoing packets.</p>
</li>
</ul>
</li>
</ol><A NAME="ettmt"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Deactivate NAT</h3>
<A NAME="indexterm-2354"></A><A NAME="indexterm-2355"></A><A NAME="indexterm-2356"></A><A NAME="indexterm-2357"></A><p>The following procedure deactivates Solaris IP Filter NAT rules by flushing
the NAT rules from the active NAT rules set. The procedure does not disable
Solaris IP Filter. You can reactivate Solaris IP Filter by adding rules to
the rule set.</p>
<ol><li><p><b>Assume a role that includes the IP Filter Management rights profile,
or become superuser.</b></p><p>You can assign the IP Filter Management rights
profile to a role that you create. To create the role and assign the role
to a user, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<li><p><b>Remove NAT from the kernel.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ipnat -FC</b></tt></pre>
</td></table><br><p>The <tt>-C</tt> option removes all entries in the current NAT
rule listing. The <tt>-F</tt> option removes all active entries in
the current NAT translation table, which shows the currently active NAT mappings.</p>
</li>
</ol><A NAME="ettmo"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Disable Packet Filtering</h3>
<A NAME="indexterm-2358"></A><A NAME="indexterm-2359"></A><A NAME="indexterm-2360"></A><p>When you run this procedure, both packet filtering and NAT are removed
from the kernel. If you use this procedure, you must re-enable Solaris IP Filter in order
to reactivate packet filtering and NAT. For more information, see <A HREF="p132.html#eubbr">How to Re-Enable Solaris IP Filter</A>.</p>
<ol><li><p><b>Assume a role that includes the IP Filter Management rights profile,
or become superuser.</b></p><p>You can assign the IP Filter Management rights
profile to a role that you create. To create the role and assign the role
to a user, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<li><p><b>Disable packet filtering and allow all packets to pass into the
network.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ipf -D</b></tt></pre>
</td></table><br><p><hr size="1" noshade><p><b>Note - </b>The <tt>ipf <tt>-D</tt></tt> command flushes
the rules from the rule set. When you re-enable filtering, you must add rules
to the rule set.</p>
<hr size="1" noshade></p></li>
</ol><A NAME="eubbd"></A><h2>Working With Solaris IP Filter Rule Sets</h2>
<p>The following task map identifies the procedures associated with Solaris
IP Filter rule sets.</p>
<A NAME="euazw"></A><p><b>Table 26-3 </b>Working With Solaris IP Filter Rule
Sets (Task Map)</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Task</p></th><th scope="col"><p>Description</p></th><th scope="col"><p>For Instructions</p></th></tr>
<tr><td><p>Manage, view and modify Solaris IP Filter packet filtering rule sets.</p></td><td>&nbsp;</td><td><p><A HREF="p133.html#ettma">Managing Packet Filtering Rule Sets for Solaris IP Filter</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>View an active packet filtering rule set.</p></td><td><p><A HREF="p133.html#ezsvx">How to View the Active Packet Filtering Rule Set</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>View an inactive packet filtering rule set.</p></td><td><p><A HREF="p134.html#fahqf">How to View the Inactive Packet Filtering Rule Set</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>Activate a different active rule set.</p></td><td><p><A HREF="p134.html#ettmd">How to Activate a Different or Updated Packet Filtering Rule Set</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>Remove a rule set.</p></td><td><p><A HREF="p134.html#faaff">How to Remove a Packet Filtering Rule Set</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>Add rules to the rule sets.</p></td><td><p><A HREF="p134.html#ettmc">How to Append Rules to the Active Packet Filtering Rule Set</A>&nbsp;</p><p><A HREF="p135.html#ettmk">How to Append Rules to the Inactive Packet Filtering Rule Set</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>Move between active and inactive rule sets.</p></td><td><p><A HREF="p135.html#ettmj">How to Switch Between Active and Inactive Packet Filtering Rule Sets</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>Delete an inactive rule set from the kernel.</p></td><td><p><A HREF="p135.html#ettmp">How to Remove an Inactive Packet Filtering Rule Set From the Kernel</A>&nbsp;</p></td></tr>
<tr><td><p>Manage, view and modify Solaris IP Filter NAT rules.</p></td><td>&nbsp;</td><td><p><A HREF="p135.html#faafj">Managing NAT Rules for Solaris IP Filter</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>View active NAT rules.</p></td><td><p><A HREF="p135.html#faafa">How to View Active NAT Rules</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>Remove NAT rules.</p></td><td><p><A HREF="p135.html#faafc">How to Remove NAT Rules</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>Add additional rules to NAT rules.</p></td><td><p><A HREF="p136.html#faafd">How to Append Rules to the NAT Rules</A>&nbsp;</p></td></tr>
<tr><td><p>Manage, view and modify Solaris IP Filter address pools.</p></td><td>&nbsp;</td><td><p><A HREF="p136.html#faafi">Managing Address Pools for Solaris IP Filter</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>View active address pools.</p></td><td><p><A HREF="p136.html#faaez">How to View Active Address Pools</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>Remove an address pool.</p></td><td><p><A HREF="p136.html#faaey">How to Remove an Address Pool</A>&nbsp;</p></td></tr>
<tr><td>&nbsp;</td><td><p>Add additional rules to an address pool.</p></td><td><p><A HREF="p136.html#faafn">How to Append Rules to an Address Pool</A>&nbsp;</p></td></tr>
</table><A NAME="ettma"></A><h3>Managing Packet Filtering Rule Sets for Solaris IP
Filter</h3>
<A NAME="indexterm-2361"></A><A NAME="indexterm-2362"></A><p>When Solaris IP Filter is enabled, both active and inactive packet filtering rule
sets can reside in the kernel. The active rule set determines what filtering
is being done on incoming packets and outgoing packets. The inactive rule
set also stores rules. These rules are not used unless you make the inactive
rule set the active rule set. You can manage, view, and modify both active
and inactive packet filtering rule sets.</p>
<A NAME="ezsvx"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to View the Active Packet Filtering Rule Set</h4>
<A NAME="indexterm-2363"></A><A NAME="indexterm-2364"></A><A NAME="indexterm-2365"></A><A NAME="indexterm-2366"></A><A NAME="indexterm-2367"></A><A NAME="indexterm-2368"></A><ol><li><p><b>Assume a role that includes the IP Filter Management rights profile,
or become superuser.</b></p><p>You can assign the IP Filter Management rights
profile to a role that you create. To create the role and assign the role
to a user, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<li><p><b>View the active packet filtering rule set that is loaded in the
kernel.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ipfstat -io</b></tt></pre>
</td></table><br></li>
</ol><A NAME="fahpj"></A><h5>Example 26-1 &nbsp;&nbsp;Viewing the Active Packet Filtering Rule Set</h5>
<p>The following example shows output from the active packet filtering
rule set that is loaded in the kernel.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ipfstat -io</b></tt>
empty list for ipfilter(out)
pass in quick on dmfe1 from 192.168.1.0/24 to any
pass in all
block in on dmfe1 from 192.168.1.10/32 to any</pre>
</td></table><br>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p132.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p134.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

