<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p25.html#fwawf">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p25.html#fpcso">Administering Individual Network Interfaces</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p25.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p27.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="fpdik"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Obtain Interface Status</h3>
<A NAME="indexterm-630"></A><p>This procedure
explains how to determine which interfaces are currently available on a system
and their status. This procedure also shows which interfaces are currently
plumbed.</p>
<ol><li><p><b>On the system with the interfaces to be configured, assume the
Primary Administrator role or become superuser.</b></p><p>The Primary Administrator
role includes the Primary Administrator profile. To create the role and assign
the role to a user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<li><p><b>Determine which interfaces are currently installed on your system.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>dladm show-link</b></tt></pre>
</td></table><br><p><A NAME="indexterm-631"></A><A NAME="indexterm-632"></A>This step uses the <tt>dladm</tt> command, which is
explained in detail in the <tt>dladm</tt>(1M) man page. This command
reports on all the interface drivers that it finds, regardless of whether
the interfaces are currently configured. </p>
</li>
<li><p><b>Determine which interfaces on the system are currently plumbed.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig -a</b></tt></pre>
</td></table><br><p>The <tt>ifconfig</tt> command has many additional functions,
including plumbing an interface. For more information, refer to the <tt>ifconfig</tt>(1M) man page.</p>
</li>
</ol><A NAME="ftyxm"></A><h5>Example 6-1 &nbsp;&nbsp;Obtaining the Status of an Interface with the <tt>dladm</tt> command</h5>
<p>The next example shows the status display of the <tt>dladm</tt> command.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>dladm show-link</b></tt>

ce0             type: legacy    mtu: 1500       device: ce0
ce1             type: legacy    mtu: 1500       device: ce1
bge0            type: non-vlan  mtu: 1500       device: bge0
bge1            type: non-vlan  mtu: 1500       device: bge1
bge2            type: non-vlan  mtu: 1500       device: bge2

 </pre>
</td></table><br><p>The output of <tt>dladm show-link</tt> indicates that four
interface drivers are available for the local host. Both the <tt>ce</tt> and
the <tt>bge</tt> interfaces can be configured for VLANs. However,
only the GLDV3 interfaces with a type of <tt>non-VLAN</tt> can be
used for link aggregations.</p>
<p>The next example shows the status display of the <tt>ifconfig</tt> <tt>-a</tt> command.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig -a</b></tt>

lo0: flags=2001000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv4,VIRTUAL> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000 
ce0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 3
        inet 192.168.84.253 netmask ffffff00 broadcast 192.168.84.255
        ether 0:3:ba:7:84:5e 
bge0: flags=1004843 &lt;UP,BROADCAST,RUNNING,MULTICAST,DHCP,IPv4> mtu 1500 index 2
        inet 10.8.57.39 netmask ffffff00 broadcast 10.8.57.255
        ether 0:3:ba:29:fc:cc </pre>
</td></table><br><p>The output of the <tt>ifconfig -a</tt> command displays statistics
for only two interfaces, <tt>ce0</tt> and <tt>bge0</tt>.
This output shows that only <tt>ce0</tt> and <tt>bge0</tt> have
been plumbed and are ready for use by network traffic. These interfaces can
be used in a VLAN. Because <tt>bge0</tt> has been plumbed, you can
no longer use this interface in an aggregation.</p>
<A NAME="fpdcn"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Configure a Physical Interface After System
Installation</h3>
<A NAME="indexterm-633"></A><p>Use the next procedure for configuring interfaces. </p>
<h5>Before You Begin</h5><ul><li><p><A NAME="indexterm-634"></A>Determine the IPv4 addresses that you want to use for the additional
interfaces.</p>
</li>
<li><p>Ensure that the physical interface to be configured has been
physically installed onto the system. For information about installing separately
purchased NIC hardware, refer to the manufacturer's instructions that accompany
the NIC.</p>
</li>
<li><p>If you have just installed the interface, perform a reconfiguration
boot before proceeding with the next task.</p>
</li>
</ul>
<ol><li><p><b>On the system with the interfaces to be configured, assume the
Primary Administrator role or become superuser.</b></p><p>The Primary Administrator
role includes the Primary Administrator profile. To create the role and assign
the role to a user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<li><p><b>Determine which interfaces are currently installed on the system.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>dladm show-link</b></tt></pre>
</td></table><br></li>
<li><p><b>Configure and plumb each interface.<A NAME="indexterm-635"></A><A NAME="indexterm-636"></A></b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig</b></tt> <i>interface</i> <tt><b>plumb up</b></tt></pre>
</td></table><br><p>For example, for <tt>qfe0</tt> you would type:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig qfe0 plumb up</b></tt></pre>
</td></table><br><p><hr size="1" noshade><p><b>Note - </b>Interfaces that are explicitly configured with the <tt>ifconfig</tt> command
do not persist across a reboot.</p>
<hr size="1" noshade></p></li>
<li><p><b>Assign an IPv4 address and netmask to the interface.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig</b></tt> <i>interface IPv4-address</i> <tt><b>netmask+</b></tt><i>netmask</i></pre>
</td></table><br><p>For example, for <tt>qfe0</tt> you would type:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig qfe0 192.168.84.3 netmask + 255.255.255.0</b></tt></pre>
</td></table><br><p><hr size="1" noshade><p><b>Note - </b>You can specify an IPv4 address in either traditional IPv4 notation
or CIDR notation.</p>
<hr size="1" noshade></p></li>
<li><p><b>Verify that the newly configured interfaces are plumbed and configured,
or "<tt>UP</tt>."</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig -a</b></tt></pre>
</td></table><br><p>Check the status line for each interface that is displayed. Ensure that
the output contains an <tt>UP</tt> flag on the status line, for
example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>qfe0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2</pre>
</td></table><br></li>
<li><p><b>(Optional) To make the interface configuration persist across
reboots, perform the following steps:</b></p><ol Type="a"><li><p><b>Create an <tt>/etc/hostname.</tt><i>interface</i> file
for each interface to be configured.<A NAME="indexterm-637"></A></b></p><p>For example, to add a <tt>qfe0</tt> interface,
you would create the following file:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>vi /etc/hostname.qfe0</b></tt></pre>
</td></table><br></li>
<li><p><b>Edit the <tt>/etc/hostname.</tt><i>interface</i> file.</b></p><p>At a minimum, add the IPv4 address of the interface to the file.
You can use traditional IPv4 notation or CIDR notation to specify the IP address
of the interface. You can also add a netmask and other configuration information
to the file.</p>
<p><hr size="1" noshade><p><b>Note - </b>To add an IPv6 address to an interface, refer to <A HREF="p35.html#ipv6-config-tasks-6">Modifying an IPv6 Interface Configuration for Hosts and Servers</A></p>
<hr size="1" noshade></p></li>
<li><p><b>Add entries for the new interfaces into the <tt>/etc/inet/hosts</tt> file.</b></p></li>
<li><p><b>Perform a reconfiguration boot.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>reboot -- -r</b></tt></pre>
</td></table><br></li>
<li><p><b>Verify that the interface you created in the <tt>/etc/hostname.</tt><i>interface</i> file has been configured.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig -a</b></tt></pre>
</td></table><br><p>For examples, refer to <A HREF="p26.html#fpdah">Example 6-2</A>.</p>
</li>
</ol>
</li>
</ol><A NAME="fpdah"></A><h5>Example 6-2 &nbsp;&nbsp;Adding Persistent Interface Configurations</h5>
<p>The example shows how to configure the interfaces <tt>qfe0</tt> and <tt>qfe1</tt> to a host. These interfaces remain persistent across reboots.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>dladm show-link</b></tt>
eri0             type: legacy    mtu: 1500       device: eri0
qfe0             type: legacy    mtu: 1500       device: qfe0
qfe1             type: legacy    mtu: 1500       device: qfe1
qfe2             type: legacy    mtu: 1500       device: qfe2
qfe3             type: legacy    mtu: 1500       device: qfe3
bge0             type: non-vlan  mtu: 1500       device: bge0

# <tt><b>vi /etc/hostname.qfe0</b></tt>
<tt><b>192.168.84.3
netmask + 255.255.255.0</b></tt>
# <tt><b>vi /etc/hostname.qfe1
192.168.84.72
netmask + 255.255.255.0</b></tt>
# <tt><b>vi /etc/inet/hosts</b></tt>
# Internet host table
#
127.0.0.1       localhost
10.0.0.14       myhost
<tt><b>192.168.84.3       interface-2
192.168.84.72       interface-3</b></tt></pre>
</td></table><br><p>At this point, you would reboot the system. </p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>reboot -- -r</b></tt></pre>
</td></table><br><p>After the system boots, you would then verify the interface configuration.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>ifconfig -a</b></tt>
# ifconfig -a
lo0: flags=1000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv4> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000 
eri0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
        inet 10.0.0.14 netmask ff000000 broadcast 10.255.255.255
        ether 8:0:20:c1:8b:c3 
qfe0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 3
        inet 192.168.84.3 netmask ffffff00 broadcast 192.255.255.255
        ether 8:0:20:c8:f4:1d 
qfe1: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 4
        inet 192.168.84.72 netmask ffffff00 broadcast 10.255.255.255
        ether 8:0:20:c8:f4:1e </pre>
</td></table><br><h5>See Also</h5><ul><li><p>To configure an IPv6 address onto an interface, refer to <A HREF="p33.html#ipv6-config-tasks-119">How to Enable an IPv6 Interface for the Current Session</A>.</p>
</li>
<li><p>To set up failover detection and failback for interfaces by
using IP Network Multipathing (IPMP), refer to <A HREF="p160.html#deploynetmult-56">Chapter&nbsp;31, Administering IPMP (Tasks)</A>.</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p25.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p27.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

