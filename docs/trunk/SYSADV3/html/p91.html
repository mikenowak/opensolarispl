<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p90.html#eyatl">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p90.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p92.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="dhcp-overview-33a"></A><h2>DHCP Client Administration</h2>
<p><A NAME="indexterm-1521"></A>The Solaris DHCP client software does not require administration
under normal system operation. The <tt>dhcpagent</tt> daemon automatically
starts when the system boots, renegotiates leases, and stops when the system
shuts down. You cannot manually start and stop the <tt>dhcpagent</tt> daemon
directly. However, as superuser on the client system, you can use the <tt>ifconfig</tt> command to affect <tt>dhcpagent</tt>'s management of
the network interface, if necessary.</p>
<A NAME="dhcp-overview-21"></A><h3><tt>ifconfig</tt> Command Options
Used With the DHCP Client</h3>
<p><A NAME="indexterm-1522"></A>The <tt>ifconfig</tt> command enables you to do the
following:</p><ul><li><p><A NAME="indexterm-1523"></A><b>Start the DHCP client</b> -
The command <tt>ifconfig</tt> <i>interface</i> <tt>dhcp start</tt> initiates the interaction between <tt>dhcpagent</tt> and
the DHCP server to obtain an IP address and a new set of configuration options.
This command is useful when you change information that you want a client
to use immediately, such as when you add IP addresses or change the subnet
mask.</p>
</li>
<li><p><A NAME="indexterm-1524"></A><b>Request network configuration information
only</b> - The command <tt>ifconfig</tt> <i>interface</i> <tt>dhcp inform</tt> causes <tt>dhcpagent</tt> to
issue a request for network configuration parameters, with the exception of
the IP address. This command is useful when the network interface has a valid
IP address, but the client system needs updated network options. For example,
this command is useful if you do not use DHCP to manage IP addresses, but
you do use it to configure hosts on the network.</p>
</li>
<li><p><A NAME="indexterm-1525"></A><A NAME="indexterm-1526"></A><b>Request a lease extension</b> -
The command <tt>ifconfig</tt> <i>interface</i> <tt>dhcp extend</tt> causes <tt>dhcpagent</tt> to issue a request
to renew the lease. The client does automatically request to renew leases.
However, you might want to use this command if you change the lease time and
want clients to use the new lease time immediately, rather than waiting for
the next attempt at lease renewal.</p>
</li>
<li><p><A NAME="indexterm-1527"></A><b>Release the IP address</b> -
The command <tt>ifconfig</tt> <i>interface</i> <tt>dhcp release</tt> causes <tt>dhcpagent</tt> to relinquish the
IP address used by the network interface. Release of the IP address happens
automatically when the lease expires. You might want to issue this command
if the lease time is long and you need to take down the network interface
for an extended period of time. You should use this command when you remove
the system from the network.</p>
</li>
<li><p><A NAME="indexterm-1528"></A><b>Drop the IP address</b> -
The command <tt>ifconfig</tt> <i>interface</i> <tt>dhcp drop</tt> causes <tt>dhcpagent</tt> to take down the network
interface without informing the DHCP server. This command enables the client
to use the same IP address when it reboots.</p>
</li>
<li><p><A NAME="indexterm-1529"></A><b>Ping the network interface</b> -
The command <tt>ifconfig</tt> <i>interface</i> <tt>dhcp ping</tt> lets you determine if the interface is under the control
of DHCP.</p>
</li>
<li><p><A NAME="indexterm-1530"></A><A NAME="indexterm-1531"></A><b>View the DHCP configuration status of
the network interface</b> - The command <tt>ifconfig</tt> <i>interface</i> <tt>dhcp status</tt> displays the current
state of the DHCP client. The display indicates the following items:</p>
<ul><li><p>If an IP address has been bound to the client</p>
</li>
<li><p>The number of requests sent, received, and declined</p>
</li>
<li><p>If this interface is the primary interface</p>
</li>
<li><p>Times when the lease was obtained, when it expires, and when
renewal attempts are scheduled to begin</p>
</li>
</ul>
<p>For example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig hme0 dhcp status</b></tt>
Interface  State         Sent  Recv  Declined  Flags 
hme0       BOUND            1     1         0   [PRIMARY]  
(Began,Expires,Renew)=(08/16/2005 15:27, 08/18/2005 13:31, 08/17/2005 15:24)</pre>
</td></table><br></li>
</ul>
<A NAME="dhcp-overview-22"></A><h3>Setting DHCP Client Configuration Parameters</h3>
<A NAME="indexterm-1532"></A><A NAME="indexterm-1533"></A><p>The <tt>/etc/default/dhcpagent</tt> file on the client system
contains tunable parameters for the <tt>dhcpagent</tt>. You can
use a text editor to change several parameters that affect client operation.
The <tt>/etc/default/dhcpagent</tt> file is well documented, so
for more information, you should refer to the file as well as to the <tt>dhcpagent</tt>(1M) man page.</p>
<p><A NAME="indexterm-1534"></A>The <tt>/etc/dhcp.</tt><i>interface<tt></i></tt> file
is another location in which parameters affecting the DHCP client are set.
Parameters set in this file are used by system startup scripts with the <tt>ifconfig</tt> command.</p>
<p>By default, the DHCP client is configured as follows:</p>
<ul><li><p>The client system uses DHCP on one physical network interface.</p>
<p>If you want to use DHCP on more than one physical network interface,
see <A HREF="p91.html#dhcp-overview-35a">DHCP Client Systems With Multiple Network Interfaces</A>.</p>
</li>
<li><p>The client system does not require a particular host name.</p>
<p>If you want a client to request a specific host name, see <A HREF="p91.html#eyhuv">DHCP Client Host Names</A>.</p>
</li>
<li><p>The client is not automatically configured as a name service
client if the DHCP client was configured after the Solaris installation.</p>
<p>See <A HREF="p92.html#dhcp-overview-5">DHCP Client Systems and Name Services</A> for information about using name services
with DHCP clients.</p>
</li>
<li><p>The client requests only the subnet mask, router IP address,
client host name, and encapsulated vendor options.</p>
<p>The DHCP client's
parameter file can be set up to request more options in the <tt>PARAM_REQUEST_LIST</tt> keyword in the <tt>/etc/default/dhcpagent</tt> file.
The DHCP server can be configured to provide options that were not specifically
requested. See <A HREF="p67.html#dhcp-overview-9">About DHCP Macros</A> and <A HREF="p83.html#dhcp-admin-125">Working With DHCP Macros (Task Map)</A> for
information about using DHCP server macros to send information to clients.</p>
</li>
</ul>
<A NAME="dhcp-overview-35a"></A><h2>DHCP Client Systems With Multiple Network
Interfaces</h2>
<p><A NAME="indexterm-1535"></A><A NAME="indexterm-1536"></A><A NAME="indexterm-1537"></A><A NAME="indexterm-1538"></A><A NAME="indexterm-1539"></A>The DHCP client can simultaneously manage several different interfaces
on one system. The interfaces can be physical interfaces or logical interfaces.
Each interface has its own IP address and lease time. If more than one network
interface is configured for DHCP, the client issues separate requests to configure
them. The client maintains a separate set of network configuration parameters
for each interface. Although the parameters are stored separately, some of
the parameters are global in nature. The global parameters apply to the system
as a whole, rather than to a particular network interface.</p>
<p>The host name, NIS domain name, and time zone are global parameters
and should have the same values for each interface. However, these values
may differ due to errors in the information specified by the DHCP administrator.
To ensure that there is only one answer to a query for a global parameter,
only the parameters for the primary network interface are requested. You can
insert the word <tt>primary</tt> in the <tt>/etc/dhcp.</tt><i>interface</i> file for the interface that you want to be treated
as the primary interface. If the <tt>primary</tt> keyword is not
used, the first interface in alphabetical order is considered to be the primary
interface.</p>
<p>The DHCP client manages leases for logical interfaces and physical interfaces
identically, except for the following limitations on logical interfaces:</p>
<ul><li><p>The DHCP client does not manage the default routes that are
associated with logical interfaces.</p>
<p>The Solaris kernel associates
routes with physical interfaces, not logical interfaces. When a physical interface's
IP address is established, the necessary default routes should be placed in
the routing table. If DHCP is used subsequently to configure a logical interface
associated with that physical interface, the necessary routes should already
be in place. The logical interface uses the same routes.</p>
<p>When
a lease expires on a physical interface, the DHCP client removes the default
routes that are associated with the interface. When a lease expires on a logical
interface, the DHCP client does not remove the default routes associated with
the logical interface. The associated physical interface and possibly other
logical interfaces might need to use the same routes.</p>
<p>If you need
to add or remove default routes that are associated with a DHCP-controlled
interface, you can use the DHCP client event script mechanism. See <A HREF="p93.html#extkj">DHCP Client Event Scripts</A>.</p>
</li>
<li><p>The DHCP client does not automatically generate client identifiers
for logical interfaces.</p>
<p>The client identifier is used to uniquely
identify a DHCP client so that it can receive configuration information that
is specifically targeted to that client. For physical interfaces, the DHCP
client identifier is derived from the media access control (MAC) address of
the system's network interface hardware. However, no Internet standard exists
for the format of DHCP client identifiers for physical interfaces that have
multiple leases. You must create your own client identifier for any logical
interface that you want to be configured through DHCP. The client identifier
must be specified in the <tt>/etc/default/dhcpagent</tt> file with
the <i>interface</i>.<tt>CLIENT_ID</tt> keyword.
For example, to specify the client identifier <tt>orangutan-ce0-1</tt> for
the logical interface <tt>ce0:1</tt>, you would use the following
entry:</p>
<p><tt>ce0:1.CLIENT_ID=orangutan-ce0-1</tt></p>
<p>See the <tt>/etc/default/dhcpagent</tt> file and the <tt>dhcpagent</tt>(1M) man page
for more information about the parameters you can set in the file.</p>
<p>If
you do not configure a client identifier, <tt>ifconfig</tt> fails
when it tries to configure the logical interface to use DHCP. The error message
is:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>ifconfig: ce0:1: interface does not have a configured DHCP client id</pre>
</td></table><br></li>
</ul>
<A NAME="eyhuv"></A><h2>DHCP Client Host Names</h2>
<p>By default, the Solaris DHCP client does not supply its own host name,
because the client expects the DHCP server to supply the host name. The Solaris
DHCP server is configured to supply host names to DHCP clients by default.
When you use the Solaris DHCP client and server together, these defaults work
well. However, when you use the Solaris DHCP client with some third-party
DHCP servers, the client might not receive a host name from the server. If
the Solaris DHCP client does not receive a host name through DHCP, the client
system looks at the <tt>/etc/nodename</tt> file for a name to
use as the host name. If the file is empty, the host name is set to <tt>unknown</tt>.</p>
<p>If the DHCP server supplies a name in the DHCP <tt>Hostname</tt> option,
the client uses that host name, even if a different value is placed in the <tt>/etc/nodename</tt> file. If you want the client to use a specific host
name, you can enable the client to request that name. See the following procedure.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p90.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p92.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

