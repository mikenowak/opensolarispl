<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p25.html#fwawf">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p25.html#fpcso">Administering Individual Network Interfaces</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p26.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p28.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="fpcvg"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Remove a Physical Interface</h3>
<A NAME="indexterm-638"></A><A NAME="indexterm-639"></A><p>Use this procedure for removing a physical interface. </p>
<ol><li><p><b>On the system with the interface to be removed, assume the Primary
Administrator role or become superuser.</b></p><p>The Primary Administrator
role includes the Primary Administrator profile. To create the role and assign
the role to a user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<li><p><b>Remove the physical interface.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig</b></tt> <i>interface</i> <tt><b>unplumb down</b></tt> </pre>
</td></table><br><p>For example, to remove the interface <tt>qfe1</tt>, you would
type:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig qfe1 unplumb down</b></tt></pre>
</td></table><br></li>
</ol><A NAME="eyprp"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">SPARC: How to Ensure That the MAC Address of
an Interface Is Unique</h3>
<A NAME="indexterm-640"></A><A NAME="indexterm-641"></A><p>Use this procedure for configuring MAC addresses. </p>
<p>Some applications require every interface on a host to have a unique
MAC addresses. However, every SPARC based system has a system-wide MAC address,
which by default is used by all interfaces. Here are two situations where
you might want to configure the factory-installed MAC addresses for the interfaces
on a SPARC system.</p>
<ul><li><p>For link aggregations, you should use the factory-set MAC
addresses of the interfaces in the aggregation configuration. </p>
</li>
<li><p>For IPMP groups, each interface in the group must have a unique
MAC address. These interfaces must use their factory-installed MAC addresses.</p>
</li>
</ul>
<p>The EEPROM parameter <tt>local-mac-address?</tt> determines
whether all interfaces on a SPARC system use the system-wide MAC address or
their unique MAC address. The next procedure shows how to use the <tt>eeprom</tt> command to check the current value of <tt>local-mac-address?</tt> and
change it, if necessary.</p>
<ol><li><p><b>On the system with the interfaces to be configured, assume the
Primary Administrator role or become superuser.</b></p><p>The Primary Administrator
role includes the Primary Administrator profile. To create the role and assign
the role to a user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<li><p><b>Determine whether all interfaces on the system currently use the
system-wide MAC address.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>eeprom local-mac-address?</b></tt>
local-mac-address?=false</pre>
</td></table><br><p>In the example, the response to the <tt>eeprom</tt> command, <tt>local-mac-address?=false</tt>, indicates that all interfaces do use the
system-wide MAC address. The value of <tt>local-mac-address?=false</tt> must
 be changed to <tt>local-mac-address?=true</tt> before the interfaces
can become members of an IPMP group. You should also change <tt>local-mac-address?=false</tt> to <tt>local-mac-address?=true</tt> for aggregations.</p>
</li>
<li><p><b>If necessary, change the value of  <tt>local-mac-address?</tt> as
follows:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>eeprom local-mac-address?=true</b></tt></pre>
</td></table><br><p>When you reboot the system, the interfaces with factory-installed MAC
addresses now use these factory settings, rather than the system-wide MAC
address. Interfaces without factory-set MAC addresses continue to use the
system-wide MAC address.</p>
</li>
<li><p><b>Check the MAC addresses of all the interfaces on the system.</b></p><p>Look for cases where multiple interfaces have the same MAC address.
In this example, all interfaces use the system-wide MAC address <tt>8:0:20:0:0:1</tt>.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>ifconfig -a</b></tt>
lo0: flags=1000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv4> mtu 8232 index 1
     inet 127.0.0.1 netmask ff000000 
hme0: flags=1004843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
     inet 10.0.0.112 netmask ffffff80 broadcast 10.0.0.127
     ether 8:0:20:0:0:1
ce0: flags=1004843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
     inet 10.0.0.114 netmask ffffff80 broadcast 10.0.0.127
     ether 8:0:20:0:0:1
ce1: flags=1004843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
     inet 10.0.0.118 netmask ffffff80 broadcast 10.0.0.127
     ether 8:0:20:0:0:1</pre>
</td></table><br><p><hr size="1" noshade><p><b>Note - </b>Continue to the next step only if more than one network interface
still has the same MAC address. Otherwise, go on to the final step.</p>
<hr size="1" noshade></p></li>
<li><p><b>If necessary, manually configure the remaining interfaces so that
all interfaces have unique MAC address.</b></p><p>Specify a unique MAC address
in the <tt>/etc/hostname.</tt><i>interface</i> file
for the particular interface. </p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>vi /etc/hostname.eri0</b></tt>
myhost
12:34:56:7:8:9</pre>
</td></table><br><p><hr size="1" noshade><p><b>Note - </b>To prevent any risk of manually configured MAC addresses conflicting
with other MAC addresses on your network, you must always configure <b>locally
administered</b> MAC addresses, as defined by the IEEE 802.3 standard.</p>
<hr size="1" noshade></p><p>In the example in Step 4, you would need to configure <tt>ce0</tt> and <tt>ce1</tt> with  locally administered MAC addresses.  For example, to reconfigure <tt>ce1</tt>  with the locally administered MAC address <tt>06:05:04:03:02</tt>,
you would add the following line to <tt>/etc/hostname.ce1</tt>: </p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>ether 06:05:04:03:02</b></tt> </pre>
</td></table><br><p>You also can use the <tt>ifconfig ether</tt> command to configure
an interface's MAC address for the current session. However, any changes made
directly with <tt>ifconfig</tt> are not preserved across reboots.
Refer to the <tt>ifconfig</tt>(1M) man
page for details.</p>
</li>
<li><p><b>Reboot the system.</b></p></li>
</ol><A NAME="fpjve"></A><h2>Administering Virtual Local Area Networks</h2>
<A NAME="indexterm-642"></A><A NAME="indexterm-643"></A><A NAME="indexterm-644"></A><A NAME="indexterm-645"></A><p>A <b>virtual local area network (VLAN)</b> is a subdivision
of a local area network at the data link layer of the TCP/IP protocol stack.
You can create VLANs for local area networks that use switch technology. By
dividing groups of users into VLANs, you can improve network administration
and security for the entire local network. You can also assign interfaces
on the same system to different VLANs.</p>
<p>Consider dividing your local network into VLANs if you need to do the
following:<A NAME="indexterm-646"></A></p>
<ul><li><p>Create a logical division of workgroups.</p>
<p>For example,
suppose all hosts on a floor of a building are connected on one switched-based
local network. You could create a separate VLAN for each workgroup on the
floor.</p>
</li>
<li><p>Enforce differing security policies for the workgroups.</p>
<p>For example, the security needs of a Finance department and an Information
Technologies department are quite different. If systems for both departments
share the same local network, you could create a separate VLAN for each department.
Then, you could enforce the appropriate security policy on a per-VLAN basis.</p>
</li>
<li><p>Split workgroups into manageable broadcast domains.</p>
<p>The
use of VLANs reduces the size of broadcast domains and improves network efficiency.</p>
</li>
</ul>
<A NAME="fumvy"></A><h3>Overview of VLAN Topology</h3>
<A NAME="indexterm-647"></A><p>Switched LAN technology enables you to organize the systems on a local
network into VLANs. Before you can divide a local network into VLANs, you
must obtain switches that support VLAN technology. You can configure all ports
on a switch to serve a single VLAN or multiple VLANs, depending on the VLAN
topology design. Each switch manufacturer has different procedures for configuring
the ports of a switch.</p>
<p><A HREF="p27.html#gatoo">Figure 6-1</A> shows a local area
network that has the subnet address <tt>192.168.84.0</tt>. This
LAN is subdivided into three VLANs, Red, Yellow, and blue.</p>
<A NAME="gatoo"></A><p><b>Figure 6-1 </b>Local Area Network With Three VLANs</p>
<IMG src="figures/VLAN-top.gif" class="figure" alt="The surrounding context describes the figure's content." title="The surrounding context describes the figure's content."><p>Connectivity on LAN <tt>192.168.84.0</tt> is handled by Switches
1 and 2. Systems of the Information Technologies workgroup are assigned to
the Blue VLAN. The Human Resources workgroup's systems are on the Yellow VLAN.
The Red VLAN contains systems in the Accounting workgroup. </p>
<A NAME="fumva"></A><h4>VLAN Tags and Physical Points of Attachment</h4>
<A NAME="indexterm-648"></A><p>Each VLAN in a local area network is identified by a VLAN tag, or <b>VLAN ID (VID)</b>. The VID is assigned during VLAN configuration. The
VID is a 12-bit identifier between 1 and 4094 that provides a unique identity
for each VLAN. In <A HREF="p27.html#gatoo">Figure 6-1</A>, the Blue
VLAN has the VID 123, the Yellow VLAN has the VID 456, and the Red VLAN has
the VID 789. </p>
<p>When you configure switches to support VLANs, you need to assign a VID
to each port. The VID on the port must be the same as the VID assigned to
the interface that connects to the port, as shown in the following figure.</p>
<A NAME="gatol"></A><p><b>Figure 6-2 </b>Switch Configuration for a Network with VLANs</p>
<A NAME="indexterm-649"></A><A NAME="indexterm-650"></A><IMG src="figures/VLAN-config-switch.gif" class="figure" alt="The surrounding context describes the figure's content." title="The surrounding context describes the figure's content."><p>In this figure, the primary network interfaces of three hosts connect
into Switch 1. Host A is a member of the Blue VLAN. Therefore, Host A's interface
is configured with the VID 123. This interface connects to Port 1 on Switch
1, which is then configured with the VID 123. Host B is a member of the Yellow
VLAN, with the VID 456. Host B's interface connects to Port 5 on Switch 1,
which is configured with the VID 456, and so on.</p>
<p><A NAME="indexterm-651"></A><A NAME="indexterm-652"></A>During VLAN configuration, you have to specify the <b>physical
point of attachment</b>, or <b>PPA</b>, of the VLAN.
You obtain the PPA value by using this formula:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>driver-name</i> + VID * 1000 + <i>device-instance</i></pre>
</td></table><br><p>Note that the <i>device-instance</i> number must
be less than 1000.</p>
<p>For example, you would create the following PPA for a <tt>ce1</tt> interface
to be configured as part of VLAN 456:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>ce + 456 * 1000 + 1= ce456001</pre>
</td></table><br>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p26.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p28.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

