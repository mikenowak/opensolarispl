<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p71.html#chapter3-20">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p71.html#chapter3-21">Configuring and Unconfiguring a DHCP Server Using DHCP Manager</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p71.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p73.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="dhcp-config-11"></A><h3>Unconfiguring DHCP Servers and BOOTP Relay Agents</h3>
<p><A NAME="indexterm-1402"></A>When you unconfigure a DHCP server or a BOOTP relay agent, DHCP Manager
takes the following actions:</p><ul><li><p>Stops the DHCP daemon (<tt>in.dhpcd</tt>) process</p>
</li>
<li><p>Removes the <tt>/etc/inet/dhcpsvc.conf</tt> file, which
records information about daemon startup and the data store location</p>
</li>
</ul>
<p>The following figure shows the screen that is displayed when you choose to unconfigure
a DHCP server.</p>
<A NAME="dhcp-config-fig-83"></A><p><b>Figure 14-4 </b>Unconfigure Service Dialog Box in DHCP Manager</p>
<IMG src="figures/dhcp-unconfig.gif" class="figure" alt="Dialog box shows choices for removing DHCP data. Shows OK, Cancel,
and Help buttons." title="Dialog box shows choices for removing DHCP data. Shows OK, Cancel,
and Help buttons."><A NAME="dhcp-config-11-1115"></A><h3>DHCP Data on an Unconfigured Server</h3>
<p><A NAME="indexterm-1403"></A><A NAME="indexterm-1404"></A>When
you unconfigure a DHCP server, you must decide what to do with the <tt>dhcptab</tt> table and the DHCP network tables. If the data is shared among servers,
you should not remove the <tt>dhcptab</tt> and DHCP network tables. If
the tables are removed, DHCP would become unusable across your network. Data can be
shared through NIS+ or on exported local file systems. The file <tt>/etc/inet/dhcpsvc.conf</tt> records the data store used and its location.</p>
<p>You can unconfigure a DHCP server but leave the data intact by not selecting
any of the options to remove data. If you unconfigure the server and leave the data
intact, you disable the DHCP server.</p>
<p>If you want another DHCP server to take ownership of the IP addresses, you must
move the DHCP data to the other DHCP server. You must move the data before you unconfigure
the current server. See <A HREF="p88.html#dhcp-admin-mv1211">Moving Configuration Data Between DHCP Servers (Task Map)</A> for more information.</p>
<p>If you are certain you want to remove the data, you can select an option to
remove the <tt>dhcptab</tt> and network tables. If you had generated client
names for the DHCP addresses, you can also elect to remove those entries from the
hosts table.  Client name entries can be removed from DNS, <tt>/etc/inet/hosts</tt>, or NIS+.</p>
<p>Before you unconfigure a BOOTP relay agent, be sure that no clients rely on
this agent to forward requests to a DHCP server.</p>
<A NAME="dhcp-config-98"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Unconfigure a DHCP Server or a BOOTP Relay
Agent (DHCP Manager)</h3>
<A NAME="indexterm-1405"></A><ol><A NAME="dhcp-config-step-29"></A><li><p><b>Become superuser.</b></p></li>
<A NAME="dhcp-config-step-71"></A><li><p><b>Start DHCP Manager.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>#<tt><b>/usr/sadm/admin/bin/dhcpmgr &amp;</b></tt></pre>
</td></table><br></li>
<A NAME="dhcp-config-step-30"></A><li><p><b>From the Service menu, choose Unconfigure.</b></p><p>The Unconfigure Service dialog box is displayed. If the server is a BOOTP relay
agent, the dialog box enables you to confirm your intention to unconfigure the relay
agent. If the server is a DHCP server, you must decide what to do with the DHCP data
and make selections in the dialog box. See <A HREF="p72.html#dhcp-config-fig-83">Figure 14-4</A>.</p>
</li>
<A NAME="dhcp-config-step-10"></A><li><p>(Optional) <b>Select options to remove
data.</b></p><p>If the server uses shared data through NIS+ or in files shared through
NFS, do not select any options to remove the data. If the server does not use shared
data, select one option or both options to remove the data.</p>
<p>See <A HREF="p72.html#dhcp-config-11-1115">DHCP Data on an Unconfigured Server</A> for more
information about removing data.</p>
</li>
<A NAME="dhcp-config-step-12"></A><li><p><b>Click OK to unconfigure the server.</b></p><p>The Unconfigure Service dialog box and DHCP Manager are closed.</p>
</li>
</ol><A NAME="dhcp-config-13"></A><h2>Configuring and Unconfiguring a DHCP Server Using <tt>dhcpconfig</tt> Commands</h2>
<p>This section includes procedures to help you configure and unconfigure a DHCP
server or a BOOTP relay agent by using <tt>dhcpconfig</tt> with command-line
options.</p>
<A NAME="dhcp-config-14"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Configure a DHCP Server (<tt>dhcpconfig
-D</tt>)</h3>
<A NAME="indexterm-1406"></A><h5>Before You Begin</h5><p>Make sure that you have read <A HREF="p68.html#chap2-26">Chapter&nbsp;13, Planning for DHCP Service (Tasks)</A> before you configure your DHCP server. In particular,
you should use the guidelines in <A HREF="p69.html#chapter2-29">Making Decisions for Your DHCP Server Configuration (Task Map)</A> to help you perform the following
tasks:</p><ul><li><p>Select the system that you want to use as a DHCP server.</p>
</li>
<li><p>Make decisions about your data store, lease policy, and router information.</p>
</li>
</ul>
<ol><li><p><b>Log in to the system on which you want to configure the DHCP server.</b></p></li>
<li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-config-step-19"></A><li><p><b>Configure the DHCP server by typing a command
of the following format:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>#<tt><b>/usr/sbin/dhcpconfig -D -r </tt><i>datastore<tt></i> -p </tt><i>location<tt></i></b></tt></pre>
</td></table><br><p><i>datastore</i> is one of the following: <tt>SUNWfiles</tt>, <tt>SUNWbinfiles</tt>, or <tt>SUNWnisplus</tt>.</p>
<p><i>location</i> is the data-store-dependent location where
you want to store the DHCP data. For <tt>SUNWfiles</tt> and <tt>SUNWbinfiles</tt>, the location must be an absolute path name. For <tt>SUNWnisplus</tt>,
the location must be a fully specified NIS+ directory.</p>
<p>For example, you
might type a command similar to the following:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>dhcpconfig -D -r SUNWbinfiles -p /var/dhcp</pre>
</td></table><br><p>The <tt>dhcpconfig</tt> utility uses the host's system files and network
files to determine values used to configure the DHCP server. See the <tt>dhcpconfig</tt>(1M) man page for information about additional
options to the <tt>dhcpconfig</tt> command that enable you to override the
default values.</p>
</li>
<A NAME="dhcp-config-step-20"></A><li><p><b>Add one or more networks to the DHCP service.</b></p><p>See <A HREF="p78.html#dhcp-admin-127-1115">How to Add a DHCP Network (<tt>dhcpconfig</tt>)</A> for the procedure to add a network.</p>
</li>
</ol><A NAME="dhcp-config-21"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Configure a BOOTP Relay Agent (<tt>dhcpconfig
-R</tt> )</h3>
<A NAME="indexterm-1407"></A><h5>Before You Begin</h5><p>Select the system that you want to use as a BOOTP relay agent, using the requirements
listed in <A HREF="p69.html#chapter2-38">Selecting a Host to Run the DHCP Service</A>.</p>
<ol><A NAME="dhcp-config-step-23-1115"></A><li><p><b>Log in to the server that you want to configure
as a BOOTP relay agent.</b></p></li>
<li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-config-step-25"></A><li><p><b>Configure the BOOTP relay agent by typing a command
of the following format:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/dhcpconfig -R </tt><i>server-addresses<tt></i></b></tt></pre>
</td></table><br><p>Specify one or more IP addresses of DHCP servers to which you want requests
to be forwarded. If you specify more than one address, separate the addresses with
commas.</p>
<p>For example, you might type a command similar to the following:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>/usr/sbin/dhcpconfig -R 192.168.1.18,192.168.42.132</pre>
</td></table><br></li>
</ol><A NAME="dhcp-config-34"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Unconfigure a DHCP Server or a BOOTP Relay
Agent (<tt>dhcpconfig -U</tt>)</h3>
<ol><li><p><b>Log in to the DHCP server or the BOOTP relay agent system that you want
to unconfigure.</b></p></li>
<li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-config-step-37"></A><li><p><b>Unconfigure the DHCP server or the BOOTP relay
agent:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/dhcpconfig -U</b></tt></pre>
</td></table><br><p>If the server does not use shared data, you can also use the <tt>-x</tt> option
to remove the <tt>dhcptab</tt> and network tables. If the server uses shared
data, do not use the <tt>-x</tt> option. The <tt>-h</tt> option can
be used to remove host names from the host table. See the <tt>dhcpconfig</tt>(1M) man page for more information about <tt>dhcpconfig</tt> options.</p>
<p>See <A HREF="p72.html#dhcp-config-11-1115">DHCP Data on an Unconfigured Server</A> for more information about removing data.</p>
</li>
</ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p71.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p73.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

