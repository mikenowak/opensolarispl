<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE appendix PUBLIC "-//OASIS//DTD DocBook XML//EN" "docbook.dtd"[
	<!ENTITY % xinclude SYSTEM "xinclude.mod">
	%xinclude;
]>

<appendix xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="troubleshooting-9">



<title>Troubleshooting (Tasks)</title>
<toc>
<para>This chapter contains a list of specific error messages and general
problems you might encounter when installing Solaris Express software.
The chapter also explains how to fix the problems. Start by using this list
of sections to determine where in the installation process the problem occurred.</para>
<itemizedlist>
<listitem>
<para>
<olink remap="internal" targetdoc="appendix-1.xml" targetptr="troubleshooting-40341">Problems With Setting
Up Network Installations</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="appendix-1.xml" targetptr="troubleshooting-32526">Problems With Booting
a System</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="appendix-1.xml" targetptr="troubleshooting-15934">Initial Installation
of the Solaris OS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="appendix-1.xml" targetptr="troubleshooting-16510">Upgrading the Solaris
OS</olink>
</para>
</listitem>
</itemizedlist>
<note>

<para>When you see the phrase “bootable media,” this means
the Solaris installation program and JumpStart installation method.</para>
</note>
</toc>
<sect1 xml:id="troubleshooting-40341">
<title>Problems With Setting Up Network
Installations</title>
<msgset>
<simplemsgentry>
<msgtext>
<para>Unknown client “<replaceable>host_name</replaceable>”</para>
</msgtext>
<msgexplan role="cause">

<para>The <replaceable>host_name</replaceable> argument
in the <literal>add_install_client</literal> command is not a host in the
naming service.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<indexterm xml:id="troubleshooting-ix1011">
<primary>Unknown client error message</primary>
</indexterm>Add the host <replaceable>host_name</replaceable> to the naming
service and execute the <literal>add_install_client</literal> command again.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Error: &lt;system name&gt; does not exist
in the NIS ethers map</para>
<para>Add it, and rerun the add_install_client command</para>
</msgtext>
<msgexplan role="description">

<para>When you run the <command>add_install_client</command> command,
the command fails with the above error.</para>
</msgexplan>
<msgexplan role="cause">

<para>The client you are adding to the install server
does not exist in the server's <filename>/etc/ethers</filename> file.</para>
</msgexplan>
<msgexplan role="solution">

<para>Add the needed information to the <filename>/etc/ethers</filename> file on the install server and run the <command>add_install_client</command> command
again.</para>
<orderedlist>
<listitem>
<para>Become superuser or assume an equivalent role.</para>
</listitem>
<listitem>
<para>On the client, find the ethers address.</para>
<screen># <userinput>ifconfig -a grep ethers</userinput>
ether 8:0:20:b3:39:1d</screen>
</listitem>
<listitem>
<para>On the install server, open the <filename>/etc/ethers</filename> file
in an editor. Add the address to the list.</para>
</listitem>
<listitem>
<para>On the client, run <command>add_install_client</command> again
as in this example.</para>
<screen># <userinput>./add_install_client bluegill sun4u</userinput>
</screen>
</listitem>
</orderedlist>
</msgexplan>
</simplemsgentry>
</msgset>
</sect1>
<sect1 xml:id="troubleshooting-32526">
<title>Problems With Booting a System</title>
<sect2 xml:id="troubleshooting-7">
<title>Booting From Media, Error Messages</title>
<msgset>
<simplemsgentry>
<msgtext>
<para>le0: No carrier - transceiver cable
problem<indexterm xml:id="troubleshooting-ix1012">
<primary>le0: No carrier - transceiver cable problem message</primary>
</indexterm>
<indexterm xml:id="troubleshooting-ix1013">
<primary>No carrier - transceiver cable problem message</primary>
</indexterm>
<indexterm xml:id="troubleshooting-ix1014">
<primary>transceiver cable problem message</primary>
</indexterm>
<indexterm xml:id="troubleshooting-ix1017">
<primary>boot: cannot open /kernel/unix message</primary>
</indexterm>
<indexterm xml:id="indexterm-322">
<primary>Can't boot from file/device message</primary>
</indexterm>
<indexterm xml:id="troubleshooting-ix1023">
<primary>clock gained xxx days message</primary>
</indexterm>
<indexterm xml:id="troubleshooting-ix1024">
<primary>WARNING: clock gained xxx days message</primary>
</indexterm>
<indexterm xml:id="troubleshooting-ix1025">
<primary>Not a UFS filesystem message</primary>
</indexterm>
</para>
</msgtext>
<msgexplan role="cause">

<para>The system is not connected to the network.</para>
</msgexplan>
<msgexplan role="solution">

<para>If this is a nonnetworked system, ignore
this message. If this is a networked system, ensure that the Ethernet cabling
is attached securely.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>The file just loaded does not appear
to be executable</para>
</msgtext>
<msgexplan role="cause">

<para>The system cannot find the proper media for
booting.</para>
</msgexplan>
<msgexplan role="solution">

<para>Verify that the system has been set up properly
to install the Solaris Express software from the network from an
install server. The following are examples of checks you can make.</para>
<itemizedlist>
<listitem>
<para>If you copied the images of the Solaris Operating System DVD or the Solaris Software CDs
to the install server, ensure that you specified the correct platform group
for the system when you set it up. </para>
</listitem>
<listitem>
<para>If you are using DVD or CD media, ensure that the Solaris Operating System DVD or Solaris Software - 1 CD
is mounted and accessible on the install server.</para>
</listitem>
</itemizedlist>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>boot: cannot open &lt;<emphasis>filename</emphasis>&gt;
(<emphasis>SPARC based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>This error occurs when you override the location
of the <filename>boot</filename> <option>
file</option> by explicitly setting
it.</para>
<note>

<para>
<emphasis>filename</emphasis> is a variable for the name of the
file affected.</para>
</note>
</msgexplan>
<msgexplan role="solution">

<para>Follow these instructions:</para>
<itemizedlist>
<listitem>
<para>Reset the <filename>boot</filename> <option>
file</option> in
the PROM to  “ “ (blank).</para>
</listitem>
<listitem>
<para>Ensure that the diag-switch is set to off and to true.</para>
</listitem>
</itemizedlist>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Can't boot from file/device </para>
</msgtext>
<msgexplan role="cause">

<para>The installation media cannot find the bootable
media.</para>
</msgexplan>
<msgexplan role="solution">

<para>Ensure that the following conditions are
met:</para>
<itemizedlist>
<listitem>
<para>The DVD-ROM or CD-ROM drive is installed properly and turned
on.</para>
</listitem>
<listitem>
<para>Solaris Operating System DVD or the Solaris Software - 1 CD is inserted into
the drive.</para>
</listitem>
<listitem>
<para>The disc is free of damage or dirt.</para>
</listitem>
</itemizedlist>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>WARNING: clock gained <replaceable>xxx</replaceable> days
-- CHECK AND RESET DATE! (<emphasis>SPARC based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="description">

<para>This is an informational message.</para>
</msgexplan>
<msgexplan role="solution">

<para>Ignore the message and continue with the
installation.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Not a UFS file system (<emphasis>x86
based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>When Solaris Express software was installed
(either through the Solaris installation program or custom JumpStart), no
boot disk was selected. You now must edit the BIOS to boot the system.</para>
</msgexplan>
<msgexplan role="solution">

<para>Select the BIOS to boot. See your BIOS documentation
for instructions.</para>
</msgexplan>
</simplemsgentry>
</msgset>
</sect2>
<sect2 xml:id="troubleshooting-23">
<title>Booting From Media, General Problems</title>
<msgset>
<simplemsgentry>
<msgtext>
<para>The system does not boot.</para>
</msgtext>
<msgexplan role="description">

<para>When initially setting up a custom JumpStart
server, you might encounter  boot problems that do not return an error message.
 To verify information about the system and how the system is booting, run
the boot command with the <option>
v</option> option.  When you use the <option>
v</option> option,
the boot command  displays verbose debugging information about the screen.</para>
<note>

<para>If this flag is not given, the messages are still printed, but
the output is directed to the system log file. For more information, see <olink remap="external" targetdoc="819-2240" targetptr="syslogd-1m">
<citerefentry>
<refentrytitle>syslogd</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
</note>
</msgexplan>
<msgexplan role="solution">

<para>For SPARC based systems, at the <literal>ok</literal> prompt,
type the following command.</para>
<screen>
<userinput>ok boot net -v - install</userinput>
</screen>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Boot from DVD media fails on systems
with Toshiba SD-M 1401 DVD-ROM</para>
</msgtext>
<msgexplan role="description">

<para>If your system has a Toshiba SD-M1401
DVD-ROM with firmware revision 1007, the system cannot boot from the Solaris Operating System DVD.</para>
</msgexplan>
<msgexplan role="solution">

<para>Apply patch 111649–03, or later version,
to update the Toshiba SD-M1401 DVD-ROM drive's firmware. The patch 111649–03
is available at <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="text" xlink:href="http://sunsolve.sun.com">sunsolve.sun.com</link>.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>The system hangs or panics when nonmemory
PC cards are inserted. (<emphasis>x86 based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>Nonmemory PC cards cannot use the same memory
resources that are used by other devices.</para>
</msgexplan>
<msgexplan role="solution">

<para>To correct this problem, see the instructions
for your PC card and check for the address range.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>The system hangs before displaying
the system prompt. (<emphasis>x86 based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="solution">

<para>You have hardware that is not supported.
Check your hardware manufacturer's documentation.</para>
</msgexplan>
</simplemsgentry>
</msgset>
</sect2>
<sect2 xml:id="troubleshooting-2">
<title>Booting From the Network, Error Messages</title>
<msgset>
<simplemsgentry>
<msgtext>
<para>WARNING: getfile: RPC failed: error
5 (RPC Timed out).</para>
</msgtext>
<msgexplan role="description">

<para>This error occurs when you have two or
more servers on a network responding to an install client's boot request.
The install client connects to the wrong boot server, and the installation
hangs. The following specific reasons might cause this error to occur:</para>
</msgexplan>
<msgexplan role="cause">

<para>
<emphasis>Reason 1:</emphasis>
<filename>/etc/bootparams</filename> files might exist on different servers with an entry for this
install client.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 1:</emphasis> Ensure that
servers on the network do not have multiple <literal>/etc/bootparams</literal> entries
for the install client. If they do have multiple entries, remove duplicate
client entries in the <literal>/etc/bootparams</literal> file on all install
servers and boot servers except the one you want the install client to use.</para>
</msgexplan>
<msgexplan role="cause">

<para>
<emphasis>Reason 2:</emphasis> Multiple <filename>/tftpboot</filename> or <filename>/rplboot</filename> directory entries might exist
for this install client.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 2:</emphasis> Ensure that
servers on the network do not have multiple <literal>/tftpboot</literal> or <literal>/rplboot</literal> directory entries for the install client. If they do have
multiple entries, remove duplicate client entries from the <literal>/tftpboot</literal> or <literal>/rplboot</literal> directories on all install servers and boot servers except
the one you want the install client to use.</para>
</msgexplan>
<msgexplan role="cause">

<para>
<emphasis>Reason 3:</emphasis> An install client
entry might exist in the <filename>/etc/bootparams</filename> file on a server
and an entry in another <filename>/etc/bootparams</filename> file that enables
all systems to access the profile server. Such an entry resembles the following:</para>
<programlisting>
<literal>* install_config=</literal>
<replaceable>profile_server</replaceable>
<literal>:</literal>
<replaceable>path</replaceable>
</programlisting>
<para>A line that resembles the previous entry in the NIS or NIS+ <literal>bootparams</literal> table can also cause this error.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 3:</emphasis> If a wildcard
entry is in the naming service <literal>bootparams</literal> map or table
(for example, <literal>* install_config=</literal>), delete it and add it
to the <literal>/etc/bootparams</literal> file on the boot server. </para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>No network boot server. Unable to install
the system.  See installation instructions. (<emphasis>SPARC based systems
only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>This error occurs on a system that you are attempting
to install from the network. The system is not set up correctly.</para>
</msgexplan>
<msgexplan role="solution">

<para>Ensure that you correctly set up the system
to install from the network. See <olink remap="external" targetdoc="819-2394" targetptr="netinstall-40778">
<citetitle remap="section">Adding Systems to Be Installed From the Network With a CD Image</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Network-Based Installations</citetitle>
</olink>.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>prom_panic: Could not mount file system
(<emphasis>SPARC based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>This error occurs when you are installing Solaris
from a network, but the boot software cannot locate the following:</para>
<itemizedlist>
<listitem>
<para>Solaris Operating System DVD, either the DVD or a copy of the DVD image on
the install server</para>
</listitem>
<listitem>
<para>Solaris Software - 1 CD image, either the Solaris Software - 1 CD
or a copy of the CD image on the install server</para>
</listitem>
</itemizedlist>
</msgexplan>
<msgexplan role="solution">

<para>Ensure that the installation software is
mounted and shared. </para>
<itemizedlist>
<listitem>
<para>If you are installing Solaris from the install server's DVD-ROM
or CD-ROM drive, ensure that the Solaris Operating System DVD or Solaris Software - 1 CD is
inserted in the CD-ROM drive, is mounted, and is shared in the <literal>/etc/dfs/dfstab</literal> file.</para>
</listitem>
<listitem>
<para>If installing from a copy of the Solaris Operating System DVD image or Solaris Software - 1 CD
image on the install server's disk, ensure that the directory path to the
copy is shared in the <literal>/etc/dfs/dfstab</literal> file.</para>
</listitem>
</itemizedlist>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Timeout waiting for ARP/RARP packet...(<emphasis>SPARC based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>
<emphasis>Reason 1:</emphasis> The client is
trying to boot from the network, but it cannot find a system that knows about
the client.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 1:</emphasis> Verify the
system's host name is in the NIS or NIS+ naming service. Also, verify the <literal>bootparams</literal> search order in the boot server's <literal>/etc/nsswitch.conf</literal> file. </para>
<para>For example, the following line in the <literal>/etc/nsswitch.conf</literal> file indicates that JumpStart or the Solaris installation program
first looks in the NIS maps for <literal>bootparams</literal> information.
If the program does not find any information, the installer looks in the boot
server's <literal>/etc/bootparams</literal> file.</para>
<programlisting>bootparams: nis files</programlisting>
</msgexplan>
<msgexplan role="cause">

<para>
<emphasis>Reason 2:</emphasis> The client's
Ethernet address is not correct.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 2:</emphasis> Verify that
the client's Ethernet address in the install server's <filename>/etc/ethers</filename> file
is correct.</para>
</msgexplan>
<msgexplan role="cause">

<para>
<emphasis>Reason 3:</emphasis> In a custom JumpStart
installation, the <command>add_install_client</command> command specifies
the platform group that uses a specified server as an install server. If the
wrong architecture value is used when using the <command>add_install_client</command>,
this problem occurs. For example, the machine you want to install is a sun4u,
but you used i86pc instead.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 3:</emphasis> Rerun <command>add_install_client</command> with the correct architecture value.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>ip: joining multicasts failed on tr0
- will use link layer broadcasts for multicast (<emphasis>x86 based systems
only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>
<indexterm xml:id="troubleshooting-ix1043">
<primary>token ring card, booting error with</primary>
</indexterm>This error message is displayed when you boot a system with a
token ring card. Ethernet multicast and token ring multicast do not work the
same way. The driver returns this error message because an invalid multicast
address was provided to it. </para>
</msgexplan>
<msgexplan role="solution">

<para>Ignore this error message. If multicast does
not work, IP uses layer broadcasts instead and does not cause the installation
to fail.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Requesting Internet address for <replaceable>Ethernet_Address</replaceable> (<emphasis>x86 based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>The client is trying to boot from the network,
but it cannot find a system that knows about the client. </para>
</msgexplan>
<msgexplan role="solution">

<para>Verify the system's host name is listed in
the naming service. If the system's host naming is listed in the NIS or NIS+
naming service, and the system continues to print this error message, try
rebooting.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>RPC: Timed out No bootparams (whoami)
server responding; still trying... (<emphasis>x86 based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>The client is trying to boot from the network,
but it cannot find a system with an entry in the <literal>/etc/bootparams</literal> file
on the install server.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<indexterm xml:id="troubleshooting-ix1048">
<primary>RPC Timed out message</primary>
</indexterm>
<indexterm xml:id="troubleshooting-ix1049">
<primary>timed out RPC error</primary>
</indexterm>Use <literal>add_install_client</literal> on the install server.
Using this command adds the proper entry in the <literal>/etc/bootparams</literal> file,
enabling the client to boot from the network.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Still trying to find a RPL server...
(<emphasis>x86 based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>The system is trying to boot from the network,
but the server is not set up to boot this system.</para>
</msgexplan>
<msgexplan role="solution">

<para>On the install server, execute <literal>add_install_client</literal> for the system to be installed. The <literal>add_install_client</literal> command
sets up an <literal>/rplboot</literal> directory, which contains the necessary
network boot program.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>
<indexterm xml:id="indexterm-323">
<primary>troubleshooting</primary>
<secondary>booting from network with DHCP</secondary>
</indexterm>
<indexterm xml:id="indexterm-324">
<primary>troubleshooting</primary>
<secondary>general installation problems</secondary>
<tertiary>booting from the network with DHCP</tertiary>
</indexterm>
<indexterm xml:id="indexterm-325">
<primary>CLIENT MAC ADDR error message</primary>
</indexterm>CLIENT MAC ADDR: FF FF FF FF FF FF (<emphasis>network installations
with DHCP only</emphasis>) </para>
</msgtext>
<msgexplan role="cause">

<para>The DHCP server is not configured correctly.
This error might occur if the options or macros are not correctly defined
in the DHCP Manager software.</para>
</msgexplan>
<msgexplan role="solution">

<para>In the DHCP Manager software, verify that
the options and macros are correctly defined. Confirm that the Router option
is defined, and that the value of the Router option is correct for the subnet
you are using for the network installation.</para>
</msgexplan>
</simplemsgentry>
</msgset>
</sect2>
<sect2 xml:id="troubleshooting-24">
<title>Booting From the Network, General Problems</title>
<msgset>
<simplemsgentry>
<msgtext>
<para>
<indexterm xml:id="troubleshooting-ix1051">
<primary>troubleshooting</primary>
<secondary>booting from wrong server</secondary>
</indexterm>
<indexterm xml:id="troubleshooting-ix1052">
<primary>troubleshooting</primary>
<secondary>general installation problems</secondary>
<tertiary>booting the system</tertiary>
</indexterm>The system boots from the network, but from a system other than
the specified install server.  </para>
</msgtext>
<msgexplan role="cause">

<para>An <filename>/etc/bootparams</filename> and
perhaps an <filename>/etc/ethers</filename> entry exist on another system
for the client.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<indexterm xml:id="troubleshooting-ix1053">
<primary>bootparams file</primary>
<secondary>updating</secondary>
</indexterm>
<indexterm xml:id="indexterm-326">
<primary>
<filename>/etc/bootparams</filename> file</primary>
<secondary>enabling JumpStart directory access</secondary>
</indexterm>On the name server, update the <literal>/etc/bootparams</literal> entry
for the system that is being installed. The entry should conform to the following
syntax:</para>
<programlisting>
<replaceable>install_system</replaceable> root=<replaceable>boot_server</replaceable>:<replaceable>path</replaceable> install=<replaceable>install_server</replaceable>:<replaceable>path</replaceable>
</programlisting>
<para>Also, ensure that only one <literal>bootparams</literal> entry is on
the subnet for the install client. </para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>The system does not boot from the network
(<emphasis>network installations with DHCP only</emphasis>).</para>
</msgtext>
<msgexplan role="cause">

<para>The DHCP server is not configured correctly.
This error might occur if the system is not configured as an installation
client on the DHCP server.</para>
</msgexplan>
<msgexplan role="solution">

<para>In the DHCP manager software, verify that
installation options and macros are defined for the client system. For more
information, see <olink remap="external" targetdoc="819-2394" targetptr="dhcp-admin-38">
<citetitle remap="section">Preconfiguring System Configuration Information With the DHCP Service (Tasks)</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Network-Based Installations</citetitle>
</olink>.</para>
</msgexplan>
</simplemsgentry>
</msgset>
</sect2>
</sect1>
<sect1 xml:id="troubleshooting-15934">
<title>Initial Installation of the Solaris
OS</title>
<msgset>
<simplemsgentry>
<msgtext>
<para>Initial installation fails</para>
</msgtext>
<msgexplan role="solution">

<para>If the Solaris installation fails, you must
restart the installation. To restart the installation, boot the system from
the Solaris Operating System DVD, the Solaris Software - 1 CD, or from  the network.</para>
<para>You cannot uninstall the Solaris software after the software has been
partially installed. You must restore your system from a backup or begin the
Solaris installation process again.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>/cdrom/cdrom0/SUNW<replaceable>xxxx</replaceable>/reloc.cpio:
Broken pipe</para>
</msgtext>
<msgexplan role="description">

<para>This error message is informational and
does not affect the installation. The condition occurs when a write on a pipe
does not have a reading process. </para>
</msgexplan>
<msgexplan role="solution">

<para>Ignore the message and continue with the
installation.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>WARNING: CHANGE DEFAULT BOOT DEVICE <emphasis>(x86 based systems only)</emphasis>
</para>
</msgtext>
<msgexplan role="cause">

<para>This is an informational message. The default
boot device set in the system's BIOS might be set to a device that requires
you to use the Solaris Device Configuration Assistant to boot the system.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<indexterm xml:id="indexterm-327">
<primary>CHANGE DEFAULT BOOT DEVICE message</primary>
</indexterm>
<indexterm xml:id="indexterm-328">
<primary>WARNING: CHANGE DEFAULT BOOT DEVICE</primary>
</indexterm>Continue with the installation and, if necessary, change the system's
default boot device specified in the BIOS after you install the Solaris software
to a device that does not require the Solaris Device Configuration Assistant.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<note arch="x86">

<para>If you are using the <literal>locale</literal> keyword
to test a custom JumpStart profile for an initial installation, the <command>pfinstall</command> <option>
D</option> command fails to test the profile. For a workaround,
see the error message “could not select locale,” in the section, <olink remap="internal" targetdoc="appendix-1.xml" targetptr="troubleshooting-16510">Upgrading the Solaris OS</olink>.</para>
</note>
<sect2>
<title/>
<task arch="x86" id="troubleshooting-3">

<title>
To Check IDE Disk for Bad Blocks</title>
<tasksummary>
<para>IDE disk drives do not automatically map out bad blocks like other drives
supported by Solaris software. Before installing Solaris on an IDE disk, you
might want to perform a surface analysis on the disk. To perform surface analysis
on an IDE disk, follow this procedure.     </para>
</tasksummary>
<procedure>
<step>
<para>Become superuser or assume
an equivalent role.</para>
<para>Roles contain authorizations and privileged
commands. For more information about roles, see <olink remap="external" targetdoc="819-3321" targetptr="rbactask-15">
<citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle>
</olink>.</para>
</step>
<step>
<para>Boot to the installation media.</para>
</step>
<step>
<para>When you are prompted to select an installation type, select option
6, Single user shell.</para>
</step>
<step xml:id="troubleshooting-step-5">
<para>Start the <olink remap="external" targetdoc="819-2240" targetptr="format-1m">
<citerefentry>
<refentrytitle>format</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> program.</para>
<screen># <userinput>format</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-6">
<para>Specify the IDE disk drive on which
you want to perform a surface analysis.</para>
<screen># <userinput>c<replaceable>x</replaceable>d<replaceable>y</replaceable>
</userinput>
</screen>
<variablelist>
<varlistentry>
<term>c<replaceable>x</replaceable>
</term>
<listitem>
<para>Is the controller number</para>
</listitem>
</varlistentry>
<varlistentry>
<term>d<replaceable>y</replaceable>
</term>
<listitem>
<para>Is the device number</para>
</listitem>
</varlistentry>
</variablelist>
</step>
<step xml:id="troubleshooting-step-7">
<para>Determine if you have an <literal>fdisk</literal> partition.</para>
<itemizedlist>
<listitem>
<para>If a Solaris <literal>fdisk</literal> partition already exists,
proceed to <olink remap="internal" targetdoc="appendix-1.xml" targetptr="troubleshooting-step-8">Step 7</olink>.</para>
</listitem>
<listitem>
<para>If a Solaris <literal>fdisk</literal> partition does not exist,
use the <command>fdisk</command> command to create a Solaris partition on
the disk. </para>
<screen>format&gt; <userinput>fdisk</userinput>
</screen>
</listitem>
</itemizedlist>
</step>
<step xml:id="troubleshooting-step-8">
<para>To begin the surface analysis, type:</para>
<screen>format&gt; <userinput>analyze</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-9">
<para>Determine the current settings, type: </para>
<screen>analyze&gt; <userinput>config</userinput>
</screen>
</step>
<step>
<para>(Optional) To change settings, type:</para>
<screen>analyze&gt; <userinput>setup</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-10">
<para>To find bad blocks, type: </para>
<screen>analyze&gt; <replaceable>type_of_surface_analysis</replaceable>
</screen>
<variablelist>
<varlistentry>
<term>
<replaceable>type_of_surface_analysis</replaceable>
</term>
<listitem>
<para>Is read, write, or compare</para>
</listitem>
</varlistentry>
</variablelist>
<para>If <literal>format</literal> finds bad blocks, it remaps them.</para>
</step>
<step xml:id="troubleshooting-step-11">
<para>To exit the analysis, type:</para>
<screen>analyze&gt; <userinput>quit</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-12">
<para>Determine if you want to specify
blocks to remap.</para>
<itemizedlist>
<listitem>
<para>If no, go to <olink remap="internal" targetdoc="appendix-1.xml" targetptr="troubleshooting-step-13">Step 13</olink>. </para>
</listitem>
<listitem>
<para>If yes, type:</para>
<screen>format&gt; <userinput>repair</userinput>
</screen>
</listitem>
</itemizedlist>
</step>
<step xml:id="troubleshooting-step-13">
<para>To exit the format program, type:</para>
<screen>
<userinput>quit</userinput>
</screen>
</step>
<step>
<para>Restart the media in multiuser mode by typing the following command.</para>
<screen># <userinput>exit</userinput>
</screen>
</step>
</procedure>
</task>
</sect2>
</sect1>
<sect1 xml:id="troubleshooting-16510">
<title>Upgrading the Solaris OS</title>
<sect2 xml:id="troubleshooting-15">
<title>Upgrading, Error Messages</title>
<msgset>
<simplemsgentry>
<msgtext>
<para>No upgradable disks</para>
</msgtext>
<msgexplan role="cause">

<para>A swap entry in the <filename>/etc/vfstab</filename> file
is causing the upgrade to fail.</para>
</msgexplan>
<msgexplan role="solution">

<para>Comment out the following lines in the <filename>/etc/vfstab</filename> file:</para>
<itemizedlist>
<listitem>
<para>All swap files and slices on disks not being upgraded</para>
</listitem>
<listitem>
<para>Swap files that are no longer present</para>
</listitem>
<listitem>
<para>Any unused swap slices</para>
</listitem>
</itemizedlist>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>usr/bin/bzcat not found</para>
</msgtext>
<msgexplan role="cause">

<para>Solaris Live Upgrade fails because of needing
a patch cluster.</para>
</msgexplan>
<msgexplan role="solution">

<para>A patch is needed to install Solaris Live
Upgrade. Ensure that you have the most recently updated patch list by consulting <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="text" xlink:href="http://sunsolve.sun.com">http://sunsolve.sun.com</link>.
Search for the info doc 72099 on the SunSolve web site.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Upgradeable Solaris root devices were
found, however, no suitable partitions to hold the Solaris install software
were found. Upgrading using the Solaris Installer is not possible. It might
be possible to upgrade using the Solaris Software 1 CDROM. (x86 based systems
only)</para>
</msgtext>
<msgexplan role="cause">

<para>You cannot upgrade with the Solaris Software - 1 CD
because you do not have enough space.</para>
</msgexplan>
<msgexplan role="solution">

<para>To upgrade, you can either create a swap
slice that is larger than or equal to 512 Mbytes or use another method of
upgrading such as the Solaris installation program   from Solaris Operating System DVD, a net installation image,
or JumpStart.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>ERROR: Could not select locale (<emphasis>x86 based systems only</emphasis>)</para>
</msgtext>
<msgexplan role="cause">

<para>When you test your JumpStart profile by using
the <command>pfinstall</command> <option>
D</option> command, the dry run test
fails under the following conditions:</para>
<itemizedlist>
<listitem>
<para>The profile contains the locale keyword.</para>
</listitem>
<listitem>
<para>You're testing a release that contains GRUB   software. <emphasis role="strong">Starting with the Solaris 10 1/06 release</emphasis>, the GRUB
boot loader facilitates booting different operating systems installed on your
system with the GRUB menu. </para>
</listitem>
</itemizedlist>
<para>With the introduction of GRUB software, the miniroot is compressed.
The software can no longer find the list of locales from the compressed miniroot.
The miniroot is the smallest possible Solaris root (<filename>/</filename>)
file system and is found on the Solaris installation media.</para>
</msgexplan>
<msgexplan role="solution">

<para>Perform the following steps. Use the following
values.</para>
<itemizedlist>
<listitem>
<para>
<literal>MEDIA_DIR</literal> is <filename>/cdrom/cdrom0/</filename>
</para>
</listitem>
<listitem>
<para>
<literal>MINIROOT_DIR</literal> is <literal>$MEDIA_DIR</literal>
<filename>/Solaris_10/Tools/Boot</filename>
</para>
</listitem>
<listitem>
<para>
<literal>MINIROOT_ARCHIVE</literal> is <literal>$MEDIA_DIR</literal>
<filename>/boot/x86.miniroot</filename>
</para>
</listitem>
<listitem>
<para>
<literal>TEMP_FILE_NAME</literal> is <filename>/tmp/test</filename>
</para>
</listitem>
</itemizedlist>
<orderedlist>
<listitem>
<para>Become superuser or assume an equivalent role.</para>
<para>Roles
contain authorizations and privileged commands. For more information about
roles, see <olink remap="external" targetdoc="819-3321" targetptr="rbactask-15">
<citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle>
</olink>.</para>
</listitem>
<listitem>
<para>Uncompress the miniroot archive.</para>
<screen># <userinput>/usr/bin/gzcat $MINIROOT_ARCHIVE &gt; $TEMP_FILE_NAME</userinput>
</screen>
</listitem>
<listitem>
<para>Create the miniroot device by using the <command>lofiadm</command> command.</para>
<screen># <userinput>LOFI_DEVICE=/usr/sbin/lofiadm -a $TEMP_FILE_NAME</userinput>
# <userinput>echo $LOFI_DEVICE</userinput>
/dev/lofi/1</screen>
</listitem>
<listitem>
<para>Mount the miniroot with the <command>lofi</command> command
under the Miniroot directory.</para>
<screen># <userinput>/usr/sbin/mount -F ufs  $LOFI_DEVICE  $MINIROOT_DIR</userinput>
</screen>
</listitem>
<listitem>
<para>Test the profile.</para>
<screen># <userinput>/usr/sbin/install.d/pfinstall -D -c $MEDIA_DIR $path-to-jumpstart_profile</userinput>
</screen>
</listitem>
<listitem>
<para>After the testing is completed, unmount the lofi device.</para>
<screen># <userinput>umount  $LOFI_DEVICE</userinput>
</screen>
</listitem>
<listitem>
<para>Delete the <literal>lofi</literal> device.</para>
<screen># <userinput>lofiadm -d $TEMP_FILE_NAME</userinput>
</screen>
</listitem>
</orderedlist>
</msgexplan>
</simplemsgentry>
</msgset>
</sect2>
<sect2 xml:id="troubleshooting-4">
<title>Upgrading, General Problems</title>
<msgset>
<simplemsgentry>
<msgtext>
<para>The upgrade option is not presented
even though there is a version of Solaris software that's  upgradable on the
system.</para>
</msgtext>
<msgexplan role="cause">

<para>
<emphasis>Reason 1:</emphasis> The <literal>/var/sadm</literal> directory is a symlink or it is mounted from another file system.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 1:</emphasis> Move the <literal>/var/sadm</literal> directory into the root (<filename>/</filename>) or <filename>/var</filename> file system.</para>
</msgexplan>
<msgexplan role="cause">

<para>
<emphasis>Reason 2:</emphasis> The <literal>/var/sadm/softinfo/INST_RELEASE</literal> file is missing.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 2:</emphasis> Create a new <literal>INST_RELEASE</literal> file by using the following template:</para>
<programlisting>OS=Solaris
<literal>VERSION=</literal>
<replaceable>x</replaceable>
<literal>
</literal> 
REV=0</programlisting>
<variablelist>
<varlistentry>
<term>
<replaceable>x</replaceable>
</term>
<listitem>
<para>Is the version of Solaris software on the system</para>
</listitem>
</varlistentry>
</variablelist>
</msgexplan>
<msgexplan role="cause">

<para>
<emphasis>Reason 3:</emphasis> SUNWusr is missing
from <filename>/var/sadm/softinfo</filename>.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Solution 3:</emphasis> You need
to do an initial installation. The Solaris software is not upgradable.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Couldn't shut down or initialize the
md driver</para>
</msgtext>
<msgexplan role="solution">

<para>Follow these instructions:</para>
<itemizedlist>
<listitem>
<para>If the file system is not a RAID-1 volume, comment out in
the <filename>vsftab</filename> file.</para>
</listitem>
<listitem>
<para>If the file system is a RAID-1 volume, break the mirror and
reinstall. For information about unmirroring, see <olink remap="external" targetdoc="819-2789" targetptr="tasks-mirrors-26">
<citetitle remap="section">Removing RAID-1 Volumes (Unmirroring)</citetitle> in <citetitle remap="book">Solaris Volume Manager Administration Guide</citetitle>
</olink>.</para>
</listitem>
</itemizedlist>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>The upgrade fails because the Solaris
installation program cannot mount a file system.</para>
</msgtext>
<msgexplan role="cause">

<para>
<indexterm xml:id="troubleshooting-ix1070">
<primary>failed upgrade</primary>
<secondary>rebooting problems</secondary>
</indexterm>
<indexterm xml:id="troubleshooting-ix1071">
<primary>upgrade</primary>
<secondary>failed upgrade</secondary>
</indexterm>During an upgrade, the script attempts to mount all the file systems
that are listed in the system's <filename>/etc/vfstab</filename> file on the
root (<filename>/</filename>) file system that is being upgraded. If the installation
script cannot mount a file system, it fails and exits.  </para>
</msgexplan>
<msgexplan role="solution">

<para>Ensure that all file systems in the system's <filename>/etc/vfstab</filename> file can be mounted. Comment out any file systems in
the <filename>/etc/vfstab</filename> file that cannot be mounted or that might
cause the problem so that the Solaris installation program does not try to
mount them during the upgrade. Any system-based file systems that contain
software to be upgraded (for example, <filename>/usr</filename>) cannot be
commented out.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>The upgrade fails</para>
</msgtext>
<msgexplan role="description">

<para>The system does not have enough space
for the upgrade.</para>
</msgexplan>
<msgexplan role="cause">

<para>Check <olink remap="external" targetdoc="820-0157" targetptr="esimx">
<citetitle remap="section">Upgrading With Disk Space Reallocation</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Planning for Installation and Upgrade</citetitle>
</olink> for the space problem
and see if you can fix it without using auto-layout to reallocate space.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Problems upgrading RAID–1 volume
root (<filename>/</filename>) file systems</para>
</msgtext>
<msgexplan role="solution">

<para>If you have problems upgrading when using
Solaris Volume Manager RAID-1 volumes that are the root (<filename>/</filename>)
file system, see <olink remap="external" targetdoc="819-2789" targetptr="troubleshoottasks-33506">Chapter 25, <citetitle remap="chapter">Troubleshooting Solaris Volume Manager (Tasks),</citetitle> in <citetitle remap="book">Solaris Volume Manager Administration Guide</citetitle>
</olink>.</para>
</msgexplan>
</simplemsgentry>
</msgset>
</sect2>
<sect2>
<title/>
<task id="troubleshooting-47">

<title>To Continue Upgrading After a Failed
Upgrade</title>
<tasksummary>
<para>The upgrade fails and the system cannot be soft-booted. The failure
is for reasons beyond your control, such as a power failure or a network connection
failure.  </para>
</tasksummary>
<procedure>
<step xml:id="troubleshooting-step-51">
<para>Reboot the system from the Solaris Operating System DVD,
the Solaris Software - 1 CD, or from the network.</para>
</step>
<step xml:id="troubleshooting-step-18">
<para>Choose the upgrade option for installation.</para>
<para>The Solaris installation program determines if the system has
been partially upgraded and continues the upgrade.</para>
</step>
</procedure>
</task>
</sect2>
<sect2 arch="x86" xml:id="gbdwz">
<title>
Problems With Solaris Live Upgrade When
You Use GRUB</title>
<para>The following errors can occur when you use Solaris Live Upgrade and
the GRUB boot loader on an x86 based system.</para>
<msgset>
<simplemsgentry>
<msgtext>
<para>ERROR: The media product tools installation
directory <replaceable>path-to-installation-directory</replaceable> does not
exist.</para>
<para>ERROR: The media <replaceable>dirctory</replaceable> does not contain
an operating system upgrade image.</para>
</msgtext>
<msgexplan arch="x86" role="description">

<para>The error messages are seen
when using the <command>luupgrade</command> command to upgrade a new boot
environment.</para>
</msgexplan>
<msgexplan role="cause">

<para>An older version of Solaris Live Upgrade is
being used. The Solaris Live Upgrade packages you have installed on your system
are incompatible with the media and the release on that media.</para>
</msgexplan>
<msgexplan role="solution">

<para>Always use the Solaris Live Upgrade packages
from the release you are upgrading to.</para>
</msgexplan>
<msgexplan role="example">

<para>In the following example, the error message
indicates that the Solaris Live Upgrade packages on the system are not the
same version as on the media.</para>
<screen># <userinput>luupgrade -u -n s10u1 -s /mnt</userinput>
	Validating the contents of the media &lt;/mnt&gt;.
	The media is a standard Solaris media.
	ERROR: The media product tools installation directory 
&lt;/mnt/Solaris_10/Tools/Boot/usr/sbin/install.d/install_config&gt; does 
not exist.
	ERROR: The media &lt;/mnt&gt; does not contain an operating system upgrade 
image.</screen>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>ERROR: Cannot find or is not executable:
&lt;/sbin/biosdev&gt;.</para>
<para>ERROR: One or more patches required by Solaris Live Upgrade has not
been installed.</para>
</msgtext>
<msgexplan role="cause">

<para>One or more patches required by Solaris Live
Upgrade are not installed on your system. 	Beware that this error message
does not catch all missing patches.</para>
</msgexplan>
<msgexplan role="solution">

<para>Before using Solaris Live Upgrade, always
install all the required patches. Ensure that you have the most recently updated
patch list by consulting <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="text" xlink:href="http://sunsolve.sun.com">http://sunsolve.sun.com</link>. Search for the info doc 72099 on the SunSolve web site.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>ERROR: Device mapping command &lt;/sbin/biosdev&gt;
failed. Please reboot and try again.</para>
</msgtext>
<msgexplan role="cause">

<para>
<emphasis>Reason 1</emphasis>: Solaris Live
Upgrade is unable to map devices because of previous 	administrative tasks.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 1</emphasis>: Reboot the
system and try Solaris Live Upgrade again</para>
</msgexplan>
<msgexplan role="cause">

<para>
<emphasis>Reason 2</emphasis>: If you reboot
your system and get the same error message, you have two or more identical
disks. The device mapping 	command is unable to distinguish between them.</para>
</msgexplan>
<msgexplan role="solution">

<para>
<emphasis>Reason 2</emphasis>: Create a new
dummy <literal>fdisk</literal> partition on one 	of the disks. See the <olink remap="external" targetdoc="819-2240" targetptr="fdisk-1m">
<citerefentry>
<refentrytitle>fdisk</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> man page. Then reboot the
system.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>Cannot delete the boot environment
that contains the GRUB menu</para>
</msgtext>
<msgexplan role="cause">

<para>Solaris Live Upgrade imposes the restriction
that a boot environment cannot be deleted if the boot environment contains
the GRUB menu.</para>
</msgexplan>
<msgexplan role="solution">

<para>Use <olink remap="external" targetdoc="819-2240" targetptr="lumake-1m">
<citerefentry>
<refentrytitle>lumake</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> or <olink remap="external" targetdoc="819-2240" targetptr="luupgrade-1m">
<citerefentry>
<refentrytitle>luupgrade</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> commands to reuse that boot
environment.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>The file system containing the GRUB
menu was accidentally remade. However, the disk has the same slices as before.
For example, the disk was not re-sliced.</para>
</msgtext>
<msgexplan role="cause">

<para>The file system that contains the GRUB menu
is critical to keeping the system bootable. Solaris Live Upgrade commands
do not destroy the GRUB menu. But, if you accidentally remake or otherwise
destroy the file system containing the GRUB menu with a command other than
a Solaris Live Upgrade command, the recovery software attempts to reinstall
the GRUB menu. The recovery software puts the GRUB menu back in the same file
system at the next reboot. For example, you might have used the <command>newfs</command> or <command>mkfs</command> commands on the file system and accidentally destroyed the
GRUB menu. To restore the GRUB menu correctly, the slice must adhere to the
following conditions:</para>
<itemizedlist>
<listitem>
<para>Contain a mountable file system</para>
</listitem>
<listitem>
<para>Remain a part of the same Solaris Live Upgrade boot environment
where the slice resided previously</para>
</listitem>
</itemizedlist>
<para>Before rebooting the system, make any necessary corrective actions on
the slice.</para>
</msgexplan>
<msgexplan role="solution">

<para>Reboot the system. A backup copy of the GRUB
menu is automatically installed.</para>
</msgexplan>
</simplemsgentry>
</msgset>
<msgset>
<simplemsgentry>
<msgtext>
<para>The GRUB menu's <filename>menu.lst</filename> file
was accidentally deleted.</para>
</msgtext>
<msgexplan role="solution">

<para>Reboot the system. A backup copy of the GRUB
menu is automatically installed.</para>
</msgexplan>
</simplemsgentry>
</msgset>
</sect2>
<sect2>
<title/>
<task id="troubleshooting-48">

<title>System Panics When Upgrading With Solaris
Live Upgrade Running Veritas VxVm</title>
<tasksummary>
<para>When you use Solaris Live Upgrade while upgrading and running Veritas
VxVM, the system panics on reboot unless you upgrade by using the following
procedure. The problem occurs if packages do not conform to Solaris advanced
packaging guidelines.</para>
</tasksummary>
<procedure>
<step>
<para>Become superuser or assume
an equivalent role.</para>
<para>Roles contain authorizations and privileged
commands. For more information about roles, see <olink remap="external" targetdoc="819-3321" targetptr="rbactask-15">
<citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle>
</olink>.</para>
</step>
<step xml:id="troubleshooting-step-52">
<para>Create an inactive boot environment.
See <olink remap="external" targetdoc="819-2395" targetptr="chapter-33">
<citetitle remap="section">Creating a New Boot Environment</citetitle> in <citetitle remap="book">Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</citetitle>
</olink>.</para>
</step>
<step xml:id="troubleshooting-step-26">
<para>Before upgrading the inactive boot
environment, you must disable the existing Veritas software on the inactive
boot environment.</para>
<substeps>
<step xml:id="troubleshooting-step-53">
<para>Mount the inactive boot environment. </para>
<screen># <userinput>lumount</userinput> <replaceable>inactive_boot_environment_name</replaceable> <replaceable>mount_point</replaceable>
</screen>
<para>For example:</para>
<screen># <userinput>lumount solaris8 /mnt</userinput> </screen>
</step>
<step xml:id="troubleshooting-step-31">
<para>Change to the directory that contains
the <filename>vfstab</filename>, for example:</para>
<screen># <userinput>cd /mnt/etc</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-28">
<para>Make a copy of the inactive boot
environment's <filename>vfstab</filename> file, for example:</para>
<screen># <userinput>cp vfstab vfstab.501</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-30">
<para>In the copied <filename>vfstab</filename>,
comment out all Veritas file system entries, for example: </para>
<screen>#  <userinput>sed  '/vx\/dsk/s/^/#/g'  &lt; vfstab &gt;  vfstab.novxfs</userinput>
</screen>
<para>The first character of each line is changed to #, which makes the line
a comment line. Note that this comment line is different than the system file-comment
lines.</para>
</step>
<step xml:id="troubleshooting-step-32">
<para>Copy the changed <filename>vfstab</filename> file,
for example:</para>
<screen># <userinput>cp vfstab.novxfs vfstab</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-34">
<para>Change directories to the inactive
boot environment's system file, for example:</para>
<screen># <userinput>cd /mnt/etc</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-33">
<para>Make a copy of the inactive boot
environment's system file, for example:</para>
<screen># <userinput>cp system system.501</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-35">
<para>Comment out all “forceload:”
entries that include <filename>drv/vx</filename>.</para>
<screen># <userinput>sed '/forceload:   drv\/vx/s/^/*/' &lt;system&gt; system.novxfs</userinput>
</screen>
<para>The first character of each line is changed to *, which makes the line
a command line. Note that this comment line is different than the <filename>vfstab</filename> file comment lines.</para>
</step>
<step xml:id="troubleshooting-step-37">
<para>Create the Veritas <filename>install-db</filename> file,
for example:</para>
<screen># <userinput>touch vx/reconfig.d/state.d/install-db</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-60">
<para>Unmount the inactive boot environment.</para>
<screen># <userinput>luumount</userinput> <replaceable>inactive_boot_environment_name</replaceable> </screen>
</step>
</substeps>
</step>
<step xml:id="troubleshooting-step-38">
<para>Upgrade the inactive boot environment.
See <olink remap="external" targetdoc="819-2395" targetptr="liveupgrade-1">Chapter 7, <citetitle remap="chapter">Upgrading With Solaris Live Upgrade (Tasks),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</citetitle>
</olink>.</para>
</step>
<step xml:id="troubleshooting-step-39">
<para>Activate the inactive boot environment.
See <olink remap="external" targetdoc="819-2395" targetptr="luupgrade-84">
<citetitle remap="section">Activating a Boot Environment</citetitle> in <citetitle remap="book">Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</citetitle>
</olink>.</para>
</step>
<step xml:id="troubleshooting-step-40">
<para>Shut down the system.</para>
<screen># <userinput>init 0</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-41">
<para>Boot the inactive boot environment
in single-user mode:</para>
<screen>OK <userinput>boot -s</userinput>
</screen>
<para>Several messages and error messages that contain “vxvm”
or “VXVM” are displayed that can be ignored. The inactive boot
environment becomes active.</para>
</step>
<step xml:id="troubleshooting-step-54">
<para>Upgrade Veritas.</para>
<substeps>
<step xml:id="troubleshooting-step-55">
<para>Remove the Veritas VRTSvmsa package
from the system, for example:</para>
<screen># <userinput>pkgrm VRTSvmsa</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-44">
<para>Change directories to the Veritas
packages.</para>
<screen># <userinput>cd /</userinput>
<replaceable>location_of_Veritas_software</replaceable>
</screen>
</step>
<step xml:id="troubleshooting-step-43">
<para>Add the latest Veritas packages to
the system:</para>
<screen>#  <userinput>pkgadd -d `pwd` VRTSvxvm VRTSvmsa VRTSvmdoc VRTSvmman VRTSvmdev</userinput>
</screen>
</step>
</substeps>
</step>
<step xml:id="troubleshooting-step-45">
<para>Restore the original <filename>vfstab</filename> and
system files:</para>
<screen># <userinput>cp /etc/vfstab.original /etc/vfstab</userinput>
# <userinput>cp /etc/system.original /etc/system</userinput>
</screen>
</step>
<step xml:id="troubleshooting-step-46">
<para>Reboot the system.</para>
<screen># <userinput>init 6</userinput>
</screen>
</step>
</procedure>
</task>
</sect2>
<sect2 arch="x86" xml:id="esxhi">
<title>
Service Partition  Not Created by Default
on Systems With No Existing Service Partition</title>
<para>If you install the Solaris Express OS on a system that does
not  currently include a service or diagnostic partition, the installation
program might not  create a service partition by default. If you want to include
a  service partition on the  same disk as the Solaris partition, you must
re-create the service partition before  you install the Solaris Express OS.</para>
<para>If you installed the Solaris 8 2/02 OS on a  system with a service partition,
the installation program might not have preserved the  service partition.
If you did not manually edit the <filename>fdisk</filename> boot  partition
layout to preserve the service partition, the installation program deleted
the  service partition during the installation. </para>
<note>

<para>If you did not specifically preserve the service partition  when
you installed the Solaris 8 2/02 OS, you might not be able to  re-create the
 service partition and upgrade to the Solaris Express OS.</para>
</note>
<para>If you want to include a service partition on the disk that  contains
the Solaris partition, choose one of the following workarounds.</para>
</sect2>
<sect2>
<title/>
<task>

<title>To Install Software From a Network Installation Image or From
the  Solaris Operating System DVD</title>
<tasksummary>
<para>To install the software from a net installation image or from the  Solaris Operating System DVD over
the network, follow these steps.</para>
</tasksummary>
<procedure>
<step>
<para>Delete the contents of the disk.</para>
</step>
<step>
<para>Before you install, create the service partition by  using the
diagnostics CD for your system.</para>
<para>For information about how to create
the  service partition, see your hardware documentation.</para>
</step>
<step>
<para>Boot the system from the network.</para>
<para>The  Customize <filename>fdisk</filename> Partitions screen is displayed.</para>
</step>
<step>
<para>To load the default boot disk partition layout, click  Default.</para>
<para>The installation program preserves the service partition and  creates
the Solaris  partition.</para>
</step>
</procedure>
</task>
</sect2>
<sect2>
<title/>
<task>

<title>To Install From the Solaris Software - 1 CD or From a Network
 Installation Image</title>
<tasksummary>
<para>To use the Solaris installation program to install from the Solaris Software - 1 CD
or from a network  installation image on a boot server, follow these steps.</para>
</tasksummary>
<procedure>
<step>
<para>Delete the contents of the disk.</para>
</step>
<step>
<para>Before you install, create the service partition by  using the
diagnostics CD for your system.</para>
<para>For information about how to create
the  service partition, see your hardware documentation.</para>
</step>
<step>
<para>The installation program  prompts you to choose a method for creating
the Solaris partition.</para>
</step>
<step>
<para>Boot the system.</para>
</step>
<step>
<para>Select the <literal>Use rest of disk for Solaris  partition</literal> option.</para>
<para>The installation program preserves the service partition  and
creates the Solaris partition.</para>
</step>
<step>
<para>Complete the  installation.</para>
</step>
</procedure>
</task>
</sect2>
</sect1>
</appendix>
