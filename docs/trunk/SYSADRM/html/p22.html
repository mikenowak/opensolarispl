<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Fair Share Scheduler (Overview) - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p21.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p23.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmfss-1"></a>Chapter&nbsp;8<h3>Fair Share Scheduler (Overview)</h3><p>The analysis of workload data can indicate that a particular workload
or group of workloads is monopolizing CPU resources. If these workloads are
not violating resource constraints on CPU usage, you can modify the allocation
policy for CPU time on the system. The fair share scheduling class described
in this chapter enables you to allocate CPU time based on shares instead of
the priority scheme of the timesharing (TS) scheduling class.</p>
<p>This chapter covers the following topics.</p>
<ul><li><p><a href="p22.html#rmfss-2">Introduction to the Scheduler</a></p>
</li>
<li><p><a href="p22.html#rmfss-4">CPU Share Definition</a></p>
</li>
<li><p><a href="p22.html#rmfss-5">CPU Shares and Process State</a></p>
</li>
<li><p><a href="p22.html#rmfss-6">CPU Share Versus Utilization</a></p>
</li>
<li><p><a href="p23.html">CPU Share Examples</a></p>
</li>
<li><p><a href="p23.html#rmfss-14">FSS Configuration</a></p>
</li>
<li><p><a href="p24.html">FSS and Processor Sets</a></p>
</li>
<li><p><a href="p24.html#rmfss-17">Combining FSS With Other Scheduling Classes</a></p>
</li>
<li><p><a href="p24.html#rmfss-21">Setting the Scheduling Class for the System</a></p>
</li>
<li><p><a href="p24.html#rmfss-22">Scheduling Class on a System with Zones Installed</a></p>
</li>
<li><p><a href="p24.html#rmfss-20">Commands Used With FSS</a></p>
</li>
</ul>
<p>To begin using the fair share scheduler, see <a href="p25.html">Chapter&nbsp;9, Administering the Fair Share Scheduler (Tasks)</a>.</p>
<a name="rmfss-2"></a><h3>Introduction to the Scheduler</h3>
<p>A fundamental job of the operating system is to arbitrate which processes
get access to the system's resources. The process scheduler, which is also
called the dispatcher, is the portion of the kernel that controls allocation
of the CPU to processes. The scheduler supports the concept of scheduling
classes. Each class defines a scheduling policy that is used to schedule processes
within the class. The default scheduler in the Solaris Operating System, the
TS scheduler, tries to give every process relatively equal access to the available
CPUs. However, you might want to specify that certain processes be given more
resources than others.</p>
<p><a name="indexterm-58"></a><a name="indexterm-59"></a>You
can use the <b>fair share scheduler</b> (FSS) to control the
allocation of available CPU resources among workloads, based on their importance.
This importance is expressed by the number of <b>shares</b> of
CPU resources that you assign to each workload.</p>
<p>You give each project CPU shares to control the project's entitlement
to CPU resources. The FSS guarantees a fair dispersion of CPU resources among
projects that is based on allocated shares, independent of the number of processes
that are attached to a project. The FSS achieves fairness by reducing a project's
entitlement for heavy CPU usage and increasing its entitlement for light usage,
in accordance with other projects.</p>
<p><a name="indexterm-60"></a>The FSS consists of a
kernel scheduling class module and class-specific versions of the <tt>dispadmin</tt>(1M) and <tt>priocntl</tt>(1) commands. Project shares used
by the FSS are specified through the <tt>project.cpu-shares</tt> property
in the <tt>project</tt>(4) database.</p>
<hr>
<p><b>Note - </b>If you are using the <tt>project.cpu-shares</tt> resource
control on a Solaris system with zones installed, see <a href="p58.html#z.config.ov-12">Zone Configuration Data</a>, <a href="p100.html#z.admin.ov-3">Resource Controls Used in Non-Global Zones</a>,
and <a href="p110.html">Using the Fair Share Scheduler on a Solaris System With Zones Installed</a>.</p>
<hr>
<a name="rmfss-4"></a><h3>CPU Share Definition</h3>
<p><a name="indexterm-61"></a>The term &ldquo;share&rdquo; is used to
define a portion of the system's CPU resources that is allocated to a project.
If you assign a greater number of CPU shares to a project, relative to other
projects, the project receives more CPU resources from the fair share scheduler.</p>
<p>CPU shares are not equivalent to percentages of CPU resources. Shares
are used to define the relative importance of workloads in relation to other
workloads. When you assign CPU shares to a project, your primary concern is
not the number of shares the project has. Knowing how many shares the project
has in comparison with other projects is more important. You must also take
into account how many of those other projects will be competing with it for
CPU resources.</p>
<hr>
<p><b>Note - </b><a name="indexterm-62"></a>Processes in projects with zero shares always run at the lowest
system priority (0). These processes only run when projects with nonzero shares
are not using CPU resources.</p>
<hr>
<a name="rmfss-5"></a><h3>CPU Shares and Process State</h3>
<p><a name="indexterm-63"></a><a name="indexterm-64"></a>In the Solaris system, a project workload usually consists of
more than one process. From the fair share scheduler perspective, each project
workload can be in either an <b>idle</b> state or an <b>active</b> state. A project is considered idle if none of its processes are
using any CPU resources. This usually means that such processes are either <b>sleeping</b> (waiting for I/O completion) or stopped. A project is
considered active if at least one of its processes is using CPU resources.
The sum of shares of all active projects is used in calculating the portion
of CPU resources to be assigned to projects.</p>
<p>When more projects become active, each project's CPU allocation is reduced,
but the proportion between the allocations of different projects does not
change.</p>
<a name="rmfss-6"></a><h3>CPU Share Versus Utilization</h3>
<p>Share allocation is not the same as utilization. A project that is allocated
50 percent of the CPU resources might average only a 20 percent CPU use. Moreover,
shares serve to limit CPU usage only when there is competition from other
projects. Regardless of how low a project's allocation is, it always receives
100 percent of the processing power if it is running alone on the system.
Available CPU cycles are never wasted. They are distributed between projects.</p>
<p>The allocation of a small share to a busy workload might slow its performance.
However, the workload is not prevented from completing its work if the system
is not overloaded.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p21.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p23.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

