<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Administering the Fair Share Scheduler (Tasks) - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p24.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p26.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmfss.task-1"></a>Chapter&nbsp;9<h3>Administering the Fair Share Scheduler (Tasks)</h3><p>This chapter describes how to use the fair share scheduler (FSS).</p>
<p>For an overview of the FSS, see <a href="p22.html">Chapter&nbsp;8, Fair Share Scheduler (Overview)</a>. For information on scheduling class
when zones are in use, see <a href="p55.html#gejen">Scheduling Class</a>.</p>
<a name="rmfss.task-23"></a><h3>Administering the Fair Share Scheduler (Task
Map)</h3>
<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Information</p>
</th></tr>
<tr><td><p>Monitor CPU usage.</p>
</td><td><p>Monitor the CPU usage of projects, and projects in processor sets.</p>
</td><td><p><a href="p25.html#rmfss.task-2">Monitoring the FSS</a></p>
</td></tr>
<tr><td><p>Set the default scheduler class.</p>
</td><td><p>Make a scheduler such as the FSS the default scheduler for the system.</p>
</td><td><p><a href="p25.html#rmfss.task-6">How to Make FSS the Default Scheduler Class</a></p>
</td></tr>
<tr><td><p>Move running processes from one scheduler class to a different scheduling
class, such as the FSS class.</p>
</td><td><p>Manually move processes from one scheduling class to another scheduling
class without changing the default scheduling class and rebooting.</p>
</td><td><p><a href="p25.html#rmfss.task-7">How to Manually Move Processes From the TS Class Into the FSS Class</a></p>
</td></tr>
<tr><td><p>Move all running processes from all scheduling classes to a different
scheduling class, such as the FSS class.</p>
</td><td><p>Manually move processes in all scheduling classes to another scheduling
class without changing the default scheduling class and rebooting.</p>
</td><td><p><a href="p25.html#rmfss.task-12">How to Manually Move Processes From All User Classes Into the FSS Class</a></p>
</td></tr>
<tr><td><p>Move a project's processes into a different scheduling class, such as
the FSS class.</p>
</td><td><p>Manually move a project's processes from their current scheduling class
to a different scheduling class.</p>
</td><td><p><a href="p26.html">How to Manually Move a Project's Processes Into the FSS Class</a></p>
</td></tr>
<tr><td><p>Examine and tune FSS parameters.</p>
</td><td><p>Tune the scheduler's time quantum value. <b>Time quantum</b> is
the amount of time that a thread is allowed to run before it must relinquish
the processor.</p>
</td><td><p><a href="p26.html#rmfss.task-21">How to Tune Scheduler Parameters</a></p>
</td></tr>
</table><a name="rmfss.task-2"></a><h3>Monitoring the FSS</h3>
<p>You can use the <tt>prstat</tt> command described in the <tt>prstat</tt>(1M) man page to monitor CPU usage
by active projects.</p>
<p>You can use the extended accounting data for tasks to obtain per-project
statistics on the amount of CPU resources that are consumed over longer periods.
See <a href="p12.html">Chapter&nbsp;4, Extended Accounting (Overview)</a> for
more information.</p>
<a name="rmfss.task-4"></a><h4><img src="graphics/procedure.gif"> How to Monitor System CPU Usage by Projects</h4>
<ol><li><a name="rmfss.task-step-32"></a><b>To monitor the CPU usage of projects that
run on the system, use the <tt>prstat</tt> command with the <tt>-J</tt> option.</b><pre>% <tt><b>prstat -J</b></tt></pre></li></ol><a name="rmfss.task-3"></a><h4><img src="graphics/procedure.gif"> How to Monitor CPU Usage by Projects in Processor
Sets</h4>
<ol><li><a name="rmfss.task-step-34"></a><b>To monitor the CPU usage of projects on
a list of processor sets, type:</b><pre>% <tt><b>prstat -J -C </tt><i>pset-list</i><tt></b></tt></pre><p>where <i>pset-list</i> is a list of processor set
IDs that are separated by commas.</p></li></ol><a name="rmfss.task-5"></a><h3>Configuring the FSS</h3>
<p><a name="indexterm-72"></a>The same commands that you use with other scheduling
classes in the Solaris system can be used with FSS. You can set the scheduler
class, configure the scheduler's tunable parameters, and configure the properties
of individual processes.</p>
<p>Note that you can use <tt>svcadm</tt> <tt>restart</tt> to
restart the scheduler service. See <tt>svcadm</tt>(1M) for more information.</p>
<a name="rmfss.task-6"></a><h4><img src="graphics/procedure.gif"> How to Make FSS the Default Scheduler
Class</h4>
<p>The FSS must be the default scheduler on your system to have CPU shares
assignment take effect.</p>
<p>Using a combination of the <tt>priocntl</tt> and <tt>dispadmin</tt> commands ensures that the FSS becomes the default scheduler immediately
and also after reboot.</p>
<ol><li><a name="rmfss.task-step-25"></a><b>Become superuser or assume an equivalent
role.</b><p>Roles contain authorizations and privileged commands. For
more information about roles, see Using the Solaris Management
Tools With RBAC (Task Map) in <i>System Administration
Guide: Basic Administration</i>.</p></li><li><a name="rmfss.task-step-26"></a><b>Set the default scheduler for the system
to be the FSS.</b><pre># <tt><b>dispadmin -d FSS</b></tt></pre><p>This change takes effect on the next reboot. After reboot, every process
on the system runs in the FSS scheduling class.</p></li><li><b>Make this configuration take effect immediately, without rebooting.</b><pre># <tt><b>priocntl -s -c FSS</b></tt></pre></li></ol><a name="rmfss.task-7"></a><h4><img src="graphics/procedure.gif"> How to Manually Move Processes From the TS
Class Into the FSS Class</h4>
<p>You can manually move processes from one scheduling class to another
scheduling class without changing the default scheduling class and rebooting.
This procedure shows how to manually move processes from the TS scheduling
class into the FSS scheduling class.</p>
<ol><li><a name="rmfss.task-step-9"></a><b>Become superuser or assume an equivalent
role.</b><p>Roles contain authorizations and privileged commands. For
more information about roles, see Using the Solaris Management
Tools With RBAC (Task Map) in <i>System Administration
Guide: Basic Administration</i>.</p></li><li><a name="rmfss.task-step-10"></a><b>Move the <tt>init</tt> process
(pid 1) into the FSS scheduling class.</b><pre># <tt><b>priocntl -s -c FSS -i pid 1</b></tt></pre></li><li><a name="rmfss.task-step-11"></a><b>Move all processes from the TS scheduling
class into the FSS scheduling class.</b><pre># <tt><b>priocntl -s -c FSS -i class TS</b></tt></pre><hr>
<p><b>Note - </b>All processes again run in the TS scheduling class after reboot.</p>
<hr>
</li></ol><a name="rmfss.task-12"></a><h4><img src="graphics/procedure.gif"> How to Manually Move Processes From All User
Classes Into the FSS Class</h4>
<p>You might be using a default class other than TS. For example, your
system might be running a window environment that uses the IA class by default.
You can manually move all processes into the FSS scheduling class without
changing the default scheduling class and rebooting.</p>
<ol><li><a name="rmfss.task-step-14"></a><b>Become superuser or assume an equivalent
role.</b><p>Roles contain authorizations and privileged commands. For
more information about roles, see Using the Solaris Management
Tools With RBAC (Task Map) in <i>System Administration
Guide: Basic Administration</i>.</p></li><li><a name="rmfss.task-step-15"></a><b>Move the <tt>init</tt> process
(pid 1) into the FSS scheduling class.</b><pre># <tt><b>priocntl -s -c FSS -i pid 1</b></tt></pre></li><li><a name="rmfss.task-step-16"></a><b>Move all processes from their current
scheduling classes into the FSS scheduling class.</b><pre># <tt><b>priocntl -s -c FSS -i all</b></tt></pre><hr>
<p><b>Note - </b>All processes again run in the default scheduling class after
reboot.</p>
<hr>
</li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p24.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p26.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

