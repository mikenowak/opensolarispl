<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Non-Global Zones as NFS Clients - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p95.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a> > <a href="p96.html#z.admin.ov-2">File Systems and Non-Global Zones</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p96.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p98.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="z.admin.ov-39"></a><h4>Non-Global Zones as NFS Clients</h4>
<p>Zones can be NFS clients. Version 2, version 3, and version 4 protocols
are supported. For information on these NFS versions, see Features
of the NFS Service in <i>System Administration
Guide: Network Services</i>. .</p>
<p>The default version is NFS version 4. You can enable other NFS versions
on a client by using one of the following methods:</p>
<ul><li><p>You can edit <tt>/etc/default/nfs</tt> to set <tt>NFS_CLIENT_VERSMAX=</tt><i>number</i> so that the
zone uses the specified version by default. See Setting Up NFS Services in <i>System Administration Guide: Network Services</i>.
Use the procedure How to Select Different Versions of NFS on a Client by Modifying
the <tt>/etc/default/nfs</tt> File from the task map.</p>
</li>
<li><p>You can manually create a version mount. This method overrides
the contents of <tt>/etc/default/nfs</tt>. See Setting
Up NFS Services in <i>System Administration
Guide: Network Services</i>. Use the procedure How to Use
the Command Line to Select Different Versions of NFS on a Client from the
task map.</p>
</li>
</ul>
<a name="z.admin.ov-35"></a><h4>Use of <tt>mknod</tt> Prohibited
in a Zone</h4>
<p>Note that you cannot use the <tt>mknod</tt> command documented
in the <tt>mknod</tt>(1M) man page to make a special file in a non-global zone.</p>
<a name="z.admin.ov-8"></a><h4>Traversing File Systems</h4>
<p>A zone's file system namespace is a subset of the namespace accessible
from the global zone. Unprivileged processes in the global zone are prevented
from traversing a non-global zone's file system hierarchy through the following
means:</p>
<ul><li><p>Specifying that the zone root's parent directory is owned,
readable, writable, and executable by root only</p>
</li>
<li><p>Restricting access to directories exported by <tt>/proc</tt></p>
</li>
</ul>
<p>Note that attempting to access AutoFS nodes mounted for another zone
will fail. The global administrator must not have auto maps that descend into
other zones.</p>
<a name="z.admin.ov-46"></a><h4>Restriction on Accessing A Non-Global Zone
From the Global Zone</h4>
<p>After a non-global zone is installed, the zone must never be accessed
directly from the global zone by any commands other than system backup utilities.
Moreover, a non-global zone can no longer be considered secure after it has
been exposed to an unknown environment. An example would be a zone placed
on a publicly accessible network, where it would be possible for the zone
to be compromised and the contents of its file systems altered. If there is
any possibility that compromise has occurred, the global administrator should
treat the zone as untrusted.</p>
<p>Any command that accepts an alternative root by using the <tt>-R</tt> or <tt>-b</tt> options (or the equivalent) must <b>not</b> be used
when the following are true:</p>
<ul><li><p>The command is run in the global zone.</p>
</li>
<li><p>The alternative root refers to any path within a non-global
zone, whether the path is relative to the current  running system's global
zone or the global zone in an alternative root.</p>
</li>
</ul>
<p>An example is the <tt>-R</tt> <i>root_path</i> option
to the <tt>pkgadd</tt> utility run from the global zone with a non-global
zone root path. </p>
<p>The list of commands, programs, and utilities that use <tt>-R</tt> with
an alternative root path include the following:</p>
<ul><li><p><tt>auditreduce</tt></p>
</li>
<li><p><tt>bart</tt></p>
</li>
<li><p><tt>flar</tt></p>
</li>
<li><p><tt>flarcreate</tt></p>
</li>
<li><p><tt>installf</tt></p>
</li>
<li><p><tt>localeadm</tt></p>
</li>
<li><p><tt>makeuuid</tt></p>
</li>
<li><p><tt>metaroot</tt></p>
</li>
<li><p><tt>patchadd</tt></p>
</li>
<li><p><tt>patchrm</tt></p>
</li>
<li><p><tt>pkgadd</tt></p>
</li>
<li><p><tt>pkgadm</tt></p>
</li>
<li><p><tt>pkgask</tt></p>
</li>
<li><p><tt>pkgchk</tt></p>
</li>
<li><p><tt>pkgrm</tt></p>
</li>
<li><p><tt>prodreg</tt></p>
</li>
<li><p><tt>removef</tt></p>
</li>
<li><p><tt>routeadm</tt></p>
</li>
<li><p><tt>showrev</tt></p>
</li>
<li><p><tt>syseventadm</tt></p>
</li>
</ul>
<p>The list of commands and programs that use <tt>-b</tt> with an
alternative root path include the following:</p>
<ul><li><p><tt>add_drv</tt></p>
</li>
<li><p><tt>pprosetup</tt></p>
</li>
<li><p><tt>rem_drv</tt></p>
</li>
<li><p><tt>roleadd</tt></p>
</li>
<li><p><tt>sysidconfig</tt></p>
</li>
<li><p><tt>update_drv</tt></p>
</li>
<li><p><tt>useradd</tt></p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p96.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p98.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

