<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Package Parameter Information - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p84.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p87.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p89.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="z.pkginst.ov-47"></a><h3>Package Parameter Information</h3>
<a name="gcdex"></a><h4>Setting Package Parameters for Zones</h4>
<p>The <tt>SUNW_PKG_ALLZONES</tt>, <tt>SUNW_PKG_HOLLOW</tt>,
and <tt>SUNW_PKG_THISZONE</tt> package parameters define the characteristics
of packages on a system with zones installed. These parameters must be set
so that packages can be administered on a system with non-global zones installed.</p>
<p>The following table lists the four valid combinations for setting package
parameters. If you choose setting  combinations that are not listed in the
following table, those settings are invalid and the package will fail to install.</p>
<p>Ensure that you have set all three package parameters. You can leave
all three package parameters blank. The package tools interpret a missing
zone package parameter as if the setting were <tt>false</tt>, but
not setting the parameters is  strongly discouraged. By setting all three
package parameters, you specify the exact behavior the package tools should
exhibit when installing or removing the package.</p>
<a name="z.pkginst.ov-99"></a>Table 24-1 Valid Package Parameter
Settings<table><tr><th><p><tt>SUNW_PKG_ALLZONES</tt> Setting</p>
</th><th><p><tt>SUNW_PKG_HOLLOW</tt> Setting</p>
</th><th><p><tt>SUNW_PKG_THISZONE</tt> Setting</p>
</th><th><p>Package Description</p>
</th></tr>
<tr><td><p>false</p>
</td><td><p>false</p>
</td><td><p>false</p>
</td><td><p>This is the default setting for packages that do not specify values
for all the zone package parameters.</p>
<p>A package with these settings can be installed in either the global
zone or a non-global zone. </p>
<ul><li><p>If the <tt>pkgadd</tt> command is run in the  global
zone, the package is installed in the global zone and in all non-global  zones.</p>
</li>
<li><p>If the <tt>pkgadd</tt> command is run in a  non-global
zone, the package is installed in the non-global zone only. </p>
</li>
</ul>
<p>In both cases, the entire contents of the package is visible in all
zones where the package is installed.</p>
</td></tr>
<tr><td><p>false</p>
</td><td><p>false</p>
</td><td><p>true</p>
</td><td><p>A package with these settings can be installed in either the global
zone or a non-global zone. If new non-global zones are created after the 
installation, the package is not propagated to these new non-global zones.</p>
<ul><li><p>If the <tt>pkgadd</tt> command is run in the  global
zone, the package is installed in the global zone only.</p>
</li>
<li><p>If the <tt>pkgadd</tt> command is run in a  non-global
zone, the package is installed in the non-global zone  only.</p>
</li>
</ul>
<p> In both cases, the entire contents of the package is visible in the
zone where the package is installed.</p>
</td></tr>
<tr><td><p>true</p>
</td><td><p>false</p>
</td><td><p>false</p>
</td><td><p>A package with these settings can be installed in the global zone  only.
When the <tt>pkgadd</tt> command is run, the package is installed
in the global zone and in all non-global zones. The entire contents of the
package is visible in all zones.</p>
<hr>
<p><b>Note - </b>Any attempt to install the package in a non-global zone  fails.</p>
<hr>
</td></tr>
<tr><td><p>true</p>
</td><td><p>true</p>
</td><td><p>false</p>
</td><td><p>A package with these settings can only be installed in the global  zone,
by the global administrator.  When the <tt>pkgadd</tt> command is
run, the contents of the package is fully installed in the global zone. If
a package has the package parameters set to these values, the package  content
itself is not delivered on any non-global zone. Only the package  installation
information necessary to make the package appear to be installed is  installed
on all non-global zones. This enables the installation of other packages to
be installed that depend on this package. </p>
<p>For package dependency checking purposes, the package appears to be
installed in all zones.</p>
<ul><li><p>In the global zone, the entire contents of the package is
visible.</p>
</li>
<li><p>In whole root non-global zones, the entire contents of the
package is not visible.</p>
</li>
<li><p>When a non-global zone inherits a file system from the  global
zone, a package installed in this file system is visible in a non-global 
zone. All other files delivered by the package are not visible within the
 non-global zone. </p>
<p>For example, a sparse root non-global zone
shares certain directories with the global zone. These directories are read-only.
Sparse root non-global zones share the <tt>/platform</tt> file
system among others. Another example is packages that deliver files relevant
only to booting hardware.</p>
</li>
</ul>
<hr>
<p><b>Note - </b>Any attempt to install the package in a non-global zone  fails.</p>
<hr>
</td></tr>
</table><a name="z.pkginst.ov-12"></a><h4><tt>SUNW_PKG_ALLZONES</tt> Package
Parameter</h4>
<p><a name="indexterm-306"></a>The optional <tt>SUNW_PKG_ALLZONES</tt> package parameter
describes the zone scope of a package. This parameter defines the following:</p>
<ul><li><p>Whether a package is required to be installed on all zones</p>
</li>
<li><p>Whether a package is required to be identical in all zones</p>
</li>
</ul>
<p>The <tt>SUNW_PKG_ALLZONES</tt> package parameter has two permissible
values. These values are <tt>true</tt> and <tt>false</tt>.
The default value is <tt>false</tt>. If this parameter is either
not set or set to a value other than <tt>true</tt> or <tt>false</tt>,
the value <tt>false</tt> is used.</p>
<p>The <tt>SUNW_PKG_ALLZONES</tt> parameter should be set to <tt>true</tt> for packages that <b>must</b> be the same package
version and patch revision level across all zones. Any package that delivers
functionality dependent on a particular Solaris kernel, for example, Solaris
10, should set this parameter to <tt>true</tt>. Any patch for a
package must set the <tt>SUNW_PKG_ALLZONES</tt>parameter to the
same value that is set in the installed package being patched. The patch revision
level for any package that sets this parameter to <tt>true</tt> must
be the same across all zones.</p>
<p>Packages that deliver functionality not dependent on a particular Solaris
kernel, such as third-party packages or Sun compilers, should set this parameter
to <tt>false</tt>. Any patch for a package that sets this parameter
to <tt>false</tt> must also set this parameter to <tt>false</tt>.
Both the package version or the patch revision level for any package that
sets this parameter to <tt>false</tt> can be different between zones.
For example, two non-global zones could each have a different version of a
web server installed.</p>
<p>The <tt>SUNW_PKG_ALLZONES</tt> package parameter values are
described in the following table.</p>
<a name="z.pkginst.ov-tbl-13"></a>Table 24-2 <tt>SUNW_PKG_ALLZONES</tt> Package
Parameter Values<table><tr><th><p>Value</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>false</tt></p>
</td><td><p>This package can be installed from the global zone to the global zone
 only, or to the global zone and to all non-global zones. The package can
also  be installed from any non-global zone to the same non-global zone.</p>
<ul><li><p>The global administrator can install the package on the global
zone only.</p>
</li>
<li><p>The global administrator can install the package on the global
zone and on all non-global zones.</p>
</li>
<li><p>The zone administrator can install the package on a non-global
zone.</p>
</li>
</ul>
<p>If removed from the global zone, the package is not removed from other
zones. The package can be removed from individual non-global zones.</p>
<ul><li><p>The package is not required to be installed on the global
zone.</p>
</li>
<li><p>The package is not required to be installed on any non-global
zone.</p>
</li>
<li><p>The package is not required to be  identical across all zones.
Different versions of the package can exist on individual zones.</p>
</li>
<li><p>The package delivers software that is not implicitly shared
across all zones. This means that the package is not operating system-specific.
Most application-level software is in this category. Examples include the StarOffice product or a web server.</p>
</li>
</ul>
</td></tr>
<tr><td><p><tt>true</tt></p>
</td><td><p>If installed on the global zone, this package must also be installed
on all non-global zones. If removed from the global zone, the package must
also be removed from all non-global zones.</p>
<ul><li><p>If the package is installed, it must be installed on the global
zone. The package is then automatically installed on all non-global zones.</p>
</li>
<li><p>The version of the package must be identical on all zones.</p>
</li>
<li><p>The package delivers software that is implicitly shared across
all zones. The package is dependent on the versions of software that are implicitly
shared across all zones. The package should be visible in all non-global zones.
Examples include kernel modules.</p>
<p>These packages allow the non-global
zone to resolve dependencies on packages that are installed in the global
zone by requiring that the entire package  be installed on all non-global
zones.</p>
</li>
<li><p>Only the global administrator can install the package. A zone
administrator cannot install the package on a non-global zone.</p>
</li>
</ul>
</td></tr>
</table><a name="z.pkginst.ov-36"></a><h4><tt>SUNW_PKG_HOLLOW</tt> Package
Parameter</h4>
<p><a name="indexterm-307"></a>The <tt>SUNW_PKG_HOLLOW</tt> package parameter defines
whether a package should be visible in any non-global zone if that package
is required to be installed and be identical in all zones.</p>
<p>The <tt>SUNW_PKG_HOLLOW</tt> package parameter has two permissible
values, <tt>true</tt> or <tt>false</tt>.</p>
<ul><li><p>If <tt>SUNW_PKG_HOLLOW</tt> is either not set or
set to a value other than <tt>true</tt> or <tt>false</tt>,
the value <tt>false</tt> is used.</p>
</li>
<li><p>If <tt>SUNW_PKG_ALLZONES</tt> is set to <tt>false</tt>,
the <tt>SUNW_PKG_HOLLOW</tt> parameter is ignored.</p>
</li>
<li><p>If <tt>SUNW_PKG_ALLZONES</tt> is set to <tt>false</tt>,
then <tt>SUNW_PKG_HOLLOW</tt> cannot be set to <tt>true</tt>.</p>
</li>
</ul>
<p>The <tt>SUNW_PKG_HOLLOW</tt> package parameter values are
described in the following table.</p>
<a name="z.pkginst.ov-tbl-37"></a>Table 24-3 <tt>SUNW_PKG_HOLLOW</tt> Package
Parameter Values<table><tr><th><p>Value</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>false</tt></p>
</td><td><p>This is not a &ldquo;hollow&rdquo; package:</p>
<ul><li><p>If installed on the global zone, the package content and installation
information are required on all non-global zones.</p>
</li>
<li><p>The package delivers software that should be visible in all
non-global zones. An example is the package that delivers the <tt>truss</tt> command.</p>
</li>
<li><p>Other than the restrictions for the current setting of the <tt>SUNW_PKG_ALLZONES</tt> package parameter, no additional restrictions
are defined.</p>
</li>
</ul>
</td></tr>
<tr><td><p><tt>true</tt></p>
</td><td><p>This is a &ldquo;hollow&rdquo; package:</p>
<ul><li><p>The package content is not delivered on any non-global zone.
However, the package installation information is required on all non-global
zones.</p>
</li>
<li><p>The package delivers software that should not be visible in
all non-global zones. Examples include kernel drivers and system configuration
files that work only in the global zone. This setting allows the non-global
zone to resolve dependencies on packages that are installed only on the global
zone without actually installing the package data.</p>
</li>
<li><p>The package is recognized as being installed in all zones
for purposes of dependency checking by other packages that rely on this package
being installed.</p>
</li>
<li><p>This package setting includes all of the restrictions defined
for setting <tt>SUNW_PKG_ALLZONES</tt> to <tt>true</tt>.</p>
</li>
<li><p>In the global zone, the package is recognized as having been
installed, and all components of the package are installed. Directories are
created, files are installed, and class action and other scripts are run as
appropriate when the package is installed.</p>
</li>
<li><p>In a non-global zone, the package is recognized as having
been installed, but no components of the package are installed. No directories
are created, no files are installed, and no class action or other install
scripts are run when the package is installed.</p>
</li>
<li><p>When the package is removed from the global zone, the system
recognizes that the package was completely installed. Appropriate directories
and files are removed, and class action or other install scripts are run when
the package is removed.</p>
</li>
</ul>
</td></tr>
</table><a name="fmvet"></a><h4><tt>SUNW_PKG_THISZONE</tt> Package Parameter</h4>
<p><a name="indexterm-308"></a>The <tt>SUNW_PKG_THISZONE</tt> package parameter defines
whether a package must be installed in the current zone, global or non-global,
only. The <tt>SUNW_PKG_THISZONE</tt> package parameter has two permissible
values. These values are <tt>true</tt> and <tt>false</tt>.
The default value is <tt>false</tt>. </p>
<p>The <tt>SUNW_PKG_THISZONE</tt> package parameter values are
described in the following table.</p>
<a name="fmveu"></a>Table 24-4 <tt>SUNW_PKG_THISZONE</tt> Package
Parameter Values<table><tr><th><p>Value</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>false</tt></p>
</td><td><ul><li><p>If <tt>pkgadd</tt> is run in a non-global zone,
the package is installed in the current zone only.</p>
</li>
<li><p>If <tt>pkgadd</tt> is run in the global zone, the
package is installed in the global zone and also installed in all currently
installed non-global zones. In addition, the package will be propagated to
all future, newly installed non-global zones.</p>
</li>
</ul>
</td></tr>
<tr><td><p><tt>true</tt></p>
</td><td><ul><li><p>The package is installed in the current zone only.</p>
</li>
<li><p> If installed in the global zone, the package is not added
to any currently existing or yet-to-be-created non-global zones. This is the
same behavior that occurs when the <tt>-G</tt> option is specified
to <tt>pkgadd</tt>.  </p>
</li>
</ul>
</td></tr>
</table><a name="z.pkginst.ov-22"></a><h3>Package Information Query</h3>
<p>The <tt>pkginfo</tt> utility described in the <tt>pkginfo</tt>(1) man page supports querying
the software package database on a Solaris system with zones installed. For
information about the database, see <a href="p90.html#z.pkginst.ov-19">Product Database</a>.</p>
<p>The <tt>pkginfo</tt> utility can be used in the global zone
to query the software package database in the global zone only. The <tt>pkginfo</tt> utility can be used in a non-global zone to query the software
package database in the non-global global zone only.</p>
<a name="z.pkginst.ov-18"></a><h3>About Adding Patches in Zones</h3>
<p><a name="indexterm-309"></a>In general, a patch consists of the following components:</p>
<ul><li><p>Patch information:</p>
<ul><li><p>Identification, which is the patch version and patch ID</p>
</li>
<li><p>Applicability, which is the operating system type, operating
system version, and architecture</p>
</li>
<li><p>Dependencies, such as requires and obsoletes</p>
</li>
<li><p>Properties, such as requires a reboot afterwards</p>
</li>
</ul>
</li>
<li><p>One or more packages to patch, where each package contains:</p>
<ul><li><p>The version of the package to which the patches can be applied</p>
</li>
<li><p>Patch information, such as ID, obsoletes, and requires</p>
</li>
<li><p>One or more components of the package to be patched</p>
</li>
</ul>
</li>
</ul>
<p>When the <tt>patchadd</tt> command is used to apply a patch,
the patch information is used to determine whether the patch is applicable
to the currently running system. If determined to be not applicable, the patch
is not applied. Patch dependencies are also checked against all of the zones
on the system. If any required dependencies are not met, the patch is not
applied. This could include the case in which a later version of the patch
is already installed.</p>
<p>Each package contained in the patch is checked. If the package is not
installed on any zone, then the package is bypassed and not patched.</p>
<p>If all dependencies are satisfied, all packages in the patch that are
installed on any zone are used to patch the system. The package and patch
databases are also updated.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p87.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p89.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

