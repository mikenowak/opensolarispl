<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Extended Accounting (Overview) - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p11.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p13.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmacct-1"></a>Chapter&nbsp;4<h3>Extended Accounting (Overview)</h3><p>By using the project and task facilities that are described in <a href="p6.html">Chapter&nbsp;2, Projects and Tasks (Overview)</a> to label and separate workloads,
you can monitor resource consumption by each workload. You can use the <b>extended accounting</b> subsystem to capture a detailed set of resource consumption
statistics on both processes and tasks.</p>
<p>The following topics are covered in this chapter.</p>
<ul><li><p><a href="p12.html#rmacct-2">Introduction to Extended Accounting</a></p>
</li>
<li><p><a href="p12.html#rmacct-6">How Extended Accounting Works</a></p>
</li>
<li><p><a href="p13.html">Extended Accounting Configuration</a></p>
</li>
<li><p><a href="p13.html#rmacct.task-18">Commands Used With Extended Accounting</a></p>
</li>
<li><p><a href="p13.html#rmacct-7">Perl Interface to <tt>libexacct</tt></a></p>
</li>
</ul>
<p>To begin using extended accounting, see <a href="p14.html#rmacct.task-2">How to Activate Extended Accounting for Processes, Tasks, and Flows</a>.</p>
<a name="rmacct-2"></a><h3>Introduction to Extended Accounting</h3>
<p><a name="indexterm-18"></a>The extended accounting subsystem labels usage records with the project
for which the work was done. You can also use extended accounting, in conjunction
with the Internet Protocol Quality of Service (IPQoS) flow accounting module described
in Chapter 38, Using Flow Accounting and Statistics Gathering (Tasks), in <i>System Administration Guide: IP Services</i>, to capture
network flow information on a system.</p>
<p>Before you can apply resource management mechanisms, you must first be able
to characterize the resource consumption demands that various workloads place on a
system. The extended accounting facility in the Solaris Operating System provides
a flexible way to record system and network resource consumption on a task or process
basis, or on the basis of selectors provided by the IPQoS <tt>flowacct</tt> module.
For more information, see <tt>ipqos</tt>(7IPP).</p>
<p>Unlike online monitoring tools, which enable you to measure system usage in
real time, extended accounting enables you to examine historical usage. You can then
make assessments of capacity requirements for future workloads.</p>
<p><a name="indexterm-19"></a>With extended accounting data available, you can develop or purchase software
for resource chargeback, workload monitoring, or capacity planning.</p>
<a name="rmacct-6"></a><h3>How Extended Accounting Works</h3>
<p><a name="indexterm-20"></a><a name="indexterm-21"></a><a name="indexterm-22"></a>The extended accounting facility in the Solaris Operating System uses
a versioned, extensible file format to contain accounting data. Files that use this
data format can be accessed or be created by using the API provided in the included
library,  <tt>libexacct</tt> (see <tt>libexacct</tt>(3LIB)).
These files can then be analyzed on any platform with extended accounting enabled,
and their data can be used for capacity planning and chargeback.</p>
<p>If extended accounting is active, statistics are gathered that can be examined
by the <tt>libexacct</tt> API. <tt>libexacct</tt> allows examination
of the <tt>exacct</tt> files either forward or backward. The API supports
third-party files that are generated by <tt>libexacct</tt> as well as
those files that are created by the kernel. There is a Practical Extraction and Report
Language (Perl) interface to <tt>libexacct</tt> that enables you to develop
customized reporting and extraction scripts. See <a href="p13.html#rmacct-7">Perl Interface to <tt>libexacct</tt></a>.</p>
<p>With extended accounting enabled, the task tracks the aggregate resource usage
of its member processes. A task accounting record is written at task completion. Interim
records on running processes and tasks can also be written. For more information on
tasks, see <a href="p6.html">Chapter&nbsp;2, Projects and Tasks (Overview)</a>.</p>
<a name="rmacct-fig-33"></a>Figure 4-1 Task Tracking With Extended Accounting Activated<img src="figures/rmexacct1.gif" alt=""></img><a name="rmacct-3"></a><h4>Extensible Format</h4>
<p>The extended accounting format is substantially more extensible than the SunOS legacy system accounting software format (see What is System Accounting? in <i>System Administration Guide: Advanced Administration</i>). Extended accounting permits accounting metrics to be added
and removed from the system between releases, and even during system operation.</p>
<hr>
<p><b>Note - </b>Both extended accounting and legacy system accounting software can be
active on your system at the same time.</p>
<hr>
<a name="rmacct-4"></a><h4><tt>exacct</tt> Records and Format</h4>
<p>Routines that allow <tt>exacct</tt> records to be created serve two
purposes.</p>
<ul><li><p>To enable third-party <tt>exacct</tt> files to be created.</p>
</li>
<li><p><a name="indexterm-23"></a>To enable the creation of tagging records to be embedded in the kernel
accounting file by using the <tt>putacct</tt> system call (see <tt>getacct</tt>(2)).</p>
<hr>
<p><b>Note - </b>The <tt>putacct</tt> system call is also available from the
Perl interface. </p>
<hr>
</li>
</ul>
<p>The format permits different forms of accounting records to be captured without
requiring that every change be an explicit version change. Well-written applications
that consume accounting data must ignore records they do not understand.</p>
<p>The <tt>libexacct</tt> library converts and produces files in the <tt>exacct</tt> format. This library is the <b>only</b> supported interface
to <tt>exacct</tt> format files.</p>
<hr>
<p><b>Note - </b>The <tt>getacct</tt>, <tt>putacct</tt>, and <tt>wracct</tt> system calls do not apply to flows. The kernel creates flow records
and writes them to the file when IPQoS flow accounting is configured.</p>
<hr>
<a name="rmacct-8"></a><h4>Using Extended Accounting on a Solaris System with Zones
Installed</h4>
<p>The extended accounting subsystem collects and reports information for the entire
system (including non-global zones) when run in the global zone. The global administrator
can also determine resource consumption on a per-zone basis. See <a href="p100.html#z.admin.ov-6">Extended Accounting on a Solaris System With Zones Installed</a> for more information.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p11.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p13.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

