<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Using Proxy Credentials - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-09-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)<?GenHTML /ReferencePage> > <a href="p45.html">12.&nbsp;&nbsp;Setting Up LDAP Clients (Tasks)</a> > <a href="p46.html">Initializing an LDAP Client</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p46.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p48.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="clientsetup-90"></a><h4>Using Proxy Credentials</h4>
<a name="clientsetup-proc-54"></a><h4><img src="graphics/procedure.gif"> How to Initialize a Client Using Proxy
Credentials</h4>
<hr>
<p><b>Note - </b><b>Do not</b> edit either of the client configuration
files directly.  Use <tt>ldapclient</tt> to create or modify the
content of these files.</p>
<hr>
<ol><li><a name="clientsetup-step-80"></a><b>Become superuser or assume an equivalent
role.</b><p>Roles contain authorizations and privileged commands. For
more information about roles, see Chapter 8, Using Role-Based Access Control (Tasks), in <i>System Administration Guide: Security Services</i>.</p></li><li><a name="clientsetup-step-55"></a><b>Run <tt>ldapclient</tt> (defining
proxy values).</b><pre># <tt><b>ldapclient init \</b></tt>
<tt><b></b></tt><tt>-a</tt> <tt><b>proxyDN=cn=proxyagent,ou=profile,dc=west,dc=example,dc=com \</b></tt>
<tt><b></b></tt><tt>-a</tt> <tt><b>domainName=west.example.com \</b></tt>
<tt><b></b></tt><tt>-a</tt> <tt><b>profileName=pit1 \</b></tt>
<tt><b></b></tt><tt>-a</tt> <tt><b>proxyPassword=test1234 192.168.0.1</b></tt>
System successfully configured</pre><p>The <tt>-a</tt> proxyDN and <tt>-a</tt> proxyPassword
are <b>required</b> if the profile to be used is set up for <tt>proxy</tt>.  As the credentials are not stored in the profile saved on
the server, you must supply the information when you initialize the client.
 This method is more secure than the older method of storing the proxy credentials
on the server.</p><p>The proxy information is used to create <tt>/var/ldap/ldap_client_cred</tt>. The rest of the information is put in <tt>/var/ldap/ldap_client_file</tt>.</p></li></ol><a name="clientsetup-51"></a><h4>Initializing a Client Manually</h4>
<p>Superusers. or administrators with an equivalent role, can perform manual
client configurations. However, many of the checks are bypassed during the
process, so it is relatively easy to misconfigure your system.  In addition,
you must change settings <b>on every machine</b>, instead of
in one central place, as is done when using profiles.</p>
<a name="clientsetup-proc-75"></a><h4><img src="graphics/procedure.gif"> How to Initialize a Client Manually</h4>
<ol><li><a name="clientsetup-step-81"></a><b>Become superuser or assume an equivalent
role.</b><p>Roles contain authorizations and privileged commands. For
more information about roles, see Chapter 8, Using Role-Based Access Control (Tasks), in <i>System Administration Guide: Security Services</i>.</p></li><li><a name="clientsetup-step-76"></a><b>Use <tt>ldapclient manual</tt> to
initialize the client.</b><pre># <tt><b>ldapclient manual \</b></tt>
<tt><b></b></tt><tt>-a</tt> <tt><b>domainName=dc=west.example.com \</b></tt>
<tt><b></b></tt><tt>-a</tt> <tt><b>credentialLevel=proxy \</b></tt>
<tt><b></b></tt><tt>-a</tt> <tt><b>defaultSearchBase=dc=west,dc=example,dc=com \</b></tt> 
<tt><b></b></tt><tt>-a</tt> <tt><b>proxyDN=cn=proxyagent,ou=profile,dc=west,dc=example,dc=com \</b></tt> 
<tt><b></b></tt><tt>-a</tt> <tt><b>proxyPassword=testtest 192.168.0.1</b></tt></pre></li><li><a name="clientsetup-step-77"></a><b>Use <tt>ldapclient list</tt> to
verify.</b><pre>NS_LDAP_FILE_VERSION= 2.0
NS_LDAP_BINDDN= cn=proxyagent,ou=profile,dc=west,dc=example,dc=com
NS_LDAP_BINDPASSWD= {NS1}4a3788e8c053424f
NS_LDAP_SERVERS= 192.168.0.1
NS_LDAP_SEARCH_BASEDN= dc=west,dc=example,dc=com
NS_LDAP_CREDENTIAL_LEVEL= proxy</pre></li></ol><a name="clientsetup-78"></a><h4>Modifying a Manual Client Configuration</h4>
<a name="clientsetup-proc-84"></a><h4><img src="graphics/procedure.gif"> How to Modify a Manual Configuration</h4>
<ol><li><a name="clientsetup-step-87"></a><b>Become superuser or assume an equivalent
role.</b><p>Roles contain authorizations and privileged commands. For
more information about roles, see Chapter 8, Using Role-Based Access Control (Tasks), in <i>System Administration Guide: Security Services</i>.</p></li><li><a name="clientsetup-step-85"></a><b>Use the <tt>ldapclient mod</tt> command
to change the authentication method to <tt>simple</tt>.</b><pre># <tt><b>ldapclient mod</b></tt> <tt>-a</tt> <tt><b>authenticationMethod=simple</b></tt></pre></li><li><a name="clientsetup-step-86"></a><b>Use <tt>ldapclient list</tt> to
verify the change was made.</b><pre># <tt><b>ldapclient list</b></tt>
NS_LDAP_FILE_VERSION= 2.0
NS_LDAP_BINDDN= cn=proxyagent,ou=profile,dc=west,dc=example,dc=com
NS_LDAP_BINDPASSWD= {NS1}4a3788e8c053424f
NS_LDAP_SERVERS= 192.168.0.1
NS_LDAP_SEARCH_BASEDN= dc=west,dc=example,dc=com
NS_LDAP_AUTH= simple
NS_LDAP_CREDENTIAL_LEVEL= proxy</pre></li></ol><a name="clientsetup-71"></a><h4>Uninitializing a Client</h4>
<p><tt>ldapclient uninit</tt> restores the client name service
to what it was prior to the most recent <tt>init</tt>, <tt>modify</tt>,
or <tt>manual</tt> operation. In other words, it performs an &ldquo;undo&rdquo;
on the last step taken. For example, if the client was configured to use <tt>profile1</tt> and was then changed to use <tt>profile2</tt>,
using <tt>ldapclient uninit</tt> would revert the client back to
using  <tt>profile1</tt>.</p>
<a name="clientsetup-proc-72"></a><h4><img src="graphics/procedure.gif"> How to Uninitialize a Client</h4>
<ol><li><a name="clientsetup-step-82"></a><b>Become superuser or assume an equivalent
role.</b><p>Roles contain authorizations and privileged commands. For
more information about roles, see Chapter 8, Using Role-Based Access Control (Tasks), in <i>System Administration Guide: Security Services</i>.</p></li><li><a name="clientsetup-step-83"></a><b>Use <tt>ldapclient uninit</tt>.</b><pre># <tt><b>ldapclient uninit</b></tt>
System successfully recovered</pre></li></ol><a name="clientsetup-57"></a><h4>Setting Up TLS Security</h4>
<hr>
<p><b>Note - </b>The security database files must be readable by everyone. Do not
include any private keys in the <tt>key3.db</tt>.</p>
<hr>
<p>If using TLS, the necessary security databases must be installed. In
particular, the certificate and key database files  are needed. For example,
if you adopt an older database format from Netscape Communicator, two files, <tt>cert7.db</tt> and <tt>key3.db</tt>, are required. Or if
you use a new database format from Mozilla, three files, <tt>cert8.db</tt>, <tt>key3.db</tt> and <tt>secmod.db</tt> are needed. The <tt>cert7.db</tt> or <tt>cert8.db</tt> file contains trusted certificates.
The <tt>key3.db</tt> file contains the client's keys. Even if
the LDAP naming service client does not use client keys, this file must be
present. The <tt>secmod.db</tt> file contains the security modules
such as <tt>PKCS#11</tt> module. This file is not required if
the older format is used.</p>
<hr>
<p><b>Note - </b>Before running <tt>ldapclient</tt>, you should set up
and install the needed security database files described in this section.</p>
<hr>
<p>See the section about configuring LDAP clients to use SSL in the &ldquo;Managing
SSL&rdquo; chapter of the Administrator's Guide for the version of Sun Java System Directory Server you
are using. For information on how to create and manage these files. Once configured,
these files must be stored in the location expected by the LDAP naming services
client. The attribute <tt>certificatePath</tt> is used to determine
this location.  This is by default <tt>/var/ldap</tt>.</p>
<p>For example, after setting up the necessary <tt>cert7.db</tt> and <tt>key3.db</tt> files using Netscape Communicator,
copy the files to the default location.</p>
<pre># <tt><b>cp $HOME/.netscape/cert7.db /var/ldap</b></tt>
# <tt><b>cp $HOME/.netscape/key3.db /var/ldap</b></tt></pre><p>Next, give everyone read access.</p>
<pre># <tt><b>chmod 444 /var/ldap/cert7.db</b></tt>
# <tt><b>chmod 444 /var/ldap/key3.db</b></tt></pre><hr>
<p><b>Note - </b>While Netscape manages the <tt>cert7.db</tt> and <tt>key3.db</tt> files in the <tt>$HOME/.netscape</tt> directory,
Mozilla has its <tt>cert8.db</tt>, <tt>key3.db</tt> and <tt>secmod.db</tt> files managed in a sub-direcotry under <tt>$HOME/.mozilla</tt>. Copies of these security databases must be stored on a local file
system if you are using them for an LDAP naming services client.</p>
<hr>
<a name="clientsetup-89"></a><h4>Configuring PAM</h4>
<p><tt>pam_ldap</tt> is one  authentication and account management
PAM module option for
LDAP. See the <tt>pam_ldap</tt>(5) man
page and <a href="p71.html">Appendix&nbsp;A, Solaris 10 Software Updates to DNS, NIS, and LDAP</a> for more information about the features
currently supported with <tt>pam_ldap</tt>.</p>
<p>If you have selected both the per-user
mode and the self credentials option, then you must also enable the PAM Kerberos
pam_krb5(5) pam modules.  See <tt>pam_krb5</tt>(5)and the <i>System Administration Guide: Security Services</i> documentation for further details.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p46.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p48.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2006 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

