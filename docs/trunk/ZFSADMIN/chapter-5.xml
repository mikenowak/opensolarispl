<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML//EN" "docbook.dtd"[
	<!ENTITY % xinclude SYSTEM "xinclude.mod">
	%xinclude;
]>

<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="gavwq">



<title>Zarządzanie systemami plików ZFS</title>
<toc>
<para>Ten rozdział dostarcza szczegółowych informacji o zarządzaniu systemami plików ZFS. Omawia także takie koncepcje,
jak hierarchiczny układ systemów plików, dziedziczenie właściwości, automatyczne zarządzanie punktami montowania oraz
udostępnianie systemów plików.</para>
<para>ZFS jest lekkim systemem plików zgodnym z POSIX, który jest budowany na
samym szczycie puli nośników danych. Systemy plików mogą być dynamicznie tworzone
i usuwane bez potrzeby uprzedniego przydzielania lub formatowania jakiejkolwiek
przestrzeni. Ponieważ są one tak lekkie i zarządzalne z jednego
centralnego miejsca, można w bardzo łatwy sposób tworzyć ich wiele.
<indexterm xml:id="indexterm-202">
<primary>system plików ZFS</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Systemy plików ZFS są administrowane przy użyciu polecenia <command>zfs</command>.
Polecenie <command>zfs</command> dostarcza zestaw komend, które służą do wykonywania
określonych operacji na systemach plików. Rozdział ten opisuje te komendy szczegółowo.
Obrazy, woluminy i klony są także zarządzane przy użyciu tego polecenia, ale te cechy
są opisane pobieżnie w tym rozdziale. Więcej informacji na temat obrazów i klonów
znajduje się w <olink remap="external" targetdoc="chapter-6.xml" targetptr="gavvx">rozdziale 6, praca z migawkami i klonami ZFS</olink>.
Więcej informacji na temat emulowanych woluminów znajduje się pod
<olink remap="external" targetdoc="chapter-8.xml" targetptr="gaypf">ZFS Volumes</olink>.</para>
<note>
<para>Pojęcie <emphasis>dataset</emphasis> używane w tym rozdziale
jest ogólnym pojęciem odnoszącym się do jakiegokolwiek systemu plików,
obrazu (snapshotu), klonu lub woluminu.<indexterm xml:id="indexterm-203">
<primary>dataset</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</note>
<para>W tym rozdziale zostaną omówione następujące zagadnienia:</para>
<itemizedlist>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gamnq">Tworzenie i usuwanie systemów plików ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazss">Parametry dla systemu plików ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazsu">Uzyskiwanie informacji o systemie plików ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gayns">Zarządzanie parametrami dla ZFS-a</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gaynd">Montowanie i udostępnianie systemów plików ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazvb">Limity i rezerwacje</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="external" targetdoc="chapter-6.xml" targetptr="gbchx">Zapisywanie i odzyskiwanie danych</olink>
</para>
</listitem>
</itemizedlist>
</toc>
<sect1 xml:id="gamnq">
<title>Tworzenie i usuwanie systemów plików ZFS</title>
<para>Systemy plików ZFS tworzy się i usuwa przy użyciu poleceń <command>zfs
create</command> oraz <command>zfs destroy</command>.</para>
<itemizedlist>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazsf">Tworzenie systemu plików ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gammq">Niszczenie systemu plików ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gamnn">Zmiana nazwy systemu plików ZFS</olink>
</para>
</listitem>
</itemizedlist>
<sect2 xml:id="gazsf">
<title>Tworzenie systemu plików ZFS</title>
<para>Systemy plików ZFS tworzy się przy użyciu polecenia <command>zfs create</command>.
Komenda <command>create</command> pobiera jeden argument: nazwę systemu plików
do stworzenia. Nazwa systemu plików określa ścieżkę dostępu począwszy od nazwy puli:
<indexterm xml:id="indexterm-204">
<primary>tworzenie</primary>
<secondary>system plików ZFS</secondary>
<tertiary>opis</tertiary>
</indexterm>
<indexterm xml:id="indexterm-205">
<primary>
<command>zfs create</command>
</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>
<replaceable>nazwa-puli/[nazwa-systemu-plików/]nazwa-systemu-plików</replaceable>
</para>
<para>Nazwa puli i poprzednie nazwy systemu plików w ścieżce określają położenie
w hierarchii, gdzie nowy system plików zostanie utworzony. Wszystkie pośrednie
nazwy systemów plików muszą już istnieć w puli. Ostatnia nazwa w ścieżce określa
nazwę systemu plików, który zostanie utworzony. Nazwa systemu plików musi
odpowiadać zasadom tworzenia nazw, które definiuje podrozdział
<olink remap="external" targetdoc="chapter-1.xml" targetptr="gbcpt">Wymogi nazewnictwa komponentów ZFS</olink>.</para>
<para>W poniższym przykładzie system plików o nazwie <filename>bonwick</filename>
zostanie stworzony w systemie plików <filename>tank/home</filename>.<indexterm xml:id="indexterm-206">
<primary>tworzenie</primary>
<secondary>system plików ZFS</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-207">
<primary>
<command>zfs create</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-208">
<primary>systemy plików ZFS</primary>
<secondary>tworzenie</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs create tank/home/bonwick</userinput>
</screen>
<para>ZFS automatycznie montuje nowo utworzony system plików, jeśli operacja tworzenia
powiodła się. Domyślnie systemy plików są montowane jako <replaceable>/dataset</replaceable>,
używając ścieżki dostarczanej jako nazwa systemu plików dla polecenia <command>create</command>.
W tym przykładzie nowo utworzony system plików <filename>bonwick</filename> jest dostępny
jako <filename>/tank/home/bonwick</filename>. Więcej informacji na temat automatycznego
zarządzania punktami montowania znajduje się pod
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gaztn">Managing ZFS Mount Points</olink>.<indexterm xml:id="indexterm-209">
<primary>punkt montowania</primary>
<secondary>default for ZFS file system</secondary>
</indexterm>
<indexterm xml:id="indexterm-210">
<primary>systemy plików ZFS</primary>
<secondary>domyślny punkt montowania</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>Więcej informacji na temat polecenia <command>zfs create</command> znajduje się pod
<olink remap="external" targetdoc="819-2240" targetptr="zfs-1m">
<citerefentry>
<refentrytitle>zfs</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
<para>Dostępna jest nowa funkcja, która umożliwia ustawienie parametrów systemu plików,
kiedy jest on tworzony.</para>
<para>W poniższym przykładzie punkt montowania zostanie ustawiony na
<filename>/export/zfs</filename> w czasie tworzenia systemu plików <literal>tank/home</literal>.</para>
<screen># <userinput>zfs create -o mountpoint=/export/zfs tank/home</userinput>
</screen>
<para>Więcej informacji o parametrach systemu plików znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazss">Introducing ZFS Properties</olink>.</para>
</sect2>
<sect2 xml:id="gammq">
<title>Niszczenie systemu plików ZFS</title>
<para>W celu zniszczenia systemu plików ZFS należy użyć polecenia <command>zfs destroy</command>.
Zniszczony system plików zostaje automatycznie odmontowany i wyłączony z udostępniania.
Więcej informacji na temat automatycznie zarządzanym montowaniem lub udostępnianiem systemów
plików znajduje się pod
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gbala">Automatic Mount Points</olink>.<indexterm xml:id="indexterm-211">
<primary>niszczenie</primary>
<secondary>system plików ZFS</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-212">
<primary>
<command>zfs destroy</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-213">
<primary>systemy plików ZFS</primary>
<secondary>niszczenie</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>W podanym przykładzie system plików <filename>tabriz</filename>
zostanie zniszczony.</para>
<screen># <userinput>zfs destroy tank/home/tabriz</userinput>
</screen>
<caution>
<para>Przy użyciu komendy <command>destroy</command> nie ma żadnej prośby o potwierdzenie operacji.
Proszę używać ze wzmożoną ostrożnością.</para>
</caution>
<para>Jeśli system plików przeznaczony do zniszczenia jest zajęty i w związku z tym
nie może zostać odmontowany, wykonanie polecenia <command>zfs destroy</command>
nie powiedzie się. W celu zniszczenia aktywnego systemu plików, proszę użyć
opcji <option>f</option>. Proszę używać tej opcji ostrożnie, ponieważ
może ona odmontować, wyłączyć ze współdzielenia i zniszczyć aktywne systemy plików,
co może spowodować nieoczekiwane zachowanie się aplikacji.</para>
<screen># <userinput>zfs destroy tank/home/ahrens</userinput>
cannot unmount 'tank/home/ahrens': Device busy

# <userinput>zfs destroy -f tank/home/ahrens</userinput>
</screen>
<para>Wykonanie polecenia <command>zfs destroy</command> również nie powiedzie się,
jeśli system plików ma potomne datasety. W celu rekursywnego zniszczenia systemu plików
i wszystkich potomnych dla niego, proszę użyć opcji <option>r</option>. Proszę zauważyć,
że rekursywne niszczenie systemów plików zniszczy również obrazy (snapshoty), więc
należy używać tej opcji ostrożnie.</para>
<screen># <userinput>zfs destroy tank/ws</userinput>
cannot destroy 'tank/ws': filesystem has children
use '-r' to destroy the following datasets:
tank/ws/billm
tank/ws/bonwick
tank/ws/maybee

# <userinput>zfs destroy -r tank/ws</userinput>
</screen>
<para>Jeśli system plików przeznaczony do zniszczenia ma pośrednie zależności,
nawet próba rekursywnego zniszczenia opisana powyżej nie powiedzie się. Żeby wymusić
zniszczenie <emphasis>wszystkich</emphasis> zależności, włącznie z klonami systemów plików
poza docelową hierarchią, musi zostać użyta opcja <option>R</option>. Proszę używać
tej opcji ze szczególną ostrożnością.<indexterm xml:id="indexterm-214">
<primary>niszczenie</primary>
<secondary>system plików ZFS oraz systemy zależne</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-215">
<primary>
<command>zfs destroy -r</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-216">
<primary>systemy plików ZFS</primary>
<secondary>niszczenie wraz z systemami zależnymi</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs destroy -r tank/home/schrock</userinput>
cannot destroy 'tank/home/schrock': filesystem has dependent clones
use '-R' to destroy the following datasets:
tank/clones/schrock-clone

# <userinput>zfs destroy -R tank/home/schrock</userinput>
</screen>
<caution>

<para>Po użyciu opcji <option>f</option>, <option>r</option> lub <option>
R</option> nie ma żadnej prośby o potwierdzenie operacji, więc proszę używać tych
opcji ostrożnie.</para>
</caution>
<para>Więcej informacji o obrazach i klonach znajduje się w <olink remap="external" targetdoc="chapter-6.xml" targetptr="gavvx">rozdziale 6, praca z migawkami i klonami ZFS-a</olink>.</para>
</sect2>
<sect2 xml:id="gamnn">
<title>Zmiana nazwy systemu plików ZFS</title>
<para>Systemy plików mogą mieć zmienianą nazwę przy użyciu polecenia <command>zfs rename</command>.
Używając komendy <command>rename</command> można przeprowadzić następujące operacje:<indexterm xml:id="indexterm-217">
<primary>zmiana nazwy</primary>
<secondary>system plików ZFS</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-218">
<primary>
<command>zfs rename</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-219">
<primary>systemy plików ZFS</primary>
<secondary>zmiana nazwy</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<itemizedlist>
<listitem>
<para>Zmiana nazwy systemu plików</para>
</listitem>
<listitem>
<para>Przeniesienie systemu plików do nowej lokalizacji w ramach hierarchii systemu
plików ZFS</para>
</listitem>
<listitem>
<para>Zmiana nazwy systemu plików i przeniesienie go włącznie z hierarchią systemu
plików ZFS</para>
</listitem>
</itemizedlist>
<para>Poniższy przykład używa komendy <command>rename</command> w celu
prostej zmiany nazwy systemu plików:</para>
<screen># <userinput>zfs rename tank/home/kustarz tank/home/kustarz_old</userinput>
</screen>
<para>Ten przykład zmienia nazwę systemu plików z <filename>kustarz</filename> na <filename>kustarz_old</filename>. </para>
<para>Kolejny przykład pokazuje, jak używać polecenia <command>zfs rename</command> do
zmiany lokalizacji systemu plików.</para>
<screen># <userinput>zfs rename tank/home/maybee tank/ws/maybee</userinput>
</screen>
<para>W tym przykładzie system plików <filename>maybee</filename> zostanie przeniesiony
z <filename>tank/home</filename> do <filename>tank/ws</filename>. Jeśli
następuje próba zmiany lokalizacji systemu plików przy użyciu polecenia
<command>rename</command>, nowa lokalizacja musi zawierać się w obrębie
tej samej puli i mieć wystarczającą ilość wolnego miejsca, żeby
zmieścić nowy system plików. Jeśli nowa lokalizacja nie zapewnia wystarczającej
ilości miejsca, przypuszczalnie z powodu osiągnięcia limitu (quoty), przeniesienie
systemu plików nie powiedzie się.</para>
<para>Więcej informacji na temat limitów znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazvb">ZFS Quotas and Reservations</olink>.</para>
<para>Operacja zmiany nazwy próbuje wykonać sekwencję odmontowania i przemontowania wskazanego oraz
potomnych systemów plików. Operacja zmiany nazwy nie powiedzie się, jeśli nie będzie
w stanie odmontować aktywnego systemu plików. Jeśli wystąpi taki problem,
potrzebne będzie wymuszenie odmontowania systemu plików.</para>
<para>Więcej informacji o zmianie nazwy obrazów (snapshotów) znajduje się pod
<olink remap="external" targetdoc="chapter-6.xml" targetptr="gbion">Renaming ZFS Snapshots</olink>.</para>
</sect2>
</sect1>
<sect1 xml:id="gazss">
<title>Wprowadzenie do parametrów dla systemu plików ZFS</title>
<para>Parametry są podstawowym mechanizmem, który jest używany w celu kontroli zachowania
się systemów plików, woluminów, obrazów i klonów. O ile nie określono inaczej, parametry
opisane w tym podrozdziale odnoszą się do wszystkich typów datasetu.<indexterm xml:id="indexterm-220">
<primary>właściwości ZFS</primary>
<secondary>opis</secondary>
</indexterm>
<indexterm xml:id="indexterm-221">
<primary>właściwości ZFS</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Parametry dzielą się na tylko do odczytu (statystyki) oraz te z możliwością zdefiniowania. Większość
parametrów przeznaczonych do ustawiania jest także dziedziczona. Dziedziczony parametr jest takim,
którego ustawiona wartość na "rodzicu" jest dziedziczona na wszystkie potomne datasety.</para>
<itemizedlist>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazsy">Główne parametry ZFS tylko do odczytu</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazsd">Główne ustawialne parametry ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gdrcw">Parametry użytkownika ZFS</olink>
</para>
</listitem>
</itemizedlist>
<para>Parametry są podzielone na dwa rodzaje, główne oraz definiowane przez użytkownika.
Główne parametry udostępniają wewnętrzne statystyki lub kontrolują zachowanie systemów
plików ZFS. Dodatkowo główne parametry są albo ustawialne lub tylko do odczytu.
Parametry użytkownika nie mają wpływu na zachowanie się systemu plików ZFS, ale można
ich użyć w celu opatrywania komentarzami datasetów w sposób bardziej jasny dla środowiska.
Więcej informacji o parametrach użytkownika ZFS znajduje się pod
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gdrcw">ZFS User Properties</olink>.</para>
<para>Większość ustawialnych parametrów jest także dziedziczona. Parametr dziedziczony jest takim,
że kiedy jego wartość zostanie ustawiona dla rodzica, jest propagowany w dół dla wszystkich potomków.</para>
<para>Wszystkie dziedziczone parametry mają przypisane źródło (source). Źródło określa, w jaki sposób
parametr został przypisany. Źródło parametru może przyjmować następujące parametry:<indexterm xml:id="indexterm-222">
<primary>ZFS properties</primary>
<secondary>inheritable, description of</secondary>
</indexterm>
<indexterm xml:id="indexterm-223">
<primary>properties of ZFS</primary>
<secondary>description of heritable properties</secondary>
</indexterm>
</para>
<variablelist>
<varlistentry>
<term>
<literal>local</literal>
</term>
<listitem>
<para>Źródło zdefiniowane jako <literal>local</literal> określa, że parametr został
dokładnie określony na tym datasecie przy użyciu polecenia
<command>zfs set</command>, tak jak to opisano w <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazsp">Setting ZFS Properties</olink>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>inherited from</literal> <replaceable>dataset-name</replaceable>
</term>
<listitem>
<para>Wartość <literal>inherited from</literal> <replaceable>nazwa-datasetu</replaceable> oznacza, że parametr został odziedziczony
z podanego poprzednika.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>default</literal>
</term>
<listitem>
<para>Wartość <literal>default</literal> (domyślny) oznacza, że parametr nie został
ani odziedziczony, ani ustawiony lokalnie. To źródło jest wynikiem nie posiadania
jakiegokolwiek przodka mającego ustawionego parametr ze źródłem zdefiniowanym jako
<literal>local</literal>.</para>
</listitem>
</varlistentry>
</variablelist>
<para>Poniższa tabela zestawia wszystkie główne parametry (tylko do odczytu i ustawialne)
systemu plików ZFS. Główne parametry tylko do odczytu są oznaczone. Wszystkie pozostałe
wymienione są ustawialne. Więcej informacji o parametrach użytkownika znajduje się pod
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gdrcw">ZFS User Properties</olink>.</para>
<table frame="topbot" xml:id="gcfgr">

<title>Opisy głównych parametrów ZFS</title>
<tgroup cols="4" colsep="0" rowsep="0">
<colspec colwidth="16.17*"/>
<colspec colwidth="11.73*"/>
<colspec colwidth="13.42*"/>
<colspec colwidth="58.65*"/>
<thead>
<row rowsep="1">
<entry>
<para>Nazwa Parametru</para>
</entry>
<entry>
<para>Typ</para>
</entry>
<entry>
<para>Wartość domyślna</para>
</entry>
<entry>
<para>Opis</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry colsep="0" rowsep="1">
<para>
<literal>aclinherit</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Łańcuch znaków</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>secure</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa w jaki sposób wpisy ACL są dziedziczone, kiedy są tworzone pliki i katalogi.
Dopuszczalne wartości to <literal>discard</literal>, <literal>noallow</literal>, <literal>secure</literal> oraz <literal>passthrough</literal>.
Opis tych wartości znajduje się pod <olink remap="external" targetdoc="chapter-7.xml" targetptr="gbaaz">ACL Property Modes</olink>.<indexterm xml:id="indexterm-224">
<primary>ZFS properties</primary>
<secondary>
<property>aclinherit</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-225">
<primary>settable properties of ZFS</primary>
<secondary>
<property>aclinherit</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-226">
<primary>ACL property mode</primary>
<secondary>
<property>aclinherit</property>
</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<literal>aclmode</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Łańcuch znaków</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>groupmask</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa w jaki sposób wpis ACL jest zmieniany podczas operacji <literal>chmod</literal>.
Dopuszczalne wartości to <literal>discard</literal>, <literal>groupmask</literal> oraz <literal>passthrough</literal>.
Opis tych wartości znajduje się pod <olink remap="external" targetdoc="chapter-7.xml" targetptr="gbaaz">ACL Property Modes</olink>.<indexterm xml:id="indexterm-227">
<primary>ZFS properties</primary>
<secondary>
<property>aclmode</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-228">
<primary>settable properties of ZFS</primary>
<secondary>
<property>aclmode</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-229">
<primary>ACL property mode</primary>
<secondary>
<property>aclmode</property>
</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>atime</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Logiczny</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>on</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa czy czas dostępu do pliku jest aktualizowany za każdym razem,
gdy ten jest czytany. Ustawienie tego parametru na "off" zapobiega generowaniu
zapisów w czasie odczytu do pliku i może znacząco wpłynąć na podniesienie
wydajności, ale jednocześnie spowodować problemy z programami do poczty
elektronicznej i podobnymi narzędziami użytkowymi.<indexterm xml:id="indexterm-230">
<primary>ZFS properties</primary>
<secondary>
<property>atime</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-231">
<primary>settable properties of ZFS</primary>
<secondary>
<property>atime</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-232">
<primary>
<property>atime</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>available</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Parametr tylko do odczytu, który określa dostępne miejsce dla datasetu
i wszystkich jego dzieci, przy założeniu braku jakiejkolwiek innej aktywności w puli.
Ponieważ miejsce jest współdzielone wewnątrz puli, dostępne miejsce może być
ograniczone przez różne inne czynniki włączając w to fizyczny rozmiar puli, limity (quoty),
rezerwacje lub inne datasety w puli.<indexterm xml:id="indexterm-233">
<primary>ZFS properties</primary>
<secondary>
<property>available</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-234">
<primary>read-only properties of ZFS</primary>
<secondary>
<property>available</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-235">
<primary>
<property>available</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Do tego parametru można także odwołać się po skróconej nazwie, <literal>avail</literal>.</para>
<para>Więcej informacji na temat liczenia miejsca w puli znajduje się pod <olink remap="external" targetdoc="chapter-3.xml" targetptr="gbchp">ZFS Space Accounting</olink>.</para>
</entry>
</row>
<row>
<entry rowsep="1">
<para>
<literal>canmount</literal>
</para>
</entry>
<entry rowsep="1">
<para>Logiczny</para>
</entry>
<entry rowsep="1">
<para>on</para>
</entry>
<entry rowsep="1">
<para>Określa, czy dany system plików może być montowany przy użyciu polecenia <command>zfs</command> <command>mount</command>. Ten parametr
może być ustawiony dla dowolnego systemu plików i nie jest dziedziczony. Jednakże, kiedy
ten parametr jest ustawiony, punkt montowania może być dziedziczony na potomne systemy plików,
ale system plików sam w sobie nigdy nie będzie zamontowany. Więcej informacji znajduje się
pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gdrcf">The <command>canmount</command> Property</olink>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>checksum</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Łańcuch znaków</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>on</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa sposób użycia sum kontrolnych do weryfikowania integralności danych.
Domyślna wartość jest ustawiona na <literal>on</literal>, która automatycznie wybiera
odpowiedni algorytm, aktualnie <literal>fletcher2</literal>.
Dopuszczalne wartości to <literal>on, off, fletcher2</literal>, <literal>fletcher4</literal> oraz <literal>sha256</literal>.
Wartość <literal>off</literal> wyłącza sprawdzanie integralności danych użytkownika.
Wartość <literal>off</literal> nie jest zalecana.<indexterm xml:id="indexterm-236">
<primary>ZFS properties</primary>
<secondary>
<property>checksum</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-237">
<primary>settable properties of ZFS</primary>
<secondary>
<property>checksum</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-238">
<primary>
<property>checksum</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>compression</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Łańcuch znaków</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>off</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa rodzaj użytego algorytmu kompresji dla tego datasetu. Aktualnie
można wybrać pomiędzy <literal>lzjb</literal>, <literal>gzip</literal> lub <literal>gzip-</literal>
<replaceable>N</replaceable>.
Włączenie kompresji na systemie plików z istniejącymi już danymi będzie kompresować tylko
nowe dane. Istniejące dane pozostaną nieskompresowane.<indexterm xml:id="indexterm-239">
<primary>ZFS properties</primary>
<secondary>
<property>compression</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-240">
<primary>settable properties of ZFS</primary>
<secondary>
<property>compression</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-241">
<primary>
<property>compression</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Do tego parametru można także odwołać się po skróconej nazwie, <literal>compress</literal>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>compressratio</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Parametr tylko do odczytu, który określa współczynnik kompresji
osiągnięty dla tego datasetu, wyrażony jako mnożnik.
Kompresja może być włączona przez wykonanie
<literal>zfs set compression=on</literal> <replaceable>dataset</replaceable>.<indexterm xml:id="indexterm-242">
<primary>ZFS properties</primary>
<secondary>
<property>compressratio</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-243">
<primary>read-only properties of ZFS</primary>
<secondary>
<property>compression</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-244">
<primary>
<property>compressratio</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Wartość jest wyliczana z logicznego rozmiaru wszystkich plików i faktycznej wielkości danych
fizycznych. Obejmuje również wymierne oszczędności wywołane poprzez użycie parametru <property>compression</property>.</para>
</entry> 
</row>
<row>
<entry rowsep="1">
<para>
<literal>copies</literal>
</para>
</entry>
<entry rowsep="1">
<para>Liczba</para>
</entry>
<entry rowsep="1">
<para>1</para>
</entry>
<entry rowsep="1">
<para>Ustawia ilość kopii danych użytkownika dla systemu plików. Aktualnie
dostępne wartości to 1, 2 lub 3. Te kopie są dodatkiem do jakiejkolwiek redundancji
danych na poziomie puli. Miejsce zużyte przez wielokrotne kopie danych użytkownika jest
wliczany do odpowiedniego pliku i datasetu i wpływa na wartość limitu (quoty) i rezerwacji.
Dodatkowo parametr <property>used</property> jest aktualizowany w przypadku włączenia
wielokrotnych kopii. Ustawianie tego parametru należy rozważyć w czasie tworzenia systemu plików,
ponieważ zmiana go na istniejącym systemie plików wpłynie tylko na nowo zapisywane dane.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>creation</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Parametr tylko do odczytu, który określa datę i czas, kiedy dataset
został stworzony.<indexterm xml:id="indexterm-245">
<primary>ZFS properties</primary>
<secondary>
<property>creation</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-246">
<primary>read-only properties of ZFS</primary>
<secondary>
<property>creation</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-247">
<primary>
<property>creation</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>devices</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Logiczny</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>on</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa możliwość otwierania plików urządzeń (device files) w danym systemie plików.<indexterm xml:id="indexterm-248">
<primary>ZFS properties</primary>
<secondary>
<property>devices</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-249">
<primary>settable properties of ZFS</primary>
<secondary>
<property>devices</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-250">
<primary>
<property>devices</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>exec</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Logiczny</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>on</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa, czy programy znajdujące się na tym systemie plików są dopuszczone do wykonania.
Dodatkowo, jeśli parametr ten jest ustawiony na <literal>off</literal>, wywołania <command>mmap(2)</command>
z <literal>PROT_EXEC</literal> są zabronione.<indexterm xml:id="indexterm-251">
<primary>ZFS properties</primary>
<secondary>
<property>exec</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-252">
<primary>settable properties of ZFS</primary>
<secondary>
<property>exec</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-253">
<primary>
<property>exec</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>mounted</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Logiczny</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Parametr tylko do odczytu określający, czy system plików, klon lub
obraz jest aktualnie zamontowany. Ten parametr nie ma zastosowania w odniesieniu
do woluminów. Parametr może przyjmować wartości <literal>yes</literal> lub <literal>no</literal>.<indexterm xml:id="indexterm-254">
<primary>ZFS properties</primary>
<secondary>
<property>mounted</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-255">
<primary>read-only properties of ZFS</primary>
<secondary>
<property>mounted</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-256">
<primary>
<property>mounted</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>mountpoint</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Łańcuch znaków</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa punkt montowania dla systemu plików. Kiedy wartość parametru <property>mountpoint</property>
zostaje zmieniona, system plików i wszystkie dla niego potomne, które dziedziczą punkt montowania zostają odmontowane.
Jeśli nową wartością jest <literal>legacy</literal>, wtedy pozostaną odmontowane. W przeciwnym przypadku,
jeśli parametr ten miał poprzednio wartość <literal>legacy</literal> lub <literal>none</literal>,
lub był zamontowany zanim parametr został zmieniony, zostaną automatycznie zamontowane w nowej lokalizacji.
Dodatkowo wszystkie udostępniane systemy plików zostaną wyłączone z udostępniania w starej lokalizacji i udostępnione
z nowej.<indexterm xml:id="indexterm-257">
<primary>ZFS properties</primary>
<secondary>
<property>mountpoint</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-258">
<primary>settable properties of ZFS</primary>
<secondary>
<property>mountpoint</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-259">
<primary>
<property>mountpoint</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Więcej informacji o tym parametrze znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gaztn">Managing ZFS Mount Points</olink>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>origin</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Łańcuch znaków</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Parametr tylko do odczytu dla klonów lub woluminów, który określa obraz
systemu plików, z którego klon został stworzony. Oryginalny obraz nie może
zostać zniszczony (nawet przy użyciu opcji <option>
r</option> lub <option>
f</option>) tak długo, jak klon istnieje.</para>
<para>Niesklonowane systemy plików mają ten parametr ustawiony jako <literal>none</literal>.<indexterm xml:id="indexterm-260">
<primary>ZFS properties</primary>
<secondary>
<property>origin</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-261">
<primary>read-only properties of ZFS</primary>
<secondary>
<property>origin</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-262">
<primary>
<property>origin</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>quota</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba (lub <literal>none</literal>)</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>none</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Ogranicza wielkość dostępnego miejsca dla datasetu i jego potomków.
Ten parametr wymusza twarde ograniczenie miejsca do wykorzystania, włączając w to
miejsce zajęte przez potomne datasety, włącznie z innymi systemami plików i obrazami.
Ustawienie limitu na potomnym datasecie, gdy już rodzic ma takowy zdefiniowany nie
nadpisuje limitu rodzica, tylko raczej narzuca dodatkowy limit. Parametr ten
nie może być ustawiony dla woluminów, w tym przypadku parametr 
<property>volsize</property> zachowuje się analogicznie.<indexterm xml:id="indexterm-263">
<primary>ZFS properties</primary>
<secondary>
<property>quota</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-264">
<primary>settable properties of ZFS</primary>
<secondary>
<property>quota</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-265">
<primary>
<property>quota</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Więcej informacji o ustawianiu limitów znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazud">Setting Quotas on ZFS File Systems</olink>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>readonly</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Logiczny</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>off</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa, czy dataset może być zmieniany. Jeśli parametr ten jest ustawiony na <literal>on</literal>,
nie są dopuszczalne jakiekolwiek modyfikacje w datasecie.<indexterm xml:id="indexterm-266">
<primary>ZFS properties</primary>
<secondary>
<property>read-only</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-267">
<primary>settable properties of ZFS</primary>
<secondary>
<property>read-only</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-268">
<primary>
<property>read-only</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Do tego parametru można także odwołać się po skróconej nazwie, <literal>rdonly</literal>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>recordsize</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>128K</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa sugerowaną wielkość bloku dla plików na tym systemie plików.<indexterm xml:id="indexterm-269">
<primary>ZFS properties</primary>
<secondary>
<property>recordsize</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-270">
<primary>settable properties of ZFS</primary>
<secondary>
<property>recordsize</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-271">
<primary>
<property>recordsize</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Do tego parametru można także odwołać się po skróconej nazwie, <property>recsize</property>. Więcej informacji znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfgv">The <property>recordsize</property> Property</olink>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>referenced</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Parametr tylko do odczytu, który określa wielkość danych dostępnych w datasecie,
które mogą być lub nie współdzielone z innymi datasetami w puli.<indexterm xml:id="indexterm-272">
<primary>ZFS properties</primary>
<secondary>
<property>referenced</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-273">
<primary>read-only properties of ZFS</primary>
<secondary>
<property>referenced</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-274">
<primary>
<property>referenced</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Kiedy jest tworzony obraz lub klon systemu plików, początkowo odnosi się do tej
samej ilości zajętego miejsca, co system plików lub obraz, z którego został stworzony,
ponieważ ich zawartość jest identyczna.</para>
<para>Do tego parametru można także odwołać się po skróconej nazwie, <property>refer</property>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>reservation</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba (lub <literal>none</literal>)
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>none</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Minimalna wielkość dostępnego miejsca gwarantowana dla datasetu i
jego potomków. Jeżeli ilość użytego miejsca jest poniżej tej wartości,
dataset jest traktowany, jakby zużywał miejsce określone przez rezerwację.
Rezerwacje są tak wyliczone, aby zmieściły się w przestrzeni nadrzędnego datasetu
i działają na niekorzyść limitom i rezerwacjom tego datasetu.<indexterm xml:id="indexterm-275">
<primary>ZFS properties</primary>
<secondary>
<property>reservation</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-276">
<primary>settable properties of ZFS</primary>
<secondary>
<property>reservation</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-277">
<primary>
<property>reservation</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Do tego parametru można także odwołać się po skróconej nazwie, <property>reserv</property>.</para>
<para>Więcej informacji można znaleźć pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gbdbb">Setting Reservations on ZFS File Systems</olink>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>sharenfs</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Łańcuch znaków</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>off</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa, czy system plików jest dostępny po protokole NFS i z jakimi opcjami.
Jeśli parametr jest ustawiony na <literal>on</literal>, polecenie <command>zfs share</command>
jest wykonywane bez żadnych opcji. W przeciwnym wypadku polecenie <command>zfs share</command>
jest wykonywane z opcjami odpowiadającymi zawartości tego parametru. W przypadku ustawienia
tego parametru na <literal>off</literal> do zarządzania systemem plików należy używać
tradycyjnych poleceń <command>share</command> oraz <command>unshare</command>, a także
pliku <filename>dfstab</filename>.<indexterm xml:id="indexterm-278">
<primary>ZFS properties</primary>
<secondary>
<property>sharenfs</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-279">
<primary>settable properties of ZFS</primary>
<secondary>
<property>sharenfs</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-280">
<primary>
<property>sharenfs</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Więcej informacji o udostępnianiu systemów plików ZFS znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gamnd">Sharing and Unsharing ZFS File Systems</olink>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>setuid</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Logiczny</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>on</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa, czy bit <literal>setuid</literal> ma znaczenie w danym
systemie plików.<indexterm xml:id="indexterm-281">
<primary>ZFS properties</primary>
<secondary>
<property>setuid</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-282">
<primary>settable properties of ZFS</primary>
<secondary>
<property>setuid</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-283">
<primary>
<property>setuid</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<literal>snapdir</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Łańcuch znaków</para>
</entry>
<entry colsep="0" rowsep="1">
<para>
<literal>hidden</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa, czy katalog <filename>.zfs</filename> jest ukryty czy widoczny
w korzeniu systemu plików. Więcej informacji o używaniu obrazów (snapshotów)
znajduje się pod <olink remap="external" targetdoc="chapter-6.xml" targetptr="gbciq">Overview of ZFS Snapshots</olink>.<indexterm xml:id="indexterm-284">
<primary>ZFS properties</primary>
<secondary>
<property>snapdir</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-285">
<primary>settable properties of ZFS</primary>
<secondary>
<property>snapdir</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-286">
<primary>
<property>snapdir</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<literal>type</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Łańcuch znaków</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Parametr tylko do odczytu, który określa rodzaj datasetu. Możliwe wartości to <literal>filesystem</literal> (system
plików lub klon), <literal>volume</literal> (wolumin) lub <literal>snapshot</literal> (obraz).<indexterm xml:id="indexterm-287">
<primary>ZFS properties</primary>
<secondary>
<property>type</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-288">
<primary>read-only properties of ZFS</primary>
<secondary>
<property>type</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-289">
<primary>
<property>type</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>used</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Parametr tylko do odczytu określający wielkość zajętego miejsca przez dany dataset
i wszystkie dla niego potomne.<indexterm xml:id="indexterm-290">
<primary>ZFS properties</primary>
<secondary>
<property>used</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-291">
<primary>read-only properties of ZFS</primary>
<secondary>
<property>used</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-292">
<primary>
<property>used</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Dokładniejszy opis znajduje się w podrozdziale opisującym <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfgz">parametr <property>used</property></olink>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>volsize</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa logiczny rozmiar woluminu.<indexterm xml:id="indexterm-293">
<primary>ZFS properties</primary>
<secondary>
<property>volsize</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-294">
<primary>settable properties of ZFS</primary>
<secondary>
<property>volsize</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-295">
<primary>
<property>volsize</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Dokładniejszy opis znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfhk">The <property>volsize</property> Property</olink>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<literal>volblocksize</literal>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Liczba</para>
</entry>
<entry colsep="0" rowsep="1">
<para>8 Kbytes</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa wielkość bloku dla woluminu. Rozmiar bloku nie może zostać zmieniony,
jeśli wystąpiły już jakieś operacje zapisu na woluminie, więc należy go ustawiać
w czasie tworzenia datasetu. Domyślną wielkością bloku dla
woluminów jest 8 kilobajtów. Dopuszczalne wartości to jakakolwiek potęga
liczby 2 w zakresie od 512 bajtów do 128 kilobajtów.<indexterm xml:id="indexterm-296">
<primary>ZFS properties</primary>
<secondary>
<property>volblocksize</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-297">
<primary>settable properties of ZFS</primary>
<secondary>
<property>volblocksize</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-298">
<primary>
<property>volblocksize</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Do tego parametru można także odwołać się po skróconej nazwie, <property>volblock</property>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<property>zoned</property>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Logiczny</para>
</entry>
<entry colsep="0" rowsep="1">
<para>BRAK</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Określa, czy dataset został dodany do nieglobalnej zony. Jeśli ten
parametr jest ustawiony, wówczas punkt montowania nie jest uwzględniany
w zonie globalnej, w związku z tym ZFS nie może zamontować tego systemu
plików w zonie globalnej. Kiedy zostanie zainstalowana zona,
parametr ten jest ustawiany dla każdego dodanego systemu pliku do niej.<indexterm xml:id="indexterm-299">
<primary>ZFS properties</primary>
<secondary>
<property>zoned</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-300">
<primary>settable properties of ZFS</primary>
<secondary>
<property>zoned</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-301">
<primary>
<property>zoned</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Więcej informacji na temat używania systemu plików ZFS razem z zonami znajduje się pod <olink remap="external" targetdoc="chapter-8.xml" targetptr="gayov">Using ZFS on a Solaris System With Zones Installed</olink>.</para>
</entry>
</row>
<row>
<entry rowsep="1">
<para>
<literal>xattr</literal>
</para>
</entry>
<entry rowsep="1">
<para>Logiczny</para>
</entry>
<entry rowsep="1">
<para>
<literal>on</literal>
</para>
</entry>
<entry rowsep="1">
<para>Określa, czy rozszerzone atrybuty są włączone czy wyłączone dla danego systemu plików.
domyślną wartością jest <literal>on</literal>.<indexterm xml:id="indexterm-302">
<primary>ZFS properties</primary>
<secondary>
<property>xattr</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-303">
<primary>settable properties of ZFS</primary>
<secondary>
<property>xattr</property>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-304">
<primary>
<property>xattr</property> property</primary>
<secondary>opis</secondary>
</indexterm>
</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<sect2 xml:id="gazsy">
<title>Główne parametry ZFS tylko do odczytu</title>
<para>Główne parametry do odczytu mogą być tylko odczytywane, nie można
ich natomiast ustawić. Nie są również dziedziczone. Niektóre z tych
parametrów są specyficzne dla pewnych rodzajów datasetu. W takim przypadku
rodzaj ten jest wspomniany w opisie parametru w <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfgr">tabeli 5-1</olink>.<indexterm xml:id="indexterm-305">
<primary>ZFS properties</primary>
<secondary>read-only</secondary>
</indexterm>
<indexterm xml:id="indexterm-306">
<primary>read-only properties of ZFS</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Główne parametry tylko do odczytu są wymienione i opisane w <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfgr">tabeli 5–1</olink>.</para>
<itemizedlist>
<listitem>
<para>
<property>available</property>
</para>
</listitem>
<listitem>
<para>
<property>creation</property> </para>
</listitem>
<listitem>
<para>
<property>mounted</property>
</para>
</listitem>
<listitem>
<para>
<property>origin</property>
</para>
</listitem>
<listitem>
<para>
<property>compressratio</property>
</para>
</listitem>
<listitem>
<para>
<property>referenced</property> </para>
</listitem>
<listitem>
<para>
<property>type</property>
</para>
</listitem>
<listitem>
<para>
<property>used</property>
</para>
<para>Więcej informacji znajduje się w podrozdziale opisującym
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfgz">parametr <property>used</property></olink>.</para>
</listitem>
</itemizedlist>
<para>Więcej informacji na temat zliczania miejsca włącznie z opisem parametrów <property>used</property>, <property>referenced</property> oraz <property>available</property> znajduje się pod <olink remap="external" targetdoc="chapter-3.xml" targetptr="gbchp">ZFS Space Accounting</olink>.</para>
<sect3 xml:id="gcfgz">
<title>Parametr <property>used</property></title>
<para>Ilość miejsca zajęta przez aktualny dataset i potomne dla niego.
Wartość ta jest sprawdzana z uwzględnieniem parametrów limitu i rezerwacji.
Nie uwzględnia rezerwacji bieżącego datasetu, ale bierze pod uwagę
rezerwacje wszystkich potomnych. Ilość miejsca, jaką zużywa dataset
od nadrzędnego dla niego, jak również ilość miejsca, która jest zwalniana podczas
rekursywnego niszczenia datasetu jest większa od aktualnie zużytego
miejsca i jego rezerwacji.
<indexterm xml:id="indexterm-307">
<primary>ZFS properties</primary>
<secondary>
<property>used</property>
</secondary>
<tertiary>detailed description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-308">
<primary>settable properties of ZFS</primary>
<secondary>
<property>used</property>
</secondary>
<tertiary>detailed description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-309">
<primary>
<property>used</property> property</primary>
<secondary>detailed description</secondary>
</indexterm>
</para>
<para>W momencie tworzenia obrazów (snapshotów) ich przestrzeń jest pierwotnie
współdzielona między nimi a systemem plików, a także prawdopodobnie poprzednimi
obrazami. W momencie zmiany danych w systemie plików przestrzeń, która pierwotnie
była współdzielona staje się unikalna dla obrazu i jest wliczana jako przestrzeń
zużywana przez obraz. Dodatkowo usunięcie snapshotów może zwiększyć wielkość przestrzeni
unikalnej (i używanej przez) inne obrazy.
Więcej informacji o obrazach i niuansach związanych z miejscem znajduje się pod <olink remap="external" targetdoc="chapter-3.xml" targetptr="gayra">Out of Space Behavior</olink>.</para>
<para>Ilość miejsca używanego, dostępnego lub referencyjnego nie jest zliczana
w trakcie trwających zmian w systemie plików. Generalnie takie zmiany są zliczane
po upływie kilku sekund. Zatwierdzenie zmian poprzez użycie <literal>fsync(3c)</literal>
lub <literal>O_SYNC</literal> nie daje żadnej gwarancji, że informacje o użyciu
przestrzeni zostaną zaktualizowane natychmiast.</para>
</sect3>
</sect2>
<sect2 xml:id="gazsd">
<title>Główne ustawialne parametry systemu plików ZFS</title>
<para>Główne ustawialne parametry to są takie, których wartości mogą
być jednocześnie odczytywane, jak i ustawiane. Są one ustawiane przy użyciu
polecenia <command>zfs set</command>, jak opisano to pod
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazsp">Setting ZFS Properties</olink> lub
poprzez użycie polecenia <command>zfs create</command>, jak zostało opisane w <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazsf">Creating a ZFS File System</olink>.
Z wyjątkiem limitu i rezerwacji, główne ustawialne parametry są dziedziczone.
Więcej informacji o limitach i rezerwacjach znajduje się pod
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazvb">ZFS Quotas and Reservations</olink>.<indexterm xml:id="indexterm-310">
<primary>ZFS properties</primary>
<secondary>settable</secondary>
</indexterm>
<indexterm xml:id="indexterm-311">
<primary>settable properties of ZFS</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Niektóre główne ustawialne parametry są specyficzne dla określonego
rodzaju datasetu. W takich przypadkach określony typ datasetu jest
wspomniany w opisie w <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfgr">tabeli 5-1</olink>.
Jeśli nie jest specjalnie określony, parametr ten
dotyczy wszystkich rodzajów: systemu plików, woluminów, klonów i obrazów.
</para>
<para>Ustawialne parametry są wymienione tutaj i opisane w <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfgr">tabeli 5–1</olink>.</para>
<itemizedlist>
<listitem>
<para>
<property>aclinherit</property>
</para>
<para>Dokładniejszy opis znajduje się
pod <olink remap="external" targetdoc="chapter-7.xml" targetptr="gbaaz">ACL Property Modes</olink>.</para>
</listitem>
<listitem>
<para>
<property>aclmode</property>
</para>
<para>Dokładniejszy opis znajduje się
pod <olink remap="external" targetdoc="chapter-7.xml" targetptr="gbaaz">ACL Property Modes</olink>.</para>
</listitem>
<listitem>
<para>
<property>atime</property>
</para>
</listitem>
<listitem>
<para>
<property>canmount</property>
</para>
</listitem>
<listitem>
<para>
<property>checksum</property>
</para>
</listitem>
<listitem>
<para>
<property>compression</property>
</para>
</listitem>
<listitem>
<para>
<property>copies</property>
</para>
</listitem>
<listitem>
<para>
<property>devices</property>
</para>
</listitem>
<listitem>
<para>
<property>exec</property>
</para>
</listitem>
<listitem>
<para>
<property>mountpoint</property> </para>
</listitem>
<listitem>
<para>
<property>quota</property>
</para>
</listitem>
<listitem>
<para>
<property>readonly</property>
</para>
</listitem>
<listitem>
<para>
<property>recordsize</property>
</para>
<para>Dokładniejszy opis znajduje się
pod opisem <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfgv">parametru <property>recordsize</property></olink>.</para>
</listitem>
<listitem>
<para>
<property>reservation</property>
</para>
</listitem>
<listitem>
<para>
<property>sharenfs</property>
</para>
</listitem>
<listitem>
<para>
<property>shareiscsi</property>
</para>
</listitem>
<listitem>
<para>
<property>setuid</property>
</para>
</listitem>
<listitem>
<para>
<property>snapdir</property>
</para>
</listitem>
<listitem>
<para>
<property>volsize</property>
</para>
<para>Dokładniejszy opis znajduje się
pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gcfhk">The <property>volsize</property> Property</olink>.</para>
</listitem>
<listitem>
<para>
<property>volblocksize</property>
</para>
</listitem>
<listitem>
<para>
<property>xattr</property>
</para>
</listitem>
<listitem>
<para>
<property>zoned</property>
</para>
</listitem>
</itemizedlist>
<sect3 xml:id="gdrcf">
<title>Parametr <command>canmount</command></title>
<para>Jeśli ten parametr jest ustawiony na <literal>no</literal>, system plików nie może
być zamontowany poprzez użycie poleceń <command>zfs mount</command> lub
<command>zfs mount</command> <option>a</option>.
Parametr ten jest podobny do ustawienia parametru <property>mountpoint</property>
na <literal>none</literal>, z wyjątkiem tego, że dataset ciągle ma ustawiony
parametr <property>mountpoint</property>, który może być dziedziczony. Na przykład
można ustawić parametr <property>canmount</property> na <literal>none</literal>,
ustawić dziedziczone parametry dla potomnych systemów plików, ale nie zostanie
on sam z siebie nigdy zamontowany, ani nie będzie dostępny dla użytkowników.
W tym przypadku nadrzędny system plików z ustawionym tym parametrem na <literal>no</literal>
służy jako <emphasis>kontener</emphasis>, w którym można ustawiać atrybuty,
ale sam z siebie nigdy nie będzie dostępny.<indexterm xml:id="indexterm-312">
<primary>ZFS properties</primary>
<secondary>
<property>canmount</property>
</secondary>
<tertiary>detailed description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-313">
<primary>settable properties of ZFS</primary>
<secondary>
<property>canmount</property>
</secondary>
<tertiary>detailed description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-314">
<primary>
<property>canmount</property> property</primary>
<secondary>detailed description</secondary>
</indexterm>
</para>
<para>W poniższym przykładzie zostaje utworzony dataset <filename>userpool</filename> z ustawionym
parametrem <property>canmount</property> na <literal>off</literal>. Punkty montowania dla
potomnych systemów plików są ustawione w jednym wspólnym punkcie montowania <filename>/export/home</filename>.
Parametry, które są ustawiony w nadrzędnym systemie plików są dziedziczone na potomne, ale nadrzędny
system plików nigdy nie zostanie zamontowany.</para>
<screen># <userinput>zpool create userpool mirror c0t5d0 c1t6d0</userinput>
# <userinput>zfs set canmount=off userpool</userinput>
# <userinput>zfs set mountpoint=/export/home userpool</userinput>
# <userinput>zfs set compression=on userpool</userinput>
# <userinput>zfs create userpool/user1</userinput>
# <userinput>zfs create userpool/user2</userinput>
# <userinput>zfs list -r userpool</userinput>
NAME             USED  AVAIL  REFER  MOUNTPOINT
userpool         140K  8.24G  24.5K  /export/home
userpool/user1  24.5K  8.24G  24.5K  /export/home/user1
userpool/user2  24.5K  8.24G  24.5K  /export/home/user2</screen>
</sect3>
<sect3 xml:id="gcfgv">
<title>Parametr <property>recordsize</property></title>
<para>Określa sugerowaną wielkość bloku dla plików w systemie plików.<indexterm xml:id="indexterm-315">
<primary>ZFS properties</primary>
<secondary>
<property>recordsize</property>
</secondary>
<tertiary>detailed description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-316">
<primary>settable properties of ZFS</primary>
<secondary>
<property>recordsize</property>
</secondary>
<tertiary>detailed description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-317">
<primary>
<property>recordsize</property> property</primary>
<secondary>detailed description</secondary>
</indexterm>
</para>
<para>Ten parametr jest przeznaczony wyłącznie do użytku w środowisku baz danych,
które wymaga dostępu do pliku w sztywno określonych rozmiarach rekordów. ZFS automatycznie
dopasowuje wielkość bloków zgodnie z wewnętrznym algorytmem zoptymalizowanym do użytku
w typowych szablonach dostępu do plików. Dla baz danych, które tworzą bardzo duże pliki,
ale uzyskują dostęp do plików w małych losowych kawałkach, te algorytmy niekoniecznie
są optymalne. Poprzez określenie parametru <property>recordsize</property> na wartość
większą lub równą wielkości rekordu bazy danych można uzyskać znaczący zysk wydajności.
Używanie tego parametru dla systemów pliku ogólnego przeznaczenia jest mocno niezalecane
i może negatywnie wpłynąć na wydajność systemu plików. Wartość parametru musi być
potęgą dwójki większą lub równą 512 bajtów i mniejszą lub równą 128 kilobajtów. Zmiana
parametru <literal>recordsize</literal> dotyczy tylko plików utworzonych po tej zmianie.
Istniejące pliki zostają nienaruszone.</para>
<para>Do tego parametru można także odwołać się po skróconej nazwie, <property>recsize</property>.</para>
</sect3>
<sect3 xml:id="gcfhk">
<title>Parametr <property>volsize</property></title>
<para>Logiczny rozmiar woluminu. Domyślnie tworzenie woluminu tworzy rezerwację
tej samej wielkości. Jakiekolwiek zmiany parametru <property>volsize</property>
są przenoszone na odpowiednią zmianę rezerwacji. Zachowanie to jest w celu
zapobiegnięcia nieprzewidywalnego zachowania się woluminu dla użytkowników.
Wolumin, który ma mniej miejsca niż twierdzi, że jest dostępne, może powodować
nieprzewidywalne działanie lub uszkodzenie danych, w zależności od tego, jak
wolumin jest używany. Efekty te mogą mieć także miejsce, kiedy wielkość
woluminu jest zmieniana w trakcie używania, szczególnie podczas zmniejszania
rozmiaru. Przy zmianie rozmiaru woluminu należy wykazać szczególną
ostrożność.<indexterm xml:id="indexterm-318">
<primary>ZFS properties</primary>
<secondary>
<property>volsize</property>
</secondary>
<tertiary>detailed description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-319">
<primary>settable properties of ZFS</primary>
<secondary>
<property>volsize</property>
</secondary>
<tertiary>detailed description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-320">
<primary>
<property>volsize</property> property</primary>
<secondary>detailed description</secondary>
</indexterm>
</para>
<para>Chociaż jest to niezalecane, można utworzyć tzw. "rozrzedzony wolumin" 
(sparse volume) poprzez określenie opcji <option>s</option> przy poleceniu
<command>zfs create -V</command> lub poprzez zmianę rezerwacji po utworzeniu
już woluminu. <emphasis>Rozrzedzony wolumin</emphasis> jest definiowany jako wolumin,
gdzie rezerwacja nie jest równa wielkości woluminu. Dla takiego woluminu zmiany
parametru <property>volsize</property> nie są przenoszone na zmianę rezerwacji.
</para>
<para>Więcej informacji o używaniu woluminów znajduje się pod <olink remap="external" targetdoc="chapter-8.xml" targetptr="gaypf">ZFS Volumes</olink>.</para>
</sect3>
</sect2>

<sect2 xml:id="gdrcw">
<title>Parametry użytkownika ZFS</title>
<para>Dodatkowo ZFS wspiera dowolne parametry użytkownika. Nie mają one
wpływu na zachowanie ZFS-a, ale można je wykorzystać do opisywania
datasetów informacjami, które mogę być przydatne w środowisku użytkownika.</para>
<para>Nazwy parametrów użytkownika muszą spełniać następujące założenia:<indexterm xml:id="indexterm-321">
<primary>ZFS properties</primary>
<secondary>user properties</secondary>
<tertiary>detailed description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-322">
<primary>user properties of ZFS</primary>
<secondary>detailed description</secondary>
</indexterm>
<indexterm xml:id="indexterm-323">
<primary>user properties of ZFS</primary>
<secondary>(przykład)</secondary>
</indexterm>
</para>
<itemizedlist>
<listitem>
<para>Zawierać znak dwukropka (':') w celu odróżnienia ich od głównych parametrów.</para>
</listitem>
<listitem>
<para>Zawierać małe litery, cyfry i następujące znaki przestankowe: ':', + ,'.', '_'.  </para>
</listitem>
<listitem>
<para>Zawierać maksymalnie 256 znaków.</para>
</listitem>
</itemizedlist>
<para>Sugerowana konwencja jest taka, że nazwa parametru jest dzielona na dwa komponenty,
ale nie jest ona narzucana przez ZFS:</para>
<screen>
<replaceable>moduł:parametr</replaceable>
</screen>
<para>W przypadku używania parametrów użytkownika przy programowaniu, sugerowane jest używanie odwrotnej nazwy domeny DNS jako nazwy <replaceable>modułu</replaceable> w celu zminimalizowania sznasy, że dwa niezależnie rozwijane pakiety będą używać tej samej nazwy parametru do różnych celów. Nazwy parametrów, których zaczynają się od "com.sun." są zarezerwowane do użytku przez Sun Microsystems.</para>
<para>Wartości parametrów użytkownika mają następujące założenia:</para>
<itemizedlist>
<listitem>
<para>Dowolny łańcuch znaków, który jest zawsze dziedziczony i nigdy weryfikowany pod kątem poprawności.</para>
</listitem>
<listitem>
<para>Zawierać maksymalnie 1024 znaków.</para>
</listitem>
</itemizedlist>
<para>Na przykład:</para>
<screen># <userinput>zfs set dept:users=finance userpool/user1</userinput>
# <userinput>zfs set dept:users=general userpool/user2</userinput>
# <userinput>zfs set dept:users=itops userpool/user3</userinput>
</screen>
<para>Wszystkie polecenia, które operują na parametrach, takie jak <command>zfs
list</command>, <command>zfs get</command>, <command>zfs set</command> i inne mogą
być użyte do obsługi parametrów zarówno głównych, jak i użytkownika.</para>
<para>Na przykład:</para>
<screen>
<userinput>zfs get -r dept:users userpool</userinput>
NAME            PROPERTY    VALUE           SOURCE
userpool        dept:users  all             local
userpool/user1  dept:users  finance         local
userpool/user2  dept:users  general         local
userpool/user3  dept:users  itops           local</screen>
<para>Do wyczyeszcznie parametru użytkownika należy użyć polecenia <command>zfs inherit</command>.
Na przykład:</para>
<screen># <userinput>zfs inherit -r dept:users userpool</userinput>
</screen>
<para>Jeśli parametr ten nie jest zdefiniowany w żadnym nadrzędnym datasecie, zostanie on
całkowicie usunięty.</para>
</sect2>
</sect1>
<sect1 xml:id="gazsu">
<title>Uzyskiwanie informacji o systemie plików ZFS</title>
<para>Polecenie <command>zfs list</command> dostarcza rozszerzalny mechanizm do
oglądania i odpytywania o informacje dotyczące datasetów. Zarówno forma podstawowa,
jak i złożona tych zapytań została omówiona w tej części rozdziału.</para>
<sect2 xml:id="gaztd">
<title>Wyświetlanie podstawowych informacji o datasecie ZFS</title>
<para>Podstawowe informacje o datasecie można wyświetlić używając polecenia
<command>zfs list</command> bez opcji. Polecenie to wyświetla nazwy wszystkich
datasetów w systemie wraz z ich parametrami <property>used</property>,
<property>available</property>, <property>referenced</property> oraz
<property>mountpoint</property>.
Więcej informacji o tych parametrach znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazss">Introducing ZFS Properties</olink>.<indexterm xml:id="indexterm-324">
<primary>listing</primary>
<secondary>systemy plików ZFS</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-325">
<primary>
<command>zfs list</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-326">
<primary>systemy plików ZFS</primary>
<secondary>listing</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>Na przykład:</para>
<screen># <userinput>zfs list</userinput>
NAME                   USED  AVAIL  REFER  MOUNTPOINT
pool                   476K  16.5G    21K  /pool
pool/clone              18K  16.5G    18K  /pool/clone
pool/home              296K  16.5G    19K  /pool/home
pool/home/marks        277K  16.5G   277K  /pool/home/marks
pool/home/marks@snap      0      -   277K  -
pool/test               18K  16.5G    18K  /test</screen>
<para>Można także użyć tego polecenia do wyświetlenia informacji określonych
datasetów poprzez podanie ich nazw w wierszu poleceń. Dodatkowo użycie opcji
<option>r</option> wyświetli rekursywnie wszystkich potomków podanego datasetu. Na przykład:</para>
<screen># <userinput>zfs list -r pool/home/marks</userinput>
NAME                   USED  AVAIL  REFER  MOUNTPOINT
pool/home/marks        277K  16.5G   277K  /pool/home/marks
pool/home/marks@snap      0      -   277K  -</screen>
<para>Istnieje również możliwość użycia polecenia <command>zfs list</command> z bezwzględnymi ścieżkami
do datasetów, obrazów i woluminów. Na przykład:</para>
<screen># <userinput>zfs list /pool/home/marks</userinput>
NAME              USED  AVAIL  REFER  MOUNTPOINT
pool/home/marks   277K  16.5G   277K  /pool/home/marks</screen>
<para>Kolejny przykład pokazuje, jak wyświetlić informacje o <filename>tank/home/chua</filename>
i potomnych dla niego datasetach.<indexterm xml:id="indexterm-327">
<primary>listing</primary>
<secondary>descendents of ZFS file systems</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-328">
<primary>
<command>zfs list -r</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-329">
<primary>systemy plików ZFS</primary>
<secondary>listing descendents</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs list -r tank/home/chua</userinput>
NAME                        USED  AVAIL  REFER  MOUNTPOINT 
tank/home/chua                   26.0K  4.81G  10.0K  /tank/home/chua
tank/home/chua/projects       16K  4.81G   9.0K  /tank/home/chua/projects
tank/home/chua/projects/fs1    8K  4.81G     8K  /tank/home/chua/projects/fs1 
tank/home/chua/projects/fs2    8K  4.81G     8K  /tank/home/chua/projects/fs2</screen>
<para>Więcej informacji o poleceniu <command>zfs list</command> znajduje się pod
<olink remap="external" targetdoc="819-2240" targetptr="zfs-1m">
<citerefentry>
<refentrytitle>zfs</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
</sect2>
<sect2 xml:id="gazsh">
<title>Tworzenie złożonej formy zapytań</title>
<para>Format wyjściowy polecenia <command>zfs list</command> może być
dostosowany do własnych potrzeb poprzez użycie opcji
<option>
o</option>, <option>
f</option> oraz <option>
H</option>.</para>
<para>Format wyjścia można dostosować poprzez użycie opcji <option>
o</option> oraz listy żądanych parametrów oddzielonych przecinkami. Jakikolwiek
parametr datasetu jest poprawną wartością. Lista wszystkich wspieranych parametrów
datasetu znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazss">Introducing ZFS Properties</olink>.
Dodatkowo wśród podanych parametrów opcja <option>
o</option> może zawierać także parametr <literal>name</literal>, który określa, że wyjście
powinno zawierać nazwę datasetu.</para>
<para>Poniższy przykład używa polecenia <command>zfs list</command>, żeby wyświetlić
nazwę datasetu włącznie z parametrami <property>sharenfs</property> oraz <property>mountpoint</property>.</para>
<screen># zfs list -o name,sharenfs,mountpoint
NAME                   SHARENFS         MOUNTPOINT
tank                   off              /tank
tank/home              on               /tank/home
tank/home/ahrens       on               /tank/home/ahrens
tank/home/bonwick      on               /tank/home/bonwick
tank/home/chua         on               /tank/home/chua
tank/home/eschrock     on               legacy
tank/home/moore        on               /tank/home/moore
tank/home/tabriz       ro               /tank/home/tabriz</screen>
<para>Użycie opcji <option>
t</option> pozwala określić rodzaj datasetów do wyświetlenia.
Właściwe rodzaje są wymienione w tabeli poniżej.<indexterm xml:id="indexterm-330">
<primary>systemy plików ZFS</primary>
<secondary>dataset types</secondary>
<tertiary>opis</tertiary>
</indexterm>
<indexterm xml:id="indexterm-331">
<primary>dataset types</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<table frame="topbot" xml:id="gbaje">

<title>Rodzaje datasetów ZFS</title>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colwidth="29.53*"/>
<colspec colwidth="70.47*"/>
<thead>
<row rowsep="1">
<entry>
<para>Rodzaj</para>
</entry>
<entry>
<para>Opis</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<literal>filesystem</literal>
</para>
</entry>
<entry>
<para>Systemy plików i klony</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>volume</literal>
</para>
</entry>
<entry>
<para>Woluminy</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>snapshot</literal>
</para>
</entry>
<entry>
<para>Obrazy</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<para>Opcja <option>
t</option> przyjmuje jako parametr listę rodzajów datasetów do wyświetlenia oddzielaną
przecinkami. Poniższy przykład używa opcji <option>
t</option> oraz <option>
o</option> jednocześnie, żeby wyświetlić nazwę oraz parametr <property>used</property>
dla wszystkich systemów plików:<indexterm xml:id="indexterm-332">
<primary>listing</primary>
<secondary>types of ZFS file systems</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-333">
<primary>
<command>zfs list -t</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-334">
<primary>systemy plików ZFS</primary>
<secondary>listing types of</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs list -t filesystem -o name,used</userinput>
NAME              USED
pool              476K
pool/clone         18K
pool/home         296K
pool/home/marks   277K
pool/test          18K</screen>
<para>Użycie opcji <option>
H</option> pozwala pominąć nagłówek w wyjściu polecenia <command>zfs list</command>
Przy użyciu tej opcji wszystkie białe spacje są zamieniane na tabulatory.
Ta opcja może być użyteczna, jeśli jest potrzebne parsowalne wyjścia, na przykład
dla potrzeb skryptów. Kolejny przykład pokazuje wyjście po użyciu polecenia
<command>zfs list</command> z opcją <option>
H</option>:<indexterm xml:id="indexterm-335">
<primary>listing</primary>
<secondary>ZFS file systems without header information</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-336">
<primary>
<command>zfs list -H</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-337">
<primary>systemy plików ZFS</primary>
<secondary>listing without header information</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs list -H -o name</userinput>
pool
pool/clone
pool/home
pool/home/marks
pool/home/marks@snap
pool/test</screen>
</sect2>
</sect1>
<sect1 xml:id="gayns">
<title>Zarządzanie parametrami ZFS</title>
<para>Parametry datasetów są zarządzane poleceniem <command>zfs</command> z komendami <command>set</command>, <command>inherit</command>oraz <command>get</command>.</para>
<itemizedlist>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazsp">Ustawianie parametrów ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazup">Dziedziczenie parametrów ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazuk">Odpytywanie o parametry ZFS</olink>
</para>
</listitem>
</itemizedlist>
<sect2 xml:id="gazsp">
<title>Ustawianie parametrów ZFS</title>
<para>Polecenie <command>zfs set</command> służy do modyfikacji jakiegokolwiek
zdefiniowanego wcześniej parametru datasetu. Można także użyć polecenia <command>zfs create</command>
w celu ustawienia parametrów podczas tworzenia datasetu. Lista określonych parametrów datasetu znajduje
się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gazsd">Settable ZFS Native Properties</olink>.
Polecenie <command>zfs set</command> przyjmuje sekwencję parametr/wartość w formacie
<replaceable>parametr</replaceable>=<replaceable>wartość</replaceable> oraz nazwę datasetu.<indexterm xml:id="indexterm-338">
<primary>setting</primary>
<secondary>ZFS <property>atime</property> property</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-339">
<primary>
<command>zfs set</command> <property>atime</property>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-340">
<primary>systemy plików ZFS</primary>
<secondary>setting <property>atime</property> property</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>Poniższy przykład ustawia parametr <property>atime</property> na <literal>off</literal> dla <filename>tank/home</filename>.
Tylko jeden parametr może być ustawiany lub modyfikowany podczas każdego
wykonania polecenia <command>zfs set</command>.</para>
<screen># <userinput>zfs set atime=off tank/home</userinput>
</screen>
<para>Dodatkowo każdy parametr systemu plików może być ustawiony w czasie
jego tworzenia. Na przykład:</para>
<screen># <userinput>zfs create -o atime=off tank/home</userinput>
</screen>
<para>Duże wartości numeryczne mogą być określane z użyciem łatwych do zrozumienia
przyrostków (w kolejności rosnącej): <literal>BKMGTPEZ</literal>.  Każdy z tych
przyrostków, z wyjątkiem przyrostka <literal>B</literal>, który sam z siebie już określa
bajty, może mieć po sobie opcjonalnie dodane <literal>b</literal>.
Podane cztery wywołania polecenia <command>zfs set</command> są równoważnymi
wyrażeniami numerycznymi określającymi, że parametr <property>quota</property> zostanie
ustawiony na wartość 50 gigabajtów dla systemu plików <filename>tank/home/marks</filename>:</para>
<screen># <userinput>zfs set quota=50G tank/home/marks</userinput>
# <userinput>zfs set quota=50g tank/home/marks</userinput>
# <userinput>zfs set quota=50GB tank/home/marks</userinput>
# <userinput>zfs set quota=50gb tank/home/marks</userinput>
</screen>
<para>Wartości parametrów nienumerycznych są wrażliwe na wielkość liter i muszą być podawane małymi literami,
z wykluczeniem parametrów <property>mountpoint</property> oraz <property>sharenfs</property>.
Te dwa parametry mogą mieć wartości podawane zarówno wielkimi, jak i małymi literami.<indexterm xml:id="indexterm-341">
<primary>setting</primary>
<secondary>ZFS quota</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-342">
<primary>
<command>zfs set</command> <property>quota</property>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-343">
<primary>systemy plików ZFS</primary>
<secondary>setting <property>quota</property> property</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>Więcej informacji o poleceniu <command>zfs set</command> znajduje się pod <olink remap="external" targetdoc="819-2240" targetptr="zfs-1m">
<citerefentry>
<refentrytitle>zfs</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
</sect2>
<sect2 xml:id="gazup">
<title>Dziedziczenie parametrów ZFS</title>
<para>Wszystkie ustawialne parametry z wyłączeniem limitu i rezerwacji dziedziczą
swoje wartości od "rodziców". Jeśli żaden z nadrzędnych datasetów nie ma ustawionej
dokładnej wartości dla dziedziczonego parametru, przyjmowana jest wartość domyślna.
Polecenie <command>zfs inherit</command> służy do usunięcia ustawionej wartości
parametru, poprzez co przyjmuje wartość odziedziczoną od nadrzędnego datasetu.
<indexterm xml:id="indexterm-344">
<primary>inheriting</primary>
<secondary>ZFS properties (<command>zfs inherit</command>)</secondary>
<tertiary>opis</tertiary>
</indexterm>
<indexterm xml:id="indexterm-345">
<primary>
<command>zfs inherit</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-346">
<primary>systemy plików ZFS</primary>
<secondary>inheriting property of (<command>zfs inherit</command>)</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>Poniższy przykład używa polecenia <command>zfs set</command> w celu
włączenia kompresji dla systemu plików <filename>tank/home/bonwick</filename>.
Następnie polecenie <command>zfs inherit</command> usuwa wartość parametru <property>compression</property>,
przez co parametr ten dziedziczy domyślne ustawienie <literal>off</literal>.
Ponieważ zarówno <filename>home</filename> jak i <filename>tank</filename> nie
mają ustawionego parametru <property>compression</property> lokalnie, jest używana
wartość domyślna. Jeśli obydwa miałyby włączoną kompresję, zostałaby użyta wartość
najbardziej bezpośredniego rodzica (<filename>home</filename> w tym przykładzie).</para>
<screen># <userinput>zfs set compression=on tank/home/bonwick</userinput>
# <userinput>zfs get -r compression tank</userinput>
NAME             PROPERTY      VALUE                    SOURCE
tank             compression   off                      default
tank/home        compression   off                      default
tank/home/bonwick compression   on                      local
# <userinput>zfs inherit compression tank/home/bonwick</userinput>
# <userinput>zfs get -r compression tank</userinput>
NAME             PROPERTY      VALUE                    SOURCE
tank             compression   off                      default
tank/home        compression   off                      default
tank/home/bonwick compression  off                      default</screen>
<para>Komenda <command>inherit</command> jest wykonywana rekursywnie, jeśli zostanie
wykonana z opcją <option>r</option>. W kolejnym przykładzie polecenie to powoduje,
że parametr <property>compression</property> będzie dziedziczony przez 
<filename>tank/home</filename> i jakiekolwiek potomne systemy plików, jakie mógłby
posiadać.</para>
<screen># <userinput>zfs inherit -r compression tank/home</userinput>
</screen>
<note>

<para>Należy mieć świadomość, że użycie opcji <option>
r</option> czyści aktualne ustawienie parametru dla wszystkich potomnych
datasetów.</para>
</note>
<para>Więcej informacji o poleceniu <command>zfs</command> znajduje się pod <olink remap="external" targetdoc="819-2240" targetptr="zfs-1m">
<citerefentry>
<refentrytitle>zfs</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
</sect2>
<sect2 xml:id="gazuk">
<title>Odpytywanie o wartości parametrów ZFS</title>
<para>Najprostszą metodą odpytania o wartości parametru jest użycie polecenia <command>zfs
list</command>. Więcej informacji znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gaztd">Listing Basic ZFS Information</olink>.
W przypadku bardziej skomplikowanych zapytań i do pisania skryptów można
użyć polecenia <command>zfs get</command> w celu dostarczenia bardziej dokładnych
informacji w dokładnie określonym formacie.<indexterm xml:id="indexterm-347">
<primary>listing</primary>
<secondary>ZFS properties (<command>zfs list</command>)</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-348">
<primary>
<command>zfs get</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-349">
<primary>systemy plików ZFS</primary>
<secondary>listing properties of (<command>zfs list</command>)</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>Polecenia <command>zfs get</command> można użyć w celu pobrania wartości
jakiegokolwiek parametru datasetu. Poniższy przykład pokazuje, jak pobrać
wartość jednego parametru datasetu:</para>
<screen># <userinput>zfs get checksum tank/ws</userinput>
NAME             PROPERTY       VALUE                      SOURCE
tank/ws          checksum       on                         default</screen>
<para>Czwarta kolumna, <literal>SOURCE</literal>, określa, gdzie ten parametr
został ustawiony. Poniższa tabela definiuje znaczenie możliwych wartości. </para>
<table frame="topbot" xml:id="gbavh">

<title>Możliwe wartości <literal>SOURCE</literal>
(<command>zfs get</command>)</title>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colwidth="35.30*"/>
<colspec colwidth="64.70*"/>
<thead>
<row rowsep="1">
<entry>
<para>Wartość SOURCE</para>
</entry>
<entry>
<para>Opis</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<literal>default</literal>
</para>
</entry>
<entry>
<para>Wartość tego parametru nigdzie nie została w jawny sposób określona w tym oraz jakimkolwiek
nadrzędnym datasecie. Dla tego parametru jest używana wartość domyślna.</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>inherited from</literal> <replaceable>nazwa-datasetu</replaceable>
</para>
</entry>
<entry>
<para>Wartość tego parametru jest dziedziczona z datasetu nadrzędnego o podanej
nazwie <replaceable>nazwa-datasetu</replaceable>.</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>local</literal>
</para>
</entry>
<entry>
<para>Wartość tego parametru została dokładnie określona dla tego datasetu poprzez
użycie polecenia <command>zfs set</command>.</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>temporary</literal>
</para>
</entry>
<entry>
<para>Wartość tego parametru została określona poprzez użycie opcji <option>
o</option> polecenia <command>zfs mount</command>
i obowiązuje przez czas zamontowania tego systemu plików. Więcej informacji
na temat tymczasowych parametrów punktu montowania znajduje się pod
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gamnt">Using Temporary Mount Properties</olink>.</para>
</entry>
</row>
<row>
<entry>
<para>- (none)</para>
</entry>
<entry>
<para>Ten parametr jest tylko do odczytu. Jego wartość jest generowana przez ZFS.</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<para>Użycie specjalnego słowa kluczowego <literal>all</literal> pozwala pobrać
wszystkie parametry datasetu. Poniższy przykład używa słowa kluczowego <literal>all</literal>
w celu pobrania wszystkich istniejących parametrów datasetu:</para>
<screen># <userinput>zfs get all tank</userinput>
NAME  PROPERTY       VALUE                  SOURCE
tank  type           filesystem             -
tank  creation       Wed Jan 10 12:18 2007  -
tank  used           144K                   -
tank  available      134G                   -
tank  referenced     25.5K                  -
tank  compressratio  1.00x                  -
tank  mounted        yes                    -
tank  quota          none                   default
tank  reservation    none                   default
tank  recordsize     128K                   default
tank  mountpoint     /tank                  default
tank  sharenfs       off                    default
tank  shareiscsi     off                    default
tank  checksum       on                     default
tank  compression    off                    default
tank  atime          on                     default
tank  devices        on                     default
tank  exec           on                     default
tank  setuid         on                     default
tank  readonly       off                    default
tank  zoned          off                    default
tank  snapdir        hidden                 default
tank  aclmode        groupmask              default
tank  aclinherit     secure                 default
tank  canmount       on                     default
tank  xattr          on                     default</screen>
<para>Opcja <option>
s</option> polecenia <command>zfs get</command> pozwala określić, poprzez
wartość SOURCE, rodzaj parametrów do wyświetlenia. Opcja ta przyjmuje listę wartości
oddzielonych przecinkiem określającą żądany typ wartości. Tylko parametry
o określonym typie "SOURCE" zostaną wyświetlone. Dopuszczalne wartości to
<literal>local</literal>, <literal>default</literal>, <literal>inherited</literal>, <literal>temporary</literal> oraz <literal>none</literal>.
Poniższy przykład pokazuje wszystkie parametry, które zostały ustawione lokalnie
dla datasetu <literal>pool</literal>.<indexterm xml:id="indexterm-350">
<primary>listing</primary>
<secondary>ZFS properties by source value</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-351">
<primary>
<command>zfs get -s</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-352">
<primary>systemy plików ZFS</primary>
<secondary>listing properties by source value</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs get -s local all pool</userinput>
NAME             PROPERTY      VALUE                      SOURCE
pool             compression   on                         local</screen>
<para>Wszystkie powyższe opcje mogą być łączone z użyciem opcji <option>
r</option> w celu rekursywnego wyświetlenia określonych parametrów
dla wszystkich "dzieci" określonego datasetu. W poniższym przykładzie wszystkie
tymczasowe wartości parametru dla wszystkich datasetów od <literal>tank</literal>
włącznie zostaną rekursywnie wyświetlone:</para>
<screen># <userinput>zfs get -r -s temporary all tank</userinput>
NAME             PROPERTY       VALUE                      SOURCE
tank/home          atime          off                      temporary
tank/home/bonwick  atime          off                      temporary
tank/home/marks    atime          off                      temporary</screen>
<para>Ostatnio dodane możliwości dają możliwość odpytywania o parametry przy użyciu polecenia
<command>zfs get</command> bez określania docelowego systemu plików, co oznacza wykonanie operacji na wszystkich
pulach lub systemach plików. Na przykład:</para>
<screen># <userinput>zfs get -s local all</userinput>
tank/home               atime          off                    local
tank/home/bonwick       atime          off                    local
tank/home/marks         quota          50G                    local</screen>
<para>Więcej informacji o poleceniu <command>zfs get</command> znajduje się pod <olink remap="external" targetdoc="819-2240" targetptr="zfs-1m">
<citerefentry>
<refentrytitle>zfs</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
<sect3 xml:id="gazum">
<title>Odpytywanie o wartości parametrów ZFS dla skryptów</title>
<para>Polecenie <command>zfs get</command> wspiera także opcje <option>
H</option> oraz <option>
o</option>, które zostały stworzone z myślą o pisaniu skryptów. Opcja <option>
H</option> określa, że jakiekolwiek nagłówki powinny być pominięte
oraz wszystkie białe spacje powinny być zamienione na tabulatory. Ujednolicony
format białych znaków pozwala łatwo przetwarzać dane. Użycie opcji <option>
o</option> pozwala dostosować format wyjścia. Przyjmuje ona parametry w postaci
listy parametrów do wyświetlenia oddzielonej przecinkami. Wszystkie parametry
zdefiniowane we <olink remap="internal" targetdoc="chapter-5.xml"  targetptr="gazss">wprowadzeniu do parametrów ZFS</olink>, włącznie
z <literal>name</literal>, <literal>value</literal>, <literal>property</literal> oraz <literal>source</literal>
mogą być użyte w liście argumentów opcji <option>
o</option>.<indexterm xml:id="indexterm-353">
<primary>listing</primary>
<secondary>ZFS properties for scripting</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-354">
<primary>
<command>zfs get -H -o</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-355">
<primary>systemy plików ZFS</primary>
<secondary>listing properties for scripting</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>Poniższy przykład pokazuje jak otrzymać pojedynczą wartość poprzez użycie
opcji <option>H</option> oraz <option>o</option> z poleceniem <command>zfs get</command>.</para>
<screen># <userinput>zfs get -H -o value compression tank/home</userinput>
on</screen>
<para>Opcja <option>
p</option> włącza dokładne zwracanie wartości liczbowych. Na przykład
1 megabajt będzie wyświetlony jako 1000000. Opcja ta może być użyta, jak
demonstruje poniższy przykład:</para>
<screen># <userinput>zfs get -H -o value -p used tank/home</userinput>
182983742</screen>
<para>Użycie opcji <option>
r</option> w połączeniu z jakimikolwiek powyższymi opcjami pozwala pobrać
rekursywnie wartości dla wszystkich potomnych datasetów. Poniższy przykład
używa opcji <option>
r</option>, <option>
o</option> oraz <option>
H</option> w celu pobrania nazwy datasetu oraz wartości parametru <property>used</property> dla
<filename>export/home</filename> i wszystkich potomków, z pominięciem jakichkolwiek informacji
nagłówka:</para>
<screen># <userinput>zfs get -H -o name,value -r used export/home</userinput>
export/home     5.57G
export/home/marks       1.43G
export/home/maybee      2.15G</screen>
</sect3>
</sect2>
</sect1>
<sect1 xml:id="gaynd">
<title>Montowanie i udostępnianie systemów plików ZFS</title>
<para>Ten podrozdział opisuje jak punkty montowania i udostępniane systemy plików są zarządzane
w ZFS.</para>
<itemizedlist>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gaztn">Zarządzanie punktami montowania ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gamns">Montowanie systemów plików ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gamnt">Używanie parametrów dla tymczasowego montowania</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gamnr">Odmontowanie systemów plików ZFS</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="gamnd">Udostępnianie i wyłączenie udostępniania systemów plików ZFS</olink>
</para>
</listitem>
</itemizedlist>
<sect2 xml:id="gaztn">
<title>Zarządzanie punktami montowania ZFS</title>
<para>Domyślnie wszystkie systemy plików ZFS są montowane przez ZFS w trakcie startu systemu
poprzez użycie serwisu SMF <filename>svc://system/filesystem/local</filename>. Systemy plików
są montowane w lokalizacji <replaceable>/ścieżka</replaceable>, gdzie <replaceable>ścieżka</replaceable> jest
nazwą systemu plików.<indexterm xml:id="indexterm-356">
<primary>mount points</primary>
<secondary>managing ZFS</secondary>
<tertiary>opis</tertiary>
</indexterm>
<indexterm xml:id="indexterm-357">
<primary>systemy plików ZFS</primary>
<secondary>managing mount points</secondary>
<tertiary>opis</tertiary>
</indexterm>
</para>
<para>Domyślny punkt montowania można zmienić poprzez ustawienie parametru
<property>mountpoint</property> na określoną ścieżkę poprzez użycie polecenia <command>zfs set</command>.
ZFS automatycznie tworzy punkt montowania, jeśli jest taka potrzeba oraz
automatycznie montuje ten system plików, jeśli zostanie wywołane polecenie
<command>zfs mount -a</command> bez potrzeby poprawiania pliku <filename>/etc/vfstab</filename>.</para>
<para>Parametr <literal>mountpoint</literal> jest dziedziczony. Jeśli przykładowo
<filename>pool/home</filename> ma <property>mountpoint</property> ustawiony jako
<filename>/export/stuff</filename>, wtedy <filename>pool/home/user</filename> dziedziczy <filename>/export/stuff/user</filename> dla
swojego parametru <property>mountpoint</property>.</para>
<para>Parametr <property>mountpoint</property> może być ustawiony jako <literal>none</literal> 
w celu zapobiegnięcia montowania systemu plików. Dodatkowo jest dostępny parametr <property>canmount</property>
określający, czy system plików może być montowany. Więcej informacji na temat parametru <property>canmount</property>
znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gdrcf">The <command>canmount</command> Property</olink>.<indexterm xml:id="indexterm-358">
<primary>mount points</primary>
<secondary>legacy</secondary>
</indexterm>
<indexterm xml:id="indexterm-359">
<primary>systemy plików ZFS</primary>
<secondary>managing legacy mount points</secondary>
<tertiary>opis</tertiary>
</indexterm>
</para>
<para>W razie potrzeby systemy plików mogą być bezpośrednio zarządzane przez standardowy
mechanizm montowania poprzez ustawienie parametru <property>mountpoint</property> na
wartość <property>legacy</property> poleceniem <command>zfs set</command>. Zapobiega to również
automatycznemu montowaniu i zarządzaniu tym systemem plików przez ZFS. W zamian muszą zostać
użyte standardowe narzędzia, włączając w to polecenia <command>mount</command> i <command>umount</command>
oraz plik <filename>/etc/vfstab</filename>. Więcej informacji o tradycyjnym montowaniu systemu
plików znajduje się pod <olink remap="internal" targetdoc="chapter-5.xml" targetptr="gbaln">Legacy Mount Points</olink>.</para>
<para>W przypadku zmiany strategii zarządzania punktem montowania, mogą mieć miejsce następujące zachowania:</para>
<itemizedlist>
<listitem>
<para>Automatyczne zarządzanie punktem montowania</para>
</listitem>
<listitem>
<para>Tradycyjne zarządzanie punktem montowania</para>
</listitem>
</itemizedlist>
<sect3 xml:id="gbala">
<title>Automatyczne zarządzanie punktami montowania</title>
<itemizedlist>
<listitem>
<para>W przypadku zmiany wartości parametru z <literal>legacy</literal> lub <literal>none</literal>,
ZFS automatycznie montuje system plików.</para>
</listitem>
<listitem>
<para>Jeśli ZFS aktualnie zarządza systemem plików, ale ten jest aktualnie odmontowany,
a wartość parametru <property>mountpoint</property> zostanie zmieniona, system plików
pozostaje odmontowany.</para>
</listitem>
</itemizedlist>
<para>Można także określić domyślny punkt montowania dla głównego datasetu w czasie tworzenia
poleceniem <command>zpool create</command> poprzez użycie opcji <option>
m</option>.
Więcej informacji o tworzeniu puli znajduje się pod <olink targetdoc="" remap="internal" targetptr="gaynr">Creating a ZFS Storage Pool</olink>.<indexterm xml:id="indexterm-360">
<primary>mount points</primary>
<secondary>automatic</secondary>
</indexterm>
<indexterm xml:id="indexterm-361">
<primary>systemy plików ZFS</primary>
<secondary>managing automatic mount points</secondary>
</indexterm>
</para>
<para>Wszystkie datasety, których parametr <property>mountpoint</property> nie ma wartości <literal>legacy</literal> są zarządzane przez ZFS.
W poniższym przykładzie punkt montowania tworzonego datasetu jest automatycznie zarządzany przez ZFS.</para>
<screen># <userinput>zfs create pool/filesystem</userinput>
# <userinput>zfs get mountpoint pool/filesystem</userinput>
NAME             PROPERTY      VALUE                      SOURCE
pool/filesystem  mountpoint    /pool/filesystem           default
# <userinput>zfs get mounted pool/filesystem</userinput>
NAME             PROPERTY      VALUE                      SOURCE
pool/filesystem  mounted       yes                        -</screen>
<para>Można także ustawić parametr <property>mountpoint</property>, jak
pokazano w poniższym przykładzie:</para>
<screen># <userinput>zfs set mountpoint=/mnt pool/filesystem</userinput>
# <userinput>zfs get mountpoint pool/filesystem</userinput>
NAME             PROPERTY      VALUE                      SOURCE
pool/filesystem  mountpoint    /mnt                       local
# <userinput>zfs get mounted pool/filesystem</userinput>
NAME             PROPERTY      VALUE                      SOURCE
pool/filesystem  mounted       yes                        -</screen>
<para>Kiedy parametr <property>mountpoint</property> jest zmieniany, system plików
zostaje automatycznie odmontowany ze starego punktu montowania i zamontowany w nowym
miejscu. W razie potrzeby katalogi punktu montowania są tworzone. Jeśli ZFS nie jest
w stanie odmontować systemu plików z powodu jego aktywności, zostanie zgłoszony błąd i 
jest konieczne ręczne odmontowanie systemu plików.<indexterm xml:id="indexterm-362">
<primary>setting</primary>
<secondary>ZFS mount points (<command>zfs set mountpoint</command>)</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-363">
<primary>
<command>zfs set mountpoint</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-364">
<primary>systemy plików ZFS</primary>
<secondary>setting mount point (<command>zfs set mountpoint</command>)</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
</sect3>
<sect3 xml:id="gbaln">
<title>Tradycyjne zarządzanie punktami montowania</title>
<para>Istnieje możliwość zarządzania systemami plików ZFS z użyciem tradycyjnych narzędzi
poprzez ustawienie parametru <property>mountpoint</property> na wartość <property>legacy</property>.
Tradycyjne systemy plików muszą być zarządzane poprzez polecenia <command>mount</command>
i <command>umount</command> oraz plik <filename>/etc/vfstab</filename>. ZFS nie montuje
automatycznie tradycyjnych systemów plików podczas startu systemu, także polecenia ZFS
<command>mount</command> oraz <command>umount</command> nie działają z takim rodzajem
datasetu. Poniższy przykład pokazuje jak ustawić i zarządzać datasetem ZFS w tradycyjny sposób:</para>
<screen># <userinput>zfs set mountpoint=legacy tank/home/eschrock</userinput>
# <userinput>mount -F zfs tank/home/eschrock /mnt</userinput>
</screen>
<para>W szczególnym przypadku, jeśli są tworzone oddzielne systemy plików ZFS
<filename>/usr</filename> lub <filename>/var</filename>, muszą być one określone
jako tradycyjne systemy plików. Dodatkowo muszą być one montowane poprzez stworzenie
odpowiednich wpisów w pliku <filename>/etc/vfstab</filename>. W przeciwnym przypadku
serwis <filename>system/filesystem/local</filename> wejdzie w tryb "maintenance"
w trakcie startu systemu.<indexterm xml:id="indexterm-365">
<primary>setting</primary>
<secondary>legacy mount points</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-366">
<primary>
<command>zfs set mountpoint=legacy</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-367">
<primary>systemy plików ZFS</primary>
<secondary>setting legacy mount point</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>W celu automatycznego montowania tradycyjnego systemu plików w czasie startu
systemu należy dodać odpowiedni wpis do pliku <filename>/etc/vfstab</filename>.
Poniższy przykład pokazuje, jak taki wpis w pliku <filename>/etc/vfstab</filename>
może wyglądać:</para>
<screen>#device         device        mount           FS      fsck    mount   mount
#to mount       to fsck       point           type    pass    at boot options
#

tank/home/eschrock -		/mnt		   zfs		-		yes		-	</screen>
<para>Należy zwrócić uwagę na to, że pozycje <literal>device to fsck</literal> oraz <literal>fsck pass</literal>
są ustawione jako <literal>-</literal>. Składnia ta wynika z faktu, że polecenie
<command>fsck</command> nie ma zastosowania w przypadku systemów plików ZFS.
Więcej informacji na temat integralności danych i braku potrzeby istnienia
polecenia <command>fsck</command> w ZFS znajduje się pod
<olink remap="external" targetdoc="chapter-1.xml" targetptr="gaypi">Transactional Semantics</olink>.</para>
</sect3>
</sect2>
<sect2 xml:id="gamns">
<title>Montowanie systemów plików ZFS</title>
<para>ZFS automatycznie montuje systemy plików podczas ich tworzenia lub
startu systemu. Użycie polecenia <command>zfs mount</command> jest
potrzebne tylko wtedy, gdy są zmieniane opcje montowania lub do 
montowania i odmontowania ściśle określonych systemów plików.</para>
<para>Polecenie <command>zfs mount</command> bez argumentów pokazuje wszystkie
aktualnie zamontowane systemy plików, które są zarządzane przez ZFS. Tradycyjnie
zarządzane punkty montowania nie są wyświetlane. Na przykład:</para>
<screen># <userinput>zfs mount</userinput>
tank                            /tank
tank/home                       /tank/home
tank/home/bonwick               /tank/home/bonwick
tank/ws                         /tank/ws</screen>
<para>Użycie opcji <option>
a</option> spowoduje zamontowanie wszystkich systemów plików zarządzanych
przez ZFS. Tradycyjnie zarządzane systemy plików są nie montowane. Na przykład:</para>
<screen># <userinput>zfs mount -a</userinput>
</screen>
<para>Domyślnie ZFS nie pozwoli zamontować systemu plików w katalogu, który nie jest pusty.
W celu wymuszenia zamontowania systemu plików w takim katalogu, należy użyć opcji <option>O</option>.
Na przykład:<indexterm xml:id="indexterm-368">
<primary>mounting</primary>
<secondary>systemy plików ZFS</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-369">
<primary>
<command>zfs mount</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-370">
<primary>systemy plików ZFS</primary>
<secondary>mounting</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs mount tank/home/lalt</userinput>
cannot mount '/export/home/lalt': directory is not empty
use legacy mountpoint to allow this behavior, or use the -O flag
# <userinput>zfs mount -O tank/home/lalt</userinput>
</screen>
<para>Tradycyjne punkty montowania muszą być zarządzane przez tradycyjne narzędzia.
Próba użycia narzędzi ZFS będzie skutkowało błędem. Na przykład:</para>
<screen># <userinput>zfs mount pool/home/billm</userinput>
cannot mount 'pool/home/billm': legacy mountpoint
use mount(1M) to mount this filesystem
# <userinput>mount -F zfs tank/home/billm</userinput>
</screen>
<para>Kiedy system plików jest zamontowany, używa opcji montowania opartych
na parametrach skojarzonych z datasetem. Korelacja między parametrami i opcjami
montowania wygląda następująco:</para>
<variablelist>
<varlistentry>
<term>Parametr</term>
<listitem>
<para>Opcje montowania</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<property>devices</property>
</term>
<listitem>
<para>
<literal>devices/nodevices</literal>
</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<property>exec</property>
</term>
<listitem>
<para>
<literal>exec/noexec</literal>
</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<property>readonly</property>
</term>
<listitem>
<para>
<literal>ro/rw</literal>
</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<property>setuid</property>
</term>
<listitem>
<para>
<literal>setuid/nosetuid</literal>
</para>
</listitem>
</varlistentry>
</variablelist>
<para>Opcja montowania <literal>nosuid</literal> jest aliasem na <literal>nodevices,nosetuid</literal>.</para>
</sect2>
<sect2 xml:id="gamnt">
<title>Używanie tymczasowych parametrów montowania</title>
<para>Jeśli jakakolwiek z powyższych opcji jest dokładnie określona poprzez
użycie opcji <option>o</option> polecenia <command>zfs mount</command>,
odpowiednio skojarzona wartość parametru zostaje tymczasowo nadpisana. Te
wartości parametrów są zgłaszane jako <literal>temporary</literal> przez
polecenie <command>zfs get</command> i wracają do oryginalnych ustawień, kiedy
system plików zostanie odmontowany. Jeżeli wartość parametru zostanie zmieniona,
kiedy dataset jest zamontowany, zmiana odnosi skutek natychmiastowy nadpisując
jakiekolwiek tymczasowe ustawienie.</para>
<para>W poniższym przykładzie zostaje ustawiona tymczasowo opcja
montowania systemu plików w trybie tylko do odczytu dla <filename>tank/home/perrin</filename>:</para>
<screen># <userinput>zfs mount -o ro tank/home/perrin</userinput>
</screen>
<para>W tym przykładzie przyjęto założenie, że system plików był odmontowany.
Żeby tymczasowo zmienić parametr dla systemu plików aktualnie zamontowanego,
należy użyć specjalnej opcji <literal>remount</literal>. W poniższym przykładzie
parametr <property>atime</property> zostaje tymczasowo zmieniony na <literal>off</literal>
dla systemu plików, który jest zamontowany:</para>
<screen># <userinput>zfs mount -o remount,noatime tank/home/perrin</userinput>
# <userinput>zfs get atime tank/home/perrin</userinput>
NAME             PROPERTY      VALUE                      SOURCE
tank/home/perrin atime         off                        temporary</screen>
<para>Więcej informacji na temat polecenia <command>zfs mount</command>
znajduje się pod <olink remap="external" targetdoc="819-2240" targetptr="zfs-1m">
<citerefentry>
<refentrytitle>zfs</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
</sect2>
<sect2 xml:id="gamnr">
<title>Odmontowywanie systemów plików ZFS</title>
<para>Systemy plików można odmontować poprzez użycie polecenia <command>zfs unmount</command>.
Polecenie <command>unmount</command> przyjmuje jako argumenty punkt montowania
lub nazwę systemu plików.<indexterm xml:id="indexterm-371">
<primary>unmounting</primary>
<secondary>systemy plików ZFS</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-372">
<primary>
<command>zfs unmount</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-373">
<primary>systemy plików ZFS</primary>
<secondary>unmounting</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<para>W poniższym przykładzie system plików jest odmontowany poprzez wskazanie
jego nazwy:</para>
<screen># <userinput>zfs unmount tank/home/tabriz</userinput>
</screen>
<para>W kolejnym przykładzie systemu plików jest odmontowany poprzez wskazanie
punktu montowania:</para>
<screen># <userinput>zfs unmount /export/home/tabriz</userinput>
</screen>
<para>Wykonanie polecenia <command>unmount</command> zawiedzie, jeśli system plików
jest aktywny lub zajęty. W celu wymuszenia odmontowania systemu plików można użyć opcji
<option>f</option>.
Należy zachować ostrożność przy wymuszonym odmontowaniu systemu plików, jeśli jego
zawartość jest aktywnie wykorzystywana. Może to skutkować nieprzewidywalnym
zachowaniem aplikacji.</para>
<screen># <userinput>zfs unmount tank/home/eschrock</userinput>
cannot unmount '/export/home/eschrock': Device busy
# <userinput>zfs unmount -f tank/home/eschrock</userinput>
</screen>
<para>W celu zachowania wstecznej kompatybilności, można użyć także tradycyjnego
polecenia <command>umount</command> do odmontowania systemów plików ZFS.
Na przykład:</para>
<screen># <userinput>umount /export/home/bob</userinput>
</screen>
<para>Więcej informacji o poleceniu <command>zfs umount</command> znajduje się
pod <olink remap="external" targetdoc="819-2240" targetptr="zfs-1m">
<citerefentry>
<refentrytitle>zfs</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
</sect2>
<sect2 xml:id="gamnd">
<title>Udostępnianie (sharing) i wyłączanie udostępniania systemów plików ZFS</title>
<para>Analogicznie do punktów montowania ZFS może automatycznie udostępniać
systemy plików poprzez użycie parametru <property>sharenfs</property>. Używając
tej metody nie ma potrzeby modyfikacji pliku <filename>/etc/dfs/dfstab</filename>,
kiedy zostaje dodany nowy system plików. Parametr <property>sharenfs</property>
jest listą opcji oddzielonych przecinkami przekazywanych do polecenia <command>share</command>.
Specjalna wartość <literal>on</literal> jest aliasem na domyślne opcje udostępniania,
które pozwalają na pełny dostęp (<literal>read/write</literal>) dla każdego.
Specjalna wartość <literal>off</literal> określa, że ten system plików
nie jest zarządzany przez ZFS i może być udostępniony tradycyjnymi metodami,
jak plik <filename>/etc/dfs/dfstab</filename>.
Wszystkie systemy plików, których parametr <property>sharenfs</property> nie jest ustawiony
na <literal>off</literal> są udostępniane na etapie startu systemu.<indexterm xml:id="indexterm-374">
<primary>sharing</primary>
<secondary>systemy plików ZFS</secondary>
<tertiary>opis</tertiary>
</indexterm>
<indexterm xml:id="indexterm-375">
<primary>
<property>sharenfs</property> property</primary>
<secondary>opis</secondary>
</indexterm>
<indexterm xml:id="indexterm-376">
<primary>systemy plików ZFS</primary>
<secondary>sharing</secondary>
<tertiary>opis</tertiary>
</indexterm>
</para>
<sect3 xml:id="gbdxz">
<title>Kontrolowanie sposobu udostępniania</title>
<para>Domyślnie wszystkie systemy plików nie są udostępniane. W celu
udostępnienia nowego systemu plików należy użyć polecenia <command>zfs set</command>
ze składnią podobną do poniższej:</para>
<screen># <userinput>zfs set sharenfs=on tank/home/eschrock</userinput>
</screen>
<para>Parametr jest dziedziczony i wszystkie systemy plików są automatycznie udostępniane,
jeśli ich dziedziczony parametr nie przyjmuje wartości <literal>off</literal>. Na
przykład:<indexterm xml:id="indexterm-377">
<primary>sharing</primary>
<secondary>systemy plików ZFS</secondary>
<tertiary>example of</tertiary>
</indexterm>
<indexterm xml:id="indexterm-378">
<primary>
<command>zfs set sharenfs=on</command>
</primary>
<secondary>example of</secondary>
</indexterm>
<indexterm xml:id="indexterm-379">
<primary>systemy plików ZFS</primary>
<secondary>sharing</secondary>
<tertiary>example of</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs set sharenfs=on tank/home</userinput>
# <userinput>zfs create tank/home/bricker</userinput>
# <userinput>zfs create tank/home/tabriz</userinput>
# <userinput>zfs set sharenfs=ro tank/home/tabriz</userinput>
</screen>
<para>Zarówno <filename>tank/home/bricker</filename>, jak i <filename>tank/home/tabriz</filename> 
na początku są udostępnione w trybie do zapisu, ponieważ dziedziczą wartość parametru
<property>sharenfs</property> z <filename>tank/home</filename>. Natomiast <filename>tank/home/tabriz</filename>
staje się tylko do odczytu w momencie, kiedy parametr zostaje ustawiony na <literal>ro</literal>
(readonly) niezależnie od ustawienia parametru <property>sharenfs</property> dla
<filename>tank/home</filename>.</para>
</sect3>
<sect3 xml:id="gbdze">
<title>Wyłączenie udostępniania (unsharing) systemów plików ZFS</title>
<para>Kiedy większość systemów plików jest automatycznie udostępniana lub też nie
podczas startu systemu, tworzenia lub kasowania, czasami istnieje potrzeba jawnego
wyłączenia udostępniania. Służy do tego polecenia <command>zfs unshare</command>.
Na przykład:</para>
<screen># <userinput>zfs unshare tank/home/tabriz</userinput>
</screen>
<para>To polecenie wyłączy udostępnianie systemu plików <filename>tank/home/tabriz</filename>.
W celu wyłączenia udostępniania wszystkich systemów plików ZFS należy użyć opcji <option>
a</option>.<indexterm xml:id="indexterm-380">
<primary>unsharing</primary>
<secondary>systemy plików ZFS</secondary>
<tertiary>example of</tertiary>
</indexterm>
<indexterm xml:id="indexterm-381">
<primary>systemy plików ZFS</primary>
<secondary>unsharing</secondary>
<tertiary>example of</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs unshare -a</userinput>
</screen>
</sect3>
<sect3 xml:id="gbdxw">
<title>Udostępnianie (sharing) systemów plików ZFS</title>
<para>W większości przypadków automatyczne zachowanie ZFS, udostępnianie w czasie
startu systemu i tworzenia jest wystarczające. Jeśli z jakichś przyczyn udostępnianie
systemu plików zostało wyłączone, można udostępnić go ponownie poprzez użycie polecenia
<command>zfs share</command>. Na przykład:</para>
<screen># <userinput>zfs share tank/home/tabriz</userinput>
</screen>
<para>You can also share all ZFS file systems on the system by using the <option>
a</option> option.</para>
<screen># <userinput>zfs share -a</userinput>
</screen>
</sect3>
<sect3 xml:id="gbdxq">
<title>Tradycyjne udostępnianie</title>
<para>Jeśli parametr <property>sharenfs</property> jest ustawiony na <literal>off</literal>,
wtedy ZFS nie podejmuje prób udostępniania lub wyłączenia udostępniania systemu plików.
To ustawienie pozwala zarządzać udostępnianiem tradycyjnymi metodami takimi jak
plik <filename>/etc/dfs/dfstab</filename>.</para>
<para>W przeciwieństwie do tradycyjnego polecenia <command>mount</command>, standardowe
polecenia <command>share</command> oraz <command>unshare</command> mogą być zawsze używane
dla systemów plików ZFS. Wskutek tego istnieje możliwość udostępnienia systemu plików z innymi
ustawieniami, niż wartość zmiennej <literal>sharenfs</literal>. Ten model administrowania
jest odradzany. Zaleca się zarządzanie udostępnianiem NFS całkowicie poprzez mechanizm ZFS lub
całkowicie poprzez plik <filename>/etc/dfs/dfstab</filename>. Model zarządzania ZFS
został zaprojektowany tak, żeby był prostszy i wymagający mniejszego nakładu pracy niż
tradycyjny. Jednakże w niektórych przypadkach może ciągle zachodzić potrzeba kontrolowania
udostępniania systemu plików poprzez tradycyjny, znajomy sposób.</para>
</sect3>
</sect2>
</sect1>
<sect1 xml:id="gazvb">
<title>Limity (quoty) i rezerwacje ZFS</title>
<para>ZFS wspiera limity i rezeracje na poziomie systemu plików. Ustawienie
parametru <property>quota</property> narzuca limit wielkości miejsca, jaki
system plików może użyć. Dodatkowo można ustawić parametr <property>reservation</property>
w celu zagwarantowania, że podana ilość miejsca będzie dostępna dla systemu
plików. Obydwa parametry dotyczą datasetu, dla którego są ustawiane oraz
dla wszystkich potomnych dla niego datasetów.<indexterm xml:id="indexterm-382">
<primary>quotas and reservations</primary>
<secondary>opis</secondary>
</indexterm>
</para>
<para>Oznacza to, że jeśli limit zostanie ustawiony dla datasetu <filename>tank/home</filename>,
całkowita ilość miejsca użyta przez <filename>tank/home</filename> <emphasis>i
wszystkie dla niego potomne datasety</emphasis> nie może przekroczyć wartości limitu.
Analogicznie jeśli <filename>tank/home</filename> ma określoną rezerwację,
<filename>tank/home</filename> <emphasis>i wszystkie dla niego potomne datasety</emphasis>
dostają tą rezerwację. Ilość miejsca użyta przez dataset i potomne dla niego jest podawana
poprzez parametr <property>used</property>.</para>
<sect2 xml:id="gazud">
<title>Ustawianie limitu dla systemów plików ZFS</title>
<para>Limity ZFS mogą być ustawiane i wyświetlane poprzez użycie poleceń
<command>zfs set</command> oraz <command>zfs get</command>. W poniższym przykładzie
dla systemu plików <filename>tank/home/bonwick</filename> zostaje ustawiony limit 10 gigabajtów.<indexterm xml:id="indexterm-383">
<primary>setting</primary>
<secondary>ZFS file system quota (<command>zfs set quota</command>)</secondary>
<tertiary>example of</tertiary>
</indexterm>
<indexterm xml:id="indexterm-384">
<primary>
<command>zfs set quota</command>
</primary>
<secondary>example of</secondary>
</indexterm>
<indexterm xml:id="indexterm-385">
<primary>ZFS file systems (<command>zfs set quota</command>)</primary>
<secondary>setting a quota</secondary>
<tertiary>example of</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs set quota=10G tank/home/bonwick</userinput>
# <userinput>zfs get quota tank/home/bonwick</userinput>
NAME              PROPERTY      VALUE                      SOURCE
tank/home/bonwick quota         10.0G                      local</screen>
<para>Limity ZFS mają także wpływ na wartości w wyjściu poleceń <command>zfs list</command> oraz <command>df</command>. Na przykład:</para>
<screen># <userinput>zfs list</userinput>
NAME                   USED  AVAIL  REFER  MOUNTPOINT
tank/home             16.5K  33.5G  8.50K  /export/home
tank/home/bonwick     15.0K  10.0G  8.50K  /export/home/bonwick
tank/home/bonwick/ws  6.50K  10.0G  8.50K  /export/home/bonwick/ws
# <userinput>df -h /export/home/bonwick</userinput>
Filesystem             size   used  avail capacity  Mounted on
tank/home/bonwick       10G     8K    10G     1%    /export/home/bonwick</screen>
<para>Proszę zauważyć, że pomimo tego, iż <filename>tank/home</filename> ma 33.5 gigabajtów dostępnego
miejsca, <filename>tank/home/bonwick</filename> oraz <filename>tank/home/bonwick/ws</filename>
mają tylko 10 gigabajtów dostępnego miejsca z powodu ustawienia limitu dla <filename>tank/home/bonwick</filename>.</para>
<para>Nie można ustawić limitu na wielkość mniejszą, niż aktualnie używana
przez dataset. Na przykład:</para>
<screen># <userinput>zfs set quota=10K tank/home/bonwick</userinput>
cannot set quota for 'tank/home/bonwick': size is less than current used or 
reserved space</screen>
</sect2>
<sect2 xml:id="gbdbb">
<title>Ustawianie rezerwacji dla systemów plików ZFS</title>
<para><emphasis>Rezerwacje</emphasis> ZFS to inaczej przydzielenie miejsca z puli
w celu zagwarantowania jego dostępności dla datasetu. Skutkiem tego nie można
zarezerwować miejsca dla datasetu, jeśli to miejsce nie jest w danym momencie
dostępne w puli. Sumaryczna wielkość dla wszystkich rezerwacji nie może
przekroczyć wielkości niewykorzystanego miejsca w puli. Rezerwacje ZFS
mogą być ustawiane i wyświetlane poprzez użycie poleceń <command>zfs set</command>
oraz <command>zfs get</command>. Na przykład:<indexterm xml:id="indexterm-386">
<primary>setting</primary>
<secondary>ZFS file system reservation</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
<indexterm xml:id="indexterm-387">
<primary>
<command>zfs set reservation</command>
</primary>
<secondary>(przykład)</secondary>
</indexterm>
<indexterm xml:id="indexterm-388">
<primary>systemy plików ZFS</primary>
<secondary>setting a reservation</secondary>
<tertiary>(przykład)</tertiary>
</indexterm>
</para>
<screen># <userinput>zfs set reservation=5G tank/home/moore</userinput>
# <userinput>zfs get reservation tank/home/moore</userinput>
NAME             PROPERTY      VALUE                      SOURCE
tank/home/moore  reservation   5.00G                      local</screen>
<para>Rezerwacje ZFS mogą wpływać na wyjście polecenia <command>zfs list</command>. Na przykład:</para>
<screen># <userinput>zfs list</userinput>
NAME                   USED  AVAIL  REFER  MOUNTPOINT
tank/home             5.00G  33.5G  8.50K  /export/home
tank/home/moore       15.0K  10.0G  8.50K  /export/home/moore</screen>
<para>Proszę zauważyć, że <filename>tank/home</filename> używa 5 gigabajtów przestrzeni,
pomimo tego, że sumaryczna wielkość zajętego miejsca odnosząca się do <filename>tank/home</filename>
oraz jego potomnych datasetów jest dużo mniejsza niż 5 gigabajtów.
Użyte miejsce odpowiada przestrzeni zarezerwowanej dla <filename>tank/home/moore</filename>.
Rezerwacje są uwzględnianie w używanym miejscu nadrzędnego datasetu i działają na niekorzyść
dla jego limitu, rezerwacji lub obydwu.</para>
<screen># <userinput>zfs set quota=5G pool/filesystem</userinput>
# <userinput>zfs set reservation=10G pool/filesystem/user1</userinput>
cannot set reservation for 'pool/filesystem/user1': size is greater than 
available space</screen>
<para>Dataset może używać więcej przestrzeni niż ustawiona rezerwacja tak długo, jak
jest dostępne niezarezerwowane miejsce w puli i aktualne użycie miejsca przez dataset
jest poniżej jego limitu. Dataset nie może użyć miejsca, które jest zarezerwowane dla
innego datasetu.</para>
<para>Rezerwacje nie kumulują się. Drugie wykonanie polecenia <command>zfs set</command>
w celu ustawienie rezerwacji nie dodaje podanej wartości do poprzedniej. Drugie wykonanie
polecenia nadpisze poprzednią wartość.</para>
<screen># <userinput>zfs set reservation=10G tank/home/moore</userinput>
# <userinput>zfs set reservation=5G tank/home/moore</userinput>
# <userinput>zfs get reservation tank/home/moore</userinput>
NAME             PROPERTY      VALUE                      SOURCE
tank/home/moore  reservation   5.00G                      local</screen>
</sect2>
</sect1>
</chapter>
