<chapter id="pppsvrconfig.dialin-1"><title>Setting Up a Dial-up PPP Link
(Tasks)</title><highlights><itemizedlist><para>This chapter explains the tasks
for configuring the most common PPP
link, the dial-up link. Major topics
include the following:</para><listitem><para><olink targetptr="pppsvrconfig.dialin-52" remap="internal">Configuring
the Dial-out Machine</olink></para>
</listitem><listitem><para><olink targetptr="pppsvrconfig.dialin-54" remap="internal">Configuring
the Dial-in Server</olink></para>
</listitem><listitem><para><olink targetptr="pppsvrconfig.dialin-25" remap="internal">Calling
the Dial-in Server</olink></para>
</listitem>
</itemizedlist>
</highlights><sect1 id="ppp.dialin-11"><title>Major
Tasks for Setting Up the Dial-up PPP
Link (Task Map)</title><para>You set up the dial-up PPP link
by configuring modems, modifying network
database files, and modifying the
PPP configuration files that are described
in <olink targetptr="ppp.reference-tbl-71" remap="internal">Table
22&#8211;1</olink>. </para><para>The next table lists the
major tasks to configure both sides
of a dial-up PPP link. Typically,
you configure only one end of the
link, either the dial-out machine
or dial-in server.</para><table frame="all" pgwide="100" id="ppp.dialin-tbl-12"><title>Task
Map for Setting Up the Dial-up PPP
Link</title><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec0" colwidth="25.61*"/><colspec colname="colspec1" colwidth="37.73*"/><colspec colname="colspec2" colwidth="49.50*"/><thead><row rowsep="1"><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>1. Gather preconfiguration information</para>
</entry><entry><para>Gather data that is needed prior
to setting up the link, such as peer
host names, target phone numbers,
and modem speed.</para>
</entry><entry><para><olink targetptr="pppsvrconfig.p2plink-4" remap="internal">Planning
a Dial-up PPP Link</olink></para>
</entry>
</row><row><entry><para>2. Configure the dial-out machine</para>
</entry><entry><para>Set up PPP on the machine that
makes the call over the link.</para>
</entry><entry><para><olink targetptr="ppp.dialin-tbl-13" remap="internal">Table
17&#8211;2</olink></para>
</entry>
</row><row><entry><para>3. Configure the dial-in server</para>
</entry><entry><para>Set up PPP on the machine that
receives incoming calls.</para>
</entry><entry><para><olink targetptr="ppp.dialin-tbl-15" remap="internal">Table
17&#8211;3</olink></para>
</entry>
</row><row><entry><para>4. Call the dial-in server</para>
</entry><entry><para>Type the <command>pppd</command> command
to initiate communications.</para>
</entry><entry><para><olink targetptr="pppsvrconfig.dialin-proc-27" remap="internal">How
to Call the Dial-in Server</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect1><sect1 id="pppsvrconfig.dialin-52"><title>Configuring the Dial-out Machine</title><para>The tasks in this section explain
how to configure a dial-out machine.
The tasks use as an example the dial-
in-from-home scenario that was introduced
in <olink targetptr="pppsvrconfig.p2plink-fig-1" remap="internal">Figure
16&#8211;1</olink>. You can perform
the tasks at your company before passing
on the machine to a prospective user.
Alternatively, you can instruct experienced
users in the  setup of their  home
machines. Anyone setting up a dial-out
machine must have root permission
for that machine.</para><sect2 id="ppp.dialin-48"><title>Tasks
for Configuring the Dial-out Machine
(Task Map)</title><table frame="all" pgwide="100" id="ppp.dialin-tbl-13"><title>Task
Map for Setting Up the Dial-out Machine</title><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec0" colwidth="25.61*"/><colspec colname="colspec1" colwidth="37.73*"/><colspec colname="colspec2" colwidth="49.50*"/><thead><row rowsep="1"><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>1. Gather preconfiguration information</para>
</entry><entry><para>Gather data that is needed prior
to setting up the link, such as peer
host names, target phone numbers,
and modem speed.</para>
</entry><entry><para><olink targetptr="pppsvrconfig.p2plink-4" remap="internal">Planning
a Dial-up PPP Link</olink></para>
</entry>
</row><row><entry><para>2. Configure the modem and serial
port</para>
</entry><entry><para>Set up the modem and serial
port. </para>
</entry><entry><para><olink targetptr="ppp.dialin-50" remap="internal">How
to Configure the Modem and Serial
Port (Dial-out Machine)</olink></para>
</entry>
</row><row><entry><para>3. Configure the serial-line
communication</para>
</entry><entry><para>Configure the characteristics
of the transmission across the serial
line.</para>
</entry><entry><para><olink targetptr="ppp.dialin-53" remap="internal">How
to Define Communications Over the
Serial Line</olink></para>
</entry>
</row><row><entry><para>4. Define the conversation between
the dial-out machine and the peer</para>
</entry><entry><para>Gather communications data for
use when you create the chat script.</para>
</entry><entry><para><olink targetptr="pppsvrconfig.dialin-50" remap="internal">How
to Create the Instructions for Calling
a Peer</olink></para>
</entry>
</row><row><entry><para>5. Configure information about
a particular peer</para>
</entry><entry><para>Configure PPP options to call
an individual dial-in server.</para>
</entry><entry><para><olink targetptr="ppp.dialin-55" remap="internal">How
to Define the Connection With an Individual
Peer</olink></para>
</entry>
</row><row><entry><para>6. Call the peer</para>
</entry><entry><para>Type the <command>pppd</command> command
to initiate communications.</para>
</entry><entry><para><olink targetptr="pppsvrconfig.dialin-proc-27" remap="internal">How
to Call the Dial-in Server</olink>.</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect2><sect2 id="ppp.dialin-20"><title>Dial-up
PPP Template Files</title><para>Solaris PPP 4.0 provides
template files. Each template contains
common options for a particular PPP
configuration file. The next table
lists the sample templates that can
be used for setting up a dial-up link,
and their equivalent Solaris PPP 4.0
files.</para><informaltable frame="topbot" pgwide="100"><tgroup cols="3" colsep="0" rowsep="0"><colspec colwidth="33*"/><colspec colwidth="33*"/><colspec colwidth="33*"/><thead><row rowsep="1"><entry><para>Template File</para>
</entry><entry><para>PPP Configuration File</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para><filename>/etc/ppp/options.tmpl</filename></para>
</entry><entry><para><filename>/etc/ppp/options</filename></para>
</entry><entry><para><olink targetptr="ppp.reference-17" remap="internal">/etc/ppp/options.tmpl Template</olink></para>
</entry>
</row><row><entry><para><filename>/etc/ppp/options.ttya.tmpl</filename></para>
</entry><entry><para><filename>/etc/ppp/options.</filename><replaceable>ttyname</replaceable></para>
</entry><entry><para><olink targetptr="ppp.reference-18" remap="internal">options.ttya.tmpl Template File</olink></para>
</entry>
</row><row><entry><para><filename>/etc/ppp/myisp-chat.tmpl</filename></para>
</entry><entry><para>File with the name of your choice
to contain the chat script</para>
</entry><entry><para><olink targetptr="ppp.reference-20" remap="internal">/etc/ppp/myisp-chat.tmpl Chat Script
Template</olink></para>
</entry>
</row><row><entry><para><filename>/etc/ppp/peers/myisp.tmpl</filename></para>
</entry><entry><para><filename>/etc/ppp/peers/</filename><replaceable>peer-name</replaceable></para>
</entry><entry><para><olink targetptr="ppp.reference-19" remap="internal">/etc/ppp/peers/myisp.tmpl Template
File</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>If you decide to use one of
the template files, be sure to rename
the template to its equivalent PPP
configuration file. The one exception
is the chat file template <filename>/etc/ppp/myisp-chat.tmpl</filename>. You can choose any name
for your chat script.</para>
</sect2><sect2 id="pppsvrconfig.dialin-3"><title>Configuring Devices on the
Dial-out Machine</title><para>The first task for setting up
a dial-out PPP machine is to configure
the devices on the serial line: the
modem and serial port.</para><note><para>Tasks that apply to a
modem usually apply to an ISDN TA.</para>
</note><para>Before performing the next procedure,
you must have done the following.</para><itemizedlist><listitem><para>Installed the Solaris
9 release or Solaris 10 release on
the dial-out machine </para>
</listitem><listitem><para>Determined the optimum
modem speed</para>
</listitem><listitem><para>Decided which serial
port to use on the dial-out machine</para>
</listitem><listitem><para>Obtained the root
password for the dial-out machine</para>
</listitem>
</itemizedlist><para>For planning information, see <olink targetptr="pppsvrconfig.p2plink-tbl-9" remap="internal">Table
16&#8211;2</olink>.</para>
</sect2><task id="ppp.dialin-50"><title>How
to Configure the Modem and Serial
Port (Dial-out Machine)</title><procedure><step id="pppsvrconfig.dialin-step-44"><para>Program the modem.</para><para>Even
though a variety of modem types is
available, most modems are shipped
with the correct settings for Solaris
PPP 4.0. The following list shows
the basic parameter settings for modems
that use Solaris PPP 4.0.</para><itemizedlist><listitem><para><emphasis role="strong">DCD &#8211;</emphasis> Follow carrier instructions</para>
</listitem><listitem><para><emphasis role="strong">DTR &#8211;</emphasis> Set low so that the modem
hangs up and puts the modem on-hook</para>
</listitem><listitem><para><emphasis role="strong">Flow
Control &#8211;</emphasis> Set to
RTS/CTS for full-duplex hardware flow
control</para>
</listitem><listitem><para><emphasis role="strong">Attention
Sequences &#8211;</emphasis> Disable</para>
</listitem>
</itemizedlist><para>If you have problems setting
up the link and suspect that the modem
is at fault, first consult the modem
manufacturer's documentation. Also,
a number of web sites offer help with
modem programming. Finally, you can
find some suggestions for clearing
modem problems in <olink targetptr="ppp.trouble-27" remap="internal">How to
Diagnose Modem Problems</olink>.</para>
</step><step id="pppsvrconfig.dialin-step-5"><para>Attach the modem cables to the
serial port on the dial-out machine
and to the telephone jack.</para>
</step><step id="pppsvrconfig.dialin-step-60"><para>Become superuser on the dial-out
machine or assume an equivalent role.</para><para>Roles contain authorizations
and privileged commands. For more
information about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.
To configure a role with the Primary
Administrator profile, see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="pppsvrconfig.dialin-step-6"><para>Run the <command>/usr/sadm/bin/smc</command> command,
as explained in <olink targetdoc="sysadv2" targetptr="modsetup-1" remap="external"><citetitle remap="section">Setting Up Terminals and Modems With Serial Ports Tool (Overview)</citetitle> in <citetitle remap="book">System Administration Guide: Advanced Administration</citetitle></olink>.
This command opens the Solaris Management
Console.</para><para>Use the Solaris
Management Console to do the following.</para><substeps><step id="pppsvrconfig.dialin-step-32"><para>Select the port where you have
attached the modem.</para>
</step><step id="pppsvrconfig.dialin-step-18"><para>Specify modem direction as dial-out
only.</para><para>You can set up the
modem as bidirectional. However, the
dial-out-only choice is more secure
against possible intruders.</para>
</step>
</substeps><note><para>You can set the baud rate
and timeout from <command>/usr/sadm/bin/smc</command>. However, the <command>pppd</command> daemon
ignores these settings.</para>
</note>
</step><step id="ppp.dialin-step-51"><para>Click
Okay to convey the changes.</para>
</step>
</procedure>
</task><sect2 id="pppsvrconfig.dialin-17"><title>Configuring Communications
on the Dial-out Machine</title><para>The procedures in this section
show how to configure communications
over the serial line of the dial-out
machine. Before you can use these
procedures, you must have configured
the modem and serial port, as described
in <olink targetptr="ppp.dialin-50" remap="internal">How
to Configure the Modem and Serial
Port (Dial-out Machine)</olink>.</para><itemizedlist><para>The next tasks show how to enable
the dial-out machine to successfully
initiate communications with the dial-in
server. Communications are initiated
as defined in the  options in the
PPP configuration files. You need
to create the following files:</para><listitem><para><filename>/etc/ppp/options</filename></para>
</listitem><listitem><para><filename>/etc/ppp/options.</filename><replaceable>ttyname</replaceable></para>
</listitem><listitem><para>Chat script</para>
</listitem><listitem><para><filename>/etc/ppp/peers/</filename><replaceable>peer-name</replaceable></para>
</listitem>
</itemizedlist><para>Solaris PPP 4.0 provides templates
for the PPP configuration files, which
you can customize to accommodate your
needs. Refer to <olink targetptr="ppp.dialin-20" remap="internal">Dial-up
PPP Template Files</olink> for detailed
information about these files. </para>
</sect2><task id="ppp.dialin-53"><title>How
to Define Communications Over the
Serial Line</title><procedure><step id="pppsvrconfig.dialin-step-23"><para>Become superuser on the dial-out
machine or assume an equivalent role.</para><para>Roles contain authorizations
and privileged commands. For more
information about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.
To configure a role with the Primary
Administrator profile, see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink></para>
</step><step id="pppsvrconfig.dialin-step-1"><para>Create a file that is called <filename>/etc/ppp/options</filename> with the
following entry:</para><screen><userinput>lock</userinput></screen><para>The <filename>/etc/ppp/options</filename> file
is used for defining global parameters
that apply to all communications by
the local machine. The <literal>lock</literal> option
enables UUCP-style locking of the
form <filename>/var/spool/locks/LK.xxx.yyy.zzz</filename>.</para><note><para>If the dial-out machine
does not have an <filename>/etc/ppp/options</filename> file, only the superuser
can run the <command>pppd</command> command.
However, the <filename>/etc/ppp/options</filename> can
be empty.</para>
</note><para>For a complete description
of <filename>/etc/ppp/options</filename>,
refer to <olink targetptr="pppsvrconfig.reference-46" remap="internal">/etc/ppp/options
Configuration File</olink>.</para>
</step><step performance="optional" id="pppsvrconfig.dialin-step-53"><para>Create
a file that is called <filename>/etc/ppp/options.</filename><replaceable>ttyname</replaceable> for
defining how communications should
be initiated from a specific serial
port.</para><para>The next example
shows an <filename>/etc/ppp/options.</filename><replaceable>ttyname</replaceable> file for the
port with the device name <filename>/dev/cua/a</filename>.</para><screen># <userinput>cat /etc/ppp/options.cua.a</userinput>
crtscts</screen><para>The
PPP option <literal>crtscts</literal> tells
the <command>pppd</command> daemon
to turn on hardware flow control for
serial port a.</para><para>For more
information about the <filename>/etc/ppp/options.ttyname</filename> file, go to <olink targetptr="pppsvrconfig.reference-4" remap="internal">/etc/ppp/options.ttyname
Configuration File</olink>.</para>
</step><step id="ppp.dialin-step-9"><para>Set
the modem speed, as described in <olink targetptr="ppp.dialin-5" remap="internal">How to Set
the Modem Speed</olink>.</para>
</step>
</procedure>
</task><task id="pppsvrconfig.dialin-50"><title>How to Create the Instructions
for Calling a Peer</title><tasksummary><para>Before the dial-out machine
can initiate a PPP link, you must
collect information about the dial-in
server that is to become the peer.
Then, you use this information to
create the chat script, which describes
the actual conversation between the
dial-out machine and the peer.</para>
</tasksummary><procedure><step id="ppp.dialin-step-14"><para>Determine
the speed at which the dial-out machine's
modem needs to run. </para><para>For
more information, see <olink targetptr="ppp.reference-65" remap="internal">Configuring
Modem Speed for a Dial-up Link</olink>.</para>
</step><step id="ppp.dialin-step-2"><para>Obtain
the following information from the
dial-in server's site.</para><itemizedlist><listitem><para>Server's telephone
number</para>
</listitem><listitem><para>Authentication protocol
that is used, if appropriate</para>
</listitem><listitem><para>Login sequence that
is required by the peer for the chat
script</para>
</listitem>
</itemizedlist>
</step><step id="ppp.dialin-step-3"><para>Obtain
the names and IP addresses of name
servers at the dial-in server's site.</para>
</step><step id="ppp.dialin-step-4"><para>In
a chat script, provide instructions
for initiating calls to the particular
peer.</para><para>For example, you might
create the following chat script, <filename>/etc/ppp/mychat</filename>, to call
the dial-in server <literal>myserver</literal>. </para><screen>SAY "Calling the peer\n"
        TIMEOUT 10
        ABORT BUSY
        ABORT 'NO CARRIER'
        ABORT ERROR
        REPORT CONNECT
        "" AT&#38;F1&#38;M5S2=255
        TIMEOUT 60
        OK ATDT1-123-555-1234 
        CONNECT \c
        SAY "Connected; logging in.\n"
        TIMEOUT 5
        ogin:--ogin: pppuser
        TIMEOUT 20
        ABORT 'ogin incorrect'
        ssword: \qmypassword
        "% " \c
        SAY "Logged in.  Starting PPP on peer system.\n" 
        ABORT 'not found'
        "" "exec pppd"
        ~ \c</screen><para>The script contains instructions
for calling a Solaris dial-in server
that requires a login sequence. For
a description of each instruction,
refer to <olink targetptr="pppsvrconfig.reference-14" remap="internal">Basic
Chat Script Enhanced for a UNIX-Style
Login</olink>. For complete details
about creating a chat script, read
the section <olink targetptr="pppsvrconfig.reference-66" remap="internal">Defining
the Conversation on the Dial-up Link</olink>.</para><note><para>You do not invoke the
chat script directly. Rather, you
use the file name of the chat script
as an argument to the <command>chat</command> command,
which invokes the script.</para>
</note><para>If a peer runs Solaris or a
similar operating system, consider
using the previous chat script as
a template for your dial-out machines. </para>
</step>
</procedure>
</task><task id="ppp.dialin-55"><title>How
to Define the Connection With an Individual
Peer</title><procedure><step id="pppsvrconfig.dialin-step-30"><para>Become superuser on the dial-out
machine or assume an equivalent role.</para><para>Roles contain authorizations
and privileged commands. For more
information about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.
To configure a role with the Primary
Administrator profile, see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="pppsvrconfig.dialin-step-10"><para>Update DNS databases by creating
the following <filename>/etc/resolv.conf</filename> file:</para><screen><userinput>domain bigcompany.com</userinput>
<userinput>nameserver 10.10.111.15</userinput>
<userinput>nameserver 10.10.130.8</userinput></screen><variablelist><varlistentry><term><userinput>domain
bigcompany.com</userinput></term><listitem><para>Specifies that the
peer's DNS domain is <literal>bigcompany.com</literal>.</para>
</listitem>
</varlistentry><varlistentry><term><userinput>nameserver
10.10.111.15</userinput>  and <userinput>nameserver 10.10.130.8</userinput></term><listitem><para>Lists the IP addresses
of name servers at <literal>bigcompany.com</literal>.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step id="pppsvrconfig.dialin-step-11"><para>Edit the <filename>/etc/nsswitch.conf</filename> file to have the DNS database
searched first for host information.</para><screen>hosts:      dns [NOTFOUND=return] files </screen>
</step><step id="pppsvrconfig.dialin-step-12"><para>Create a file for the peer.</para><para>For example, you would create
the following file to define the dial-in
server <filename>myserver</filename>:</para><screen># <userinput>cat /etc/ppp/peers/myserver</userinput>
/dev/cua/a
57600
noipdefault
defaultroute
idle 120
noauth
connect "chat -U 'mypassword' -T 1-123-555-1213 -f /etc/ppp/mychat"</screen><variablelist><varlistentry><term>/dev/cua/a</term><listitem><para>Specifies that the
device <filename>/dev/cua/a</filename> should
be used as the serial interface for
calls to <literal>myserver</literal>.</para>
</listitem>
</varlistentry><varlistentry><term>57600</term><listitem><para>Defines the speed
of the link.</para>
</listitem>
</varlistentry><varlistentry><term>noipdefault</term><listitem><para>Specifies that for transactions
with peer <command>myserver</command>,
the dial-out machine initially has
an IP address of 0.0.0.0. <command>myserver</command> assigns an IP address to
the dial-out machine for every dial-up
session.</para>
</listitem>
</varlistentry><varlistentry><term>idle 120</term><listitem><para>Indicates that the link
must time out after an idle period
of 120 seconds.</para>
</listitem>
</varlistentry><varlistentry><term>noauth</term><listitem><para>Specifies that the peer <literal>myserver</literal> does not need to
provide authentication credentials
when negotiating the connection with
the dial-out machine.</para>
</listitem>
</varlistentry><varlistentry><term>connect "chat
-U 'mypassword' -T 1-123-555-1213
-f /etc/ppp/mychat"</term><listitem><para>Specifies the <literal>connect</literal> option and its arguments,
including the phone number of the
peer, and the chat script <filename>/etc/ppp/mychat</filename> with calling instructions.</para>
</listitem>
</varlistentry>
</variablelist>
</step>
</procedure><taskrelated role="see-also"><para>The following list provides
references to related information.</para><itemizedlist><listitem><para>To configure another
dial-out machine, see <olink targetptr="ppp.dialin-50" remap="internal">How to Configure
the Modem and Serial Port (Dial-out
Machine)</olink>.</para>
</listitem><listitem><para>To test modem connectivity
by dialing out to another computer,
see <olink targetdoc="refman1" targetptr="cu-1c" remap="external"><citerefentry><refentrytitle>cu</refentrytitle><manvolnum>1C</manvolnum></citerefentry></olink> and <olink targetdoc="refman1" targetptr="tip-1" remap="external"><citerefentry><refentrytitle>tip</refentrytitle><manvolnum>1</manvolnum></citerefentry></olink> man
pages. These utilities can help you
test if your modem is properly configured.
Also, use these utilities to test
if you can establish a connection
with another machine.</para>
</listitem><listitem><para>To learn more about
the configuration files and options,
see <olink targetptr="pppsvrconfig.reference-65" remap="internal">Using
PPP Options in Files and on the Command
Line</olink>.</para>
</listitem><listitem><para>To configure a dial-in
server, see <olink targetptr="pppsvrconfig.dialin-53" remap="internal">Configuring
Devices on the Dial-in Server</olink>.</para>
</listitem>
</itemizedlist>
</taskrelated>
</task>
</sect1><sect1 id="pppsvrconfig.dialin-54"><title>Configuring the Dial-in Server</title><para>The tasks in this section are
for configuring the dial-in server.
The dial-in server is a peer machine
that receives the call over the PPP
link from the dial-out machine. The
tasks show how to configure the dial-in
server <filename>myserver</filename> that
was introduced in <olink targetptr="pppsvrconfig.p2plink-fig-1" remap="internal">Figure
16&#8211;1</olink>. </para><sect2 id="ppp.dialin-49"><title>Tasks
for Configuring the Dial-in Server
(Task Map)</title><table frame="all" pgwide="100" id="ppp.dialin-tbl-15"><title>Task
Map for Setting Up the Dial-in Server</title><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec0" colwidth="25.61*"/><colspec colname="colspec1" colwidth="37.73*"/><colspec colname="colspec2" colwidth="49.50*"/><thead><row rowsep="1"><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>1. Gather preconfiguration information</para>
</entry><entry><para>Gather data that is needed prior
to setting up the link, such as peer
host names, target phone numbers,
and modem speed.</para>
</entry><entry><para><olink targetptr="pppsvrconfig.p2plink-4" remap="internal">Planning
a Dial-up PPP Link</olink></para>
</entry>
</row><row><entry><para>2. Configure the modem and serial
port</para>
</entry><entry><para>Set up the modem and serial
port.</para>
</entry><entry><para><olink targetptr="ppp.dialin-17" remap="internal">How
to Configure the Modem and Serial
Port (Dial-in Server)</olink></para>
</entry>
</row><row><entry><para>3. Configure calling peer information</para>
</entry><entry><para>Set up the user environments
and PPP options for every dial-out
machine that is permitted to call
the dial-in server.</para>
</entry><entry><para><olink targetptr="ppp.dialin-10" remap="internal">How
to Configure Users of the Dial-in
Server</olink></para>
</entry>
</row><row><entry><para>4. Configure the serial-line
communication</para>
</entry><entry><para>Configure the characteristics
of the transmission across the serial
line.</para>
</entry><entry><para><olink targetptr="ppp.dialin-18" remap="internal">How
to Define Communications Over the
Serial Line (Dial-in Server)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect2><sect2 id="pppsvrconfig.dialin-53"><title>Configuring Devices on the
Dial-in Server</title><para>The following procedure explains
how to configure the modem and serial
port on the dial-in server.</para><itemizedlist><para>Before you do the next procedure,
you must have completed the following
activities on the peer dial-in server:</para><listitem><para>Installed the Solaris
9 release or Solaris 10 release</para>
</listitem><listitem><para>Determined the optimum
modem speed </para>
</listitem><listitem><para>Decided which serial
port to use</para>
</listitem>
</itemizedlist>
</sect2><task id="ppp.dialin-17"><title>How
to Configure the Modem and Serial
Port (Dial-in Server)</title><procedure><step id="pppsvrconfig.dialin-step-54"><para>Program the modem, as instructed
in the modem manufacturer's documentation.</para><para>For other suggestions,
refer to <olink targetptr="ppp.dialin-50" remap="internal">How to Configure the Modem and Serial
Port (Dial-out Machine)</olink>.</para>
</step><step id="pppsvrconfig.dialin-step-4"><para>Attach the modem to the serial
port on the dial-in server.</para>
</step><step id="pppsvrconfig.dialin-step-43"><para>Become superuser on the dial-in
server or assume an equivalent role.</para><para>Roles contain authorizations
and privileged commands. For more
information about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.
To configure a role with the Primary
Administrator profile, see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="pppsvrconfig.dialin-step-3"><para>Configure the serial port by
using the <command>/usr/sadm/bin/smc</command> command
for the Solaris Management Console,
as described in <olink targetdoc="sysadv2" targetptr="modsetup-1" remap="external"><citetitle remap="section">Setting Up Terminals and Modems With Serial Ports Tool (Overview)</citetitle> in <citetitle remap="book">System Administration Guide: Advanced Administration</citetitle></olink>. </para><para>Use the Solaris Management
Console to do the following:</para><substeps><step id="pppsvrconfig.dialin-step-35"><para>Select the serial port where
you have attached the modem.</para>
</step><step id="pppsvrconfig.dialin-step-38"><para>Specify modem direction as dial-in
only.</para><note><para>Solaris PPP 4.0 does support
bidirectional communications for a
modem. </para>
</note>
</step><step id="ppp.dialin-step-52"><para>Click
Okay to convey the changes.</para>
</step>
</substeps>
</step>
</procedure>
</task><task id="ppp.dialin-5"><title>How
to Set the Modem Speed</title><tasksummary><para>The next procedure explains
how to set the modem speed for a dial-in
server. For suggestions about speeds
to use with Sun Microsystems' computers,
see <olink targetptr="ppp.reference-65" remap="internal">Configuring
Modem Speed for a Dial-up Link</olink>. </para>
</tasksummary><procedure><step id="ppp.dialin-step-44"><para>Log
in to the dial-in server.</para>
</step><step id="ppp.dialin-step-7"><para>Use
the <command>tip</command> command
to reach the modem.</para><para>Instructions
for using <command>tip</command> to
set the modem speed are in the <command>tip</command>(1) man page.</para>
</step><step id="ppp.dialin-step-16"><para>Configure
the modem for a fixed DTE rate.</para>
</step><step id="ppp.dialin-step-8"><para>Lock
the serial port to that rate, using <command>ttymon</command> or <command>/usr/sadm/bin/smc</command>, as discussed in <olink targetdoc="sysadv2" targetptr="modsetup-1" remap="external"><citetitle remap="section">Setting Up Terminals and Modems With Serial Ports Tool (Overview)</citetitle> in <citetitle remap="book">System Administration Guide: Advanced Administration</citetitle></olink>.</para>
</step>
</procedure><taskrelated role="see-also"><para>The following list provides
references to related information.</para><itemizedlist><listitem><para><olink targetptr="ppp.dialin-17" remap="internal">How to Configure
the Modem and Serial Port (Dial-in
Server)</olink></para>
</listitem><listitem><para><olink targetptr="ppp.dialin-10" remap="internal">How to Configure
Users of the Dial-in Server</olink></para>
</listitem>
</itemizedlist>
</taskrelated>
</task><sect2 id="pppsvrconfig.dialin-15"><title>Setting Up Users of the Dial-in
Server</title><para>Part of the process of setting
up a dial-in server involves configuring
information about each known remote
caller. </para><itemizedlist><para>Before starting the procedures
in this section, you must have done
the following:</para><listitem><para>Obtained the UNIX
user names for all users who are permitted
to log in from remote dial-out machines.</para>
</listitem><listitem><para>Set up the modem and
serial line, as described in <olink targetptr="ppp.dialin-17" remap="internal">How to Configure
the Modem and Serial Port (Dial-in
Server)</olink>.</para>
</listitem><listitem><para>Dedicated an IP address
to be assigned to incoming calls from
remote users. Consider creating a
dedicated incoming IP address  if
 the number of potential callers exceeds
the number of modems and serial ports
on the dial-in server. For complete
information about creating dedicated
IP addresses, go to <olink targetptr="ppp.reference-39" remap="internal">Creating
an IP Addressing Scheme for Callers</olink>.</para>
</listitem>
</itemizedlist>
</sect2><task id="ppp.dialin-10"><title>How
to Configure Users of the Dial-in
Server</title><procedure><step id="pppsvrconfig.dialin-step-48"><para>Become superuser on the dial-in
server or assume an equivalent role.</para><para>Roles contain authorizations
and privileged commands. For more
information about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.
To configure a role with the Primary
Administrator profile, see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="pppsvrconfig.dialin-step-49"><para>Create a new account on the
dial-in server for each remote PPP
user.</para><para>You can use the
Solaris Management Console to create
a new user. The <command>/usr/sadm/bin/smc</command> command opens the Solaris
Management Console. For instructions
about creating a new user through
Solaris Management Console, see <olink targetdoc="sysadv1" targetptr="usersetup-129" remap="external"><citetitle remap="section">Setting Up User Accounts (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="ppp.dialin-step-43"><para>Use
Solaris Management Console to assign
parameters for the new user.</para><para>For example, the following
table shows the parameters for an
account that is called <literal>pppuser</literal> for <literal>user1</literal> on the dial-out machine <literal>myhome</literal>.</para><informaltable frame="topbot" pgwide="100"><tgroup cols="3" colsep="0" rowsep="0"><colspec colname="colspec0" colwidth="33.97*"/><colspec colname="colspec1" colwidth="62.21*"/><colspec colname="colspec2" colwidth="68.50*"/><thead><row rowsep="1"><entry><para>Parameter</para>
</entry><entry><para>Value</para>
</entry><entry><para>Definition</para>
</entry>
</row>
</thead><tbody><row><entry><para>User Name</para>
</entry><entry><para><literal>pppuser</literal></para>
</entry><entry><para>The user account name for the
remote user. This account name should
correspond to the account name that
is given in the login sequence of
the chat script. For example, <literal>pppuser</literal> is the account name that
is found in the chat script in <olink targetptr="pppsvrconfig.dialin-50" remap="internal">How
to Create the Instructions for Calling
a Peer</olink>. </para>
</entry>
</row><row><entry><para>Login Shell</para>
</entry><entry><para><filename>/usr/bin/pppd</filename></para>
</entry><entry><para>The default login shell for
the remote user. The login shell <filename>/usr/bin/pppd</filename> initially
restricts the caller to a dedicated
PPP environment.</para>
</entry>
</row><row><entry><para>Create Home Dir Path</para>
</entry><entry><para><filename>/export/home/pppuser</filename></para>
</entry><entry><para>The home directory <filename>/export/home/pppuser</filename> is set when the caller
successfully logs in to the dial-in
server.</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</step><step id="pppsvrconfig.dialin-step-21"><para>Create for each caller
a <filename>$HOME/.ppprc</filename> file
that contains various options that
are specific to the user's PPP session.</para><para>For example, you might create
the following <filename>.ppprc</filename> file
for <literal>pppuser</literal>.</para><screen># <userinput>cat /export/home/pppuser/.ppprc</userinput>
noccp</screen><para><literal>noccp</literal> turns
off compression control on the link.</para>
</step>
</procedure><taskrelated role="see-also"><para>The following list provides
references to related information.</para><itemizedlist><listitem><para><olink targetptr="ppp.dialin-10" remap="internal">How to Configure
Users of the Dial-in Server</olink>.</para>
</listitem><listitem><para><olink targetptr="ppp.dialin-18" remap="internal">How to Define
Communications Over the Serial Line
(Dial-in Server)</olink>.</para>
</listitem>
</itemizedlist>
</taskrelated>
</task><sect2 id="pppsvrconfig.dialin-51"><title>Configuring Communications
Over the Dial-in Server</title><para>The next task shows how to enable
the dial-in server to open communications
with any dial-out machine. The  options
that are defined in the following
PPP configuration files determine
how communications are established.</para><itemizedlist><listitem><para><filename>/etc/ppp/options</filename></para>
</listitem><listitem><para><filename>/etc/ppp/options.</filename><replaceable>ttyname</replaceable></para>
</listitem>
</itemizedlist><para>For detailed information about
these files, refer to <olink targetptr="pppsvrconfig.reference-65" remap="internal">Using
PPP Options in Files and on the Command
Line</olink>.</para><itemizedlist><para>Before you proceed, you should
have done the following:</para><listitem><para>Configured the serial
port and modem on the dial-in server,
as described in <olink targetptr="ppp.dialin-17" remap="internal">How to Configure
the Modem and Serial Port (Dial-in
Server)</olink>.</para>
</listitem><listitem><para>Configured information
about the prospective users of the
dial-in server, as described in <olink targetptr="ppp.dialin-10" remap="internal">How to Configure
Users of the Dial-in Server</olink>.</para>
</listitem>
</itemizedlist>
</sect2><task id="ppp.dialin-18"><title>How
to Define Communications Over the
Serial Line (Dial-in Server)</title><procedure><step id="pppsvrconfig.dialin-step-33"><para>Become superuser on the dial-in
server or assume an equivalent role.</para><para>Roles contain authorizations
and privileged commands. For more
information about roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.
To configure a role with the Primary
Administrator profile, see <olink targetdoc="sysadv1" targetptr="smcover-1" remap="external">Chapter 2, <citetitle remap="chapter">Working With the Solaris Management Console (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Basic Administration</citetitle></olink>.</para>
</step><step id="pppsvrconfig.dialin-step-42"><para>Create the <filename>/etc/ppp/options</filename> file with the following
entry.</para><screen><userinput>nodefaultroute</userinput></screen><para><literal>nodefaultroute</literal> indicates
that no <command>pppd</command> session
on the local system can establish
a default route without <filename>root</filename> privileges.</para><note><para>If the dial-in server
does not have an <filename>/etc/ppp/options</filename> file, only the superuser
can run the <command>pppd</command> command.
However, the <filename>/etc/ppp/options</filename> file
can be empty.</para>
</note>
</step><step id="pppsvrconfig.dialin-step-24"><para>Create the file <filename>/etc/options.</filename><replaceable>ttyname</replaceable> to
define how calls that are received
over serial port <replaceable>ttyname</replaceable> should
be handled.</para><para>The following <filename>/etc/options.ttya</filename> file
defines how the dial-in server's serial
port <filename>/dev/ttya</filename> should
handle incoming calls.</para><screen><userinput>:10.0.0.80</userinput>
<userinput>xonxoff</userinput></screen><variablelist><varlistentry><term><userinput>:10.0.0.80</userinput></term><listitem><para>Assigns the IP address
10.0.0.80 to all peers that are calling
in over serial port <filename>ttya</filename></para>
</listitem>
</varlistentry><varlistentry><term><userinput>xonxoff</userinput></term><listitem><para>Allows the serial line
to handle communications from modems
with software flow control enabled</para>
</listitem>
</varlistentry>
</variablelist>
</step>
</procedure><taskrelated role="see-also"><para>If you have followed all the
procedures in this chapter, you have
completed the configuration of the
dial-up link. The following list provides
references to related information.</para><itemizedlist><listitem><para>To test modem connectivity
by dialing out to another computer,
see <olink targetdoc="refman1" targetptr="cu-1c" remap="external"><citerefentry><refentrytitle>cu</refentrytitle><manvolnum>1C</manvolnum></citerefentry></olink> and <olink targetdoc="refman1" targetptr="tip-1" remap="external"><citerefentry><refentrytitle>tip</refentrytitle><manvolnum>1</manvolnum></citerefentry></olink> man
pages. These utilities can help you
test if your modem is properly configured.
Also, use these utilities to test
if you can establish a connection
with another machine.</para>
</listitem><listitem><para>To configure more
options for the dial-in server, see <olink targetptr="pppsvrconfig.dialin-54" remap="internal">Configuring
the Dial-in Server</olink>.</para>
</listitem><listitem><para>To configure more
dial-out machines, see <olink targetptr="pppsvrconfig.dialin-52" remap="internal">Configuring
the Dial-out Machine</olink>.</para>
</listitem><listitem><para>To have the remote
machine call the dial-in server, see <olink targetptr="pppsvrconfig.dialin-25" remap="internal">Calling
the Dial-in Server</olink>.</para>
</listitem>
</itemizedlist>
</taskrelated>
</task>
</sect1><sect1 id="pppsvrconfig.dialin-25"><title>Calling the Dial-in Server</title><para>You establish a dial-up PPP
link by having the dial-out machine
call the dial-in server. You can instruct
the dial-out machine to call the server
by specifying the <literal>demand</literal> option
in the local PPP configuration files.
However, the most common method for
establishing the link is for the user
to run the <command>pppd</command> command
on the dial-out machine.</para><itemizedlist><para>Before you proceed to the next
task, you should have done either
or both of the following:</para><listitem><para>Set up
the dial-out machine, as described
in <olink targetptr="pppsvrconfig.dialin-52" remap="internal">Configuring
the Dial-out Machine</olink></para>
</listitem><listitem><para>Set up the dial-in
server, as described in <olink targetptr="pppsvrconfig.dialin-54" remap="internal">Configuring
the Dial-in Server</olink></para>
</listitem>
</itemizedlist><task id="pppsvrconfig.dialin-proc-27"><title>How to Call the Dial-in Server</title><procedure><step id="pppsvrconfig.dialin-step-28"><para>Log in to the dial-out
machine by using your regular user
account, not <literal>root</literal>.</para>
</step><step id="pppsvrconfig.dialin-step-29"><para>Call the dial-in server by running
the <command>pppd</command> command.</para><para>For example, the following command
initiates a link between the dial-out
machine and dial-in server <literal>myserver</literal>:</para><screen>% <userinput>pppd 57600 call myserver</userinput></screen><variablelist><varlistentry><term><userinput>pppd</userinput></term><listitem><para>Starts the call by
invoking the <command>pppd</command> daemon</para>
</listitem>
</varlistentry><varlistentry><term><userinput>57600</userinput></term><listitem><para>Sets the speed of
the line between host and modem</para>
</listitem>
</varlistentry><varlistentry><term><userinput>call
myserver</userinput></term><listitem><para>Invokes the <literal>call</literal> option
of <command>pppd</command>. <command>pppd</command> then reads options in the
file <filename>/etc/ppp/peers/myserver</filename>,
which was created in <olink targetptr="ppp.dialin-55" remap="internal">How to Define
the Connection With an Individual
Peer</olink></para>
</listitem>
</varlistentry>
</variablelist>
</step><step id="pppsvrconfig.dialin-step-41"><para>Contact a host on the server's
network, for example, the host <literal>lindyhop</literal> that is shown in <olink targetptr="pppsvrconfig.p2plink-fig-1" remap="internal">Figure
16&#8211;1</olink>:</para><screen><userinput>ping lindyhop</userinput></screen><para>If the link is not working correctly,
refer to <olink targetptr="pppsvrconfig.troubleshoot-1" remap="internal">Chapter&#160;21,
Fixing Common PPP Problems (Tasks)</olink>.</para>
</step><step id="ppp.dialin-step-19"><para>Terminate
the PPP session:</para><screen>% <userinput>pkill -x pppd</userinput></screen>
</step>
</procedure><taskrelated role="see-also"><para>If you have followed all the
procedures in this chapter, you have
completed the configuration of the
dial-up link. The following list provides
references to related information</para><itemizedlist><listitem><para>To have users start
working on their dial-out machines,
see <olink targetptr="pppsvrconfig.dialin-proc-27" remap="internal">How
to Call the Dial-in Server</olink>.</para>
</listitem><listitem><para>To fix problems on
the link, see <olink targetptr="pppsvrconfig.troubleshoot-1" remap="internal">Chapter&#160;21,
Fixing Common PPP Problems (Tasks)</olink>.</para>
</listitem><listitem><para>To learn more about
the files and options that are used
in this chapter, see <olink targetptr="pppsvrconfig.reference-65" remap="internal">Using
PPP Options in Files and on the Command
Line</olink>.</para>
</listitem>
</itemizedlist>
</taskrelated>
</task>
</sect1>
</chapter>