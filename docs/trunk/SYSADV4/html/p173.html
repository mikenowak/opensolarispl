<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Examples&ndash;Checking the Network
Status - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p172.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a> > <a href="p172.html#netmonitor-2">Monitoring Network Performance</a> > <a href="p172.html#netmonitor-9">How to Check the Network Status</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p172.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p174.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="netmonitor-10"></a><h5>Examples&ndash;Checking the Network
Status</h5>
<p>The following example shows output from the <tt>netstat
-i</tt> command, which displays the state of the interfaces
that are used for TCP/IP traffic. </p>
<pre>$ <tt><b>netstat -i</b></tt>
Name  Mtu  Net/Dest    Address      Ipkts  Ierrs Opkts  Oerrs Collis Queue
lo0   8232 software    localhost     1280   0     1280     0       0    0
eri0   1500 loopback    venus      1628480   0   347070    16   39354    0</pre><p><a name="spnetwork-ix4916"></a>This display shows the number of packets that a machine
has transmitted and has received on each interface. A machine with
active network traffic should show both <tt>Ipkts</tt> and <tt>Opkts</tt> continually increasing. </p>
<p><a name="spnetwork-ix4917"></a><a name="spnetwork-ix4918"></a>Calculate the network collisions rate by dividing the
number of collision counts (<tt>Collis</tt>) by the number
of out packets (<tt>Opkts</tt>). In the previous example,
the collision rate is 11 percent. A network-wide collision rate
that is greater than 5 to 10 percent can indicate a problem.  </p>
<p><a name="spnetwork-ix4920"></a><a name="spnetwork-ix4925"></a><a name="spnetwork-ix4926"></a>Calculate the error rate for the input packets by dividing
the number of input errors by the total number of input packets
(<tt>Ierrs/Ipkts</tt>). The error rate for the output
packets is the number of output errors divided by the total number
of output packets (<tt>Oerrs/Opkts</tt>). If the input
error rate is high, at over 0.25 percent, the host might be dropping
packets.      </p>
<p><a name="spnetwork-ix4927"></a><a name="spnetwork-ix4928"></a><a name="spnetwork-ix4929"></a><a name="spnetwork-ix4930"></a><a name="spnetwork-ix4931"></a>The following example shows output from the <tt>netstat
-s</tt>  command, which displays the per-protocol statistics
for the <tt>UDP</tt>, <tt>TCP</tt>, <tt>ICMP</tt>,
and <tt>IGMP</tt> protocols.</p>
<pre>UDP
    udpInDatagrams      =196543    udpInErrors         =     0
    udpOutDatagrams     =187820
 
TCP
    tcpRtoAlgorithm     =     4    tcpRtoMin           =   200
    tcpRtoMax           = 60000    tcpMaxConn          =    -1
    tcpActiveOpens      = 26952    tcpPassiveOpens     =   420
    tcpAttemptFails     =  1133    tcpEstabResets      =     9
    tcpCurrEstab        =    31    tcpOutSegs          =3957636
    tcpOutDataSegs      =2731494   tcpOutDataBytes     =1865269594
    tcpRetransSegs      = 36186    tcpRetransBytes     =3762520
    tcpOutAck           =1225849   tcpOutAckDelayed    =165044
    tcpOutUrg           =     7    tcpOutWinUpdate     =   315
    tcpOutWinProbe      =     0    tcpOutControl       = 56588
    tcpOutRsts          =   803    tcpOutFastRetrans   =   741
    tcpInSegs           =4587678
    tcpInAckSegs        =2087448   tcpInAckBytes       =1865292802
    tcpInDupAck         =109461    tcpInAckUnsent      =     0
    tcpInInorderSegs    =3877639   tcpInInorderBytes   =-598404107
    tcpInUnorderSegs    = 14756    tcpInUnorderBytes   =17985602
    tcpInDupSegs        =    34    tcpInDupBytes       = 32759
    tcpInPartDupSegs    =   212    tcpInPartDupBytes   =134800
    tcpInPastWinSegs    =     0    tcpInPastWinBytes   =     0
    tcpInWinProbe       =   456    tcpInWinUpdate      =     0
    tcpInClosed         =    99    tcpRttNoUpdate      =  6862
    tcpRttUpdate        =435097    tcpTimRetrans       = 15065
    tcpTimRetransDrop   =    67    tcpTimKeepalive     =   763
    tcpTimKeepaliveProbe=     1    tcpTimKeepaliveDrop =     0

IP
    ipForwarding        =     2    ipDefaultTTL        =   255
    ipInReceives        =11757234  ipInHdrErrors       =     0
    ipInAddrErrors      =     0    ipInCksumErrs       =     0
    ipForwDatagrams     =     0    ipForwProhibits     =     0
    ipInUnknownProtos   =     0    ipInDiscards        =     0
    ipInDelivers        =4784901   ipOutRequests       =4195180
    ipOutDiscards       =     0    ipOutNoRoutes       =     0
    ipReasmTimeout      =    60    ipReasmReqds        =  8723
    ipReasmOKs          =  7565    ipReasmFails        =  1158
    ipReasmDuplicates   =     7    ipReasmPartDups     =     0
    ipFragOKs           = 19938    ipFragFails         =     0
    ipFragCreates       =116953    ipRoutingDiscards   =     0
    tcpInErrs           =     0    udpNoPorts          =6426577
    udpInCksumErrs      =     0    udpInOverflows      =   473
    rawipInOverflows    =     0

ICMP
    icmpInMsgs          =490338    icmpInErrors        =     0
    icmpInCksumErrs     =     0    icmpInUnknowns      =     0
    icmpInDestUnreachs  =   618    icmpInTimeExcds     =   314
    icmpInParmProbs     =     0    icmpInSrcQuenchs    =     0
    icmpInRedirects     =   313    icmpInBadRedirects  =     5
    icmpInEchos         =   477    icmpInEchoReps      =    20
    icmpInTimestamps    =     0    icmpInTimestampReps =     0
    icmpInAddrMasks     =     0    icmpInAddrMaskReps  =     0
    icmpInFragNeeded    =     0    icmpOutMsgs         =   827
    icmpOutDrops        =   103    icmpOutErrors       =     0
    icmpOutDestUnreachs =    94    icmpOutTimeExcds    =   256
    icmpOutParmProbs    =     0    icmpOutSrcQuenchs   =     0
    icmpOutRedirects    =     0    icmpOutEchos        =     0
    icmpOutEchoReps     =   477    icmpOutTimestamps   =     0
    icmpOutTimestampReps=     0    icmpOutAddrMasks    =     0
    icmpOutAddrMaskReps =     0    icmpOutFragNeeded   =     0
    icmpInOverflows     =     0

IGMP:
        0 messages received
        0 messages received with too few bytes
        0 messages received with bad checksum
        0 membership queries received
        0 membership queries received with invalid field(s)
        0 membership reports received
        0 membership reports received with invalid field(s)
        0 membership reports received for groups to which we belong
        0 membership reports sent</pre><p><a name="spnetwork-ix4932"></a><a name="spnetwork-ix4933"></a><a name="spnetwork-ix4934"></a>The following example shows output from the <tt>netstat</tt>  <tt>-r</tt> command, which displays the IP routing
table.   </p>
<pre>Routing Table:
  Destination        Gateway           Flags  Ref   Use    Interface
------------------ -------------------- ----- ----- ------ ---------
localhost            localhost             UH       0   2817  lo0
earth-bb             pluto                 U        3  14293  eri0
224.0.0.0            pluto                 U        3      0  eri0
default              mars-gate             UG       0  14142  
 </pre><p><a name="spnetwork-ix4939"></a><a name="spnetwork-ix4940"></a>The fields in the <tt>netstat</tt> <tt>-r</tt> report
are described in <a href="p173.html#netmonitor-11">Table 30-2</a>. </p>
<a name="netmonitor-11"></a>Table 30-2 Output From the <tt>netstat</tt> <tt>-r</tt> Command<table><tr><th><p>Field Name</p>
</th><th><p></p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>Flags</tt> </p>
</td><td><p><tt>U</tt></p>
<p><tt>G</tt></p>
<p><tt>H</tt></p>
<p><tt>D</tt></p>
</td><td><p>The route is up.</p>
<p>The route is through a gateway.</p>
<p>The route is to a host.</p>
<p>The route was dynamically created by using a redirect.</p>
</td></tr>
<tr><td><p><tt>Ref</tt> </p>
</td><td><p></p>
</td><td><p>Shows the current number of routes that share the same link
layer.</p>
</td></tr>
<tr><td><p><tt>Use</tt> </p>
</td><td><p></p>
</td><td><p>Indicates the number of packets that were sent out.</p>
</td></tr>
<tr><td><p><tt>Interface</tt> </p>
</td><td><p></p>
</td><td><p>Lists the network interface that is used for the route. </p>
</td></tr>
</table><a name="netmonitor-12"></a><h4>How to Display NFS Server and Client
Statistics</h4>
<p>The NFS distributed file service uses a remote procedure call
(RPC) facility that translates local commands into requests for
the remote host. The remote procedure calls are synchronous. The
client application is blocked or suspended until the server has
completed the call and has returned the results. One of the major
factors that affects NFS performance is the retransmission rate. </p>
<p><a name="spnetwork-ix4941"></a><a name="spnetwork-ix4942"></a>If the file server cannot respond to a client's request,
the client retransmits the request a specified number of times before
the client quits. Each retransmission imposes system overhead and
increases network traffic. Excessive retransmissions can cause network
performance problems. If the retransmission rate is high, you could
look for the following:</p>
<ul><li><p>Overloaded servers that complete requests too slowly</p>
</li>
<li><p>An Ethernet interface that is dropping packets</p>
</li>
<li><p><a name="spnetwork-ix4943"></a><a name="spnetwork-ix4944"></a>Network congestion, which slows the packet transmission
 </p>
</li>
</ul>
<p><a href="p173.html#netmonitor-13">Table 30-3</a> describes
the <tt>nfsstat</tt> options to display client and server
statistics.</p>
<a name="netmonitor-13"></a>Table 30-3 Commands for Displaying
Client/Server Statistics<table><tr><th><p>Command</p>
</th><th><p>Display</p>
</th></tr>
<tr><td><p><tt>nfsstat -c</tt></p>
</td><td><p>Client statistics</p>
</td></tr>
<tr><td><p><tt>nfsstat -s</tt></p>
</td><td><p>Server statistics</p>
</td></tr>
<tr><td><p><tt>netstat -m</tt></p>
</td><td><p>Network statistics for each file system</p>
</td></tr>
</table><p><a name="spnetwork-ix4945"></a><a name="spnetwork-ix4946"></a><a name="spnetwork-ix4947"></a><a name="spnetwork-ix4948"></a><a name="spnetwork-ix4949"></a><a name="spnetwork-ix4950"></a><a name="spnetwork-ix4951"></a><a name="spnetwork-ix4952"></a><a name="spnetwork-ix4953"></a>Use <tt>nfsstat -c</tt> to show client statistics,
and <tt>nfsstat -s</tt> to show server statistics. Use <tt>netstat -m</tt> to display network statistics for each file
system. For more information, see <tt>nfsstat</tt>(1M).         </p>
<a name="netmonitor-14"></a><h5>Examples&ndash;Displaying NFS Server
and Client Statistics</h5>
<p><a name="spnetwork-ix4954"></a><a name="spnetwork-ix4955"></a><a name="spnetwork-ix4956"></a>The following example displays RPC and NFS data for
the client <tt>pluto</tt>.   </p>
<pre>$ <tt><b>nfsstat -c</b></tt>

Client rpc:
Connection oriented:
calls    badcalls  badxids  timeouts newcreds  badverfs   timers     
1595799  1511      59       297      0         0          0          
cantconn nomem     interrupts 
1198      0         7          
Connectionless:
calls    badcalls  retrans  badxids  timeouts  newcreds   badverfs   
80785    3135      25029    193      9543      0          0          
timers   nomem     cantsend   
17399    0         0          

Client nfs:
calls    badcalls  clgets   cltoomany  
1640097  3112      1640097  0          
Version 2: (46366 calls)
null     getattr   setattr  root     lookup     readlink  read       
0 0%     6589 14%  2202 4%  0 0%     11506 24%  0 0%      7654 16%   
wrcache  write     create   remove   rename     link      symlink    
0 0%     13297 28% 1081 2%  0 0%     0 0%       0 0%      0 0%       
mkdir    rmdir     readdir  statfs     
24 0%    0 0%      906 1%   3107 6%    
Version 3: (1585571 calls)
null    getattr    setattr  lookup     access     readlink  read     
0 0%    508406 32% 10209 0% 263441 16% 400845 25% 3065 0%  117959 7%
write    create     mkdir    symlink    mknod    remove   rmdir 
69201 4% 7615 0%    42 0%    16 0%      0 0%     7875 0%  51 0%      
rename   link       readdir  readdir+   fsstat   fsinfo   pathconf   
929 0%   597 0%     3986 0%  185145 11% 942 0%   300 0%   583 0%     
commit     
4364 0%    
 
Client nfs_acl:
Version 2: (3105 calls)
null       getacl     setacl     getattr    access     
0 0%       0 0%       0 0%       3105 100%  0 0%       
Version 3: (5055 calls)
null       getacl     setacl     
0 0%       5055 100%  0 0%    </pre><p>The output of the <tt>nfsstat -c</tt> command is
described in <a href="p173.html#netmonitor-15">Table 30-4</a>.</p>
<a name="netmonitor-15"></a>Table 30-4 Output From the <tt>nfsstat -c</tt> Command<table><tr><th><p>Field</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>calls</tt></p>
</td><td><p>The total number of calls that were sent.</p>
</td></tr>
<tr><td><p><tt>badcalls</tt></p>
</td><td><p>The total number of calls that were rejected by RPC.</p>
</td></tr>
<tr><td><p><tt>retrans</tt></p>
</td><td><p>The total number of retransmissions. For this client, the
number of retransmissions is less than 1 percent, or approximately
10 timeouts out of 6888 calls. These retransmissions might be caused
by temporary failures. Higher rates might indicate a problem.</p>
</td></tr>
<tr><td><p><tt>badxid</tt></p>
</td><td><p>The number of times that a duplicate acknowledgment was received
for a single NFS request.</p>
</td></tr>
<tr><td><p><tt>timeout</tt></p>
</td><td><p>The number of calls that timed out.</p>
</td></tr>
<tr><td><p><tt>wait</tt> </p>
</td><td><p>The number of times a call had to wait because no client handle
was available.</p>
</td></tr>
<tr><td><p><tt>newcred</tt> </p>
</td><td><p>The number of times the authentication information had to
be refreshed.</p>
</td></tr>
<tr><td><p><tt>timers</tt> </p>
</td><td><p>The number of times the time-out value was greater than or
equal to the specified time-out value for a call.</p>
</td></tr>
<tr><td><p><tt>readlink</tt> </p>
</td><td><p>The number of times a <tt>read</tt> was made to
a symbolic link. If this number is high, at over 10 percent, then
there could be too many symbolic links.</p>
</td></tr>
</table><p>The following example shows output from the <tt>nfsstat
-m</tt> command.</p>
<pre>pluto$ <tt><b>nfsstat -m</b></tt>
/usr/man from pluto:/export/svr4/man
Flags: vers=2,proto=udp,auth=unix,hard,intr,dynamic,
        rsize=8192, wsize=8192,retrans=5
 Lookups: srtt=13 (32ms), dev=10 (50ms), cur=6 (120ms)
 All:     srtt=13 (32ms), dev=10 (50ms), cur=6 (120ms)</pre><p>This output of the <tt>nfsstat -m</tt> command,
which is displayed in milliseconds, is described in <a href="p173.html#netmonitor-16">Table 30-5</a>.</p>
<a name="netmonitor-16"></a>Table 30-5 Output From the <tt>nfsstat -m</tt> Command<table><tr><th><p>Field</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>srtt</tt> </p>
</td><td><p>The smoothed average of the round-trip times</p>
</td></tr>
<tr><td><p><tt>dev</tt></p>
</td><td><p>The average deviations</p>
</td></tr>
<tr><td><p><tt>cur</tt></p>
</td><td><p>The current &ldquo;expected&rdquo; response time</p>
</td></tr>
</table><p><a name="spnetwork-ix4969"></a><a name="spnetwork-ix4970"></a><a name="spnetwork-ix4971"></a><a name="spnetwork-ix4972"></a><a name="spnetwork-ix4973"></a><a name="spnetwork-ix4974"></a><a name="spnetwork-ix4975"></a><a name="spnetwork-ix4976"></a><a name="spnetwork-ix4977"></a><a name="spnetwork-ix4978"></a><a name="spnetwork-ix4979"></a>If you suspect that the hardware components of your
network are creating problems, you need to look closely at the cabling
and connectors.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p172.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p174.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

