<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>How to Enable Complete Virtual Hosting - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p158.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a> > <a href="p164.html#wuftp-15a2">Virtual Hosting</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p164.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p166.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="wuftp-184"></a><h4><img src="graphics/procedure.gif"> How to Enable Complete Virtual Hosting</h4>
<p>Complete virtual hosting allows separate configuration files for each
virtual domain. To enable complete support for virtual hosting on the FTP
server, you can create or modify the following FTP configuration files for
specific domains: </p>
<ul><li><p><tt>ftpaccess</tt></p>
</li>
<li><p><tt>ftpusers</tt></p>
</li>
<li><p><tt>ftpgroups</tt></p>
</li>
<li><p><tt>ftphosts</tt></p>
</li>
<li><p><tt>ftpconversions</tt></p>
</li>
</ul>
<p>For further information, see <tt>ftpaccess</tt>(4), <tt>ftpusers</tt>(4), <tt>ftpgroups</tt>(4), <tt>ftphosts</tt>(4), and <tt>ftpconversions</tt>(4).</p>
<hr>
<p><b>Note - </b>If separate versions of the configuration files are unavailable,
master versions of the files in the <tt>/etc/ftpd</tt> directory
are used.</p>
<hr>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="wuftp-step-187"></a><b>Add the following entry to the <tt>/etc/ftpd/ftpservers</tt> file.</b><pre><i>address</i> /<i>config-file-dir</i></pre><dl><dt><i>address</i></dt>
<dd><p>IP address of the virtual server</p>
</dd>
<dt><i>config-file-dir</i></dt>
<dd><p>Directory that contains the configuration files that are customized
for the virtual host</p>
</dd>
</dl>
<hr>
<p><b>Note - </b>While it is possible to use <tt>hostname</tt> as the <i>address</i> of the virtual server, you are strongly encouraged to
use the IPv4 address instead. DNS must be available when the FTP connection
is received in order for <tt>hostname</tt> to be matched. For an
IPv6 host, use the host name rather than the IPv6 address.</p>
<hr>
</li><li><a name="wuftp-step-230"></a><b>To create a customized version of an FTP server
configuration file for the virtual host, copy the master version of the file
from <tt>/etc/ftpd</tt> to the <tt>/config-file-dir</tt> directory.</b><p>For further information, see <tt>ftpservers</tt>(4).</p></li></ol>Example 28-17 Enabling Complete Virtual Hosting in the <tt>ftpservers</tt> file<pre>#
# FTP Server virtual hosting configuration file
#

10.1.2.3 /net/inet/virtual/somedomain/
10.1.2.4 /net/inet/virtual/anotherdomain/</pre><p>The preceding example specifies the IP addresses for two different domains
on the virtual server.</p>
<a name="egkax"></a>Example 28-18 Enabling Complete Virtual Hosting from the Command Line<p>The <tt>ftpaddhost</tt>(1M) script with the <tt>-c</tt> option is provided
to configure complete virtual hosts.</p>
<p>In the following example, <tt>ftpaddhost</tt> is run with <tt>-c</tt> <tt>-b</tt> <tt>-x</tt> options to configure complete
virtual hosting with a test banner and the logfile <tt>/var/ftp/virtual/10.1.2.3/xferlog</tt> under a virtual root <tt>/var/ftp/virtual/10.1.2.3</tt>.</p>
<pre># <tt><b>ftpaddhost -c -b -x /var/ftp/virtual/10.1.2.3/xferlog</b></tt> \
<tt><b>/var/ftp/virtual/10.1.2.3</b></tt></pre><a name="wuftp-189"></a><h3>Starting the FTP Server Automatically</h3>
<p>The FTP server can be started in one of three ways:</p>
<ul><li><p><a name="indexterm-2935"></a>As a <tt>nowait</tt> server that is started by <tt>inetd</tt></p>
</li>
<li><p>As a standalone server run in the background</p>
</li>
<li><p>As a standalone server run in the foreground from the <tt>inittab</tt> file</p>
</li>
</ul>
<p>A standalone server always has the quickest possible response time,
and is intended for large servers that are dedicated to providing FTP service.
The standalone server provides low connection latency for dedicated servers
because the standalone system never has to be restarted. The standalone server
is always running, even during off-peak hours, waiting indefinitely
for connections.</p>
<a name="wuftp-191"></a><h4><img src="graphics/procedure.gif"> How to Start an FTP Server Using SMF</h4>
<p>By default, the SMF service is configured to start the FTP server using
the <tt>nowait</tt> mode. If the site handles many connections,
the FTP server can also be run in standalone mode. See the <tt>in.ftpd</tt>(1M) man page for information
on additional command-line options. </p>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><b>Verify the <tt>wait</tt> property for the FTP server.</b><p>The line reporting that <tt>wait=FALSE</tt> indicates that
the server is started in <tt>nowait</tt> mode.</p><pre># <tt><b>inetadm -l network/ftp</b></tt>
SCOPE    NAME=VALUE
         name="ftp"
         endpoint_type="stream"
         proto="tcp6"
         isrpc=FALSE
         <tt><b>wait=FALSE</b></tt>
         exec="/usr/sbin/in.ftpd -a"
         user="root"
default  bind_addr=""
default  bind_fail_max=-1
default  bind_fail_interval=-1
default  max_con_rate=-1
default  max_copies=-1
default  con_rate_offline=-1
default  failrate_cnt=40
default  failrate_interval=60
default  inherit_env=TRUE
default  tcp_trace=FALSE
default  tcp_wrappers=FALSE</pre></li><li><b>Start the FTP server.</b><pre># <tt><b>svcadm enable network/ftp</b></tt></pre></li></ol><a name="wuftp-197"></a><h4><img src="graphics/procedure.gif"> How to Start a Standalone FTP Server in the Background</h4>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><b>Disable the FTP server.</b><pre># <tt><b>svcadm disable network/ftp</b></tt></pre></li><li><b>Start the standalone FTP server.</b><pre># <tt><b>/usr/sbin/in.ftpd -a -S</b></tt></pre><p>Add the line to an FTP server startup script. See Using Run Control Scripts in <i>System Administration Guide: Basic Administration</i> for information on creating
a system startup script.</p></li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p164.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p166.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

