<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Deploying DAs - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p59.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p64.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p66.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="slp.config-dda"></a><h3>Deploying DAs</h3>
<p>This section describes the strategic deployment of DAs in a network
that is running SLP.</p>
<p>SLP functions adequately with only the base agents (UAs and SAs), and
with no deployed DAs or configured scopes. All agents that lack specific configurations
use the <tt>default</tt> scope. DAs serve as caches for service
advertisements. Deploying DAs decreases the number of messages that are sent
on the network and reduces the time that is required to receive responses
to messages. This capability enables SLP to accommodate larger networks.</p>
<a name="slp.config-31"></a><h4>Why Deploy an SLP DA?</h4>
<a name="indexterm-1045"></a><p><a name="indexterm-1046"></a><a name="indexterm-1047"></a>The primary reason to deploy DAs is to reduce the amount of multicast
traffic and the delays that are associated with gathering unicast replies.
In a large network with many UAs and SAs, the amount of multicast traffic
that is involved in service discovery can become so large that network performance
degrades. By deploying one or more DAs, UAs must unicast to DAs for service
and SAs must register with DAs by using unicast. The only SLP-registered multicast
in a network with DAs is for active and passive DA discovery.</p>
<p><a name="indexterm-1048"></a><a name="indexterm-1049"></a>SAs register automatically with any DAs they discover within a
set of common scopes, rather than accepting multicast service requests. Multicast
requests in scopes that are not supported by the DA are still answered directly
by the SA, however. </p>
<p><a name="indexterm-1050"></a><a name="indexterm-1051"></a><a name="indexterm-1052"></a>Service requests from UAs are unicast to DAs rather than multicast
onto the network when a DA is deployed within the UA's scopes. Consequently,
DAs within the UA's scopes reduce multicast. By eliminating multicast for
normal UA requests, the time that is required to obtain replies to queries
is greatly reduced (from seconds to milliseconds).</p>
<p><a name="indexterm-1053"></a>DAs act as a focal point for SA and UA activity. Deploying one
or several DAs for a collection of scopes provides a centralized point for
monitoring SLP activity. By turning on DA logging, it is easier to monitor
registrations and requests than by checking the logs from multiple SAs that
are scattered around the network. You can deploy any number of DAs for a particular
scope or scopes, depending on the need to balance the load.</p>
<p><a name="indexterm-1054"></a><a name="indexterm-1055"></a><a name="indexterm-1056"></a>In networks without multicast routing enabled, you can configure
SLP to use broadcast. However, broadcast is very inefficient, because it requires
each host to process the message. Broadcast also does not normally propagate
across routers. As a result, in a network without multicast routing support,
services can be discovered only on the same subnet. Partial support for multicast
routing leads to inconsistent ability to discover services on a network. Multicast
messages are used to discover DAs. Partial support for multicast routing,
therefore, implies that UAs and SAs register services with all known DAs in
the SA's scope. For example, if a UA queries a DA that is called <tt>DA1</tt> and
the SA has registered services with <tt>DA2</tt>, the UA will fail
to discover a service.  See <a href="p62.html#slp.config-18">Configuring Broadcast-Only Routing</a> for more information on how to deploy SLP on networks without
multicast enabled.</p>
<p>On a network with inconsistent site-wide support for multicast routing,
you must configure the SLP UAs and SAs with a consistent list of DA locations
by using the <tt>net.slp.DAAdresseses</tt> property.</p>
<p><a name="indexterm-1057"></a>Finally, the Solaris SLPv2 DA supports interoperability with SLPv1.
SLPv1 interoperability is enabled by default in the Solaris DA. If your network
contains SLPv1 devices, such as printers, or you need to interoperate with
Novell Netware 5, which uses SLPv1 for service discovery, you should deploy
a DA. Without a DA, the Solaris SLP UAs are unable to find SLPv1 advertised
services.</p>
<a name="slp.config-32"></a><h4>When to Deploy DAs</h4>
<a name="indexterm-1058"></a><p>Deploy DAs on your enterprise if any of the following conditions are
true:</p>
<ul><li><p>Multicast SLP traffic exceeds 1 percent of the bandwidth on
your network, as measured by <tt>snoop</tt>.</p>
</li>
<li><p>UA clients experience long delays or timeouts during multicast
service requests.</p>
</li>
<li><p>You want to centralize the monitoring of SLP service advertisements
for particular scopes on one or several hosts.</p>
</li>
<li><p>Your network does not have multicast enabled and consists
of multiple subnets that must share services.</p>
</li>
<li><p>Your network employs devices that support earlier versions
of SLP (SLPv1) or you would like SLP service discovery to interoperate with
Novell Netware 5.</p>
</li>
</ul>
<a name="slp.config-70"></a><h4><img src="graphics/procedure.gif"> How to Deploy DAs</h4>
<p>Use the following procedure to set the <tt>net.slp.isDA</tt> property
to <tt>True</tt> in the <tt>slp.conf</tt> file. </p>
<hr>
<p><b>Note - </b>You can assign only one DA per host.</p>
<hr>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="slp.config-step-73"></a><b>Stop <tt>slpd</tt>and all SLP
activity on the host.</b><pre># <tt><b>svcadm disable network/slp</b></tt></pre></li><li><a name="slp.config-step-74"></a><b><a name="indexterm-1059"></a>Back up the default <tt>/etc/inet/slp.conf</tt> file
before you change the configuration settings.</b></li><li><a name="slp.config-step-75"></a><b>Set the <tt>net.slp.isDA</tt> property
in the <tt>slpd.conf</tt> file to <tt>True</tt>:</b><pre>net.slp.isDA=True</pre></li><li><a name="slp.config-step-76"></a><b>Save your changes and close the file.</b></li><li><a name="slp.config-step-77"></a><b>Restart <tt>slpd</tt> to activate
your changes.</b><pre># <tt><b>svcadm enable network/slp</b></tt></pre></li></ol><a name="slp.config-40"></a><h4>Where to Place DAs</h4>
<a name="indexterm-1060"></a><p>This section provides suggestions for where to place DAs in different
situations.</p>
<ul><li><p>When multicast routing is not enabled and DAs are required
to bridge service discovery between subnets</p>
<p><a name="indexterm-1061"></a>In this situation, a DA must be placed on a host with interfaces
and all subnets that share services. The <tt>net.slp.interfaces</tt> configuration
property does <b>not</b> need to be set, unless IP packets are
not routed among the interfaces. See <a href="p66.html#slp.config-42">Multihoming Configuration for SLP</a> for more information on configuring the <tt>net.slp.interfaces</tt> property.</p>
</li>
<li><p>When DAs are deployed for scalability and the primary consideration
is optimizing agent access</p>
<p>UAs typically make many requests for
services to DAs. An SA registers with the DA once, and can refresh the advertisement
at periodic but infrequent intervals. As a result, UA access to DAs is far
more frequent than SA access. The number of service advertisements is also
usually smaller than the number of requests. Consequently, most DA deployments
are more efficient if the deployment is optimized for UA access.</p>
</li>
<li><p>Situating DAs so that they are topologically close to UAs
on the network to optimize UA access</p>
<p>Naturally, you must configure
the DA with a scope that is shared by both the UA and SA clients.</p>
</li>
</ul>
<a name="slp.config-41"></a><h5>Placing Multiple DAs for Load Balancing</h5>
<a name="indexterm-1062"></a><a name="indexterm-1063"></a><p>You can deploy multiple DAs for the same collection of scopes as a means
of load balancing. Deploy DAs in any of the following circumstances:</p>
<ul><li><p><a name="indexterm-1064"></a><a name="indexterm-1065"></a>UA requests to a DA are timing out, or are returning with the <tt>DA_BUSY_NOW</tt> error.</p>
</li>
<li><p>The DA log shows that many SLP requests are being dropped.</p>
</li>
<li><p>The network of users who share services in the scopes spans
a number of buildings or physical sites.</p>
</li>
</ul>
<p><a name="indexterm-1066"></a>You can run a <tt>snoop</tt> trace of SLP traffic to
determine how many UA requests return with the <tt>DA_BUSY_NOW</tt> error.
If the number of UA requests returned is high, UAs in buildings physically
and topologically distant from the DA can exhibit slow response or excessive
timeouts. In such a scenario, you can deploy a DA in each building to improve
response for UA clients within the building.</p>
<p><a name="indexterm-1067"></a><a name="indexterm-1068"></a>Links that connect buildings are often slower than the local area
networks within the buildings. If your network spans multiple buildings or
physical sites, set the <tt>net.slp.DAAddresses</tt> property in
the <tt>/etc/inet/slp.conf</tt> file to a list of specific host
names or addresses so that the UAs access only the DAs you specify.</p>
<p>If a particular DA is using large amounts of host memory for service
registrations, reduce the number of SA registrations by reducing the number
of scopes the DA supports. You can split into two a scope that has many registrations.
You can then support one of the new scopes by deploying another DA on another
host.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p64.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p66.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

