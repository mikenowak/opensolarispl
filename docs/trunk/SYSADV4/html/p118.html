<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting Up PPP Authentication
(Tasks) - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p117.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p119.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="pppsvrconfig.auth-1"></a>Chapter&nbsp;19<h3>Setting Up PPP Authentication
(Tasks)</h3><p>This chapter contains tasks
for setting up PPP authentication.
Subjects that are covered include
the following:</p>
<ul><li><p><a href="p118.html#pppsvrconfig.auth-2">Configuring PAP Authentication</a></p>
</li>
<li><p><a href="p120.html">Configuring CHAP Authentication</a></p>
</li>
</ul>
<p>The procedures show how to implement
authentication over a dial-up link
because dial-up links are more likely
to be configured for authentication
than leased-line links. You can configure
authentication over leased lines if
authentication is required by your
 corporate security policy. For leased-line
authentication,  use the tasks in
this chapter as guidelines.</p>
<p>If you want to use PPP authentication
but are not sure which protocol to
use, review the section <a href="p105.html#pppsvrconfig.intro-13">Why Use PPP Authentication?</a>. More
detailed information about PPP authentication
is in the <tt>pppd</tt>(1M) man
page and in <a href="p133.html#pppsvrconfig.reference-17">Authenticating Callers on a Link</a>.</p>
<a name="pppsvrconfig.p2plink-19"></a><h3>Configuring PPP Authentication
(Task Map)</h3>
<a name="indexterm-1827"></a><a name="indexterm-1828"></a><p>This section contains task maps
to help you quickly access procedures
for PPP authentication.</p>
<a name="ppp.auth-tbl-60"></a>Table 19-1 Task Map
for General PPP Authentication<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Configure PAP authentication</p>
</td><td><p>Use these procedures to enable
PAP authentication on a dial-in server
and a dial-out machine.</p>
</td><td><p><a href="p118.html#ppp.auth-58">Setting Up PAP Authentication (Task Maps)</a></p>
</td></tr>
<tr><td><p>Configure CHAP authentication</p>
</td><td><p>Use these procedures to enable
CHAP authentication on a dial-in server
and a dial-out machine.</p>
</td><td><p><a href="p120.html#ppp.auth-59">Setting Up CHAP Authentication (Task Maps)</a></p>
</td></tr>
</table><a name="pppsvrconfig.auth-2"></a><h3>Configuring
PAP Authentication</h3>
<p><a name="indexterm-1829"></a>The tasks
in this section explain how to implement
authentication on a PPP link by using
the Password Authentication Protocol
(PAP). The tasks use the example that
is shown in <a href="p109.html#pppsvrconfig.p2plink-15">Examples of PPP Authentication Configurations</a> to
illustrate a working PAP scenario
for a dial-up link. Use the instructions
as the basis for implementing PAP
authentication at your site.</p>
<p><a name="indexterm-1830"></a>Before you perform the
next procedures, you must have done
the following:</p>
<ul><li><p>Set up and tested
the dial-up link between the dial-in
server and dial-out machines that
belong to trusted callers</p>
</li>
<li><p>Ideally, for dial-in
server authentication, obtained superuser
permission for the machine where the
network password database  is administered,
for example, in LDAP, NIS, or local
files</p>
</li>
<li><p>Obtained superuser
authority for the local machine, either
dial-in server or dial-out machine</p>
</li>
</ul>
<a name="ppp.auth-58"></a><h4>Setting
Up PAP Authentication (Task Maps)</h4>
<a name="indexterm-1831"></a><a name="indexterm-1832"></a><p>Use the next task maps to quickly
access PAP-related tasks for the dial-in
server and trusted callers on dial-out
machines.</p>
<a name="pppsvrconfig.p2plink-tbl-90"></a>Table 19-2 Task
Map for PAP Authentication (Dial-in
Server)<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>1. Gather preconfiguration information</p>
</td><td><p>Collect user names and other
data that is needed for authentication.</p>
</td><td><p><a href="p109.html">Planning for Authentication on a Link</a></p>
</td></tr>
<tr><td><p>2. Update the password database,
if necessary</p>
</td><td><p>Ensure that all potential callers
are in the server's password database.</p>
</td><td><p><a href="p118.html#ppp.auth-62">How to Create a PAP Credentials Database (Dial-in Server)</a></p>
</td></tr>
<tr><td><p>3. Create the PAP database</p>
</td><td><p>Create security credentials
for all prospective callers in <tt>/etc/ppp/pap-secrets</tt>.</p>
</td><td><p><a href="p118.html#ppp.auth-62">How to Create a PAP Credentials Database (Dial-in Server)</a></p>
</td></tr>
<tr><td><p>4. Modify the PPP configuration
files</p>
</td><td><p>Add options specific to PAP
to the <tt>/etc/ppp/options</tt> and <tt>/etc/ppp/peers/</tt><i>peer-name</i> files.</p>
</td><td><p><a href="p118.html#ppp.auth-63">How to Add PAP Support to the PPP Configuration Files (Dial-in Server)</a></p>
</td></tr>
</table><a name="pppsvrconfig.p2plink-tbl-100"></a>Table 19-3 Task Map for PAP Authentication
(Dial-out Machine)<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>1. Gather preconfiguration information</p>
</td><td><p>Collect user names and other
data that is needed for authentication.</p>
</td><td><p><a href="p109.html">Planning for Authentication on a Link</a></p>
</td></tr>
<tr><td><p>2. Create the PAP database for
the trusted caller's machine</p>
</td><td><p>Create the security credentials
for the trusted caller and, if necessary,
security credentials for other users
who call the dial-out machine, in <tt>/etc/ppp/pap-secrets</tt>.</p>
</td><td><p><a href="p119.html#ppp.auth-64">How to Configure PAP Authentication Credentials for the Trusted Callers</a></p>
</td></tr>
<tr><td><p>3. Modify the PPP configuration
files</p>
</td><td><p>Add options specific to PAP
to the <tt>/etc/ppp/options</tt> and <tt>/etc/ppp/peers/</tt><i>peer-name</i> files.</p>
</td><td><p><a href="p119.html#ppp.auth-65">How to Add PAP Support to the PPP Configuration Files (Dial-out Machine)</a></p>
</td></tr>
</table><a name="pppsvrconfig.auth-3"></a><h4>Configuring
PAP Authentication on the Dial-in
Server</h4>
<p>To set up PAP authentication,
you must do the following:</p>
<ul><li><p>Create a PAP credentials
database</p>
</li>
<li><p>Modify PPP configuration
files for PAP support</p>
</li>
</ul>
<a name="ppp.auth-62"></a><h4><img src="graphics/procedure.gif"> How
to Create a PAP Credentials Database
(Dial-in Server)</h4>
<a name="indexterm-1833"></a><a name="indexterm-1834"></a><a name="indexterm-1835"></a><a name="indexterm-1836"></a><p>This procedure modifies the <tt>/etc/ppp/pap-secrets</tt> file,
which contains the PAP security credentials
that are used to authenticate callers
on the link. <tt>/etc/ppp/pap-secrets</tt> must exist on both machines
on a PPP link.</p>
<p>The sample PAP configuration
that was introduced in <a href="p109.html#pppsvrconfig.p2plink-fig-20">Figure 16-3</a> uses the <tt>login</tt> option of PAP. If you plan
to use this option, you might also
need to update your network's password
database. For more information about
the <tt>login</tt> option,
refer to <a href="p134.html#pppsvrconfig.reference-20">Using the <tt>login</tt> Option With <tt>/etc/ppp/pap-secrets</tt></a>.</p>
<ol><li><a name="pppsvrconfig.auth-step-11"></a><b><a name="indexterm-1837"></a>Assemble a list of all
potential trusted callers. Trusted
callers are people to be granted permission
to call the dial-in server from their
remote machines.</b></li><li><a name="pppsvrconfig.auth-step-13"></a><b>Verify that each trusted caller
already has a UNIX user name and password
in the dial-in server's password database.</b><hr>
<p><b>Note - </b>Verification is particularly
important for the sample PAP configuration,
which uses the <tt>login</tt> option
of PAP to authenticate callers. If
you choose not to implement <tt>login</tt> for PAP, the callers' PAP
user names do not have to correspond
with their UNIX user names. For information
about standard <tt>/etc/ppp/pap-secrets</tt>, refer to <a href="p133.html#pppsvrconfig.reference-25"><tt>/etc/ppp/pap-secrets</tt> File</a>.</p>
<hr>
<p>Do the following if a potential
trusted caller does not have a UNIX
user name and password: </p><ol><li><a name="pppsvrconfig.auth-step-14"></a><b>Confirm with their managers
that callers whom you do not know
personally have permission to access
the dial-in server.</b></li><li><a name="pppsvrconfig.auth-step-15"></a><b><a name="indexterm-1838"></a><a name="indexterm-1839"></a>Create UNIX user names
and passwords for these callers in
the manner that is directed by your
corporate security policy.</b></li></ol></li><li><b>Become superuser  on the
dial-in server or assume an equivalent
role.</b><p>Roles contain authorizations
and privileged commands. For more
information about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="pppsvrconfig.auth-step-16"></a><b><a name="indexterm-1840"></a><a name="indexterm-1841"></a><a name="indexterm-1842"></a>Edit the <tt>/etc/ppp/pap-secrets</tt> file.</b><p>Solaris
PPP 4.0 provides a <tt>pap-secrets</tt> file
in <tt>/etc/ppp</tt> that
contains comments about how to use
PAP authentication but no options.
You can add the following options
at the end of the comments.</p><pre><tt><b>user1      myserver        ""          *</b></tt>
<tt><b>user2      myserver        ""          *</b></tt>
<tt><b>myserver   user2           serverpass  *</b></tt></pre><p>To use the <tt>login</tt> option
of <tt>/etc/ppp/pap-secrets</tt>,
you must type the UNIX user name of
each trusted caller. Wherever a set
of double quotes (&ldquo;&ldquo;)
appears in the third field, the password
for the caller is looked up in the
server's password database.</p><p>The
entry <tt>myserver *   serverpass
 *</tt> contains the PAP user
name and password for the dial-in
server. In <a href="p109.html#pppsvrconfig.p2plink-fig-20">Figure 16-3</a>, the trusted caller <tt>user2</tt> requires authentication
from remote peers. Therefore, <tt>myserver</tt>'s <tt>/etc/ppp/pap-secrets</tt> file contains PAP credentials
for use when a link is established
with <tt>user2</tt>.</p></li></ol><h6>See Also</h6><p>The following list provides
references to related information.</p>
<ul><li><p><a href="p118.html#ppp.auth-55">Modifying the PPP Configuration Files for PAP (Dial-in Server)</a></p>
</li>
<li><p><a href="p119.html">Configuring PAP Authentication for Trusted Callers (Dial-out Machines)</a></p>
</li>
</ul>
<a name="ppp.auth-55"></a><h4>Modifying
the PPP Configuration Files for PAP
(Dial-in Server)</h4>
<p>The tasks in this section explain
how to update any existing PPP configuration
files to support PAP authentication
on the dial-in server. </p>
<a name="ppp.auth-63"></a><h4><img src="graphics/procedure.gif"> How
to Add PAP Support to the PPP Configuration
Files (Dial-in Server)</h4>
<a name="indexterm-1843"></a><a name="indexterm-1844"></a><p>The procedure uses as examples
the PPP configuration files that were
introduced in <a href="p114.html#ppp.dialin-18">How to Define Communications Over the Serial Line (Dial-in Server)</a>.</p>
<ol><li><a name="pppsvrconfig.auth-step-9"></a><b>Log in as superuser on the dial-in
server or assume an equivalent role.</b><p>Roles contain authorizations
and privileged commands. For more
information about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="pppsvrconfig.auth-step-20"></a><b>Add authentication options to
the <tt>/etc/ppp/options</tt> file.</b><p>For example, you would
add the options in bold to an existing <tt>/etc/ppp/options</tt> file to
implement PAP authentication:</p><pre>lock
<tt><b>auth</b></tt>
<tt><b>login</b></tt>
<tt><b>nodefaultroute</b></tt>
<tt><b>proxyarp</b></tt>
<tt><b>ms-dns 10.0.0.1</b></tt>
<tt><b>idle 120</b></tt></pre><dl><dt><tt>auth</tt></dt>
<dd><p><a name="indexterm-1845"></a><a name="indexterm-1846"></a>Specifies that the server
must authenticate callers before establishing
the link.</p>
</dd>
<dt><tt>login</tt></dt>
<dd><p><a name="indexterm-1847"></a><a name="indexterm-1848"></a>Specifies that the remote
caller be authenticated by using the
standard UNIX user authentication
services.</p>
</dd>
<dt><tt>nodefaultroute</tt></dt>
<dd><p>Indicates that no <tt>pppd</tt> session on the local
system can establish a default route
without <tt>root</tt> privileges.</p>
</dd>
<dt><tt>proxyarp</tt></dt>
<dd><p>Adds an entry to the
system's Address Resolution Protocol
(ARP) table that specifies the IP
address of the peer and the Ethernet
address of the system. With this option
the peer appears to be on the local
Ethernet to other systems.</p>
</dd>
<dt><tt>ms-dns
10.0.0.1</tt></dt>
<dd><p>Enables <tt>pppd</tt> to
supply a Domain Name Server (DNS)
address, <tt>10.0.0.1</tt>,
for the client</p>
</dd>
<dt><tt>idle
120</tt></dt>
<dd><p>Specifies that idle
users are disconnected after two minutes.</p>
</dd>
</dl>
</li><li><a name="pppsvrconfig.auth-step-211"></a><b>In the <tt>/etc/ppp/options.cua.a</tt> file, add the following
address for the <tt>cua/a</tt> user.</b><pre>:10.0.0.2</pre></li><li><b>In the <tt>/etc/ppp/options.cua.b</tt> file, add the following
address for the <tt>cua/b</tt> user.</b><pre>:10.0.0.3</pre></li><li><b>In the <tt>/etc/ppp/pap-secrets</tt> file, add the following
entry.</b><pre><tt><b>*     *     	""     *</b></tt></pre><hr>
<p><b>Note - </b>The <tt>login</tt> option,
as previously described, supplies
the necessary user authentication.
This entry in the <tt>/etc/ppp/pap-secrets</tt> file is the standard way
of enabling PAP with the <tt>login</tt> option.</p>
<hr>
</li></ol><h6>See Also</h6><p>To configure PAP authentication
credentials for trusted callers of
the dial-in server, refer to <a href="p119.html">Configuring PAP Authentication for Trusted Callers (Dial-out Machines)</a>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p117.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p119.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

