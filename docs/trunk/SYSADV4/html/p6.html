<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Managing Web Cache Servers - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p5.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p7.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="nca-1"></a>Chapter&nbsp;2<h3>Managing Web Cache Servers</h3><p>This chapter provides an overview of the Solaris Network Cache
and Accelerator (NCA). Procedures for using NCA and reference material
about NCA are included. Also for the Solaris 10 6/06 release, an
introduction to using the Secure Sockets Layer (SSL) and procedures
for using the SSL kernel proxy to improve the performance of the
SSL packet processing are added.</p>
<ul><li><p><a href="p6.html#nca-2">Network Cache and Accelerator (Overview)</a></p>
</li>
<li><p><a href="p6.html#nca-35">Managing Web Cache Servers (Task Map)</a></p>
</li>
<li><p><a href="p7.html">Administering the Caching of Web Pages (Tasks)</a></p>
</li>
<li><p><a href="p9.html#nca-27">Caching Web Pages (Reference)</a></p>
</li>
</ul>
<a name="nca-2"></a><h3>Network Cache and Accelerator (Overview)</h3>
<a name="indexterm-2"></a><a name="indexterm-3"></a><p>The Solaris Network Cache and Accelerator (NCA) increases
web server performance by maintaining an in-kernel cache of web
pages that are accessed during HTTP requests. This in-kernel cache
uses system memory to significantly increase performance for HTTP
requests that are normally handled by web servers. Using system
memory to hold web pages for HTTP requests increases web server
performance by reducing the overhead between the kernel and the
web server. NCA provides a sockets interface through which any web
server can communicate with NCA with minimal modifications.</p>
<p>In situations where the requested page is retrieved from the
in-kernel cache (cache hit), performance improves dramatically.
In situations where the requested page is not in the cache (cache
miss) and must be retrieved from the web server, performance is
also significantly improved.</p>
<p>This product is intended to be run on a dedicated web server.
If you run other large processes on a server that runs NCA, problems
can result.</p>
<p>NCA provides logging support in that NCA logs all cache hits.
This log is stored in binary format to increase performance. The <tt>ncab2clf</tt> command can be used to convert the log from binary
format to common log format (CLF).</p>
<p><a name="indexterm-4"></a>The Solaris release includes the following enhancements:</p>
<ul><li><p>Sockets interface.</p>
</li>
<li><p>Support for vectored sendfile, which provides support
for AF_NCA. See the <tt>sendfilev</tt>(3EXT) man page for
more information.</p>
</li>
<li><p>New options for the <tt>ncab2clf</tt> command
that support the ability to skip records before a selected date
(<tt>-s</tt>) and to process a specified number of records
(<tt>-n</tt>).</p>
</li>
<li><p><tt>logd_path_name</tt> in <tt>ncalogd.conf</tt> can specify either a raw device, a file, or a combination
of the two.</p>
</li>
<li><p>Support for a web server to open multiple AF_NCA
sockets. With multiple sockets, you can have different web servers
that run on one server.</p>
</li>
<li><p>A new configuration file that is called <tt>/etc/nca/ncaport.conf</tt>. The file can be used to manage the IP addresses and
ports that NCA uses. Your web server might not provide native support
of the AF_NCA socket. If your server lacks this support, use this
file and the NCA socket utility library to convert an AF_INET socket
to an AF_NCA socket.</p>
</li>
</ul>
<a name="gcbks"></a><h3>Web Servers Using the Secure Sockets Layer
Protocol</h3>
<p>In the Solaris 10 6/06 release, an Apache 2.0 and a Sun Java
System Web Server may be configured to use the Secure Sockets Layer
(SSL) Protocol. The protocol provides confidentiality, message integrity
and end point authentication between two applications. The Solaris
kernel has been changed to accelerate the SSL traffic.</p>
<a name="nca-35"></a><h3>Managing Web Cache Servers (Task Map)</h3>
<a name="indexterm-5"></a><a name="indexterm-6"></a><p>The following table describes the procedures that are needed
to use NCA or SSL.</p>
<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Planning for NCA</p>
</td><td><p>A list of issues to be resolved before you enable the use
of NCA.</p>
</td><td><p><a href="p6.html#nca-44">Planning for NCA</a></p>
</td></tr>
<tr><td><p>Enabling NCA</p>
</td><td><p>Steps to enable in-kernel caching of web pages on a web server.</p>
</td><td><p><a href="p7.html#nca-5">How to Enable Caching of Web Pages</a></p>
</td></tr>
<tr><td><p>Disabling NCA</p>
</td><td><p>Steps to disable in-kernel caching of web pages on a web server.</p>
</td><td><p><a href="p7.html#nca-13">How to Disable Caching of Web Pages</a></p>
</td></tr>
<tr><td><p>Administering NCA logging</p>
</td><td><p>Steps to enable or disable the NCA logging process.</p>
</td><td><p><a href="p7.html#nca-19">How to Enable or Disable NCA Logging</a></p>
</td></tr>
<tr><td><p>Loading the NCA socket library</p>
</td><td><p>Steps to use NCA if the AF_NCA socket is not supported.</p>
</td><td><p><a href="p8.html">How to Load the Socket Utility Library for NCA</a></p>
</td></tr>
<tr><td><p>Using the SSL kernel proxy with an Apache 2.0 web server</p>
</td><td><p>Steps to use the SSL kernel proxy with a web server to improve
SSL packet processing.</p>
</td><td><p><a href="p8.html#gcbjy">How to Configure an Apache 2.0 Web Server to Use the SSL Kernel Proxy</a></p>
</td></tr>
<tr><td><p>Using the SSL kernel proxy with a Sun Java System Web Server</p>
</td><td><p>Steps to use the SSL kernel proxy with a web server to improve
SSL packet processing.</p>
</td><td><p><a href="p8.html#gcbwb">How to Configure a Sun Java System Web Server to Use the SSL Kernel Proxy</a></p>
</td></tr>
<tr><td><p>Using the SSL kernel proxy with a web server in a local zone</p>
</td><td><p>Steps to use the SSL kernel proxy with a web server in a local
zone.</p>
</td><td><p><a href="p9.html">Using the SSL Kernel Proxy in Zones</a></p>
</td></tr>
</table><a name="nca-44"></a><h3>Planning for NCA</h3>
<p>The following sections cover the issues that need to be resolved
before starting the NCA service.</p>
<a name="nca-39"></a><h4>System Requirements for NCA</h4>
<a name="indexterm-7"></a><p>To support NCA, the system must meet these requirements:</p>
<ul><li><p>256 Mbytes RAM must be installed.</p>
</li>
<li><p>The Solaris 10, or 9 release, or one of the Solaris
8 upgrade releases must be installed.</p>
</li>
<li><p>Support for a web server which has native support for NCA
or a web server whose startup script has been modified  to use the
Socket Utility Library for NCA:</p>
<ul><li><p>Apache web server, ships with Solaris 8 upgrade,
Solaris 9, and Solaris 10 releases</p>
</li>
<li><p>Sun Java System Web Server</p>
</li>
<li><p>Zeus web server available from Zeus Technology, <a href="http://www.zeus.com">http://www.zeus.com</a></p>
</li>
</ul>
</li>
</ul>
<p>This product is intended to be run on a dedicated web server.
The running of other large processes on a server that runs NCA can
cause problems.</p>
<a name="nca-45"></a><h4>NCA Logging</h4>
<p>The NCA service can be configured to log web activity. Generally,
NCA logging should be enabled if the web server logging is enabled.</p>
<a name="nca-48"></a><h4>Interpositioning Library for Daemon Support
of the Door Server</h4>
<p><a name="indexterm-8"></a><a name="indexterm-9"></a>Many web servers use AF_INET sockets. By default, NCA
uses AF_NCA sockets. To correct this situation, an interpositioning
library is provided. The new library is loaded in front of the standard
socket library, <tt>libsocket.so</tt>. The library call <tt>bind()</tt> is interposed by the new library, <tt>ncad_addr.so</tt>. Suppose that the status is enabled in <tt>/etc/nca/ncakmod.conf</tt>. The version of Apache that is included with the Solaris
9 and Solaris 10 release is already set up to call this library.
If you are using IWS or Netscape servers, see <a href="p8.html">How to Load the Socket Utility Library for NCA</a> to use the
new library.</p>
<a name="nca-46"></a><h4>Multiple Instance Support</h4>
<p>Systems that have NCA installed often need to run multiple
instances of a web server. For instance, a single server might need
to support a web server for outside access as well as a web administration
server. To separate these servers, you would configure each server
to use a separate port.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p5.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p7.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

