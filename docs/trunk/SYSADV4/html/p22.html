<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>WebNFS Administration Tasks - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p15.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p21.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p23.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rfsadmin-110"></a><h3>WebNFS Administration Tasks</h3>
<p><a name="indexterm-268"></a>This section provides instructions for administering the WebNFS
system. Related tasks follow.</p>
<a name="rfsadmin-tbl-58"></a>Table 5-4 Task Map for WebNFS
Administration<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Plan for WebNFS</p>
</td><td><p>Issues to consider before enabling the WebNFS service.</p>
</td><td><p><a href="p22.html#rfsadmin-111">Planning for WebNFS Access</a></p>
</td></tr>
<tr><td><p>Enable WebNFS</p>
</td><td><p>Steps to enable mounting of an NFS file system by using the WebNFS protocol.</p>
</td><td><p><a href="p16.html">How to Enable WebNFS Access</a></p>
</td></tr>
<tr><td><p>Enable WebNFS through a firewall</p>
</td><td><p>Steps to allow access to files through a firewall by using the WebNFS
protocol.</p>
</td><td><p><a href="p22.html#rfsadmin-119">How to Enable WebNFS Access Through a Firewall</a></p>
</td></tr>
<tr><td><p>Browse by using an NFS URL</p>
</td><td><p>Instructions for using an NFS URL within a web browser.</p>
</td><td><p><a href="p22.html#rfsadmin-118">How to Browse Using an NFS URL</a></p>
</td></tr>
<tr><td><p>Use a public file handle with autofs</p>
</td><td><p>Steps to force use of the public file handle when mounting a file system
with the automounter.</p>
</td><td><p><a href="p25.html#rfsadmin-189">How to Use a Public File Handle With Autofs</a></p>
</td></tr>
<tr><td><p>Use an NFS URL with autofs</p>
</td><td><p>Steps to add an NFS URL to the  automounter maps.</p>
</td><td><p><a href="p26.html">How to Use NFS URLs With Autofs</a></p>
</td></tr>
<tr><td><p>Provide access to a file system through a firewall</p>
</td><td><p>Steps to allow access to a file system through a firewall by using the
WebNFS protocol.</p>
</td><td><p><a href="p18.html#rfsadmin-88">How to Mount an NFS File System Through a Firewall</a></p>
</td></tr>
<tr><td><p>Mount a file system by using an NFS URL</p>
</td><td><p>Steps to allow access to a file system by  using an NFS URL. This process
allows for file-system access without using the MOUNT protocol.</p>
</td><td><p><a href="p18.html#rfsadmin-92">How to Mount an NFS File System Using an NFS URL</a></p>
</td></tr>
</table><a name="rfsadmin-111"></a><h4>Planning for WebNFS Access</h4>
<a name="indexterm-269"></a><p>To use WebNFS, you first need an application that is capable of running
and loading an NFS URL (for example, <tt>nfs://server/path</tt>).
The next step is to choose the file system that can be exported for WebNFS
access. If the application is web browsing, often the document root for the
web server is used. You need to consider several factors when choosing a file
system to export for WebNFS access.</p>
<ol><li><p><a name="indexterm-270"></a><a name="indexterm-271"></a>Each server has one public file handle that by default is associated
with the server's root file system. The path in an NFS URL is evaluated relative
to the directory with which the public file handle is associated. If the path
leads to a file or directory within an exported file system, the server provides
access. You can use the <tt>public</tt> option of the <tt>share</tt> command to associate the public file handle with a specific
exported directory. Using this option allows URLs to be relative to the shared
file system rather than to the server's root file system. The root file system
does not allow web access unless the root file system is shared.  </p>
</li>
<li><p><a name="indexterm-272"></a>The WebNFS environment enables users who already have mount privileges
to access files through a browser. This capability is enabled  regardless
of whether the file system is exported by using the <tt>public</tt> option.
Because users already have access to these files through the NFS setup, this
access should not create any additional security risk. You only need to share
a file system by using the <tt>public</tt> option if
users who cannot mount the file system need to use WebNFS access. </p>
</li>
<li><p><a name="indexterm-273"></a>File systems that are already open to the public make good candidates
for using the <tt>public</tt> option. Some examples
are the top directory in an ftp archive or the main URL directory for a web
site.</p>
</li>
<li><p><a name="indexterm-274"></a><a name="indexterm-275"></a>You can use the <tt>index</tt> option with
the <tt>share</tt> command to force the loading of an HTML file.
Otherwise, you can list the directory when an NFS URL is accessed.</p>
<p><a name="indexterm-276"></a>After a file system is chosen, review the files and set access
permissions to restrict viewing of files or directories, as needed. Establish
the permissions, as appropriate, for any NFS file system that is being shared.
For many sites, <tt>755</tt> permissions for directories and <tt>644</tt> permissions for files provide the correct level of access.</p>
<p>You need to consider additional factors if both NFS and HTTP URLs are
to be used to access one web site. These factors are described in <a href="p51.html#rfsrefer-57">WebNFS Limitations With Web Browser Use</a>.</p>
</li>
</ol>
<a name="rfsadmin-118"></a><h4>How to Browse Using an NFS URL</h4>
<a name="indexterm-277"></a><a name="indexterm-278"></a><a name="indexterm-279"></a><p>Browsers that are capable of supporting the WebNFS service should provide
access to an NFS URL that resembles the following:</p>
<pre>nfs://<i>server</i>&lt;:<i>port</i>>/<i>path</i></pre><dl><dt><i>server</i></dt>
<dd><p>Name of the file server</p>
</dd>
<dt><i>port</i></dt>
<dd><p>Port number to use (<tt>2049</tt>, default value)</p>
</dd>
<dt><i>path</i></dt>
<dd><p>Path to file, which can be relative to the public file handle
or to the root file system</p>
</dd>
</dl>
<hr>
<p><b>Note - </b><a name="indexterm-280"></a><a name="indexterm-281"></a>In most browsers, the URL service type (for example, <tt>nfs</tt> or <tt>http</tt>) is remembered from one transaction to the next. The exception
occurs when a URL that includes a different service type is loaded. After
you use an NFS URL, a reference to an HTTP URL might be loaded. If such a
reference is loaded, subsequent pages are loaded by using the HTTP protocol
instead of the NFS protocol.</p>
<hr>
<a name="rfsadmin-119"></a><h4>How to Enable WebNFS Access Through a Firewall</h4>
<p><a name="indexterm-282"></a><a name="indexterm-283"></a><a name="indexterm-284"></a>You can enable WebNFS access for clients that are not part of
the local subnet by configuring the firewall to allow a TCP connection on
port <tt>2049</tt>. Just allowing access for <tt>httpd</tt> does
not allow NFS URLs to be used.</p>
<a name="rfsadmin-127"></a><h3>Task Overview for Autofs Administration</h3>
<p>This section describes some of the most common tasks you might encounter
in your own environment. Recommended procedures are included for each scenario
to help you configure autofs to best meet your clients' needs. To perform
the tasks that are discussed in this section, use the Solaris Management Console
tools or see the <i>System Administration Guide: Naming and Directory Services (NIS+)</i>.</p>
<hr>
<p><b>Note - </b>Starting in the Solaris 10 release, you can also use the <tt>/etc/default/autofs</tt> file to configure your autofs environment. For task information,
refer to <a href="p22.html#rfsadmin-249">Using the <tt>/etc/default/autofs</tt> File to Configure Your autofs Environment</a>.</p>
<hr>
<a name="rfsadmin-60"></a><h4>Task Map for Autofs Administration</h4>
<p>The following table provides a description and a pointer to many of
the tasks that are related to autofs.</p>
<a name="rfsadmin-tbl-59"></a>Table 5-5 Task Map for Autofs
Administration<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Start autofs</p>
</td><td><p>Start the automount service without having to reboot the system</p>
</td><td><p><a href="p19.html#rfsadmin-121">How to Start the Automounter</a></p>
</td></tr>
<tr><td><p>Stop autofs</p>
</td><td><p>Stop the automount service without disabling other network services</p>
</td><td><p><a href="p19.html#rfsadmin-124">How to Stop the Automounter</a></p>
</td></tr>
<tr><td><p>Configure your autofs environment by using the <tt>/etc/default/autofs</tt> file</p>
</td><td><p>Assign values to keywords in the <tt>/etc/default/autofs</tt> file</p>
</td><td><p><a href="p22.html#rfsadmin-249">Using the <tt>/etc/default/autofs</tt> File to Configure Your autofs Environment</a></p>
</td></tr>
<tr><td><p>Access file systems by using autofs</p>
</td><td><p>Access file systems by using the automount service</p>
</td><td><p><a href="p17.html#rfsadmin-67">Mounting With the Automounter</a></p>
</td></tr>
<tr><td><p>Modify the autofs maps</p>
</td><td><p>Steps to modify the master map, which should be used to list other maps</p>
</td><td><p><a href="p23.html#rfsadmin-133">How to Modify the Master Map</a></p>
</td></tr>
<tr><td></td><td><p>Steps to modify an indirect map, which should be used for most maps</p>
</td><td><p><a href="p23.html#rfsadmin-139">How to Modify Indirect Maps</a></p>
</td></tr>
<tr><td></td><td><p>Steps to modify a direct map, which should be used when a direct association
between a mount point on a client and a server is required</p>
</td><td><p><a href="p23.html#rfsadmin-142">How to Modify Direct Maps</a></p>
</td></tr>
<tr><td><p>Modify the autofs maps to access non-NFS file systems</p>
</td><td><p>Steps to set up an autofs map with an entry for a CD-ROM application</p>
</td><td><p><a href="p23.html#rfsadmin-149">How to Access CD-ROM Applications With Autofs</a></p>
</td></tr>
<tr><td></td><td><p>Steps to set up an autofs map with an entry for a PC-DOS diskette</p>
</td><td><p><a href="p23.html#rfsadmin-152">How to Access PC-DOS Data Diskettes With Autofs</a></p>
</td></tr>
<tr><td></td><td><p>Steps to use autofs to access a CacheFS file system</p>
</td><td><p><a href="p24.html#rfsadmin-156">How to Access NFS File Systems by Using CacheFS</a></p>
</td></tr>
<tr><td><p>Using <tt>/home</tt></p>
</td><td><p>Example of how to set up a common <tt>/home</tt> map</p>
</td><td><p><a href="p24.html#rfsadmin-161">Setting Up a Common View of <tt>/home</tt></a></p>
</td></tr>
<tr><td></td><td><p>Steps to set up a <tt>/home</tt> map that refers to multiple
file systems</p>
</td><td><p><a href="p24.html#rfsadmin-162">How to Set Up <tt>/home</tt> With Multiple Home Directory File Systems</a></p>
</td></tr>
<tr><td><p>Using a new autofs mount point</p>
</td><td><p>Steps to set up a project-related autofs map</p>
</td><td><p><a href="p24.html#rfsadmin-166">How to Consolidate Project-Related Files Under <tt>/ws</tt></a></p>
</td></tr>
<tr><td></td><td><p>Steps to set up an autofs map that supports different client architectures</p>
</td><td><p><a href="p25.html">How to Set Up Different Architectures to Access a Shared Namespace</a></p>
</td></tr>
<tr><td></td><td><p>Steps to set up an autofs map that supports different operating systems</p>
</td><td><p><a href="p25.html#rfsadmin-179">How to Support Incompatible Client Operating System Versions</a></p>
</td></tr>
<tr><td><p>Replicate file systems with autofs</p>
</td><td><p>Provide access to file systems that fail over</p>
</td><td><p><a href="p25.html#rfsadmin-183">How to Replicate Shared Files Across Several Servers</a></p>
</td></tr>
<tr><td><p>Using security restrictions with autofs</p>
</td><td><p>Provide access to file systems while restricting remote <tt>root</tt> access
to the files</p>
</td><td><p><a href="p25.html#rfsadmin-186">How to Apply Autofs Security Restrictions</a></p>
</td></tr>
<tr><td><p>Using a public file handle with autofs</p>
</td><td><p>Force use of the public file handle when mounting a file system</p>
</td><td><p><a href="p25.html#rfsadmin-189">How to Use a Public File Handle With Autofs</a></p>
</td></tr>
<tr><td><p>Using an NFS URL with autofs</p>
</td><td><p>Add an NFS URL so that the automounter can use it</p>
</td><td><p><a href="p26.html">How to Use NFS URLs With Autofs</a></p>
</td></tr>
<tr><td><p>Disable autofs browsability</p>
</td><td><p>Steps to disable browsability so that autofs mount points are not automatically
populated on a single client</p>
</td><td><p><a href="p26.html#rfsadmin-196">How to Completely Disable Autofs Browsability on a Single NFS Client</a></p>
</td></tr>
<tr><td></td><td><p>Steps to disable browsability so that autofs mount points are not automatically
populated on all clients</p>
</td><td><p><a href="p26.html#rfsadmin-200">How to Disable Autofs Browsability for All Clients</a></p>
</td></tr>
<tr><td></td><td><p>Steps to disable browsability so that a specific autofs mount point
is  not automatically populated on a client</p>
</td><td><p><a href="p26.html#rfsadmin-204">How to Disable Autofs Browsability on a Selected File System</a></p>
</td></tr>
</table><a name="rfsadmin-249"></a><h4>Using the <tt>/etc/default/autofs</tt> File
to Configure Your autofs Environment</h4>
<a name="indexterm-285"></a><p>Starting in the Solaris 10 release, you can use the <tt>/etc/default/autofs</tt> file to configure your autofs environment. Specifically, this
file provides an additional way to configure your autofs commands and autofs
daemons. The same specifications you would make on the command line can be
made in this configuration file. You can make your specifications by providing
values to keywords. For more information, refer to <a href="p31.html#rfsrefer-146"><tt>/etc/default/autofs</tt> File</a>.</p>
<p>The following procedure shows you how to use the <tt>/etc/default/autofs</tt> file.</p>
<a name="rfsadmin-250"></a><h4><img src="graphics/procedure.gif"> How to Use the <tt>/etc/default/autofs</tt> File</h4>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><b>Add or modify an entry in the <tt>/etc/default/autofs</tt> file.</b><p>For example, if you want to turn off browsing for all autofs
mount points, you could add the following line.</p><pre><tt><b>AUTOMOUNTD_NOBROWSE=ON</b></tt></pre><p>This keyword is the equivalent of the <tt>-n</tt> argument for <tt>automountd</tt>. For a list of keywords, refer to <a href="p31.html#rfsrefer-146"><tt>/etc/default/autofs</tt> File</a>.</p></li><li><b>Restart the autofs daemon. </b><p>Type the following command:</p><pre># <tt><b>svcadm restart system/filesystem/autofs</b></tt></pre></li></ol><a name="rfsadmin-128"></a><h4>Administrative Tasks Involving Maps</h4>
<p><a name="indexterm-286"></a><a name="indexterm-287"></a>The following tables describe several of the factors you need
to be aware of when administering autofs maps. Your choice of map and name
service affect the mechanism that you need to use to make changes to the autofs
maps. </p>
<p><a name="indexterm-288"></a><a name="indexterm-289"></a>The following table describes the types of maps and their uses.</p>
<a name="rfsadmin-tbl-129"></a>Table 5-6 Types of autofs Maps and
Their Uses<table><tr><th><p>Type of Map</p>
</th><th><p>Use</p>
</th></tr>
<tr><td><p><a name="indexterm-290"></a>Master </p>
</td><td><p>Associates a directory with a map</p>
</td></tr>
<tr><td><p><a name="indexterm-291"></a>Direct </p>
</td><td><p>Directs autofs to specific file systems</p>
</td></tr>
<tr><td><p><a name="indexterm-292"></a>Indirect </p>
</td><td><p>Directs autofs to reference-oriented file systems</p>
</td></tr>
</table><p><a name="indexterm-293"></a><a name="indexterm-294"></a>The following table describes how to make changes to your autofs
environment that are  based on your name service.  </p>
<a name="rfsadmin-tbl-130"></a>Table 5-7 Map Maintenance<table><tr><th><p>Name Service</p>
</th><th><p>Method</p>
</th></tr>
<tr><td><p>Local files</p>
</td><td><p><a name="indexterm-295"></a>Text editor</p>
</td></tr>
<tr><td><p>NIS</p>
</td><td><p><a name="indexterm-296"></a><tt>make</tt> files</p>
</td></tr>
<tr><td><p>NIS+</p>
</td><td><p><a name="indexterm-297"></a><tt>nistbladm</tt></p>
</td></tr>
</table><p><a name="indexterm-298"></a><a name="indexterm-299"></a>The next table tells you when to run the <tt>automount</tt> command,
depending on the modification you have made to the type of map. For example,
if you have made an addition or a deletion to a direct map, you need to run
the <tt>automount</tt> command on the local system. By running the
command, you make the change effective. However, if you have modified an existing
entry, you do not need to run the <tt>automount</tt> command for
the change to become effective. </p>
<a name="rfsadmin-tbl-131"></a>Table 5-8 When to Run the <tt>automount</tt> Command<table><tr><th><p>Type of Map</p>
</th><th><p>Restart <tt>automount</tt>?</p>
</th><th><p></p>
</th></tr>
<tr><th><p></p>
</th><th><p>Addition or Deletion</p>
</th><th><p>Modification</p>
</th></tr>
<tr><td><p><a name="indexterm-300"></a><tt>auto_master</tt> </p>
</td><td><p><tt>Y</tt></p>
</td><td><p><tt>Y</tt></p>
</td></tr>
<tr><td><p><a name="indexterm-301"></a><tt>direct</tt> </p>
</td><td><p><tt>Y</tt></p>
</td><td><p><tt>N</tt></p>
</td></tr>
<tr><td><p><a name="indexterm-302"></a><tt>indirect</tt> </p>
</td><td><p><tt>N</tt></p>
</td><td><p><tt>N</tt></p>
</td></tr>
</table>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p21.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p23.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

