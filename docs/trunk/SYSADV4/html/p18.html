<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>How to Disable Mount Access for One Client - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p15.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a> > <a href="p17.html">Mounting File Systems</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p17.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p19.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rfsadmin-84"></a><h4><img src="graphics/procedure.gif"> How to Disable Mount Access for One Client</h4>
<p>Starting with the Solaris Express, Developer Edition 2/07 release, you
can do the following:</p>
<ul><li><p>Use the <tt>sharemgr</tt> utility to share file
systems, set property values for the shared file systems, and perform related
tasks. For information about <tt>sharemgr</tt>, including descriptions
of subcommands and properties, see the <tt>sharemgr</tt>(1M) man page and <a href="p38.html"><tt>sharemgr</tt> Command</a>.</p>
</li>
<li><p>Use the <tt>sharectl</tt> utility to configure file-sharing
protocols, such as NFS. See the <tt>sharectl</tt>(1M) man page and <a href="p43.html"><tt>sharectl</tt> Command</a>.</p>
</li>
</ul>
<hr>
<p><b>Note - </b>When you use <tt>sharemgr</tt>, you do not need to use
the <tt>share</tt>, <tt>shareall</tt>,  and <tt>unshare</tt> commands.
Also, you do not need to edit the <tt>/etc/dfs/dfstab</tt> file.</p>
<hr>
<p>The following procedure uses the <tt>sharemgr</tt> utility.
If you prefer to use the <tt>share</tt> and <tt>shareall</tt> utilities,
see the example that follows this procedure.</p>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-86"></a><b>Disable mount access for one client.</b><p>For example:</p><pre># sharemgr set ro=-rose:eng my-group</pre><dl><dt><tt>-rose:eng</tt></dt>
<dd><p>The access-list that allows mount access to all clients in
the <tt>eng</tt> netgroup except the host, <tt>rose</tt></p>
</dd>
<dt><tt>my-group</tt></dt>
<dd><p>The share group</p>
</dd>
</dl>
</li></ol><a name="gedmr"></a>Example 5-5 How to Use the <tt>share</tt> and <tt>shareall</tt> Commands
to Disable Mount Access for One Client<a name="indexterm-215"></a><a name="indexterm-216"></a><ol><li><p>Become superuser or assume an equivalent role.</p>
<p>Roles
contain authorizations and privileged commands. For more information about
roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary Administrator    profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<li><p>Add an entry in <tt>/etc/dfs/dfstab</tt>.</p>
<p><a name="indexterm-217"></a><a name="indexterm-218"></a>The first example allows mount access to all clients in the <tt>eng</tt> netgroup except the host that is named <tt>rose</tt>.
The second example allows mount access to all clients in the <tt>eng.example.com</tt> DNS domain except for <tt>rose</tt>.</p>
<pre>share -F nfs -o ro=-rose:eng /export/share/man
share -F nfs -o ro=-rose:.eng.example.com /export/share/man</pre><p>For additional information about access lists, see <a href="p44.html#rfsrefer-27">Setting Access Lists With the <tt>share</tt> Command</a>.
For a description of <tt>/etc/dfs/dfstab</tt>, see <tt>dfstab</tt>(4).</p>
</li>
<li><p>Share the file system.</p>
<p><a name="indexterm-219"></a>The NFS server does not use changes to <tt>/etc/dfs/dfstab</tt> 
until the file systems are shared again or until the server is rebooted.</p>
<pre># shareall</pre></li>
</ol>
<a name="rfsadmin-88"></a><h4><img src="graphics/procedure.gif"> How to Mount an NFS File System Through a Firewall</h4>
<p><a name="indexterm-220"></a><a name="indexterm-221"></a>To access file systems through a firewall, use the following procedure.</p>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-91"></a><b>Manually mount the file system by using
a command such as the following:</b><pre># <tt><b>mount -F nfs bee:/export/share/local /mnt</b></tt></pre><p><a name="indexterm-222"></a><a name="indexterm-223"></a>In this example, the file system <tt>/export/share/local</tt> is
mounted on the local client by using the public file handle. An NFS URL can
be used instead of the standard path name. If the public file handle is not
supported by the server <tt>bee</tt>, the mount operation fails.</p><hr>
<p><b>Note - </b>This procedure requires that the file system on the NFS server
be shared by using the <tt>public</tt> option. Additionally,
any firewalls between the client and the server must allow TCP connections
on port <tt>2049</tt>. Starting with the Solaris 2.6 release, all
file systems that are shared allow for public file handle access, so the <tt>public</tt> option is applied by default.</p>
<hr>
</li></ol><a name="rfsadmin-92"></a><h4><img src="graphics/procedure.gif"> How to Mount an NFS File System Using an NFS
URL</h4>
<a name="indexterm-224"></a><a name="indexterm-225"></a><ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-95"></a>(Optional) <b>If you are using
NFS version 2 or version 3, manually mount the file system by using a command
such as the following:</b><pre># <tt><b>mount -F nfs nfs://bee:3000/export/share/local /mnt</b></tt></pre><p><a name="indexterm-226"></a>In this example, the <tt>/export/share/local</tt> file
system is being mounted from the server <tt>bee</tt> by using NFS
port number <tt>3000</tt>. The port number is not required and by
default the standard NFS port number of <tt>2049</tt> is used. You
can choose to include the <tt>public</tt> option with
an NFS URL. Without the <tt>public</tt> option, the
MOUNT protocol is used if the public file handle is not supported by the server.
The <tt>public</tt> option forces the use of the public
file handle, and the mount fails if the public file handle is not supported.</p></li><li><a name="rfsadmin-step-227"></a>(Optional) <b>If you are using
NFS version 4, manually mount the file system by using a command such as the
following:</b><pre># <tt><b>mount -F nfs -o vers=4 nfs://bee:3000/export/share/local /mnt</b></tt></pre></li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p17.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p19.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

