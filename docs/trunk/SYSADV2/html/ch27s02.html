<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Troubleshooting Printing Problems</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="System Administration Guide: Advanced Administration"><link rel="up" href="ch27.html" title="Chapter 27. Troubleshooting Printing
Problems (Tasks)"><link rel="prev" href="ch27.html" title="Chapter 27. Troubleshooting Printing
Problems (Tasks)"><link rel="next" href="ch28.html" title="Chapter 28. Resolving UFS File System
Inconsistencies (Tasks)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Troubleshooting Printing Problems</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch27.html">Prev</a> </td><th width="60%" align="center">Chapter 27. Troubleshooting Printing
Problems (Tasks)</th><td width="20%" align="right"> <a accesskey="n" href="ch28.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tsprint-38200"></a>Troubleshooting Printing Problems</h2></div></div></div>

<p>This section contains step-by-step instructions that explain:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>How to troubleshoot no output</p>
</li><li>
<p>How to troubleshoot incorrect output</p>
</li><li>
<p>How to unhang the <span><strong class="command">lp</strong></span> commands</p>
</li><li>
<p>How to troubleshoot an idle (hung) printer</p>
</li><li>
<p>How to resolve conflicting status messages</p>
</li></ul></div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tsprint-33410"></a>How to Troubleshoot No Printer Output</h3></div></div></div>

<p>This task includes the following troubleshooting procedures to try when
you submit a print request to a printer and nothing prints:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Check the hardware (<span class="olink">How to Check the Printer Hardware</span>).</p>
</li><li>
<p>Check the network (<span class="olink">How To Check the Printer Network Connections</span>).</p>
</li><li>
<p>Check the LP print service basic functions (<span class="olink">How to Check the Basic Functions of the LP Print Service</span>).</p>
</li><li>
<p>Check printing from a Solaris print client to a Solaris print
server (<span class="olink">How to Check Printing From a Solaris Print Client to a Solaris Print Server</span>).</p>
</li></ul></div>
<p>Try the first three procedures in the order in which they are listed,
before going to the print client/server section. However, if the banner page
prints, but nothing else does, turn to the instructions under <span class="olink">How to Troubleshoot Incorrect Output</span>.</p>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2271124"></a></h3></div></div></div>

<div class="task"><a name="tsprint-84435"></a><p class="title"><b>How to Check the Printer Hardware</b></p><div class="procedure"><ol type="1"><li><a name="tsprint-step-12"></a>
<p>Check that the printer is plugged in and
turned on.</p>
</li><li><a name="tsprint-step-13"></a>
<p>Check that the cable is connected to the
port on the printer and to the port on the system or server.</p>
</li><li><a name="tsprint-step-14"></a>
<p>Make sure that the cable is the correct cable
and that it is not defective. </p>
<p>
<a class="indexterm" name="tsprint-ix5523"></a>Refer to the manufacturer`s documentation. If the printer is connected
to a serial port, verify that the cable supports hardware flow control. A
NULL modem adapter supports this. The following table shows the pin configuration
for NULL modem cables. </p>
<div class="informaltable">
<table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
</th><th>
<p>Host</p>
</th><th>
<p>Printer</p>
</th></tr><tr><th>
<p>Mini-Din-8</p>
</th><th>
<p>25-Pin D-sub</p>
</th><th>
<p>25-Pin D-sub</p>
</th></tr></thead><tbody><tr><td>
<p>  - </p>
</td><td>
<p>1 (FG)</p>
</td><td>
<p>1(FG)</p>
</td></tr><tr><td>
<p>3(TD)</p>
</td><td>
<p>2(TD)</p>
</td><td>
<p>3(RD)</p>
</td></tr><tr><td>
<p>5(RD)</p>
</td><td>
<p>3(RD)</p>
</td><td>
<p>2(TD)</p>
</td></tr><tr><td>
<p>6(RTS)</p>
</td><td>
<p>4(RTS)</p>
</td><td>
<p>5(CTS)</p>
</td></tr><tr><td>
<p>2(CTS)</p>
</td><td>
<p>5(CTS)</p>
</td><td>
<p>4(RTS)</p>
</td></tr><tr><td>
<p>4(SG)</p>
</td><td>
<p>7(SG)</p>
</td><td>
<p>7(SG)</p>
</td></tr><tr><td>
<p>7(DCD)</p>
</td><td>
<p>6(DSR), 8(DCD)</p>
</td><td>
<p>20(DTR)</p>
</td></tr><tr><td>
<p>1(DTR)</p>
</td><td>
<p>20(DTR)</p>
</td><td>
<p>6(DSR), 8(DCD)</p>
</td></tr></tbody></table>
</div>
</li><li><a name="tsprint-step-15"></a>
<p>Check that any hardware switches for the
ports are set properly.</p>
<p>See the printer documentation for the
correct settings.</p>
</li><li><a name="tsprint-step-16"></a>
<p>Check that the printer is operational.</p>
<p>Use the printer's self-test feature, if the printer has one. Check the
printer documentation for information about printer self-testing.</p>
</li><li><a name="tsprint-step-17"></a>
<p>Check that the baud settings for the computer
and the printer are correct. </p>
<p>If the baud settings are not the
same for both the computer and the printer, sometimes nothing will print,
but more often you get incorrect output. For instructions, see <span class="olink">How to Troubleshoot Incorrect Output</span>.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2271619"></a></h3></div></div></div>

<div class="task"><a name="tsprint-13730"></a><p class="title"><b>How To Check the Printer Network Connections</b></p><div class="procedure"><ol type="1"><li><a name="tsprint-step-19"></a>
<p>Check that the network link between the print
server and the print client is set up correctly.</p>
<pre class="screen">
<em class="replaceable"><code>print_client</code></em># <strong class="userinput"><code>ping</code></strong> <em class="replaceable"><code>print_server</code></em> 
<em class="replaceable"><code>print_server</code></em> is alive
<em class="replaceable"><code>print_server</code></em># <strong class="userinput"><code>ping</code></strong> <em class="replaceable"><code>print_client</code></em>
<em class="replaceable"><code>print_client</code></em> not available</pre>
<p>If the message says the system is alive, you know you can reach the
system, so the network is all right. The message also tells you that either
a name service or the local <code class="filename">/etc/hosts</code> file has translated
the host (system) name you entered into an IP address; otherwise, you would
need to enter the IP address. </p>
<p>If you get a <code class="literal">not available</code> message,
try to answer the following questions: How is NIS or NIS+ set up at your site?
Do you need to take additional steps so that print servers and print clients
can communicate with one another? If your site is not running NIS or NIS+,
have you entered the IP address for the print server in each print client's <code class="filename">/etc/hosts</code> file, and entered all print client IP addresses in the <code class="filename">/etc/hosts</code> file of the print server?</p>
</li><li><a name="tsprint-step-20"></a>
<p>(On a SunOS 5.0&#8211;5.1 print server only)
Check that the <code class="literal">listen</code> port monitor is configured correctly.</p>
</li><li><a name="tsprint-step-21"></a>
<p>(On a SunOS 5.0&#8211;5.1 print server only)
Check that the network listen services are registered with the port monitor
on the print server.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2271786"></a></h3></div></div></div>

<div class="task"><a name="tsprint-89143"></a><p class="title"><b>How to Check the Basic Functions of the LP
Print Service</b></p><div class="tasksummary">
<p>This procedure uses the printer <code class="literal">luna</code> as an example
of checking basic LP print service functions.</p>
</div><div class="procedure"><ol type="1"><li><a name="tsprint-step-23"></a>
<p>On the print server, make sure that the LP
print service is running.</p>
<ol type="a">
<li><a name="tsprint-step-176"></a>
<p>Check whether the LP scheduler is running by using one of the following
methods.</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Use the <span><strong class="command">lpstat</strong></span> command.</p>
<pre class="screen">% <strong class="userinput"><code>lpstat -r</code></strong>
scheduler is running</pre>
<p>A message is displayed, indicating whether the LP scheduler is running.</p>
</li><li>
<p>Use the <span><strong class="command">svcs</strong></span> command.</p>
<pre class="screen">% <strong class="userinput"><code>svcs application/print/server</code></strong>
</pre>
<p>The following output is displayed if the scheduler is running.</p>
<pre class="screen">STATE		STIME			FMRI
online		Oct_24		svc:/application/print/server:default</pre>
<p>The following output is displayed if the scheduler is not running.</p>
<pre class="screen">STATE			STIME			FMRI
disabled		14:27:48		svc:/application/print/server:default</pre>
</li></ul></div>
<pre class="screen">
</pre>
</li>
<li><a name="tsprint-step-25"></a>
<p>
<a class="indexterm" name="tsprint-ix5525"></a>If the scheduler is not running, become superuser, <code class="literal">lp</code>,
or assume an equivalent role.Start
the scheduler by using
one of the following methods.</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Use the <span><strong class="command">lpsched</strong></span> command.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/lib/lpsched</code></strong>
Print services started.</pre>
<p>A message is displayed, indicating the print services have been started.</p>
</li><li>
<p>Use the <span><strong class="command">svcadm</strong></span> command.</p>
<pre class="screen"># <strong class="userinput"><code>svcadm enable application/print/server</code></strong>
</pre>
<p>When you use the <span><strong class="command">svcadm</strong></span> command, no message indicating
whether the print services have been started is displayed. To determine if
the print services are online, run the <span><strong class="command">svcs application/print/server</strong></span> command
again.</p>
</li></ul></div>
<p>If you have trouble starting the scheduler, see <span class="olink">How to Unhang the LP Print Service</span>.</p>
</li>
</ol>
</li><li><a name="tsprint-step-26"></a>
<p>On both the print server and print client,
make sure that the printer is accepting requests.</p>
<ol type="a">
<li><a name="tsprint-step-27"></a>
<p>Check that the printer is accepting requests.</p>
<pre class="screen"># <strong class="userinput"><code>lpstat -a</code></strong>
mars accepting requests since Jan 12 14:23 2004
luna not accepting requests since Jan 12 14:23 2004
unknown reason</pre>
<p>This command verifies that the LP system is accepting requests for each
printer configured for the system.</p>
</li>
<li><a name="tsprint-step-28"></a>
<p>If the printer is not accepting requests,
become superuser, <code class="literal">lp</code>, or assume an equivalent role, and
allow the printer to accept print requests. </p>
<pre class="screen"># <strong class="userinput"><code>accept luna</code></strong>
</pre>
<p>The specified printer now accepts requests.</p>
</li>
</ol>
</li><li><a name="tsprint-step-29"></a>
<p>On both the print server and print client,
make sure that the printer is enabled to print submitted print requests.</p>
<ol type="a">
<li><a name="tsprint-step-30"></a>
<p>Check that the printer is enabled.</p>
<pre class="screen"># <strong class="userinput"><code>lpstat -p luna</code></strong>
printer luna disabled since Jan 12 14:25 2004.
available.
unknown reason</pre>
<p>This command displays information about printer status. You can omit
the printer name to obtain information about all printers set up for the system.
The following example shows a printer that is disabled.</p>
</li>
<li><a name="tsprint-step-31"></a>
<p>If the printer is disabled, become superuser, <code class="literal">lp</code>, or assume an equivalent role, and enable the printer.</p>
<pre class="screen"># <strong class="userinput"><code>enable luna</code></strong>
printer "luna" now enabled.</pre>
<p>The specified printer is enabled to process print requests.</p>
</li>
</ol>
</li><li><a name="tsprint-step-32"></a>
<p>
<a class="indexterm" name="tsprint-ix5527"></a>On the print server, make sure that the printer is connected to
the correct serial port. </p>
<ol type="a">
<li><a name="tsprint-step-33"></a>
<p>Check that the printer is connected to the
correct serial port.</p>
<pre class="screen"># <strong class="userinput"><code>lpstat -t</code></strong>
scheduler is running
system default destination: luna
device for luna: /dev/term/a</pre>
<p>The message <code class="literal">device for</code> <em class="replaceable"><code>printer-name</code></em> shows
the port address. Is the cable connected to the port to which the LP print
service says is connected? If the port is correct, skip to <span class="olink">Step 5</span>. </p>
</li>
<li><a name="tsprint-step-34"></a>
<p>Become superuser, <code class="literal">lp</code>,
or assume an equivalent role.</p>
</li>
<li><a name="tsprint-step-35"></a>
<p>Change the file ownership of the device file
that represents the port.</p>
<pre class="screen"># <strong class="userinput"><code>chown lp <em class="replaceable"><code>device-filename</code></em>
</code></strong>
</pre>
<p>This command assigns the special user <code class="literal">lp</code> as the owner
of the device file. In this command, <em class="replaceable"><code>device-filename</code></em> is
the name of the device file.</p>
</li>
<li><a name="tsprint-step-36"></a>
<p>Change the permissions on the printer port
device file.</p>
<pre class="screen"># <strong class="userinput"><code>chmod 600 <em class="replaceable"><code>device-filename</code></em>
</code></strong>
</pre>
<p>This command allows only superuser, <code class="literal">lp</code>, or an equivalent
role to access the printer port device file.</p>
</li>
</ol>
</li><li><a name="tsprint-step-37"></a>
<p>
<a class="indexterm" name="tsprint-ix5528"></a>
<a class="indexterm" name="tsprint-ix5529"></a>On both the print server and print client, make sure that the
printer is configured properly.  </p>
<ol type="a">
<li><a name="tsprint-step-38"></a>
<p>Check that the printer is configured properly.</p>
<pre class="screen"># <strong class="userinput"><code>lpstat -p luna -l</code></strong>
printer luna is idle. enabled since Jan 12 14:24 2004. available
        Content types: postscript
        Printer types: PS</pre>
<p>The above example shows a PostScript printer that is configured properly,
and that is available to process print requests. If the printer type and file
content type are correct, skip to <span class="olink">Step 6</span>.</p>
</li>
<li><a name="tsprint-step-39"></a>
<p>If the printer type or file content type
is incorrect, try setting the print type to <code class="literal">unknown</code> and
the content type to <code class="literal">any</code> on the print client.</p>
<pre class="screen"># <strong class="userinput"><code>lpadmin -p</code></strong> <em class="replaceable"><code>printer-name</code></em> <strong class="userinput"><code>-T</code></strong> <em class="replaceable"><code>printer-type</code></em> <strong class="userinput"><code>-I</code></strong> <em class="replaceable"><code>file-content-type</code></em>
</pre>
</li>
</ol>
</li><li><a name="tsprint-step-40"></a>
<p>On the print server, make sure that the printer
is not faulted.</p>
<ol type="a">
<li><a name="tsprint-step-41"></a>
<p>Check that the printer is not waiting because
of a printer fault.</p>
<pre class="screen"># <strong class="userinput"><code>lpadmin -p</code></strong> <em class="replaceable"><code>printer-name</code></em> <strong class="userinput"><code>-F continue</code></strong> </pre>
<p>This command instructs the LP print service to continue if it is waiting
because of a fault.</p>
</li>
<li><a name="tsprint-step-42"></a>
<p>Force an immediate retry by re-enabling the
printer.</p>
<pre class="screen"># <strong class="userinput"><code>enable</code></strong> <em class="replaceable"><code>printer-name</code></em> </pre>
</li>
<li><a name="tsprint-step-43"></a>
<p>(Optional) Instruct the LP print service
to enable quick notification of printer faults. </p>
<pre class="screen"># <strong class="userinput"><code>lpadmin -p</code></strong> <em class="replaceable"><code>printer-name</code></em> <strong class="userinput"><code>-A 'write root'</code></strong>
</pre>
<p>This command instructs the LP print service to set a default policy
of writing root, sending the printer fault message to the terminal on which
root is logged in, if the printer fails. This might help you get quick notification
of faults as you try to fix the problem.</p>
</li>
</ol>
</li><li><a name="tsprint-step-44"></a>
<p>Make sure that the printer is not set up
incorrectly as a login terminal.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>It is easy to mistakenly set up a printer as a login terminal,
so be sure to check this possibility even if you think it does not apply.</p>
</div>
<ol type="a">
<li><a name="tsprint-step-45"></a>
<p>Look for the printer port entry in the <span><strong class="command">ps -ef</strong></span> command output.</p>
<pre class="screen"># <strong class="userinput"><code>ps -ef</code></strong>
    root   169   167  0   Apr 04 ?        0:08 /usr/lib/saf/listen tcp
    root   939     1  0 19:30:47 ?        0:02 /usr/lib/lpsched
    root   859   858  0 19:18:54 term/a   0:01 /bin/sh -c \ /etc/lp
/interfaces/luna
luna-294 rocket!smith &#8220;passwd\n##
#</pre>
<p>In the output from this command, look for the printer port entry. In
the above example, port <code class="literal">/dev/term/a</code> is set up incorrectly
as a login terminal. You can tell by the <code class="literal">"passwd\n##</code> information
at the end of the line. If the port is set correctly, skip the last steps
in this procedure.</p>
</li>
<li><a name="tsprint-step-46"></a>
<p>Cancel the print request(s).</p>
<pre class="screen"># <strong class="userinput"><code>cancel</code></strong> <em class="replaceable"><code>request-id</code></em>
</pre>
<p>In this command, <em class="replaceable"><code>request-id</code></em> is the request
ID number for a print request to be canceled.</p>
</li>
<li><a name="tsprint-step-47"></a>
<p>Set the printer port to be a nonlogin device.</p>
<pre class="screen"># <strong class="userinput"><code>lpadmin -p</code></strong> <em class="replaceable"><code>printer-name</code></em> <strong class="userinput"><code>-h</code></strong>
</pre>
</li>
<li><a name="tsprint-step-48"></a>
<p>Check the <span><strong class="command">ps -ef</strong></span> command
output to verify that the printer port is no longer a login device.</p>
<p>If
you do not find the source of the printing problem in the basic LP print service
functions, continue to one of the following procedures for the specific client/server
case that applies. </p>
</li>
</ol>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2272866"></a></h3></div></div></div>

<div class="task"><a name="tsprint-40161"></a><p class="title"><b>How to Check Printing From a Solaris Print
Client to a Solaris Print Server</b></p><div class="procedure"><ol type="1"><li><a name="tsprint-step-49"></a>
<p>
<a class="indexterm" name="tsprint-ix5530"></a>Check the basic functions of the LP print service on the print
server, if you have not done so already. </p>
<p>For instructions on
checking basic functions, see <span class="olink">How to Check the Basic Functions of the LP Print Service</span>. Make sure that the printer
works locally before trying to figure out why nothing prints when a request
is made from a print client.</p>
</li><li><a name="tsprint-step-50"></a>
<p>Check the basic functions of the LP print
service on the print client, if you have not done so already.</p>
<p>On
the print client, the printer has to be enabled and accepting requests before
any request from the client will print.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>For most of the following steps, you must be logged in as root
or <code class="literal">lp</code>.</p>
</div>
</li><li><a name="tsprint-step-51"></a>
<p>
<a class="indexterm" name="tsprint-ix5531"></a>Make sure that the print server is accessible. </p>
<ol type="a">
<li><a name="tsprint-step-52"></a>
<p>On the print client, send an &#8220;are you
there?&#8221; request to the print server.</p>
<pre class="screen">
<em class="replaceable"><code>print_client</code></em># <strong class="userinput"><code>ping</code></strong> <em class="replaceable"><code>print_server</code></em>
</pre>
<p>If you receive the message <em class="replaceable"><code>print_server</code></em> <code class="literal">not available</code>, you might have a network problem.</p>
</li>
</ol>
</li><li><a name="tsprint-step-62"></a>
<p>Verify that the print server is operating
properly.</p>
<pre class="screen"># <strong class="userinput"><code>lpstat -t luna</code></strong> 
scheduler is running
system default destination: luna
device for luna: /dev/term/a
luna accepting requests since Jan 12 14:26 2004
printer luna now printing luna-314. enabled since Jan 12 14:26 2004. 
available.
luna-129            root               488   Jan 12 14:32
#</pre>
<p>The above example shows a print server up and running.</p>
</li><li><a name="tsprint-step-177"></a>
<p>If the print server is not operating properly,
go back to step 1.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2273102"></a></h3></div></div></div>

<div class="task"><a name="tsprint-81415"></a><p class="title"><b>How to Troubleshoot Incorrect Output</b></p><div class="procedure"><ol type="1"><li><a name="tsprint-step-127"></a>
<p>Log in as superuser, <code class="literal">lp</code>,
or assume an equivalent role.</p>
</li><li><a name="tsprint-step-128"></a>
<p>Make sure that the printer type is correct. </p>
<p>
<a class="indexterm" name="tsprint-ix5548"></a>An incorrect printer type might cause incorrect output. For example,
if you specify printer type <code class="literal">PS</code> and the pages print in reverse
order, try printer type <code class="literal">PSR</code>. (These type names must be
in uppercase.) Also, an incorrect printer type might cause missing text, illegible
text, or text with the wrong font. To determine the printer type, examine
the entries in the <code class="literal">terminfo</code> database. For information on
the structure of the <code class="literal">terminfo</code> database, see <span class="olink">Printer Type</span>.</p>
<ol type="a">
<li><a name="tsprint-step-129"></a>
<p>On the print server, display the printer's
characteristics.</p>
<pre class="screen">$ <strong class="userinput"><code>lpstat -p luna -l</code></strong>
printer luna is idle. enabled since Thu Jul 12 15:02:32 ...
        Form mounted: 
        Content types: postscript
        Printer types: PS
        Description:
        Connection: direct
        Interface: /usr/lib/lp/model/standard
        After fault: continue
        Users allowed:
                (all)
        Forms allowed:
                (none)
        Banner not required
        Character sets:

        Default pitch:
        Default page size: 80 wide 66 long
        Default port settings:  
$</pre>
</li>
<li><a name="tsprint-step-130"></a>
<p>Consult the printer manufacturer's documentation
to determine the printer model. </p>
</li>
<li><a name="tsprint-step-131"></a>
<p>If the printer type is not correct, change
it with Solaris Print Manager's Modify Printer Properties window, or use the
following <span><strong class="command">lpadmin</strong></span> command.</p>
<pre class="screen"># <strong class="userinput"><code>lpstat -p</code></strong> <em class="replaceable"><code>printer-name</code></em> <strong class="userinput"><code>-T</code></strong> <em class="replaceable"><code>printer-type</code></em>
</pre>
<p>On the print client, the printer type should be <code class="literal">unknown</code>.
On the print server, the printer type must match a <code class="literal">terminfo</code> entry
that is defined to support the model of printer you have. If there is no <span><strong class="command">terminfo</strong></span> entry for the type of printer you have, see <span class="olink">How to Add a <code class="filename">terminfo</code> Entry for an Unsupported Printer</span>.</p>
</li>
</ol>
</li><li><a name="tsprint-step-132"></a>
<p>
<a class="indexterm" name="tsprint-ix5549"></a>If the banner page prints, but there is no output for the body
of the document, check the file content types.   </p>
<p>
<a class="indexterm" name="tsprint-ix5552"></a>
<a class="indexterm" name="tsprint-ix5553"></a>File content types specified for a printer indicate the types
of files the printer can print directly without filtering. An incorrect file
content type causes filtering to be bypassed when it might be needed.  </p>
<ol type="a">
<li><a name="tsprint-step-133"></a>
<p>Note the information on file content type
that was supplied in the previous step by the <span><strong class="command">lpstat</strong></span> command.</p>
<p>On the print client, the file content type should be <code class="literal">any</code>,
unless you have good reason to specify one or more explicit content types.
If a content is specified on the client, filtering is done on the print client,
rather than the print server. In addition, content types on the client must
match the content types specified on the print server, which in turn must
reflect the capabilities of the printer.</p>
</li>
<li><a name="tsprint-step-134"></a>
<p>Consult your printer manufacturer's documentation
to determine which types of files the printer can print directly.</p>
<p>The
names you use to refer to these types of files do not have to match the names
used by the manufacturer. However, the names you use must agree with the names
used by the filters known to the LP print service.</p>
</li>
<li><a name="tsprint-step-135"></a>
<p>If the file content type is not correct,
change it with Solaris Print Manager's Modify Printer Properties window, or
the following <span><strong class="command">lpadmin</strong></span> command.</p>
<pre class="screen"># <strong class="userinput"><code>lpadmin -p</code></strong> <em class="replaceable"><code>printer-name</code></em> <strong class="userinput"><code>-I</code></strong> <em class="replaceable"><code>file-content-type(s)</code></em>
</pre>
<p>Run this command on either the print client, or print server, or both,
as needed. Try <code class="option">
I any</code> on the print client, and <code class="option">
I ""</code> on
the print server. The latter specifies a null file content type list, which
means an attempt should be made to filter all files, because the printer can
directly print only files that exactly match its printer type. </p>
<p>This
combination is a good first choice when files are not printing. If it works,
you might want to try specifying explicit content types on the print server
to reduce unnecessary filtering. For a local PostScript printer, you should
use <code class="literal">postscript</code>, or <code class="literal">postscript,simple</code>,
if the printer supports these types. Be aware that <code class="literal">PS</code> and <code class="literal">PSR</code> are not file content types; they are printer types.</p>
<p>If
you omit <code class="option">
I</code>, the file content list defaults to <code class="literal">simple</code>.
If you use the <code class="option">
I</code> option and want to specify file content
types in addition to <code class="literal">simple</code>, <code class="literal">simple</code> must
be included in the list.</p>
<p>When specifying multiple file content
types, separate the names with commas. Or you can separate names with spaces
and enclose the list in quotation marks. If you specify <code class="literal">any</code> as
the file content type, no filtering will be done and only file types that
can be printed directly by the printer should be sent to it. </p>
</li>
</ol>
</li><li><a name="tsprint-step-136"></a>
<p>Check that the print request does not bypass
filtering needed to download fonts.</p>
<p>
<a class="indexterm" name="tsprint-ix5554"></a>
<a class="indexterm" name="tsprint-ix5555"></a>
<a class="indexterm" name="tsprint-ix5556"></a>If a user submits a print request to a PostScript printer with
the <span><strong class="command">lp -T PS</strong></span> command, no filtering is done. Try submitting
the request with the <span><strong class="command">lp -T postscript</strong></span> command to force
filtering, which might result in the downloading of non-resident fonts needed
by the document.   </p>
</li><li><a name="tsprint-step-137"></a>
<p>Make sure that the <code class="literal">stty</code> settings
for the printer port are correct.</p>
<ol type="a">
<li><a name="tsprint-step-138"></a>
<p>Read the printer documentation to determine
the correct <code class="literal">stty</code> settings for the printer port.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>If a printer is connected to a parallel or USB port, the baud
setting is irrelevant.</p>
</div>
</li>
<li><a name="tsprint-step-139"></a>
<p>Examine the current settings by using the <span><strong class="command">stty</strong></span> command.</p>
<pre class="screen"># <strong class="userinput"><code>stty -a &lt; /dev/term/a</code></strong>
speed 9600 baud;
rows = 0; columns = 0; ypixels = 0; xpixels = 0;
eucw 1:0:0:0, scrw 1:0:0:0
intr = ^c; quit = ^|; erase = ^?; kill = ^u;
eof = ^d; eol = &lt;undef&gt;; eol2 = &lt;undef&gt;; swtch = &lt;undef&gt;;
start = ^q; stop = ^s; susp = ^z; dsusp = ^y;
rprnt = ^r; flush = ^o; werase = ^w; lnext = ^v;
parenb -parodd cs7 -cstopb -hupcl cread -clocal -loblk -parext
-ignbrk brkint -ignpar -parmrk -inpck istrip -inlcr -igncr icrnl -iuclc
ixon -ixany -ixoff imaxbel
isig icanon -xcase echo echoe echok -echonl -noflsh
-tostop echoctl -echoprt echoke -defecho -flusho -pendin iexten
opost -olcuc onlcr -ocrnl -onocr -onlret -ofill -ofdel tab3
#</pre>
<p>This command shows the current <code class="literal">stty</code> settings for
the printer port.</p>
<p>The following table shows the default <span><strong class="command">stty</strong></span> options used by the LP print service's standard printer interface
program.</p>
<div class="informaltable">
<table border="1"><colgroup><col><col></colgroup><thead><tr><th>
<p>Option</p>
</th><th>
<p>Meaning</p>
</th></tr></thead><tbody><tr><td>
<p>
<code class="option">
9600</code>
</p>
</td><td>
<p>Set baud rate to 9600</p>
</td></tr><tr><td>
<p>
<code class="option">
cs8</code>
</p>
</td><td>
<p>Set 8-bit bytes</p>
</td></tr><tr><td>
<p>
<code class="option">
cstopb</code>
</p>
</td><td>
<p>Send one stop bit per byte</p>
</td></tr><tr><td>
<p>
<code class="option">
parity</code>
</p>
</td><td>
<p>Do not generate parity</p>
</td></tr><tr><td>
<p>
<code class="option">
ixon</code>
</p>
</td><td>
<p>Enable XON/XOFF (also known as START/STOP or DC1/DC3)</p>
</td></tr><tr><td>
<p>
<code class="option">
opost</code>
</p>
</td><td>
<p>Do &#8220;output post-processing&#8221; using all the settings that
follow in this table</p>
</td></tr><tr><td>
<p>
<code class="option">
olcuc</code>
</p>
</td><td>
<p>Do not map lowercase to uppercase</p>
</td></tr><tr><td>
<p>
<code class="option">
onlcr</code>
</p>
</td><td>
<p>Change line feed to carriage return/line feed</p>
</td></tr><tr><td>
<p>
<code class="option">
ocrnl</code>
</p>
</td><td>
<p>Do not change carriage returns into line feeds</p>
</td></tr><tr><td>
<p>
<code class="option">
onocr</code>
</p>
</td><td>
<p>Output carriage returns even at column 0</p>
</td></tr><tr><td>
<p>
<code class="option">
n10</code>
</p>
</td><td>
<p>No delay after line feeds</p>
</td></tr><tr><td>
<p>
<code class="option">
cr0</code>
</p>
</td><td>
<p>No delay after carriage returns</p>
</td></tr><tr><td>
<p>
<code class="option">
tab0</code>
</p>
</td><td>
<p>No delay after tabs</p>
</td></tr><tr><td>
<p>
<code class="option">
bs0</code>
</p>
</td><td>
<p>No delay after backspaces</p>
</td></tr><tr><td>
<p>
<code class="option">
vt0</code>
</p>
</td><td>
<p>No delay after vertical tabs</p>
</td></tr><tr><td>
<p>
<code class="option">
ff0</code>
</p>
</td><td>
<p>No delay after form feeds</p>
</td></tr></tbody></table>
</div>
</li>
<li><a name="tsprint-step-140"></a>
<p>Change the <code class="literal">stty</code> settings.</p>
<pre class="screen"># <strong class="userinput"><code>lpadmin -p</code></strong> <strong class="userinput"><code>printer-name</code></strong> <strong class="userinput"><code>-o "stty=</code></strong> <em class="replaceable"><code>options</code></em>
<strong class="userinput"><code>"</code></strong> </pre>
<p>
<a class="indexterm" name="tsprint-ix5557"></a>
<a class="indexterm" name="tsprint-ix5558"></a>
<a class="indexterm" name="tsprint-ix5560"></a>Use the following table to choose <span><strong class="command">stty</strong></span> options
to correct various problems affecting print output.  </p>
<div class="informaltable">
<table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
<p>
<code class="literal">stty</code> Values</p>
</th><th>
<p>Result</p>
</th><th>
<p>Possible Problem  From Incorrect Setting</p>
</th></tr></thead><tbody><tr><td>
<p>
<code class="literal">110</code>, <code class="literal">300</code>, <code class="literal">600</code>, <code class="literal">1200</code>, <code class="literal">1800</code>, <code class="literal">2400</code>, <code class="literal">4800</code>, <code class="literal">9600</code>, <code class="literal">19200</code>, <code class="literal">38400</code>
</p>
</td><td>
<p>Sets baud rate to the specified value (enter only one baud rate)</p>
</td><td>
<p>Random characters and special characters might be printed and spacing
might be inconsistent</p>
</td></tr><tr><td>
<p>
<code class="literal">oddp</code>
</p>
<p>
<code class="literal">evenp</code>
</p>
<p>
<code class="literal">-parity</code>
</p>
</td><td>
<p>Sets odd parity</p>
<p>Sets even parity</p>
<p>Sets no parity</p>
</td><td>
<p>Missing or incorrect characters appear randomly</p>
</td></tr><tr><td>
<p>
<code class="literal">-tabs</code>
</p>
</td><td>
<p>Sets no tabs</p>
</td><td>
<p>Text is jammed against right margin</p>
</td></tr><tr><td>
<p>
<code class="literal">tabs</code>
</p>
</td><td>
<p>Sets tabs every eight spaces</p>
</td><td>
<p>Text has no left margin, is run together, or is jammed together</p>
</td></tr><tr><td>
<p>
<code class="literal">-onlcr</code>
</p>
</td><td>
<p>Sets no carriage return at the beginning of line(s)</p>
</td><td>
<p>Incorrect double spacing</p>
</td></tr><tr><td>
<p>
<code class="literal">onlcr</code>
</p>
</td><td>
<p>Sets carriage return at beginning of line(s)</p>
</td><td>
<p>The print zigzags down the page</p>
</td></tr></tbody></table>
</div>
<p>You can change more than one option setting by enclosing
the list of options in single quotation marks and separating each option with
spaces. For example, suppose the printer requires you to enable odd parity
and set a 7-bit character size. You would type a command similar to that shown
in the following example:</p>
<pre class="screen"># <strong class="userinput"><code>lpadmin -p neptune -o "stty='parenb parodd cs7'"</code></strong>
</pre>
<p>The <code class="literal">stty</code> option <code class="literal">parenb</code> enables
parity checking/generation, <code class="literal">parodd</code> sets odd parity generation,
and <code class="literal">cs7</code> sets the character size to 7 bits.</p>
</li>
</ol>
</li><li><a name="tsprint-step-141"></a>
<p>Verify that the document prints correctly.</p>
<pre class="screen"># <strong class="userinput"><code>lp -d</code></strong> <em class="replaceable"><code>printer-name</code></em> <em class="replaceable"><code>filename</code></em>
</pre>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2274813"></a></h3></div></div></div>

<div class="task"><a name="tsprint-78868"></a><p class="title"><b>How to Unhang the LP Print Service</b></p><a class="indexterm" name="indexterm-310"></a><div class="procedure"><ol type="1"><li><a name="tsprint-step-143"></a>
<p>Log in as superuser, <code class="literal">lp</code>,
or assume an equivalent role.</p>
</li><li><a name="tsprint-step-144"></a>
<p>Stop the LP print service.</p>
<pre class="screen"># <strong class="userinput"><code>svcadm disable /application/print/server</code></strong>
</pre>
</li><li><a name="tsprint-step-149"></a>
<p>Restart the LP print service.</p>
<pre class="screen"># <strong class="userinput"><code>svcadm enable /application/print/server</code></strong>
</pre>
<p>The LP print service should restart. If you are having trouble restarting
the scheduler, see <span class="olink">How to Restart the Print Scheduler</span>.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tsprint-18877"></a>How to Troubleshoot an Idle (Hung) Printer</h3></div></div></div>

<a class="indexterm" name="tsprint-ix5566"></a>
<p>This task includes a number of procedures to use when a printer appears
idle but it should not be. It makes sense to try the procedures in order,
but the order is not mandatory.</p>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2274983"></a></h3></div></div></div>

<div class="task"><a name="tsprint-150"></a><p class="title"><b>How to Check That the Printer is Ready to Print</b></p><div class="procedure"><ol type="1"><li><a name="tsprint-step-152"></a>
<p>Display printer status information.</p>
<pre class="screen"># <strong class="userinput"><code>lpstat -p</code></strong> <em class="replaceable"><code>printer-name</code></em> </pre>
<p>The information displayed shows you whether the printer is idle or active,
enabled or disabled, or available or not accepting print requests. If everything
looks all right, continue with other procedures in this section. If you cannot
run the <span><strong class="command">lpstat</strong></span> command, see <span class="olink">How to Unhang the LP Print Service</span>.</p>
</li><li><a name="tsprint-step-153"></a>
<p>If the printer is not available (not accepting
requests), allow the printer to accept requests.</p>
<pre class="screen"># <strong class="userinput"><code>accept</code></strong> <em class="replaceable"><code>printer-name</code></em> </pre>
<p>The printer begins to accept requests into its print queue.</p>
</li><li><a name="tsprint-step-154"></a>
<p>If the printer is disabled, re-enable it.</p>
<pre class="screen"># <strong class="userinput"><code>enable</code></strong> <em class="replaceable"><code>printer-name</code></em> </pre>
<p>This command re-enables the printer so that it will act on the requests
in its queue.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tsprint-155"></a>How to Check for Print Filtering</h3></div></div></div>

<p>Check for print filtering by using the <span><strong class="command">lpstat -o</strong></span> command. </p>
<pre class="screen">$ <strong class="userinput"><code>lpstat -o luna</code></strong>
luna-10           fred         1261   Mar 12 17:34 being filtered
luna-11           iggy         1261   Mar 12 17:36 on terra
luna-12           jack         1261   Mar 12 17:39 on terra
$</pre>
<p>See if the first waiting request is being filtered. If the output looks
like the above example, the file is being filtered; the printer is not hung,
it just is taking a while to process the request.</p>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2275152"></a></h3></div></div></div>

<div class="task"><a name="tsprint-156"></a><p class="title"><b>How to Resume Printing After a Printer Fault</b></p><div class="procedure"><ol type="1"><li><a name="tsprint-step-158"></a>
<p>Look for a message about a printer fault
and try to correct the fault if there is one.</p>
<p>Depending on how
printer fault alerts have been specified, messages might be sent to root by
email or written to a terminal on which root is logged in.</p>
</li><li><a name="tsprint-step-159"></a>
<p>Re-enable the printer.</p>
<pre class="screen"># <strong class="userinput"><code>enable</code></strong> <em class="replaceable"><code>printer-name</code></em> </pre>
<p>If a request was blocked by a printer fault, this command will force
a retry. If this command does not work, continue with other procedures in
this section.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2275233"></a></h3></div></div></div>

<div class="task"><a name="tsprint-160"></a><p class="title"><b>How to Send Print Requests to a Remote Printer
When They Back Up in the Local Queue</b></p><div class="procedure"><ol type="1"><li><a name="tsprint-step-162"></a>
<p>On the print client, stop further queuing
of print requests to the print server.</p>
<pre class="screen"># <strong class="userinput"><code>reject</code></strong> <em class="replaceable"><code>printer-name</code></em> </pre>
</li><li><a name="tsprint-step-163"></a>
<p>On the print client, send an &#8220;are
you there?&#8221; request to the print server. </p>
<pre class="screen">
<em class="replaceable"><code>print_client</code></em># <strong class="userinput"><code>ping</code></strong> <em class="replaceable"><code>print_server</code></em>
<em class="replaceable"><code>print_server</code></em> is alive</pre>
<p>If you receive the message <em class="replaceable"><code>print_server</code></em> <code class="literal">not available</code>, you might have a network problem.</p>
</li><li><a name="tsprint-step-165"></a>
<p>After you fix the above problem, allow new
print requests to be queued.</p>
<pre class="screen"># <strong class="userinput"><code>accept</code></strong> <em class="replaceable"><code>printer-name</code></em> </pre>
</li><li><a name="tsprint-step-166"></a>
<p>If necessary, re-enable the printer.</p>
<pre class="screen"># <strong class="userinput"><code>enable</code></strong> <em class="replaceable"><code>printer-name</code></em> </pre>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2275401"></a></h3></div></div></div>

<div class="task"><a name="tsprint-167"></a><p class="title"><b>How to Free Print Requests From a Print Client
That Back Up in the Print Server Queue</b></p><div class="procedure"><ol type="1"><li><a name="tsprint-step-169"></a>
<p>On the print server, stop further queuing
of print requests from any print client to the print server.</p>
<pre class="screen"># <strong class="userinput"><code>reject</code></strong> <em class="replaceable"><code>printer-name</code></em> </pre>
</li><li><a name="tsprint-step-170"></a>
<p>Display the <code class="filename">lpsched</code> log
file.</p>
<pre class="screen"># <strong class="userinput"><code>more /var/lp/logs/lpsched</code></strong>
</pre>
<p>The information displayed might help you pinpoint what is preventing
the print requests from the print client to the print server from being printed.</p>
</li><li><a name="tsprint-step-171"></a>
<p>After you fix the problem, allow new print
requests to be queued.</p>
<pre class="screen"># <strong class="userinput"><code>accept</code></strong> <em class="replaceable"><code>printer-name</code></em>
</pre>
</li><li><a name="tsprint-step-172"></a>
<p>
<a class="indexterm" name="tsprint-ix5568"></a>If necessary, re-enable the printer on the print server. </p>
<pre class="screen"># <strong class="userinput"><code>enable</code></strong> <em class="replaceable"><code>printer-name</code></em>
</pre>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2275543"></a></h3></div></div></div>

<div class="task"><a name="tsprint-91367"></a><p class="title"><b>How to Resolve Conflicting Printer Status
Messages</b></p><a class="indexterm" name="indexterm-311"></a><div class="procedure"><ol type="1"><li><a name="tsprint-step-174"></a>
<p>On the print server, verify the printer
is enabled and is accepting requests.</p>
<pre class="screen"># <strong class="userinput"><code>lpstat -p</code></strong> <em class="replaceable"><code>printer-name</code></em>
</pre>
<p>Users will see conflicting status messages when the print client is
accepting requests, but the print server is rejecting requests.</p>
</li><li><a name="tsprint-step-175"></a>
<p>
<a class="indexterm" name="tsprint-ix5571"></a>On the print server, check that the definition of the printer
on the print client matches the definition of the printer on the print server. </p>
<pre class="screen"># <strong class="userinput"><code>lpstat -p -l</code></strong> <em class="replaceable"><code>printer-name</code></em>
</pre>
<p>Look at the definitions of the print job components, like print filters,
character sets, print wheels, and forms, to be sure they are the same on both
the client and server systems so that local users can access printers on print
server systems.</p>
</li></ol></div></div>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch27.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch27.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch28.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 27. Troubleshooting Printing
Problems (Tasks) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 28. Resolving UFS File System
Inconsistencies (Tasks)</td></tr></table></div></body></html>
