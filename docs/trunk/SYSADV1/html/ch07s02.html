<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Preparing for Managing Diskless Clients</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="System Administration Guide: Basic Administration"><link rel="up" href="ch07.html" title="Chapter 7. Managing Diskless Clients (Tasks)"><link rel="prev" href="ch07.html" title="Chapter 7. Managing Diskless Clients (Tasks)"><link rel="next" href="ch07s03.html" title="Patching Diskless Client OS Services"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Preparing for Managing Diskless Clients</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch07.html">Prev</a> </td><th width="60%" align="center">Chapter 7. Managing Diskless Clients (Tasks)</th><td width="20%" align="right"> <a accesskey="n" href="ch07s03.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="clientsetup-3"></a>Preparing for Managing Diskless Clients</h2></div></div></div>

<p>These sections describe the preparations that are necessary for managing
diskless clients.</p>
<p>Keep the following key points in mind when managing diskless clients:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>The Solaris installation program doesn't prompt you to set
up diskless client support. You must manually create an <code class="filename">/export</code> partition
to support diskless clients. You create the <code class="filename">/export</code> partition
during or after the installation process.</p>
</li><li>
<p>The <code class="filename">/export</code> partition must contain a
minimum of 5 Gbytes, depending upon the number of clients supported. For specific
information, see .</p>
</li><li>
<p>The name service identified in the <span><strong class="command">smosservice</strong></span> or <span><strong class="command">smdiskless</strong></span> commands must match the primary name service identified
in the <code class="filename">/etc/nsswitch.conf</code> file. If you don't specify
a name service in the <span><strong class="command">smdiskless</strong></span> or <span><strong class="command">smosservice</strong></span> commands,
the default name service is <code class="literal">files</code>.</p>
<p>Use the <code class="option">
D</code> option to the <span><strong class="command">smosservice</strong></span> and <span><strong class="command">smdiskless</strong></span> commands
to specify a name server. For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">smosservice</span>
(
1M
)
</span>
</span> and <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">smdiskless</span>
(
1M
)
</span>
</span> man pages.</p>
<p>
<span class="strong"><strong>Starting with the Solaris
Express 5/06 release</strong></span>, the <span><strong class="command">set_nfs4_domain</strong></span> script
that was delivered in the Solaris 10 OS is no longer used to set the NFSv4
domain. To set the NFSv4 domain, add the <code class="literal">nfs4_domain</code> keyword
to the diskless client's <span><strong class="command">sysidcfg</strong></span> file, for example, <code class="filename">server:/export/root/client/etc/sysidcfg</code>.</p>
<p>If the <code class="literal">nfs4_domain</code> keyword exists in the client system's <span><strong class="command">sysidcfg</strong></span> file,
the first boot of a diskless client sets the domain accordingly. Also, the
OS server should be up and running, and the diskless client's NFSv4 domain
setting must match the setting in the OS server's <code class="filename">/var/run/nfs4_domain</code> file.</p>
<p> For more information, see <span class="olink">
<em class="citetitle">Preconfiguring With the sysidcfg File</em> in <em class="citetitle">Solaris Express Installation Guide: Network-Based Installations</em>
</span>.</p>
</li><li>
<p>The OS server and the diskless client must be on the same
subnet.</p>
</li><li>
<p>You
cannot provide client services on a multiterabyte UFS file system, because
OS and diskless client services cannot be added to a UFS file system that
resides on an EFI-labeled disk.</p>
</li></ul></div>
<p>After you determine the platform, media path, and cluster for each diskless
client, you are ready to add OS services. The following directories are created
and populated for each OS service that you add:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>
<code class="filename">/export/Solaris_<em class="replaceable"><code>version</code></em>/Solaris_<em class="replaceable"><code>version</code></em>-<em class="replaceable"><code>instruction-set</code></em>.all</code> (symbolic link to <code class="filename">/export/exec/Solaris_<em class="replaceable"><code>version</code></em>/Solaris_<em class="replaceable"><code>version</code></em>-<em class="replaceable"><code>instruction-set</code></em>.all</code>)</p>
</li><li>
<p>
<code class="filename">/export/Solaris_<em class="replaceable"><code>version</code></em>
</code>
</p>
</li><li>
<p>
<code class="filename">/export/Solaris_<em class="replaceable"><code>version</code></em>/var</code>
</p>
</li><li>
<p>
<code class="filename">/export/Solaris_<em class="replaceable"><code>version</code></em>/opt</code>
</p>
</li><li>
<p>
<code class="filename">/export/share</code>
</p>
</li><li>
<p>
<code class="filename">/export/root/templates/Solaris_<em class="replaceable"><code>version</code></em>
</code>
</p>
</li><li>
<p>
<code class="filename">/export/root/clone</code>
</p>
</li><li>
<p>
<code class="filename">/export/root/clone/Solaris_<em class="replaceable"><code>version</code></em>
</code>
</p>
</li><li>
<p>
<code class="filename">/export/root/clone/Solaris_<em class="replaceable"><code>version</code></em>/<em class="replaceable"><code>machine-class</code></em>
</code>
</p>
</li></ul></div>
<p>The following default directories are created and populated on the OS
server for each diskless client that you add:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>
<code class="filename">/export/root/<em class="replaceable"><code>diskless-client</code></em>
</code>
</p>
</li><li>
<p>
<code class="filename">/export/swap/<em class="replaceable"><code>diskless-client</code></em>
</code>
</p>
</li><li>
<p>
<code class="filename">/tftpboot/<em class="replaceable"><code>diskless-client-ipaddress-in-hex</code></em>
</code>
<code class="filename">/export/dump/<em class="replaceable"><code>diskless-client</code></em>
</code> (if
you specify the <code class="option">
x</code> <em class="replaceable"><code>dump</code></em> option)</p>
</li></ul></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>You can modify the default locations of the root (<code class="filename">/</code>), <code class="filename">/swap</code>, and <code class="filename">/dump</code> directories by using the <code class="option">
x</code> option
to the <span><strong class="command">smosservice</strong></span> and <span><strong class="command">smdiskless</strong></span> commands.
However, do not create these directories under the <code class="filename">/export</code> file
system.</p>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2054221"></a></h3></div></div></div>

<div class="task"><a name="fwaol"></a><p class="title"><b>
How to
Prepare for Adding Diskless Clients in a GRUB Based Boot Environment</b></p><div class="tasksummary">
<p>Starting with the Solaris Express 6/05 release, use this procedure to prepare for adding a diskless client.
This procedure includes general information for x86 based systems.</p>
<p>When you use the <span><strong class="command">smosservice add</strong></span> command to add OS
services, you must specify the platform, media path, and cluster (or software
group) of each diskless client platform that you want to support.</p>
</div><div class="taskprerequisites">

<p>Ensure that the system that is intended to be the OS service is running
a supported release. Also, verify that the OS server release and diskless
client release combination is supported. For more information, see <span class="olink">OS Server and Diskless Client Support Information</span>.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Identify the diskless client platform by using this format:</p>
<p>
<em class="replaceable"><code>instruction-set</code></em>.<em class="replaceable"><code>machine-class</code></em>.<em class="replaceable"><code>Solaris_version</code></em>
</p>
<p>For example:</p>
<p>
<code class="literal">i386.i86pc.Solaris_11</code>
</p>
<p>The following are the possible platform options:</p>
<div class="informaltable">
<table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
<p>
<em class="replaceable"><code>instruction-set</code></em>
</p>
</th><th>
<p>
<em class="replaceable"><code>machine-class</code></em>
</p>
</th><th>
<p>
<em class="replaceable"><code>Solaris_version</code></em>
</p>
</th></tr></thead><tbody><tr><td>
<p>sparc</p>
</td><td>
<p>sun4v</p>
<p>sun4u, sun4m, sun4d, and sun4c</p>
</td><td>
<p>Starting with the Solaris 10 1/06 OS</p>
<p>Solaris Express, Solaris 10, Solaris 9, Solaris 8,
Solaris 7, and Solaris 2.7</p>
</td></tr><tr><td>
<p>i386</p>
</td><td>
<p>i86pc</p>
</td><td>
<p>Solaris Express, Solaris_10, Solaris_9, Solaris_8,
Solaris_2.7 </p>
</td></tr></tbody></table>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>The sun-4c architecture is not supported in the Solaris 8, Solaris
9, Solaris 10, or Solaris
Express releases. The sun-4d architecture is not supported in the Solaris
9, Solaris 10, or Solaris Express releases. The sun-4m architecture
is not supported in the Solaris Express or the Solaris 10
release.</p>
</div>
</li><li><a name="fwaex"></a>
<p>Identify the media path.</p>
<p>The media path
is the full path to the disk image that contains the OS that you want to install
for the diskless client.</p>
<p>The Solaris OS is delivered on multiple
CDs. However, you cannot use the <span><strong class="command">smosservice</strong></span> command to
load OS services from a multiple CD distribution. You must run the scripts
that are found on the Solaris software CDs (and optional Language CD) to do
the following:</p>
</li><li>
<p>Create an install image on a server. For information on setting
up an install server, refer to <span class="olink">
<em class="citetitle">Solaris Express Installation Guide: Network-Based Installations</em>
</span>.</p>
</li><li>
<p>Load the required OS services from the CD image by using one of
the following scripts:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>CD 1 &#8211; <code class="filename">/cdrom/cdrom0/s0/Solaris_11/Tools/setup_install_server</code>
</p>
</li><li>
<p>Additional Solaris Software CDs &#8211; <code class="filename">/cdrom/cdrom0/s0/Solaris_11/Tools/add_to_install_server</code>
</p>
</li><li>
<p>Language CD &#8211; <code class="filename">/cdrom/cdrom0/s0/Solaris_11/Tools/add_to_install_server</code>
</p>
</li></ul></div>
<p>For example, if you are using the <span><strong class="command">setup_install_server</strong></span> script
from the Solaris Express Software 1 CD on
a locally connected CD-ROM device, the syntax looks similar to the following:</p>
<pre class="screen"># <strong class="userinput"><code>mkdir /export/install/sol_11_x86</code></strong>
# <strong class="userinput"><code>cd /cd_mount_point/Solaris_11/Tools</code></strong>
# <strong class="userinput"><code>./setup_install_server /export/install/sol_11_x86</code></strong>
</pre>
</li><li>
<p>Add the <code class="literal">BootFile</code> and <code class="literal">BootSrvA</code> DHCP
options to your DHCP server configuration to enable a PXE boot.</p>
<p>For
example:</p>
<pre class="screen">Boot server IP (BootSrvA) : <em class="replaceable"><code>svr-addr</code></em>
(BootFile) : 01<em class="replaceable"><code>client-macro</code></em>
</pre>
<p>where <em class="replaceable"><code>svr-addr</code></em> is the IP address of the OS
server and <em class="replaceable"><code>client-macro</code></em> is named by the client's
Ethernet type (01) and the mac address of the client. This number is also
the name of the file that is used in the <code class="filename">/tftpboot</code> directory
on the installation server.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>The notation for the <em class="replaceable"><code>client-macro</code></em> consists
of uppercase letters. This notation should not contain any colons.</p>
</div>
<p>You can add these options from the command-line, or by using DHCP Manager.
See <span class="olink">Example 7&#8211;4</span> for more information.</p>
<p>For more information, see <span class="olink">
How to Perform a GRUB Based Boot From the Network</span>, <span class="olink">
<em class="citetitle">Preconfiguring System Configuration Information With the DHCP Service (Tasks)</em> in <em class="citetitle">Solaris Express Installation Guide: Network-Based Installations</em>
</span>,
and <span class="olink">Part III, <em class="citetitle">DHCP,</em> in <em class="citetitle">System Administration Guide: IP Services</em>
</span>.</p>
</li><li>
<p>After the Solaris CD image is installed on the disk, note the
disk media path. For example:</p>
<pre class="screen">/net/export/install/sol_11_x86_</pre>
<p>This is the disk media path that needs to be specified when you use
the <span><strong class="command">smosservice</strong></span> command.</p>
</li><li><a name="fwagu"></a>
<p>Identify the <code class="filename">SUNWCXall</code> cluster
when you add OS services.</p>
<p>You must use the same cluster for diskless
clients that run the same OS on the same system. </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>Always specify <code class="filename">SUNWCXall</code> as the cluster.</p>
</div>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2054920"></a></h3></div></div></div>

<div class="task"><a name="clientsetup-7"></a><p class="title"><b>How to Prepare for Adding Diskless Clients
in the Solaris 10 OS</b></p><div class="tasksummary">
<p>When you use the <span><strong class="command">smosservice add</strong></span> command to add OS
services, you must specify the platform, media path, and cluster (or software
group) of each diskless client platform that you want to support.</p>
</div><div class="taskprerequisites">

<p>Ensure that the system that is intended to be the OS service is running
a supported release. Also verify that the combination of OS server release
and diskless client release is supported. For more information, see <span class="olink">OS Server and Diskless Client Support Information</span>.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Identify the diskless client platform by using this format:</p>
<p>
<em class="replaceable"><code>instruction-set</code></em>.<em class="replaceable"><code>machine-class</code></em>.<em class="replaceable"><code>Solaris-version</code></em>
</p>
<p>For example:</p>
<p>
<code class="literal">sparc.sun4u.Solaris_10</code>
</p>
<p>The following are the possible platform options:</p>
<div class="informaltable">
<table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
<p>
<em class="replaceable"><code>instruction-set</code></em>
</p>
</th><th>
<p>
<em class="replaceable"><code>machine-class</code></em>
</p>
</th><th>
<p>
<em class="replaceable"><code>Solaris-version</code></em>
</p>
</th></tr></thead><tbody><tr><td>
<p>sparc</p>
</td><td>
<p>sun4v</p>
<p>sun4c, sun4d, sun4m, sun4u,</p>
</td><td>
<p>Starting with the Solaris 10 1/06 OS</p>
<p> Solaris_10, Solaris_9, Solaris_8, Solaris_2.7</p>
</td></tr><tr><td>
<p>i386</p>
</td><td>
<p>i86pc</p>
</td><td>
<p>Solaris_10, Solaris_9, Solaris_8, Solaris_2.7 </p>
</td></tr></tbody></table>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>The sun-4c architecture is not supported in the Solaris 8, Solaris
9, or Solaris 10 releases. The sun-4d architecture is not supported in the
Solaris 9 or 10 releases. The sun-4m architecture is not supported in the
Solaris 10 release.</p>
</div>
</li><li><a name="clientsetup-step-22"></a>
<p>Identify the media path.</p>
<p>The
media path is the full path to the disk image that contains the OS that you
want to install for the diskless client.</p>
<p>The Solaris OS is delivered
on multiple CDs. However, you cannot use the <span><strong class="command">smosservice</strong></span> command
to load OS services from a multiple CD distribution. You must run the scripts
that are found on the Solaris software CDs (and optional Language CD) to do
the following:</p>
</li><li>
<p>Create an install image on a server. For information on setting
up an install server, refer to <span class="olink">
<em class="citetitle">Solaris Express Installation Guide: Network-Based Installations</em>
</span>.</p>
</li><li>
<p>Load the required OS services from the CD image by using one of
the following scripts:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>CD 1 &#8211; <code class="filename">/cdrom/cdrom0/s0/Solaris_10/Tools/setup_install_server</code>
</p>
</li><li>
<p>Additional Solaris Software CDs &#8211; <code class="filename">/cdrom/cdrom0/s0/Solaris_10/Tools/add_to_install_server</code>
</p>
</li><li>
<p>Language CD &#8211; <code class="filename">/cdrom/cdrom0/s0/Solaris_10/Tools/add_to_install_server</code>
</p>
</li></ul></div>
<p>For example, if you are using the <span><strong class="command">setup_install_server</strong></span> script
from the Solaris Express  Software 1 CD on
a locally connected CD-ROM device, the syntax looks similar to the following:</p>
<pre class="screen"># <strong class="userinput"><code>mkdir /export/install/sparc_10</code></strong>
# <strong class="userinput"><code>cd /cd_mount_point/Solaris_10/Tools</code></strong>
# <strong class="userinput"><code>./setup_install_server /export/install/sparc_10</code></strong>
</pre>
</li><li>
<p>After the Solaris CD image is installed on the disk, specify the
disk media path. For example:</p>
<pre class="screen">/export/install/sparc_10</pre>
</li><li><a name="clientsetup-step-23"></a>
<p>Identify the <code class="filename">SUNWCXall</code> cluster
when you add OS services.</p>
<p>You must use the same cluster for diskless
clients that run the same OS on the same system. </p>
<p>For example,
consider the following Solaris 9 diskless clients:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>
<code class="filename">sparc.sun4m.Solaris_9</code>
</p>
</li><li>
<p>
<code class="filename">sparc.sun4u.Solaris_9</code>
</p>
</li></ul></div>
<p>To set up these diskless clients, you would need to specify the <code class="literal">SUNWCXall</code> cluster for each diskless client because the <code class="literal">sun4u</code> and <code class="literal">sun4m</code> systems require the <code class="filename">SUNWCXall</code> cluster.
In addition, diskless clients that run the same operating release (in this
example, Solaris_9) on the same system must use the same cluster.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>If you are using a <code class="filename">sun4u</code> system, or if you
are using a system with an accelerated 8-bit color memory frame buffer (<code class="literal">cgsix</code>), you <span class="emphasis"><em>must</em></span> specify <code class="filename">SUNWCXall</code> as
the cluster. </p>
</div>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2055499"></a></h3></div></div></div>

<div class="task"><a name="clientsetup-20"></a><p class="title"><b>How to Add OS Services for Diskless Client
Support</b></p><div class="tasksummary">
<p>Use this procedure to add OS services for a diskless client on the server.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>When adding OS services with the <span><strong class="command">smosservice add</strong></span> command,
root (<code class="filename">/</code>) and <code class="filename">/usr</code> packages with
the <code class="literal">ARCH=all</code> type are not installed. These packages are
skipped. No warning or error messages are displayed. After you add the OS
services to the OS server, you must install the missing packages manually.
For instructions, see <span class="olink">How
to Locate and Install Missing <code class="literal">ARCH=all</code> Packages</span>.</p>
</div>
</div><div class="procedure"><ol type="1"><li>
<p>Become superuser or assume an equivalent role.</p>
<p>Roles contain authorizations and privileged commands. For more information about roles,
see <span class="olink">
<em class="citetitle">Configuring RBAC (Task Map)</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li><a name="clientsetup-step-7"></a>
<p>Verify that the Solaris Management Console
server is running and that the diskless client tools are available on the
system.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smosservice list -H <em class="replaceable"><code>host-name</code></em>:898 --</code></strong>
</pre>
</li><li><a name="diskless-step-1"></a>
<p>
<a class="indexterm" name="indexterm-93"></a>
<a class="indexterm" name="indexterm-94"></a>Add the OS services.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smosservice add -H</code></strong> <em class="replaceable"><code>host-name</code></em>
<strong class="userinput"><code>:898</code></strong> <strong class="userinput"><code>-- -o</code></strong> <em class="replaceable"><code>host-name</code></em> 
<strong class="userinput"><code>-x mediapath=</code></strong>
<em class="replaceable"><code>path</code></em> <strong class="userinput"><code>-x platform=</code></strong>
<em class="replaceable"><code>instruction-set.machine-class.Solaris_version</code></em> 
<strong class="userinput"><code>-x cluster=</code></strong>
<em class="replaceable"><code>cluster-name</code></em> <strong class="userinput"><code>-x locale=</code></strong>
<em class="replaceable"><code>locale-name</code></em>
</pre>
<div class="variablelist"><dl><dt><span class="term">
<span><strong class="command">add</strong></span>
</span></dt><dd>
<p>Adds the specified OS service.</p>
</dd><dt><span class="term">
<code class="option">
H</code> <em class="replaceable"><code>host-name</code></em>:898</span></dt><dd>
<p>Specifies the host name and port to which you want to connect.
If you do not specify a port, the system connects to the default port, 898.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>The <code class="option">
H</code> option is not a required option when using
the <span><strong class="command">smossservice</strong></span> command to add OS services.</p>
</div>
</dd><dt><span class="term">
<span><strong class="command">--</strong></span>
</span></dt><dd>
<p>Identifies that the subcommand arguments start after this
point.</p>
</dd><dt><span class="term">
<code class="option">
x</code> <em class="replaceable"><code>mediapath=path</code></em>
</span></dt><dd>
<p>Specifies the full path to the Solaris image.</p>
</dd><dt><span class="term">
<code class="option">
x</code>  <em class="replaceable"><code>platform=instruction-set.machine-class.Solaris-version</code></em>
</span></dt><dd>
<p>Specifies the instruction architecture, machine class, and
the Solaris version to be added. </p>
</dd><dt><span class="term">
<code class="option">
x</code>  <em class="replaceable"><code>cluster=cluster-name</code></em>
</span></dt><dd>
<p>Specifies the Solaris cluster to  install.</p>
</dd><dt><span class="term">
<code class="option">
x</code>  <em class="replaceable"><code>locale=locale-name</code></em>
</span></dt><dd>
<p>Specifies the locale to install.</p>
</dd></dl></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>The installation process can take about 45 minutes, depending
on the server speed and the OS service configuration you choose.</p>
</div>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">smosservice</span>
(
1M
)
</span>
</span> man page.</p>
</li><li><a name="clientsetup-step-10"></a>
<p>(Optional) Continue to add the other
OS services.</p>
</li><li><a name="diskless-step-2"></a>
<p>When you are finished adding OS services,
verify that the OS services were installed. </p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smosservice list -H <em class="replaceable"><code>host-name</code></em>:898 --</code></strong>
</pre>
</li></ol></div><div class="example"><a name="id2056084"></a><p class="title"><b>Example 7.1. 
Adding an OS Service for Diskless Client Support</b></p>


<p>This example shows how to add Solaris 10 (SPARC based) OS services on
the server <code class="literal">jupiter</code>. The server <code class="literal">jupiter</code> is
running the Solaris 10 release. The CD image of the Solaris 10 (SPARC based)
OS is located on the installation server, <code class="literal">myway</code>, in <code class="filename">/export/s10/combined.s10s_u2wos/61</code>.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smosservice add -H jupiter:898 -- -o jupiter 
-x mediapath=/net/myway/export/s10/combined.s10s_u2wos/61
-x platform=sparc.sun4u.Solaris_10 
-x cluster=SUNWCXall -x locale=en_US</code></strong>

# <strong class="userinput"><code>/usr/sadm/bin/smosservice list - H jupiter:898</code></strong>
Authenticating as user: root

Type /? for help, pressing enter accepts the default denoted by [ ]
Please enter a string value for: password :: <em class="replaceable"><code>xxxxxx</code></em>
Loading Tool: com.sun.admin.osservermgr.cli.OsServerMgrCli
from jupiter:898
Login to jupiter as user root was successful.
Download of com.sun.admin.osservermgr.cli.OsServerMgrCli from jupiter:898 
was successful.</pre>
</div><div class="example"><a name="gcfan"></a><p class="title"><b>Example 7.2. 
Adding an OS Service for Diskless Client Support</b></p>


<p>This example shows how to add Solaris 10 (x86 based) OS services on
the server <code class="literal">orbit</code>. The server <code class="literal">orbit</code> is
running the Solaris 10 release. The CD image of the Solaris 10 (x86 based)
OS is located on the installation server, <code class="literal">seriously</code>, in <code class="filename">/export/s10/combined.s10x_u2wos/03</code>.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smosservice add -H orbit:898 -- -o orbit -x
mediapath=/net/seriously/export/s10u2/combined.s10x_u2wos/03 -x
platform=i386.i86pc.Solaris_10 -x cluster=SUNWCXall -x locale=en_US</code></strong>

# <strong class="userinput"><code>/usr/sadm/bin/smosservice list - H orbit:898</code></strong>
Type /? for help, pressing &lt;enter&gt; accepts the default denoted by [ ]
Please enter a string value for: password ::
Starting Solaris Management Console server version 2.1.0.
endpoint created: :898
Solaris Management Console server is ready.
Loading Tool: com.sun.admin.osservermgr.cli.OsServerMgrCli from orbit:898
Login to orbit as user root was successful.
Download of com.sun.admin.osservermgr.cli.OsServerMgrCli from orbit:898 was successful.
Client       	Root Area
                Swap Area
                Dump Area
--------------------------------------------------------------------------------
.
.
.
#</pre>
</div><div class="taskrelated">

<p>Locate and install any <code class="literal">ARCH=all</code> packages that were
missed when you ran the <span><strong class="command">smosservice add</strong></span> command to add
the OS services to the OS server. For more information, see <span class="olink">How to Locate and Install Missing <code class="literal">ARCH=all</code> Packages</span>.</p>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2056258"></a></h3></div></div></div>

<div class="task"><a name="clientsetup-4"></a><p class="title"><b>
How to Add a Diskless Client in
the GRUB Based Boot Environment</b></p><div class="tasksummary">
<p>Starting with the Solaris Express 6/05 release, use this procedure to add a diskless client after you
have added OS services.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Become superuser or assume an equivalent role.</p>
<p>Roles contain authorizations and privileged commands. For more information about roles,
see <span class="olink">
<em class="citetitle">Configuring RBAC (Task Map)</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li><a name="fxjjl"></a>
<p>Add the diskless client.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smdiskless add -- -i</code></strong> <em class="replaceable"><code>ip-address</code></em> <strong class="userinput"><code>-e</code></strong> <em class="replaceable"><code>ethernet-address</code></em> 
<strong class="userinput"><code>-n</code></strong> <em class="replaceable"><code>client-name</code></em> <strong class="userinput"><code>-x os=</code></strong>
<em class="replaceable"><code>instruction-set.machine-class.Solaris_version</code></em> 
<strong class="userinput"><code>-x root=/export/root/</code></strong>
<em class="replaceable"><code>client-name</code></em> <strong class="userinput"><code>-x swap=/export/swap/</code></strong>
<em class="replaceable"><code>client-name</code></em> 
<strong class="userinput"><code>-x swapsize=</code></strong>
<em class="replaceable"><code>size</code></em> <strong class="userinput"><code>-x tz=</code></strong>
<em class="replaceable"><code>time-zone</code></em> <strong class="userinput"><code>-x locale=</code></strong>
<em class="replaceable"><code>locale-name</code></em>
</pre>
<div class="variablelist"><dl><dt><span class="term">
<span><strong class="command">add</strong></span>
</span></dt><dd>
<p>Adds the specified diskless client.</p>
</dd><dt><span class="term">
<span><strong class="command">--</strong></span>
</span></dt><dd>
<p>Identifies that the subcommand arguments start after this
point.</p>
</dd><dt><span class="term">
<code class="option">
i</code> <em class="replaceable"><code>ip-address</code></em>
</span></dt><dd>
<p>Identifies the IP address of the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
e</code> <em class="replaceable"><code>ethernet-address</code></em>
</span></dt><dd>
<p>Identifies the Ethernet address of the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
n</code> <em class="replaceable"><code>client-name</code></em>
</span></dt><dd>
<p>Specifies the name of the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x os=</code>
<em class="replaceable"><code>instruction-set.machine-class.Solaris-version</code></em>
</span></dt><dd>
<p>Specifies the instruction architecture, machine class, OS,
and the Solaris version for the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x root=</code>
<span><strong class="command">root=/export/root/</strong></span>
<em class="replaceable"><code>client-name</code></em>
</span></dt><dd>
<p>Identifies the root (<code class="filename">/</code>) directory for
the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x swap=</code>
<span><strong class="command">root=/export/root/</strong></span>
<em class="replaceable"><code>client-name</code></em>
</span></dt><dd>
<p>Identifies the swap file for the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x swapsize=</code>
<em class="replaceable"><code>size</code></em>
</span></dt><dd>
<p>Specifies the size of the swap file in Mbytes. The default
is 24 Mbytes.</p>
</dd><dt><span class="term">
<code class="option">
x tz=</code>
<em class="replaceable"><code>time-zone</code></em>
</span></dt><dd>
<p>Specifies the time-zone for the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x locale=</code>
<em class="replaceable"><code>locale-name</code></em>
</span></dt><dd>
<p>Specifies the locale to install for the diskless client.</p>
</dd></dl></div>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">smdiskless</span>
(
1M
)
</span>
</span> man page.</p>
</li><li>
<p>If not already created, add the <code class="literal">BootSrva</code> and <code class="literal">BootFile</code> DHCP options to your DHCP server configuration to enable
a PXE boot.</p>
<p>For example:</p>
<pre class="screen">Boot server IP (BootSrvA) : <em class="replaceable"><code>svr-addr</code></em> 
Boot file (BootFile) : 01<em class="replaceable"><code>client-macro</code></em>
</pre>
<p>where <em class="replaceable"><code>svr-addr</code></em> is the IP address of the server
and <em class="replaceable"><code>client-macro</code></em> is named by the client's Ethernet
type (01) and the mac address of the client. This number is also the name
of the file that is used in the <code class="filename">/tftpboot</code> directory on
the installation server.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>The <em class="replaceable"><code>client-macro</code></em> notation consists
of uppercase letters. The notation should not contain any colons.</p>
</div>
<p>The following files and directories are created in the <code class="filename">/tftpboot</code> directory:</p>
<pre class="screen">drwxr-xr-x   6 root sys     512 Dec 28 14:53 <em class="replaceable"><code>client-host-name</code></em>
lrwxrwxrwx   1 root root     31 Dec 28 14:53 menu.lst.01<em class="replaceable"><code>ethernet-address</code></em>
						-&gt; /tftpboot/<em class="replaceable"><code>client-host-name</code></em>/grub/menu.lst
-rw-r--r--   1 root root 118672 Dec 28 14:53 01<em class="replaceable"><code>ethernet-address</code></em>
</pre>
</li><li>
<p>If the console is on a serial port, edit the <code class="filename">/tftpboot/menu.lst.01</code>
<em class="replaceable"><code>ethernet-address</code></em> file. Uncomment the
line that specifies the <code class="literal">tty</code> setting.</p>
<p>To change
the default <code class="filename">menu.lst</code> file that is created on the client,
edit the <code class="literal">echo</code> lines in the <code class="filename">/usr/sadm/lib/wbem/config_tftp</code> file.</p>
<p>For more information, see <span class="olink">
Performing a GRUB Based Boot From the Network</span>.</p>
</li><li><a name="gbwuj"></a>
<p>Verify that the diskless clients were installed. </p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smdiskless list -H <em class="replaceable"><code>host-name</code></em>:898 --</code></strong>
</pre>
</li><li><a name="fxjdz"></a>
<p>(Optional) Continue to use the <span><strong class="command">smdiskless
add</strong></span> command to add each diskless client.</p>
</li></ol></div><div class="example"><a name="fxjjt"></a><p class="title"><b>Example 7.3. 
Adding Diskless Client Support to an x86 Based System in the GRUB Boot
Environment</b></p>


<p>This example shows how to add a Solaris 10 x86 based diskless client, <code class="literal">mikey1</code>.</p>
<pre class="screen">rainy-01# <strong class="userinput"><code>/usr/sadm/bin/smdiskless add -H sdts-01-qfe0 -- -o sdts-01-qfe0
-n mikey1 -i 192.168.20.22 -e 00:E0:88:55:33:BC -x os=i386.i86pc.Solaris_10
-x root=/export/root/mikey1 -x swap=/export/swap/mikey1</code></strong>
Loading Tool: com.sun.admin.osservermgr.cli.OsServerMgrCli
from  sdts-01-qfe0
Login to rainy-01-qfe0 as user root was successful.
Download of com.sun.admin.osservermgr.cli.OsServerMgrCli from
rainy-01-qfe0 was successful.

# <strong class="userinput"><code>/usr/sadm/bin/smdiskless list -H mikey1:898 --</code></strong>
Loading Tool: com.sun.admin.osservermgr.cli.OsServerMgrCli from mikey1:898
Login to mikey1 as user root was successful.
Download of com.sun.admin.osservermgr.cli.OsServerMgrCli from mikey1:898 was 
successful.
Platform
--------------------------------------------------------------------------------
i386.i86pc.Solaris_10                                                           
sparc.sun4us.Solaris_10                                                         
sparc.sun4u.Solaris_10                                                          
i386.i86pc.Solaris_9                                                            </pre>
</div><div class="example"><a name="gcbpt"></a><p class="title"><b>Example 7.4. 
Adding the <code class="literal">BootSrvA</code> and <code class="literal">BootFile</code> DHCP
Options to the DHCP Server Configuration</b></p>


<p>This example shows how to add the <code class="literal">BootSrva</code> and <code class="literal">BootFile</code> DHCP options that are necessary for enabling a PXE boot.</p>
<pre class="screen">rainy-01# <strong class="userinput"><code>pntadm -A mikey1 -m  01<em class="replaceable"><code>client-macro</code></em>-e '-1'
-f 'MANUAL+PERMANENT' -i 01<em class="replaceable"><code>client-macro</code></em> <em class="replaceable"><code>client-ip</code></em>
</code></strong>

rainy-01# <strong class="userinput"><code>dhtadm  -A -m 01<em class="replaceable"><code>client-macro</code></em> -d \
":BootSrvA=<em class="replaceable"><code>svr-addr</code></em>:BootFile=01<em class="replaceable"><code>client-macro</code></em>:"</code></strong>
</pre>
<p>In the preceding example, <em class="replaceable"><code>svr-addr</code></em> is the
IP address of the server, and <em class="replaceable"><code>client-macro</code></em> is named
by the client's Ethernet type (01) and the mac address. This number is also
the name of the file that is used in the <code class="filename">/tftpboot</code> directory
on the installation server. The notation for the <em class="replaceable"><code>client-macro</code></em> consists
of uppercase letters. This notation should not contain any colons.</p>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2057173"></a></h3></div></div></div>

<div class="task"><a name="fxcpp"></a><p class="title"><b>How to Add a Diskless Client in the Solaris 10 OS</b></p><div class="tasksummary">
<p>Use this procedure to add a diskless client after you have added OS
services. Unless otherwise noted, this procedure includes general information
for both SPARC based and x86 based systems.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Become superuser or assume an equivalent role.</p>
<p>Roles contain authorizations and privileged commands. For more information about roles,
see <span class="olink">
<em class="citetitle">Configuring RBAC (Task Map)</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li><a name="fxchq"></a>
<p>Add the diskless client.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smdiskless add -- -i</code></strong> <em class="replaceable"><code>ip-address</code></em> <strong class="userinput"><code>-e</code></strong> <em class="replaceable"><code>ethernet-address</code></em> 
<strong class="userinput"><code>-n</code></strong> <em class="replaceable"><code>client-name</code></em> <strong class="userinput"><code>-x os=</code></strong>
<em class="replaceable"><code>instruction-set.machine-class.Solaris_version</code></em> 
<strong class="userinput"><code>-x root=/export/root/</code></strong>
<em class="replaceable"><code>client-name</code></em> <strong class="userinput"><code>-x swap=/export/swap/</code></strong>
<em class="replaceable"><code>client-name</code></em> 
<strong class="userinput"><code>-x swapsize=</code></strong>
<em class="replaceable"><code>size</code></em> <strong class="userinput"><code>-x tz=</code></strong>
<em class="replaceable"><code>time-zone</code></em> <strong class="userinput"><code>-x locale=</code></strong>
<em class="replaceable"><code>locale-name</code></em>
</pre>
<div class="variablelist"><dl><dt><span class="term">
<span><strong class="command">add</strong></span>
</span></dt><dd>
<p>Adds the specified diskless client.</p>
</dd><dt><span class="term">
<span><strong class="command">--</strong></span>
</span></dt><dd>
<p>Identifies that the subcommand arguments start after this
point.</p>
</dd><dt><span class="term">
<code class="option">
i</code> <em class="replaceable"><code>ip-address</code></em>
</span></dt><dd>
<p>Identifies the IP address of the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
e</code> <em class="replaceable"><code>ethernet-address</code></em>
</span></dt><dd>
<p>Identifies the Ethernet address of the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
n</code> <em class="replaceable"><code>client-name</code></em>
</span></dt><dd>
<p>Specifies the name of the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x os=</code>
<em class="replaceable"><code>instruction-set.machine-class.Solaris_version</code></em>
</span></dt><dd>
<p>Specifies the instruction architecture, machine class, OS,
and the Solaris version for the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x root=</code>
<span><strong class="command">root=/export/root/</strong></span>
<em class="replaceable"><code>client-name</code></em>
</span></dt><dd>
<p>Identifies the root (<code class="filename">/</code>) directory for
the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x swap=</code>
<span><strong class="command">root=/export/root/</strong></span>
<em class="replaceable"><code>client-name</code></em>
</span></dt><dd>
<p>Identifies the swap file for the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x swapsize=</code>
<em class="replaceable"><code>size</code></em>
</span></dt><dd>
<p>Specifies the size of the swap file in Mbytes. The default
is 24 Mbytes.</p>
</dd><dt><span class="term">
<code class="option">
x tz=</code>
<em class="replaceable"><code>time-zone</code></em>
</span></dt><dd>
<p>Specifies the time-zone for the diskless client.</p>
</dd><dt><span class="term">
<code class="option">
x locale=</code>
<em class="replaceable"><code>locale-name</code></em>
</span></dt><dd>
<p>Specifies the locale to install for the diskless client.</p>
</dd></dl></div>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">smdiskless</span>
(
1M
)
</span>
</span> man page.</p>
</li><li><a name="fxcib"></a>
<p>(Optional) Continue to use the <span><strong class="command">smdiskless
add</strong></span> command to add each diskless client.</p>
</li><li><a name="fxcth"></a>
<p>Verify that the diskless clients were installed. </p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smdiskless list -H <em class="replaceable"><code>host-name</code></em>:898 --</code></strong>
</pre>
</li></ol></div><div class="example"><a name="id2057731"></a><p class="title"><b>Example 7.5. 
Adding Diskless Client Support to a SPARC Based System</b></p>


<p>This example shows how to add Solaris 10 sun4u diskless client, <code class="literal">starlite</code>, from the server <code class="literal">bearclaus</code>.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smdiskless add -- -i 172.20.27.28 -e 8:0:20:a6:d4:5b 
-n starlite -x os=sparc.sun4u.Solaris_10 -x root=/export/root/starlite 
-x swap=/export/swap/starlite -x swapsize=128 -x tz=US/Mountain 
-x locale=en_US</code></strong>

# <strong class="userinput"><code>/usr/sadm/bin/smdiskless list -H starlite:898 --</code></strong>
Loading Tool: com.sun.admin.osservermgr.cli.OsServerMgrCli from line2-v480:898
Login to line2-v480 as user root was successful.
Download of com.sun.admin.osservermgr.cli.OsServerMgrCli from line2-v480:898 was 
successful.
Platform
--------------------------------------------------------------------------------
i386.i86pc.Solaris_10                                                           
sparc.sun4us.Solaris_10                                                         
sparc.sun4u.Solaris_10                                                          
i386.i86pc.Solaris_9                                                            
sparc.sun4m.Solaris_9                                                           
sparc.sun4u.Solaris_9                                                           
sparc.sun4us.Solaris_9</pre>
<p>Note that the <span><strong class="command">smdiskless list</strong></span> <code class="option">
H</code> command
output lists both SPARC based and x86 based systems.</p>
</div><div class="example"><a name="fxcic"></a><p class="title"><b>Example 7.6. 
Adding Diskless Client Support to an x86 Based System in the Solaris
10 OS</b></p>


<p>This example shows how to add a Solaris 10 x86 based diskless client, <code class="literal">mars</code>, from the server <code class="literal">bearclaus</code>.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smdiskless add -- -i 172.20.27.176 -e 00:07:E9:23:56:48
-n mars -x os=i386.i86pc.Solaris_10 -x root=/export/root/mars 
-x swap=/export/swap/mars -x swapsize=128 -x tz=US/Mountain 
-x locale=en_US</code></strong>
</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2057852"></a></h3></div></div></div>

<div class="task"><a name="fwazk"></a><p class="title"><b>
How to Boot a Diskless Client With GRUB</b></p><div class="tasksummary">
<p>If you have installed or upgraded your system to at least the Solaris
Express 6/05 OS, the procedure for booting
a diskless client has changed. Follow these steps to boot a diskless client
with GRUB.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>Starting with the Solaris
Express 3/06 release, the GRUB failsafe interaction has changed. When booting
the failsafe archive, you are no longer prompted by the system to automatically
update the boot archives. The system prompts you to update the boot archives
only if out-of-date boot archives are detected. For more information, see <span class="olink">
How to Boot the Failsafe Archive for Recovery Purposes</span>.</p>
</div>
</div><div class="taskprerequisites">

<p>To ensure that the system boots from the network, verify the following
prerequisites on the OS server:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Confirm that the name service used to add the diskless client
and the OS services matches the primary name in the server's <code class="filename">/etc/nsswitch.conf</code> file.</p>
</li><li>
<p>Verify that the DHCP and <span><strong class="command">tftp</strong></span> boot services
are running.</p>
<p>See <span class="olink">
PXE Network Boot</span> for more information.</p>
</li><li>
<p>Configure the system BIOS to boot the system from the network
by enabling the PXE ROM option.</p>
<p>Some PXE-capable network adapters
have a feature that enables PXE boot if you type a particular keystroke in
response to a brief boot-time prompt. See your hardware documentation for
information about how to set the boot priority in the BIOS.</p>
</li></ul></div>
</div><div class="procedure"><ol type="1"><li>
<p>Boot the diskless client by typing the correct keystroke combination.</p>
<p>The GRUB menu is displayed.</p>
<pre class="screen">GNU GRUB  version 0.95  (631K lower / 2095488K upper memory)

 +-------------------------------------------------------------------------+
 | Solaris 10.1 ... X86                                                    |
 | Solaris failsafe                                                        |
 |                                                                         |
 |                                                                         |
 |                                                                         |
 +-------------------------------------------------------------------------+</pre>
<p>The GRUB menu that is displayed on your system might vary from the previous
example, depending on the configuration of your network installation server.</p>
</li><li><a name="gcbdt"></a>
<p>
<a class="indexterm" name="gcbdn"></a>Use the arrow keys to select a boot entry, then press Enter.</p>
<p>If you do not make a selection, the default OS instance is automatically
booted after several seconds.</p>
<ul>
<li>
<p>If you need to set specific boot arguments, use the arrow keys
to select a boot entry, then type <span><strong class="command">e</strong></span> to edit the entry. </p>
<pre class="screen">    GNU GRUB  version 0.95  (631K lower / 2095488K upper memory)

 +-------------------------------------------------------------------------+
 | root (hd0,2,a)                                                          |
 | kernel /platform/i86pc/multiboot                                        |
 | module /platform/i86pc/boot_archive                                     |
 |                                                                         |
 |                                                                         |
 |                                                                         |
 +-------------------------------------------------------------------------+
      Use the ^ and v keys to select which entry is highlighted.
      Press 'b' to boot, 'e' to edit the selected command in the
      boot sequence, 'c' for a command-line, 'o' to open a new line
      after ('O' for before) the selected line, 'd' to remove the
      selected line, or escape to go back to the main menu.


grub edit&gt; kernel /platform/i86pc/multiboot</pre>
<p>The boot command that you want to edit is displayed in the GRUB edit
screen.</p>
</li>
<li>
<p>Edit the <span><strong class="command">kernel</strong></span> command by typing the boot
arguments or options that you want to use.</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>To manually redirect the console to <code class="literal">ttyb</code>,
type:</p>
<pre class="screen">grub edit&gt; kernel /platform/i86pc/multiboot <strong class="userinput"><code>-B console=ttyb</code></strong>
</pre>
</li><li>
<p>To use the <code class="literal">input-device/output-device</code> property,
type:</p>
<pre class="screen">grub edit&gt; kernel /platform/i86pc/multiboot <strong class="userinput"><code>-B input-device=ttyb,output-device=ttyb</code></strong>
</pre>
</li><li>
<p>To override the serial line speed, type:</p>
<pre class="screen">grub edit&gt; kernel /platform/i86pc/multiboot <strong class="userinput"><code>-B ttyb-mode="115200,8,n,1,-"</code></strong>
</pre>
</li><li>
<p>You can also edit the <code class="filename">/tftpboot/menu.lst.01</code>
<em class="replaceable"><code>client-macro</code></em> file, by using one of the commented out entries
in the <code class="filename">menu.lst</code> file. For more information, see <span class="olink">
GRUB Menu</span>.</p>
</li></ul></div>
<p>For more information about boot options and arguments, see <span class="olink">
Modifying the Solaris Boot Behavior by Editing the GRUB Menu</span>.</p>
</li>
<li>
<p>To save the edits and return to the GRUB menu, press Enter.</p>
<p>The GRUB menu is displayed, showing the edits you made to the boot command.</p>
</li>
<li>
<p>Type <span><strong class="command">b</strong></span> or press Enter to boot the system from
the network.</p>
</li>
</ul>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2058292"></a></h3></div></div></div>

<div class="task"><a name="clientsetup-5"></a><p class="title"><b>
How to Boot a Diskless Client
in the Solaris 10 OS</b></p><div class="taskprerequisites">

<p>Verify the following prerequisites on the OS server:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Confirm that the name service used to add the diskless client
and the OS services matches the primary name in the server's <code class="filename">/etc/nsswitch.conf</code> file.</p>
<p>Otherwise, the diskless client won't boot.</p>
</li><li>
<p>Confirm that the <span><strong class="command">rpc.bootparamd</strong></span> daemon
is running. If it is not running, start it.</p>
</li></ul></div>
</div><div class="procedure"><ul><li><a name="clientsetup-step-1"></a>
<p>
<a class="indexterm" name="indexterm-95"></a>
<a class="indexterm" name="indexterm-96"></a>Boot the diskless client.</p>
<pre class="screen">ok <strong class="userinput"><code>boot net</code></strong>
</pre>
</li></ul></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2058417"></a></h3></div></div></div>

<div class="task"><a name="clientsetup-11"></a><p class="title"><b>How to Remove Diskless Client Support</b></p><div class="procedure"><ol type="1"><li>
<p>Become superuser or assume an equivalent role.</p>
<p>Roles contain authorizations and privileged commands. For more information about roles,
see <span class="olink">
<em class="citetitle">Configuring RBAC (Task Map)</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li><a name="clientsetup-step-18"></a>
<p>Remove the diskless client support.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smdiskless delete -- -o <em class="replaceable"><code>host-name</code></em>:898 -n</code></strong> <em class="replaceable"><code>client-name</code></em>
</pre>
</li><li><a name="clientsetup-step-20"></a>
<p>Verify that the diskless client support
has been removed. </p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smosservice list -H <em class="replaceable"><code>host-name</code></em>:898 --</code></strong>
</pre>
</li></ol></div><div class="example"><a name="id2058561"></a><p class="title"><b>Example 7.7. Removing Diskless Client Support</b></p>


<p>This example shows how to remove the diskless client <code class="literal">holoship</code> from
the OS server <code class="literal">starlite</code>.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smdiskless delete -- -o starlite -n holoship</code></strong>
Authenticating as user: root

Type /? for help, pressing enter accepts the default denoted by [ ]
Please enter a string value for: password :: 
Starting SMC server version 2.0.0.
endpoint created: :898
SMC server is ready.

# <strong class="userinput"><code>/usr/sadm/bin/smosservice list -H host-name:898</code></strong>
Loading Tool: com.sun.admin.osservermgr.cli.OsServerMgrCli from starlite
Login to starlite as user root was successful.
Download of com.sun.admin.osservermgr.cli.OsServerMgrCli from starlite
was successful.</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2058604"></a></h3></div></div></div>

<div class="task"><a name="clientsetup-10"></a><p class="title"><b>How to Remove OS Services for Diskless Clients</b></p><div class="procedure"><ol type="1"><li>
<p>Become superuser or assume an equivalent role.</p>
<p>Roles contain authorizations and privileged commands. For more information about roles,
see <span class="olink">
<em class="citetitle">Configuring RBAC (Task Map)</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li><a name="clientsetup-step-3"></a>
<p>
<a class="indexterm" name="indexterm-97"></a>
<a class="indexterm" name="indexterm-98"></a>Remove the OS services for the diskless clients.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smosservice delete -H $HOST:$PORT -u root -p $PASSWD -- 
-x <em class="replaceable"><code>instruction-set</code></em>.all.<em class="replaceable"><code>Solaris_version</code></em>
</code></strong>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>Only the machine-class, <code class="literal">all</code>, is supported.</p>
</div>
</li><li><a name="clientsetup-step-5"></a>
<p>Verify that the OS services have been
removed.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smosservice list -H <em class="replaceable"><code>host-name</code></em>:898 --</code></strong>
</pre>
</li></ol></div><div class="example"><a name="id2058760"></a><p class="title"><b>Example 7.8. Removing OS Services for Diskless Clients</b></p>


<p>
<a class="indexterm" name="indexterm-99"></a>
<a class="indexterm" name="indexterm-100"></a>The following example shows how to removing the diskless client
OS services (<code class="literal">sparc.all.Solaris_10</code>) from the server <code class="literal">starlite</code>.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smosservice delete -H starlite:898 -u root
-p <em class="replaceable"><code>xxxxxx</code></em> -- -x sparc.all.solaris_10</code></strong>
Authenticating as user: root
Type /? for help, pressing enter accepts the default denoted by [ ]
Please enter a string value for: password :: 

# <strong class="userinput"><code>/usr/sadm/bin/smosservice list -H <em class="replaceable"><code>host-name</code></em>:898 --</code></strong>
Loading Tool: com.sun.admin.osservermgr.cli.OsServerMgrCli from starlite:898
Login to starlite as user root was successful.
Download of com.sun.admin.osservermgr.cli.OsServerMgrCli from starlite:898
was successful</pre>
</div></div>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch07.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch07.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch07s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 7. Managing Diskless Clients (Tasks) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Patching Diskless Client OS Services</td></tr></table></div></body></html>
