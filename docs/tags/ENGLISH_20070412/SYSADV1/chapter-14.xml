<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML//EN" "docbook.dtd"[
	<!ENTITY % xinclude SYSTEM "xinclude.mod">
	%xinclude;
]>

<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="hbrunlevels-25516">



<title>Managing Services (Overview)</title>
<toc>
<para>This chapter provides an overview of the Service Management Facility
(SMF). In addition, information that is related to run levels is provided.<indexterm xml:id="indexterm-227">
<primary>SMF</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="indexterm-228">
<primary>service management facility</primary>
<see>
SMF</see>
</indexterm>
<indexterm xml:id="indexterm-229">
<primary>new features</primary>
<secondary>SMF</secondary>
</indexterm>
<indexterm xml:id="indexterm-230">
<primary>service management facility</primary>
<see>
SMF</see>
</indexterm>
</para>
<para>This is a list of the overview information in this chapter.</para>
<itemizedlist>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-14.xml" targetptr="dzhgy">Introduction to SMF</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-14.xml" targetptr="dzhid">SMF Concepts</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-14.xml" targetptr="dzhjy">SMF Administrative and Programming Interfaces</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-14.xml" targetptr="dzhna">SMF Components</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-14.xml" targetptr="dzhkf">SMF Compatibility</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-14.xml" targetptr="hbrunlevels-13026">Run Levels</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-14.xml" targetptr="hbrunlevels-12863">
<filename>/etc/inittab</filename> File</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-14.xml" targetptr="hbrunlevels-11168">Run Control Scripts</olink>
</para>
</listitem>
</itemizedlist>
<para>For information on the procedures associated with SMF, see <olink remap="external" targetdoc="chapter-15.xml" targetptr="eqbrp">Managing SMF Services (Task Map)</olink>. For information
on the procedures associated with run levels, see <olink remap="external" targetdoc="chapter-15.xml" targetptr="etesg">Using Run Control Scripts (Task Map)</olink>.</para>
</toc>
<sect1 xml:id="dzhgy">
<title>Introduction to SMF</title>
<para>SMF provides an infrastructure that augments the traditional UNIX start-up
scripts, <command>init</command> run levels, and configuration files. SMF
provides the following functions:</para>
<itemizedlist>
<listitem>
<para>Automatically restarts failed services in dependency order,
whether they failed as the result of administrator error, software bug, or
 were affected by an uncorrectable hardware error. The dependency order is
defined by dependency statements.</para>
</listitem>
<listitem>
<para>Makes services objects that can be viewed, with the new <command>svcs</command> command, and managed, with <command>svcadm</command> and <command>svccfg</command> commands. You can also view the relationships between services
and processes using <command>svcs</command> <option>
p</option>, for both SMF
services and legacy <filename>init.d</filename> scripts.</para>
</listitem>
<listitem>
<para>Makes it easy to backup, restore, and undo changes to services
by taking automatic snapshots of service configurations.</para>
</listitem>
<listitem>
<para>Makes it easy to debug and ask questions about services by
providing an explanation of why a service isn't running by using <command>svcs</command> <option>
x</option>. Also, this process is eased by individual and persistent log files
for each service.</para>
</listitem>
<listitem>
<para>Allows for services to be enabled and disabled using <command>svcadm</command>. These changes can persist through upgrades and reboots. If the <option>
t</option> option is used, the changes are temporary.</para>
</listitem>
<listitem>
<para>Enhances the ability of administrators to securely delegate
tasks to non-root users, including the ability to modify properties and enable,
disable, or restart services on the system.</para>
</listitem>
<listitem>
<para>Boots faster on large systems by starting services in parallel
according to the dependencies of the services. The opposite process occurs
during shutdown.</para>
</listitem>
<listitem>
<para>Allows you to customize the boot console output to either
be as quiet as possible, which is the default, or to be verbose by using <command>boot</command> <option>
m</option> <option role="nodash">verbose</option>.</para>
</listitem>
<listitem>
<para>Preserves compatibility with existing administrative practices
wherever possible.  For example, most customer and ISV-supplied rc scripts
still work as usual.</para>
</listitem>
</itemizedlist>
<para>
<indexterm xml:id="indexterm-231">
<primary>dependency statements (SMF)</primary>
<secondary>description</secondary>
</indexterm>
<emphasis>Dependency statements</emphasis> define the relationships
between services. These relationships can be used to provide precise fault
containment by restarting only those services that are directly affected by
a fault, rather than restarting all of the services. Another advantage of
dependency statements is that the statements allow for scalable and reproducible
initialization processes. In addition, by defining all of the dependencies,
you can take advantage of modern, highly parallel machines, because all independent
services can be started in parallel.</para>
<para>
<indexterm xml:id="indexterm-232">
<primary>restarters (SMF)</primary>
<secondary>description</secondary>
</indexterm>SMF  defines a set of actions that can be invoked on a service
by an administrator. These actions include enable, disable,  refresh, restart,
and maintain. Each service is managed by a service restarter which carries
out the administrative actions. In general, the restarters carry out actions
by executing methods for a service. Methods for each service are defined in
the service configuration repository. These methods allow the restarter to
move the service from one state to another state.</para>
<para>
<indexterm xml:id="indexterm-233">
<primary>repository (SMF)</primary>
<secondary>description</secondary>
</indexterm>The service configuration repository provides a per-service snapshot
at the time that each service is successfully started so that fallback is
possible. In addition, the repository provides a consistent and persistent
way to enable or disable a service, as well as a consistent view of service
state. This capability helps you debug service configuration problems.</para>
</sect1>
<sect1 xml:id="feosq">
<title>Changes in Behavior When Using SMF</title>
<para>Most of the features that are provided by SMF happen behind the scenes,
so users are not aware of them. Other features are accessed by new commands.
Here is a list of the behavior changes that are most visible.</para>
<itemizedlist>
<listitem>
<para>The boot process creates many fewer messages now. Services
do not display a message by default when they are started. All of the information
that was provided by the boot messages can now be found in a log file for
each service that is in <filename>/var/svc/log</filename>. You can use the <command>svcs</command> command to help diagnose boot problems. In addition, you can
use the <option>
v</option> option to the <command>boot</command> command,
which generates a message when each service is started during the boot process.</para>
</listitem>
<listitem>
<para>Since services are automatically restarted if possible, it
may seem that a process refuses to die. If the service is defective, the service
will be placed in maintenance mode, but normally a service is restarted if
the process for the service is killed. The <command>svcadm</command> command
should be used to disable any SMF service that should not be running.</para>
</listitem>
<listitem>
<para>Many of the scripts in <filename>/etc/init.d</filename> and
/etc/rc*.d have been removed. The scripts are no longer needed to enable or
disable a service. Entries from <filename>/etc/inittab</filename> have also
been removed, so that the services can be administered using SMF. Scripts
and <filename>inittab</filename> entries that are provided by an ISV or are
locally developed will continue to run. The services may not start at exactly
the same point in the boot process, but they are not started before the SMF
services, so that any service dependencies should be OK.</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 xml:id="dzhid">
<title>SMF Concepts</title>
<para>This section presents terms and their definitions within the SMF framework.
These terms are used throughout the documentation. To grasp SMF concepts,
an understanding of these terms is essential.</para>
<sect2 xml:id="dzhnj">
<title>SMF Service</title>
<para>
<indexterm xml:id="indexterm-234">
<primary>service (SMF)</primary>
<secondary>description</secondary>
</indexterm>The fundamental unit of administration in the SMF framework is
the <emphasis>service instance</emphasis>. Each SMF service has the potential
to have multiple versions of it configured. As well, multiple instances of
the same version can run on a single Solaris system. An <emphasis>instance</emphasis> is
a specific configuration of a service. A web server is a service. A specific
web server daemon that is configured to listen on port 80 is an instance.
Each instance of the web server service could have different configuration
requirements. The service has system-wide configuration requirements, but
each instance can override specific requirements, as needed. Multiple instances
of a single service are managed as child objects of the service object.</para>
<para>Services are not just the representation for standard long-running system
services such as <command>in.dhcpd</command> or <command>nfsd</command>. Services
also represent varied system entities that include ISV applications such as
Oracle software. In addition, a service can include less traditional entities
such as the following:</para>
<itemizedlist>
<listitem>
<para>A physical network device</para>
</listitem>
<listitem>
<para>A configured IP address</para>
</listitem>
<listitem>
<para>Kernel configuration information</para>
</listitem>
<listitem>
<para>Milestones that correspond to system init state, such as the
multiuser run level</para>
</listitem>
</itemizedlist>
<para>Generically, a service is an entity that provides a list of capabilities
to applications and other services, local and remote. A service is dependent
on an implicitly declared list of local services.</para>
<para>A <emphasis>milestone</emphasis> is a special type of service. Milestone
services represent high-level attributes of the system. For example, the services
which constitute run levels S, 2, and 3 are each represented by milestone
services.</para>
</sect2>
<sect2 xml:id="eqbuc">
<title>Service Identifiers</title>
<indexterm xml:id="indexterm-235">
<primary>FMRI</primary>
<secondary>description</secondary>
</indexterm>
<indexterm xml:id="indexterm-236">
<primary>fault management resource identifier</primary>
<see>
FMRI</see>
</indexterm>
<para>Each service instance is named with a Fault Management Resource Identifier
or FMRI. The FMRI includes the service name and the instance name. For example,
the FMRI for the <command>rlogin</command> service is <literal>svc:/network/login:rlogin</literal>, where <literal>network/login</literal> identifies the service
and <literal>rlogin</literal> identifies the service instance.</para>
<para>Equivalent formats for an FMRI are as follows:</para>
<itemizedlist>
<listitem>
<para>
<literal>svc://localhost/system/system-log:default</literal>
</para>
</listitem>
<listitem>
<para>
<literal>svc:/system/system-log:default</literal>
</para>
</listitem>
<listitem>
<para>
<literal>system/system-log:default</literal>
</para>
</listitem>
</itemizedlist>
<para>In addition, some SMF commands can use the following FMRI format: <literal>svc:/system/system-log</literal>. Some commands infer what instance to use,
when there is no ambiguity. See the SMF command man pages, such as <olink remap="external" targetdoc="819-2240" targetptr="svcadm-1m">
<citerefentry>
<refentrytitle>svcadm</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> or <olink remap="external" targetdoc="819-2239" targetptr="svcs-1">
<citerefentry>
<refentrytitle>svcs</refentrytitle>
<manvolnum>
1
</manvolnum>
</citerefentry>
</olink>, for instructions about which FMRI formats are appropriate.</para>
<para>The service names usually include a general functional category. The
categories include the following:</para>
<itemizedlist>
<listitem>
<para>
<literal>application</literal>
</para>
</listitem>
<listitem>
<para>
<literal>device</literal>
</para>
</listitem>
<listitem>
<para>
<literal>milestone</literal>
</para>
</listitem>
<listitem>
<para>
<literal>network</literal>
</para>
</listitem>
<listitem>
<para>
<literal>platform</literal>
</para>
</listitem>
<listitem>
<para>
<literal>site</literal>
</para>
</listitem>
<listitem>
<para>
<literal>system</literal>
</para>
</listitem>
</itemizedlist>
<para>Legacy <filename>init.d</filename> scripts are also represented with
FMRIs that start with <literal>lrc</literal> instead of <literal>svc</literal>,
for example: <literal>lrc:/etc/rcS_d/S35cacheos_sh</literal>. The legacy services
can be monitored using SMF. However, you cannot administer these services.</para>
<para>When booting a system for the first time with SMF, services listed in <filename>/etc/inetd.conf</filename> are automatically converted into SMF services.
The FMRIs for these services are slightly different. The syntax for a converted <command>inetd</command> services is:</para>
<screen>network/<replaceable>&lt;service-name&gt;
</replaceable>/<replaceable>&lt;protocol&gt;
</replaceable>
</screen>
<para>In addition, the syntax for a converted service that uses the RPC protocol
is:</para>
<screen>
<literal>network/rpc-</literal>
<replaceable>&lt;service-name&gt;
</replaceable>
<literal>/rpc_</literal>
<replaceable>&lt;protocol&gt;
</replaceable>
</screen>
<para>Where <replaceable>&lt;service-name&gt;
</replaceable> is the name defined
in <filename>/etc/inetd.conf</filename> and <replaceable>&lt;protocol&gt;
</replaceable> is
the protocol for the service. For instance, the FMRI for the <command>rpc.cmsd</command> service
is <literal>network/rpc-100068_2-5/rpc_udp</literal>.</para>
</sect2>
<sect2 xml:id="eywvn">
<title>Service States</title>
<indexterm xml:id="indexterm-237">
<primary>service states</primary>
<secondary>description</secondary>
</indexterm>
<para>The <command>svcs</command> command displays the state, start time,
and FMRI of service instances. The state of each service is one of the following:</para>
<itemizedlist>
<listitem>
<para>
<literal>degraded</literal> – The service instance is
enabled, but is running at a limited capacity.</para>
</listitem>
<listitem>
<para>
<literal>disabled</literal> – The service instance is
not enabled and is not running.</para>
</listitem>
<listitem>
<para>
<literal>legacy_run</literal> – The legacy service is
not managed by SMF, but the service can be observed. This state is only used
by legacy services.</para>
</listitem>
<listitem>
<para>
<literal>maintenance</literal> – The service instance
has encountered an error that must be resolved by the administrator.</para>
</listitem>
<listitem>
<para>
<literal>offline</literal> – The service instance is
enabled, but the service is not yet running or available to run.</para>
</listitem>
<listitem>
<para>
<literal>online</literal> – The service instance is
enabled and has successfully started.</para>
</listitem>
<listitem>
<para>
<literal>uninitialized</literal> – This state is the
initial state for all services before their configuration has been read.</para>
</listitem>
</itemizedlist>
</sect2>
<sect2 xml:id="esini">
<title>SMF Manifests</title>
<indexterm xml:id="indexterm-238">
<primary>manifests (SMF)</primary>
<secondary>description</secondary>
</indexterm>
<para>An SMF <emphasis>manifest</emphasis> is an XML file that contains a
complete set of properties that are associated with a service or a service
instance. The files are stored in <filename>/var/svc/manifest</filename>.
Manifests should not be used to modify the properties of a service. The service
configuration repository is the authoritative source of configuration information.
To incorporate information from the manifest into the repository, you must
either run <command>svccfg import</command> or allow the service to import
the information during a system boot.</para>
<para>See the <olink remap="external" targetdoc="819-2251" targetptr="service-bundle-4">
<citerefentry>
<refentrytitle>service_bundle</refentrytitle>
<manvolnum>
4
</manvolnum>
</citerefentry>
</olink> man page for a complete description of the contents
of the SMF manifests.</para>
</sect2>
<sect2 xml:id="fgoth">
<title>SMF Profiles</title>
<indexterm xml:id="indexterm-239">
<primary>profiles (SMF)</primary>
<secondary>description</secondary>
</indexterm>
<para>An SMF <emphasis>profile</emphasis> is an XML file that lists a set of service instances and whether each should be enabled or disabled. Some profiles which are delivered with the Solaris release include:</para>
<itemizedlist>
<listitem>
<para>
<filename>/var/svc/profile/generic_open.xml</filename> – This profile enables the standard services that have
been started by default
in earlier Solaris releases.</para>
</listitem>
<listitem>
<para>
<filename>/var/svc/profile/generic_limited_net.xml</filename> – This profile disables many of the  internet
services that have be
started by default in earlier Solaris releases. The <literal>network/ssh</literal> service is enabled to provide network connectivity.</para>
</listitem>
<listitem>
<para>
<literal>/var/svc/profile/ns_*.xml</literal> – These profiles enable services associated with the name
service that is configured to run on the system.</para>
</listitem>
<listitem>
<para>
<literal>/var/svc/profile/platform_*.xml</literal> – These profiles
enable services associated with particular hardware platforms.</para>
</listitem>
</itemizedlist>
<para>During the first
boot after a new installation or an upgrade to the Solaris 10 release or any
of the subsequent Solaris Express releases, some Solaris profiles are automatically
applied. To be specific, the <filename>/var/svc/profile/generic.xml</filename> profile
is applied. This file is usually symbolically linked to <filename>generic_open.xml</filename> or <filename>generic_limited_net.xml</filename>. Also, if a profile
called <filename>site.xml</filename> is in <literal>/var/svc/profile</literal> during
the first boot or is added between boots, the contents of this profile are
applied. By using the <filename>site.xml</filename> profile, the initial set
of enabled services may be customized by the administrator.</para>
<para>For more information about using profiles, see <olink remap="external" targetdoc="chapter-15.xml" targetptr="fgour">How to Apply an SMF Profile</olink>.</para>
</sect2>
<sect2 xml:id="dzhsi">
<title>Service Configuration Repository</title>
<para>
<indexterm xml:id="indexterm-240">
<primary>repository (SMF)</primary>
<secondary>description</secondary>
</indexterm>
<indexterm xml:id="indexterm-241">
<primary>service configuration repository</primary>
<see>
repository</see>
</indexterm>
<indexterm xml:id="indexterm-242">
<primary>configuration repository (SMF)</primary>
<see>
repository</see>
</indexterm>The <emphasis>service configuration repository</emphasis> stores
persistent configuration information as well as SMF runtime data for services.
The repository is distributed among local memory and local files. SMF is designed
so that eventually, service data can be represented in the network directory
service. The network directory service is not yet available. The data in the
service configuration repository allows for the sharing of configuration information
and administrative simplicity across many Solaris instances. The service configuration
repository can only be manipulated or queried using SMF interfaces. For more
information about manipulating and accessing the repository, see the <olink remap="external" targetdoc="819-2240" targetptr="svccfg-1m">
<citerefentry>
<refentrytitle>svccfg</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> and <olink remap="external" targetdoc="819-2239" targetptr="svcprop-1">
<citerefentry>
<refentrytitle>svcprop</refentrytitle>
<manvolnum>
1
</manvolnum>
</citerefentry>
</olink> man pages. The service configuration
repository daemon is covered in the <olink remap="external" targetdoc="819-2240" targetptr="svc.configd-1m">
<citerefentry>
<refentrytitle>svc.configd</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> man page. The service configuration
library is documented in the <olink remap="external" targetdoc="819-2242" targetptr="libscf-3lib">
<citerefentry>
<refentrytitle>libscf</refentrytitle>
<manvolnum>
3LIB
</manvolnum>
</citerefentry>
</olink> man
page.</para>
</sect2>
<sect2 xml:id="frjjz">
<title>SMF Repository Backups</title>
<para>SMF automatically takes the following backups of the repository:</para>
<itemizedlist>
<listitem>
<para>The boot backup is taken immediately before the first change
to the repository is made during each system startup.</para>
</listitem>
<listitem>
<para>The <literal>manifest_import</literal> backup occurs after <filename>svc:/system/manifest-import:default</filename> completes, if it imported any
new manifests or ran any upgrade scripts.</para>
</listitem>
</itemizedlist>
<para>Four backups of each type are maintained by the system. The system deletes
the oldest backup, when necessary. The backups are stored as <filename>/etc/svc/repository</filename>-<replaceable>type</replaceable>-<replaceable>YYYYMMDD_HHMMSWS</replaceable>,
where <replaceable>YYYYMMDD</replaceable> (year, month, day) and <replaceable>HHMMSS</replaceable> (hour, minute, second), are the date and time when the backup
was taken. Note that the hour format is based on a 24–hour clock.</para>
<para>You can restore the repository from these backups, if an error occurs.
To do so, use the <command>/lib/svc/bin/restore_repository</command> command.
For more information, see <olink remap="external" targetdoc="chapter-15.xml" targetptr="ecduh">How to Repair a Corrupt Repository</olink>.</para>
</sect2>
<sect2 xml:id="eqbts">
<title>SMF Snapshots</title>
<indexterm xml:id="indexterm-243">
<primary>snapshots (SMF)</primary>
<secondary>description</secondary>
</indexterm>
<para>The data in the service configuration repository includes <emphasis>snapshots</emphasis>, as well as a configuration that can be edited. Data about each
service instance is stored in the snapshots. The standard snapshots are as
follows:</para>
<itemizedlist>
<listitem>
<para>
<literal>initial</literal> – Taken on the first import
of the manifest</para>
</listitem>
<listitem>
<para>
<literal>running</literal> – Used when the service methods
are executed</para>
</listitem>
<listitem>
<para>
<literal>start</literal> – Taken at the last successful
start</para>
</listitem>
</itemizedlist>
<para>The SMF service always executes with the <literal>running</literal> snapshot.
This snapshot is automatically created if it does not exist.</para>
<para>The <command>svcadm</command> <option role="nodash">refresh</option> command,
sometimes followed by the <command>svcadm</command> <option role="nodash">restart</option> command, makes a snapshot active. The <command>svccfg</command> command
is used to view or revert to instance configurations in a previous snapshot. </para>
</sect2>
</sect1>
<sect1 xml:id="dzhjy">
<title>SMF Administrative and Programming Interfaces</title>
<para>This section introduces the interfaces that are available when you use
SMF.</para>
<sect2 xml:id="dzhqq">
<title>SMF Command-Line Administrative Utilities</title>
<indexterm xml:id="indexterm-244">
<primary>commands (SMF)</primary>
<secondary>list of</secondary>
</indexterm>
<indexterm xml:id="indexterm-245">
<primary>SMF</primary>
<secondary>commands</secondary>
</indexterm>
<para>SMF provides a set of command-line utilities that interact with SMF
and accomplish standard administrative tasks. The following utilities can
be used to administer SMF.</para>
<table frame="topbot" xml:id="dzhal">

<title>Service Management Facility Utilities</title>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colname="column1" colnum="1" colwidth="3*"/>
<colspec colname="column2" colnum="2" colwidth="7*"/>
<thead>
<row rowsep="1">
<entry align="left" colname="column1" valign="bottom">
<para>Command Name</para>
</entry>
<entry align="left" colname="column2" valign="bottom">
<para>Function</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" colname="column1" valign="top">
<para>
<command>inetadm</command>
</para>
</entry>
<entry align="left" colname="column2" valign="top">
<para>Provides the ability to observe or configure services controlled by <command>inetd</command>
<indexterm xml:id="indexterm-246">
<primary>
<command>inetadm</command> command</primary>
<secondary>description</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry align="left" colname="column1" valign="top">
<para>
<command>svcadm</command>
</para>
</entry>
<entry align="left" colname="column2" valign="top">
<para>Provides the ability to perform common service management tasks, such
as enabling, disabling, or restarting service instances<indexterm xml:id="indexterm-247">
<primary>
<command>svcadm</command> command</primary>
<secondary>description</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry align="left" colname="column1" valign="top">
<para>
<command>svccfg</command>
</para>
</entry>
<entry align="left" colname="column2" valign="top">
<para>Provides the ability to display and manipulate the contents of the service
configuration repository<indexterm xml:id="indexterm-248">
<primary>
<command>svccfg</command> command</primary>
<secondary>description</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry align="left" colname="column1" valign="top">
<para>
<command>svcprop</command>
</para>
</entry>
<entry align="left" colname="column2" valign="top">
<para>Retrieves property values from the service configuration repository
with a output format appropriate for use in shell scripts<indexterm xml:id="indexterm-249">
<primary>
<command>svcprop</command> command</primary>
<secondary>description</secondary>
</indexterm>
</para>
</entry>
</row>
<row>
<entry align="left" colname="column1" valign="top">
<para>
<command>svcs</command>
</para>
</entry>
<entry align="left" colname="column2" valign="top">
<para>Gives detailed views of the service state of all service instances in
the service configuration repository<indexterm xml:id="indexterm-250">
<primary>
<command>svcs</command> command</primary>
<secondary>description</secondary>
</indexterm>
</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect2>
<sect2 xml:id="dzgzv">
<title>Service Management Configuration Library Interfaces</title>
<indexterm xml:id="indexterm-251">
<primary>SMF</primary>
<secondary>library interfaces</secondary>
</indexterm>
<indexterm xml:id="indexterm-252">
<primary>library interfaces</primary>
<secondary>SMF</secondary>
</indexterm>
<para>SMF provides a set of programming interfaces that are used to interact
with the service configuration repository through the <command>svc.configd</command> daemon.
This daemon is the arbiter of all requests to the local and remote repository
datastores. A set of fundamental interfaces is defined as the lowest level
of interaction possible with services in the service configuration repository.
The interfaces provide access to all service configuration repository features
such as transactions and snapshots.</para>
<para>Many developers only need a set of common tasks to interact with SMF.
These tasks are implemented as convenience functions on top of the fundamental
services to ease the implementation burden.</para>
</sect2>
</sect1>
<sect1 xml:id="dzhna">
<title>SMF Components</title>
<para>SMF includes a master restarter daemon and delegated restarters.</para>
<sect2 xml:id="dzhgs">
<title>SMF Master Restarter Daemon</title>
<indexterm xml:id="indexterm-253">
<primary>
<command>svc.startd</command>daemon</primary>
<secondary>description</secondary>
</indexterm>
<para>The <command>svc.startd</command> daemon is the master process starter
and restarter for the Solaris OS. The daemon is responsible for managing service
dependencies for the entire system. The daemon takes on the previous responsibility
that <command>init</command> held of starting the appropriate <filename>/etc/rc*.d</filename> scripts at the appropriate run levels. First, <command>svc.startd</command> retrieves
the information in the service configuration repository. Next, the daemon
starts services when their dependencies are met. The daemon is also responsible
for restarting services that have failed and for shutting down services whose
dependencies are no longer satisfied. The daemon keeps track of service state
through an operating system view of availability through events such as process
death. </para>
</sect2>
<sect2 xml:id="dzhsa">
<title>SMF Delegated Restarters</title>
<indexterm xml:id="indexterm-254">
<primary>SMF</primary>
<secondary>delegated restarters</secondary>
</indexterm>
<indexterm xml:id="indexterm-255">
<primary>delegated restarters (SMF)</primary>
</indexterm>
<indexterm xml:id="indexterm-256">
<primary>restarters (SMF)</primary>
</indexterm>
<para>Some services have a set of common behaviors on startup. To provide
commonality among these services, a delegated restarter might take responsibility
for these services. In addition, a delegated restarter can be used to provide
more complex or application-specific restarting behavior. The delegated restarter
can support a different set of methods, but exports the same service states
as the master restarter. The restarter's name is stored with the service.
A current example of a delegated restarter is <command>inetd</command>, which
can start Internet services on demand, rather than having the services always
running. </para>
</sect2>
</sect1>
<sect1 xml:id="fddwo">
<title>SMF and Booting</title>
<para>SMF provides new methods for booting a system. For instance:</para>
<itemizedlist>
<listitem>
<para>There is a additional system state which is associated with
the <literal>all</literal> milestone. This milestone is different than the
multiuser <command>init</command> state because SMF only knows about the services
that are defined. If you have added services, such as third party products,
they may not be started automatically unless you use the following command:</para>
<screen>ok <userinput>boot -m milestone=all</userinput>
</screen>
</listitem>
<listitem>
<para>If you boot a system using one of the milestones, it is important
to use the <option>
s</option> option as well. If you do not include the <option>
s</option>, then the system will stay in the milestone state that you booted
the system in. The system will not go into multiuser state automatically by
typing Control-D. You can get into the multiuser state by using the following
command:</para>
<screen># <userinput>svcadm milestone all</userinput>
</screen>
</listitem>
<listitem>
<para>When booting a system, you can choose to use the verbose option
to see more messages. By default, the system will not display these messages.
To boot in the verbose mode, use the following command:</para>
<screen>ok <userinput>boot -mverbose</userinput>
</screen>
</listitem>
</itemizedlist>
</sect1>
<sect1 xml:id="dzhkf">
<title>SMF Compatibility</title>
<para>While many standard Solaris services are now managed by SMF, the scripts
placed in <filename>/etc/rc*.d</filename> continue to be executed on run-level
transitions. Most of the <filename>/etc/rc*.d</filename> scripts that were
included in previous Solaris releases have been removed as part of SMF. The
ability to continue to run the remaining scripts allows for third-party applications
to be added without having to convert the services to use SMF.</para>
<para>In addition, <filename>/etc/inittab</filename> and <filename>/etc/inetd.conf</filename> must be available for packages to amend with postinstall scripts.
These are called legacy-run services. The <command>inetconv</command> command
is run to add these legacy-run services to the service configuration repository.
The status of these services can be viewed, but no other changes are supported
through SMF. Applications that use this feature will not benefit from the
precise fault containment provided by SMF.</para>
<para>Applications converted to utilize SMF should no longer make modifications
to the <filename>/etc/inittab</filename> and <filename>/etc/inetd.conf</filename> files.
The converted applications will not use the <filename>/etc/rc*.d</filename> scripts.
Also, the new version of <command>inetd</command> does not look for entries
in <command>/etc/inetd.conf</command>.</para>
</sect1>
<sect1 xml:id="hbrunlevels-13026">
<title>Run Levels</title>
<para>
<indexterm xml:id="hbrunlevels-ix934">
<primary>run level</primary>
<secondary>definition</secondary>
</indexterm>
<indexterm xml:id="hbrunlevels-ix935">
<primary>run level</primary>
<secondary>default run level</secondary>
</indexterm>
<indexterm xml:id="hbrunlevels-ix936">
<primary>init states</primary>
<see>
run levels</see>
</indexterm>A system's <emphasis>run level</emphasis> (also
known as an <emphasis>init state</emphasis>) defines what services and resources
are available to users. A system can be in only one run level at a time. 
 </para>
<para>The Solaris OS has eight run levels, which are described in the following
table. The default run level is specified in the <filename>/etc/inittab</filename> file
as run level 3.</para>
<table frame="topbot" xml:id="hbrunlevels-72176" pgwide="1">

<title>Solaris Run
Levels</title>
<tgroup cols="4" colsep="0" rowsep="0">
<colspec colname="column1" colwidth="46*"/>
<colspec colname="column2" colwidth="105*"/>
<colspec colname="column3" colwidth="80*"/>
<colspec colname="column4" colwidth="146*"/>
<thead>
<row rowsep="1">
<entry>
<para>Run Level</para>
</entry>
<entry>
<para>Init State</para>
</entry>
<entry>
<para>Type</para>
</entry>
<entry>
<para>Purpose</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>0</para>
</entry>
<entry>
<para>Power-down state</para>
</entry>
<entry>
<para>Power-down</para>
</entry>
<entry>
<para>
<indexterm xml:id="hbrunlevels-ix937">
<primary>run level</primary>
<secondary>0 (power-down level)</secondary>
</indexterm>To shut down the operating system so that it is safe to turn off
power to the system. </para>
</entry>
</row>
<row>
<entry>
<para>
<indexterm xml:id="hbrunlevels-ix943">
<primary>run level</primary>
<secondary>s or S (single-user level)</secondary>
</indexterm>s or S </para>
</entry>
<entry>
<para>
<indexterm xml:id="hbrunlevels-ix944">
<primary>single-user level</primary>
<see>
run level s or S</see>
</indexterm>Single-user state </para>
</entry>
<entry>
<para>Single-user</para>
</entry>
<entry>
<para>To run as a single user with some file systems mounted and accessible. </para>
</entry>
</row>
<row>
<entry>
<para>1</para>
</entry>
<entry>
<para>Administrative state</para>
</entry>
<entry>
<para>Single-user</para>
</entry>
<entry>
<para>
<indexterm xml:id="hbrunlevels-ix938">
<primary>run level</primary>
<secondary>1 (single-user level)</secondary>
</indexterm>To access all available file systems. User logins are disabled.</para>
</entry>
</row>
<row>
<entry>
<para>2</para>
</entry>
<entry>
<para>Multiuser state</para>
</entry>
<entry>
<para>Multiuser</para>
</entry>
<entry>
<para>
<indexterm xml:id="hbrunlevels-ix939">
<primary>run level</primary>
<secondary>2 (multiuser level)</secondary>
</indexterm>For normal operations. Multiple users can access the system and
all file system. All daemons are running except for the NFS server daemons. </para>
</entry>
</row>
<row>
<entry>
<para>3</para>
</entry>
<entry>
<para>
<indexterm xml:id="hbrunlevels-ix940">
<primary>multiuser level</primary>
<see>
run level 3</see>
</indexterm>Multiuser level with NFS resources shared </para>
</entry>
<entry>
<para>Multiuser</para>
</entry>
<entry>
<para>
<indexterm xml:id="hbrunlevels-ix941">
<primary>run level</primary>
<secondary>3 (multiuser with NFS)</secondary>
</indexterm>For normal operations with NFS resources shared. This is the default
run level for the Solaris OS.</para>
</entry>
</row>
<row>
<entry>
<para>4</para>
</entry>
<entry>
<para>Alternative multiuser state</para>
</entry>
<entry>
<para>
</para>
</entry>
<entry>
<para>Not configured by default, but available for customer use.</para>
</entry>
</row>
<row>
<entry>
<para>5</para>
</entry>
<entry>
<para>Power-down state</para>
</entry>
<entry>
<para>Power-down</para>
</entry>
<entry>
<para>To shut down the operating system so that it is safe to turn off power
to the system. If possible, automatically turns off power on systems that
support this feature.</para>
</entry>
</row>
<row>
<entry>
<para>6</para>
</entry>
<entry>
<para>Reboot state</para>
</entry>
<entry>
<para>Reboot</para>
</entry>
<entry>
<para>
<indexterm xml:id="hbrunlevels-ix942">
<primary>run level</primary>
<secondary>6 (reboot level)</secondary>
</indexterm>To shut down the system to run level 0, and then reboot to multiuser
level with NFS resources shared (or whatever level is the default in the <filename>inittab</filename> file). </para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<para>In addition, the <command>svcadm</command> command can be used to change
the run level of a system, by selecting a milestone at which to run. The following
table shows which run level corresponds to each milestone.</para>
<table frame="topbot" xml:id="fahqq">

<title>Solaris Run Levels and SMF Milestones</title>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colwidth="20*"/>
<colspec colwidth="80*"/>
<thead>
<row rowsep="1">
<entry>
<para>Run Level</para>
</entry>
<entry>
<para>SMF Milestone FMRI</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>S</para>
</entry>
<entry>
<para>
<literal>milestone/single-user:default</literal>
</para>
</entry>
</row>
<row>
<entry>
<para>2</para>
</entry>
<entry>
<para>
<literal>milestone/multi-user:default</literal>
</para>
</entry>
</row>
<row>
<entry>
<para>3</para>
</entry>
<entry>
<para>
<literal>milestone/multi-user-server:default</literal>
</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<sect2 xml:id="hbrunlevels-25070">
<title>Determining a System's Run Level</title>
<para>Display run level information by using the <command>who -r</command> command.</para>
<screen>$ <userinput>who -r</userinput>
</screen>
<para>
<indexterm xml:id="hbrunlevels-ix945">
<primary>run level</primary>
<secondary>determining (how to)</secondary>
</indexterm>
<indexterm xml:id="hbrunlevels-ix946">
<primary>
<command>who</command> command</primary>
</indexterm>
<indexterm xml:id="indexterm-257">
<primary>determining</primary>
<secondary>system's run level (how to)</secondary>
</indexterm>Use the <command>who -r</command> command to determine a system's
current run level for any level. </para>
<example xml:id="hbrunlevels-1">

<title>Determining a System's Run Level</title>
<para>This example displays information about a system's current run level
and previous run levels.</para>
<screen>$ <userinput>who -r</userinput>
 .    run-level 3  Dec 13 10:10  3  0 S
$</screen>
<informaltable frame="topbot">
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colwidth="50*"/>
<colspec colwidth="50*"/>
<thead>
<row rowsep="1">
<entry>
<para>Output of <command>who</command> <option>
r</option> command</para>
</entry>
<entry>
<para>Description</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<literal>run-level 3</literal>
</para>
</entry>
<entry>
<para>Identifies the current run level</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>Dec 13 10:10</literal>
</para>
</entry>
<entry>
<para>Identifies the date of last run level change</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>3</literal>
</para>
</entry>
<entry>
<para>Also identifies the current run level</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>0</literal>
</para>
</entry>
<entry>
<para>Identifies the number of times the system has been at this run level
since the last reboot</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>S</literal>
</para>
</entry>
<entry>
<para>Identifies the previous run level</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</example>
</sect2>
</sect1>
<sect1 xml:id="hbrunlevels-12863">
<title>
<filename>/etc/inittab</filename> File</title>
<para>
<indexterm xml:id="hbrunlevels-ix947">
<primary>
<filename>/etc/inittab</filename> file</primary>
</indexterm>When you boot the system or change run levels with the <command>init</command> or <command>shutdown</command> command, the <command>init</command> daemon starts processes
by reading information from the <filename>/etc/inittab</filename> file. This
file defines these important items for the <command>init</command> process: </para>
<itemizedlist>
<listitem>
<para>That the <command>init</command> process will restart</para>
</listitem>
<listitem>
<para>What processes to start, monitor, and restart if they terminate</para>
</listitem>
<listitem>
<para>What actions to take when the system enters a new run level</para>
</listitem>
</itemizedlist>
<para>Each entry in the <filename>/etc/inittab</filename> file has the following
fields:</para>
<para>
<replaceable>id</replaceable>
<filename>:</filename>
<replaceable>rstate</replaceable>
<filename>:</filename>
<replaceable>action</replaceable>
<filename>:</filename>
<replaceable>process</replaceable>
</para>
<para>
<indexterm xml:id="hbrunlevels-ix948">
<primary>
<filename>/etc/inittab</filename> file</primary>
<secondary>entry description</secondary>
</indexterm>The following table describes the fields in an <filename>inittab</filename> entry. </para>
<table frame="topbot" xml:id="hbrunlevels-92201">

<title>Fields Descriptions for
the <filename>inittab</filename> File</title>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colname="column1" colwidth="87*"/>
<colspec colname="column2" colwidth="290*"/>
<thead>
<row rowsep="1">
<entry>
<para>Field</para>
</entry>
<entry>
<para>Description</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<replaceable>id</replaceable>
</para>
</entry>
<entry>
<para>Is a unique identifier for the entry.</para>
</entry>
</row>
<row>
<entry>
<para>
<replaceable>rstate</replaceable>
</para>
</entry>
<entry>
<para>Lists the run levels to which this entry applies.</para>
</entry>
</row>
<row>
<entry>
<para>
<replaceable>action</replaceable>
</para>
</entry>
<entry>
<para>Identifies how the process that is specified in the process field is
to be run. Possible values include: <literal>sysinit</literal>, <literal>boot</literal>, <literal>bootwait</literal>, <literal>wait</literal>, and <literal>respawn</literal>.</para>
<para>For a description of the other action keywords, see <olink remap="external" targetdoc="819-2251" targetptr="inittab-4">
<citerefentry>
<refentrytitle>inittab</refentrytitle>
<manvolnum>
4
</manvolnum>
</citerefentry>
</olink>.</para>
</entry>
</row>
<row>
<entry>
<para>
<replaceable>process</replaceable>
</para>
</entry>
<entry>
<para>Defines the command or script to execute.</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<example xml:id="hbrunlevels-2">

<title>Default <filename>inittab</filename> File</title>
<para>
<indexterm xml:id="hbrunlevels-ix949">
<primary>
<filename>/etc/inittab</filename> file</primary>
<secondary>example of default</secondary>
</indexterm>The following example shows a default <filename>inittab</filename> file
that is installed with the Solaris release. A description for each line of
output in this example follows.</para>
<screen width="100">ap::sysinit:/sbin/autopush -f /etc/iu.ap  <lineannotation>(1)</lineannotation>
sp::sysinit:/sbin/soconfig -f /etc/sock2path             <lineannotation>(2)</lineannotation>
smf::sysinit:/lib/svc/bin/svc.startd    &gt;/dev/msglog 2&lt;&gt;/dev/msglog      <lineannotation>(3)</lineannotation>
p3:s1234:powerfail:/usr/sbin/shutdown -y -i5 -g0 &gt;/dev/msglog 2&lt;&gt;/dev/...<lineannotation>(4)</lineannotation>
</screen>
<orderedlist>
<listitem>
<para>Initializes STREAMS modules</para>
</listitem>
<listitem>
<para>Configures socket transport providers</para>
</listitem>
<listitem>
<para>Initializes the master restarter for SMF</para>
</listitem>
<listitem>
<para>Describes a power fail shutdown</para>
</listitem>
</orderedlist>
</example>
<sect2 xml:id="hbrunlevels-3">
<title>What Happens When the System Is Brought to
Run Level 3</title>
<orderedlist>
<listitem>
<para>The <literal>init</literal> process is started and reads the <filename>/etc/default/init</filename> file to set any environment variables. By default,
only the <literal>TIMEZONE</literal> variable is set.</para>
</listitem>
<listitem>
<para>Then, <literal>init</literal> reads the <filename>inittab</filename> file
and does the following:</para>
<orderedlist>
<listitem>
<para>Executes any process entries that have <literal>sysinit</literal> in
the <literal>action</literal> field so that any special initializations can
take place before users login.</para>
</listitem>
<listitem>
<para>Passes the startup activities to <command>svc.startd</command>.</para>
</listitem>
</orderedlist>
<para>
<indexterm xml:id="hbrunlevels-ix950">
<primary>run level</primary>
<secondary>3 (multiuser with NFS)</secondary>
<tertiary>what happens when system is brought to</tertiary>
</indexterm>For a detailed description of how the <literal>init</literal> process
uses the <filename>inittab</filename> file, see <olink remap="external" targetdoc="819-2240" targetptr="init-1m">
<citerefentry>
<refentrytitle>init</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
</listitem>
</orderedlist>
<para>The following table describes the keywords used for run level 3's <literal>action</literal> field.</para>
<table frame="topbot" xml:id="hbrunlevels-11450">

<title>Run Level 3 Action Keyword
Descriptions</title>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colname="column1" colwidth="87*"/>
<colspec colname="column2" colwidth="274*"/>
<thead>
<row rowsep="1">
<entry>
<para>Key Word</para>
</entry>
<entry>
<para>Description</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<literal>powerfail</literal>
</para>
</entry>
<entry>
<para>Starts the process when the <literal>init</literal> process receives
a power failure signal</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>respawn</literal>
</para>
</entry>
<entry>
<para>Starts the process and restarts it when it dies</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>wait</literal>
</para>
</entry>
<entry>
<para>Starts the process and waits for it to finish before going on to the
next entry for this run level</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<para>
<indexterm xml:id="hbrunlevels-ix951">
<primary>run level</primary>
<secondary>3 (multiuser with NFS)</secondary>
<tertiary>processes executed at</tertiary>
</indexterm>
<indexterm xml:id="hbrunlevels-ix952">
<primary>
<filename>/etc/inittab</filename> file</primary>
</indexterm>The following table describes the processes (or commands) that
are executed at run level 3.  </para>
<table frame="topbot" xml:id="hbrunlevels-34496">

<title>Command Descriptions for
Run Level 3</title>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colname="column1" colwidth="146*"/>
<colspec colname="column2" colwidth="213*"/>
<thead>
<row rowsep="1">
<entry>
<para>Command or Script Name</para>
</entry>
<entry>
<para>Description</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<command>/usr/sbin/shutdown</command>
</para>
</entry>
<entry>
<para>Shuts down the system. The <command>init</command> process runs the <command>shutdown</command> command only if the system has received a power fail signal.</para>
</entry>
</row>
<row>
<entry>
<para>
<command>/sbin/rcS</command>
</para>
</entry>
<entry>
<para>Checks and mounts root (<filename>/</filename>), <filename>/usr</filename>, <filename>/tmp</filename>, <filename>/var</filename>, <filename>/var/adm</filename>,
and <filename>/var/run</filename> file systems.</para>
</entry>
</row>
<row>
<entry>
<para>
<command>/sbin/rc2</command>
</para>
</entry>
<entry>
<para>Starts the standard system processes and brings the system up into run
level 2 (multiuser level).</para>
</entry>
</row>
<row>
<entry>
<para>
<command>/sbin/rc3</command>
</para>
</entry>
<entry>
<para>Starts NFS resource sharing for run level 3.</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect2>
</sect1>
<sect1 xml:id="hbrunlevels-11168">
<title>Run Control Scripts</title>
<para>
<indexterm xml:id="hbrunlevels-ix953">
<primary>run control scripts</primary>
</indexterm>The Solaris software provides a detailed series of run control
(<literal>rc</literal>) scripts to control run-level changes. Each run level
has an associated <literal>rc</literal> script that is located in the <filename>/sbin</filename> directory:</para>
<itemizedlist>
<listitem>
<para>
<filename>rc0</filename>
</para>
</listitem>
<listitem>
<para>
<filename>rc1</filename>
</para>
</listitem>
<listitem>
<para>
<filename>rc2</filename>
</para>
</listitem>
<listitem>
<para>
<filename>rc3</filename>
</para>
</listitem>
<listitem>
<para>
<filename>rc5</filename>
</para>
</listitem>
<listitem>
<para>
<filename>rc6</filename>
</para>
</listitem>
<listitem>
<para>
<filename>rcS</filename>
</para>
</listitem>
</itemizedlist>
<para>For each <literal>rc</literal> script in the <filename>/sbin</filename> directory,
there is a corresponding directory named <filename>/etc/rc</filename>
<replaceable>n</replaceable>
<filename>.d</filename> that contains scripts to perform various
actions for that run level. For example, <filename>/etc/rc2.d</filename> contains
files that are used to start and stop processes for run level 2.</para>
<screen># <userinput>ls /etc/rc2.d</userinput>
K03samba                S42ncakmod              S81dodatadm.udaplt
K05volmgt               S47pppd                 S89PRESERVE
K06mipagent             S65ipfboot              S89bdconfig
K07dmi                  S69mrouted              S90wbem
K07snmpdx               S70sckm                 S93cacheos.finish
K16apache               S70uucp                 S94ncalogd
K27boot.server          S72autoinstall          S95ncad
README                  S73cachefs.daemon       S95networker
S10lu                   S75savecore             S98deallocate
S20sysetup              S80lp                   S99audit
S40llc2                 S80spc</screen>
<para>The <filename>/etc/rc</filename>
<replaceable>n</replaceable>
<filename>.d</filename> scripts
are always run in ASCII sort order. The scripts have names of the form:</para>
<para>
<literal>[KS][0-9][0-9]*</literal>
</para>
<para>Files that begin with <literal>K</literal> are run to terminate (kill)
a system service. Files that begin with <literal>S</literal> are run to start
a system service.</para>
<para>Run control scripts are located in the <filename>/etc/init.d</filename> directory.
These files are linked to corresponding run control scripts in the <filename>/etc/rc</filename>
<replaceable>n</replaceable>
<filename>.d</filename> directories.</para>
<para>The actions of each run control script are summarized in the following
section.</para>
<sect2 xml:id="hbrunlevels-11926">
<title>Run Control Script Summaries</title>
<para>The following sections summarize the run control scripts that are used
to start and stop system services when you change run levels.</para>
<sect3 xml:id="hbrunlevels-53">
<title>The <filename>/sbin/rc0</filename> Script</title>
<para>
<indexterm xml:id="hbrunlevels-ix962">
<primary>
<filename>/sbin/rc0</filename> script</primary>
</indexterm>The <filename>/sbin/rc0</filename> script runs the <filename>/etc/rc0.d</filename> scripts to perform the following tasks:</para>
<itemizedlist>
<listitem>
<para>Stops system services and daemons</para>
</listitem>
<listitem>
<para>Terminates all running processes</para>
</listitem>
<listitem>
<para>Unmounts all file systems</para>
</listitem>
</itemizedlist>
</sect3>
<sect3 xml:id="hbrunlevels-52">
<title>The <filename>/sbin/rc1</filename> Script</title>
<para>
<indexterm xml:id="indexterm-258">
<primary>
<filename>/sbin/rc1</filename> script</primary>
</indexterm>The <filename>/sbin/rc1</filename> script runs the <filename>/etc/rc1.d</filename> scripts to perform the following tasks:</para>
<itemizedlist>
<listitem>
<para>Stops system services and daemons</para>
</listitem>
<listitem>
<para>Terminates all running user processes</para>
</listitem>
<listitem>
<para>Unmounts all remote file systems</para>
</listitem>
<listitem>
<para>Mounts all local file systems if the previous run level was
S</para>
</listitem>
</itemizedlist>
</sect3>
<sect3 xml:id="hbrunlevels-51">
<title>The <filename>/sbin/rc2</filename> Script</title>
<para>
<indexterm xml:id="indexterm-259">
<primary>
<filename>/sbin/rc2</filename> script</primary>
</indexterm>The <filename>/sbin/rc2</filename> script runs the <filename>/etc/rc2.d</filename> scripts to perform the following tasks, grouped by function:</para>
<para>Local system-related tasks:</para>
<itemizedlist>
<listitem>
<para>Starts system accounting and system auditing, if configured</para>
</listitem>
<listitem>
<para>Sets the default scheduling class if the <filename>/etc/dispadmin.conf</filename> file exists</para>
</listitem>
<listitem>
<para>Configures serial device stream</para>
</listitem>
<listitem>
<para>Configures WBEM services</para>
</listitem>
</itemizedlist>
<para>Network service or security-related tasks:</para>
<itemizedlist>
<listitem>
<para>Starts the logical link controller (<command>llc2</command>),
if  configured</para>
</listitem>
<listitem>
<para>Configures the Solaris Network Cache and Accelerator (NCA)
and NCA logging, if appropriate</para>
</listitem>
<listitem>
<para>Starts the Solaris PPP server or client daemons (<command>pppoed</command> or <command>pppd</command>), if configured</para>
</listitem>
<listitem>
<para>Starts directory server (<command>slapd</command>) daemon,
if configured</para>
</listitem>
<listitem>
<para>Configures system resource controls and system pools if the <filename>/etc/rctladm.conf</filename> and <filename>/etc/pooladm.conf</filename>  files
exist</para>
</listitem>
<listitem>
<para>Starts the <command>htt_server</command> process</para>
</listitem>
</itemizedlist>
<para>Install-related tasks:</para>
<itemizedlist>
<listitem>
<para>Configures the boot environment for the Live Upgrade software
upon system startup or system shutdown</para>
</listitem>
<listitem>
<para>Checks for the presence of the <filename>/etc/.UNCONFIGURE</filename> file
to see if the system should be reconfigured</para>
</listitem>
<listitem>
<para>Reboots the system from the installation media or a boot server
if either <filename>/.PREINSTALL</filename> or <filename>/AUTOINSTALL</filename> exists</para>
</listitem>
</itemizedlist>
<para>Hardware-related tasks:</para>
<itemizedlist>
<listitem>
<para>Starts the <trademark>Sun Fire</trademark> 15000 key management
daemon (<command>sckmd</command>), if appropriate</para>
</listitem>
<listitem>
<para>Runs the flash PROM update script</para>
</listitem>
<listitem>
<para>Configures any graphic frame buffers or graphic accelerators</para>
</listitem>
</itemizedlist>
<para>Transitions the following services between run level changes:</para>
<itemizedlist>
<listitem>
<para>Apache (<command>tomcat</command>)</para>
</listitem>
<listitem>
<para>Mobile IP (<command>mipagent</command>)</para>
</listitem>
<listitem>
<para>Samba (<command>smdb</command>)  and (<command>nmdb</command>)</para>
</listitem>
<listitem>
<para>
<trademark>Solstice Enterprise Agents</trademark> daemon (<command>dmispd</command>) and (<command>snmpXdmid</command>)</para>
</listitem>
</itemizedlist>
<note>

<para>Many of the system services and applications that are started
at run level 2 depend on what software is installed on the system.</para>
</note>
</sect3>
<sect3 xml:id="hbrunlevels-50">
<title>The <filename>/sbin/rc3</filename> Script</title>
<para>
<indexterm xml:id="hbrunlevels-ix964">
<primary>
<filename>/sbin/rc3</filename> script</primary>
</indexterm>The <filename>/sbin/rc3</filename> script runs the <filename>/etc/rc3.d</filename> scripts to perform the following tasks: </para>
<itemizedlist>
<listitem>
<para>Starts the Apache server daemon (<command>tomcat</command>),
if configured</para>
</listitem>
<listitem>
<para>Starts Mobile IP daemon (<command>mipagent</command>), if
configured</para>
</listitem>
<listitem>
<para>Starts the Samba daemons (<command>smdb</command> and <command>nmdb</command>), if configured</para>
</listitem>
<listitem>
<para>Starts the Solstice Enterprise Agents daemons (<command>dmispd</command> and <command>snmpXdmid</command>)</para>
</listitem>
</itemizedlist>
</sect3>
<sect3 xml:id="hbrunlevels-49">
<title>The <filename>/sbin/rc5</filename> and <filename>/sbin/rc6</filename> Scripts</title>
<para>
<indexterm xml:id="hbrunlevels-ix965">
<primary>
<filename>/sbin/rc5</filename> script</primary>
</indexterm>
<indexterm xml:id="indexterm-260">
<primary>
<filename>/sbin/rc6</filename> script</primary>
</indexterm>The <filename>/sbin/rc5</filename> and <filename>/sbin/rc6</filename> scripts
run the <filename>/etc/rc0.d/K*</filename> scripts to perform the following
tasks:</para>
<itemizedlist>
<listitem>
<para>Kills all active processes</para>
</listitem>
<listitem>
<para>Unmounts the file systems</para>
</listitem>
</itemizedlist>
</sect3>
<sect3 xml:id="hbrunlevels-48">
<title>The <filename>/sbin/rcS</filename> Script</title>
<para>
<indexterm xml:id="hbrunlevels-ix968">
<primary>
<filename>/sbin/rcS</filename> script</primary>
</indexterm>The <filename>/sbin/rcS</filename> script runs the <filename>/etc/rcS.d</filename> scripts to bring the system up to run level S. This scripts starts <command>wrsmconf</command> to manage WCI RSM controller configurations.</para>
</sect3>
</sect2>
</sect1>
</chapter>
