<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML//EN" "docbook.dtd"[
	<!ENTITY % xinclude SYSTEM "xinclude.mod">
	%xinclude;
]>

<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" arch="x86" xml:id="hbx86boot-aaa">



<title>
Booting a System (Tasks)</title>
<toc>
<para>This chapter describes the procedures for booting an x86 based system
in the Solaris 10 OS. See <olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-75">
Booting a System (Task Map)</olink> for information on the procedures that are associated with
booting an x86 based system.</para>
<note>

<para>Starting with the
Solaris 10 1/06 and the Solaris Express 6/05 releases,
the open source GRand Unified Bootloader (GRUB) has been implemented on x86
based systems. GRUB is responsible for loading a boot archive, which contains
the kernel modules and configuration files, into the system's memory. For
more information on GRUB based booting, see <olink remap="external" targetdoc="chapter-11.xml" targetptr="hbx86boot-68676">Chapter 11, GRUB Based Booting (Tasks)</olink>.</para>
</note>
<para>For more information about 64-bit computing on the x86 based platform,
see <olink remap="external" targetdoc="chapter-8.xml" targetptr="fcpez">
Support for 64-Bit Computing</olink>.</para>
<para>For overview information about the boot process, see <olink remap="external" targetdoc="chapter-8.xml" targetptr="hboverview-25463">Chapter 8, Shutting Down and Booting a System (Overview)</olink>. For step-by-step instructions on booting a SPARC based
system, see <olink remap="external" targetdoc="chapter-10.xml" targetptr="hbsparcboot-79782">Chapter 10, Booting a System (Tasks)</olink>.</para>
</toc>
<sect1 arch="x86" xml:id="hbx86boot-75">
<title>
Booting a System (Task Map)</title>
<informaltable frame="all" pgwide="1">
<tgroup cols="3" colsep="0" rowsep="0">
<colspec colname="column1" colwidth="112.00*"/>
<colspec colname="column2" colwidth="158.85*"/>
<colspec colname="column3" colwidth="125.15*"/>
<thead>
<row rowsep="1">
<entry colsep="1" rowsep="1">
<para>Task</para>
</entry>
<entry colsep="1" rowsep="1">
<para>Description</para>
</entry>
<entry colsep="1" rowsep="1">
<para>For Instructions</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry colsep="1" rowsep="0">
<para>Boot a system.</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Select one of the following boot options:</para>
</entry>
<entry colsep="1" rowsep="0">
<para>
</para>
</entry>
</row>
<row>
<entry colsep="1" morerows="3" rowsep="1">
</entry>
<entry colsep="1" rowsep="0">
<para>Boot to run level 3 – Used after shutting down the system or performing
some system hardware maintenance task. </para>
</entry>
<entry colsep="1" rowsep="0">
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-92385">
How to Boot a System to Run Level 3 (Multiuser Level)</olink>
</para>
</entry>
</row>
<row>
<entry colsep="1" rowsep="0">
<para>Boot to run level S – Used after performing a system maintenance
task such as backing up a file system. </para>
</entry>
<entry colsep="1" rowsep="0">
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-10398">
How to Boot a System to Run Level S (Single-User Level)</olink>
</para>
</entry>
</row>
<row>
<entry colsep="1" rowsep="0">
<para>Boot interactively – Used after making temporary changes to a
system file or the kernel for testing purposes.</para>
</entry>
<entry colsep="1" rowsep="0">
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-33570">
How to Boot a System Interactively</olink>
</para>
</entry>
</row>
<row>
<entry colsep="1" rowsep="1">
<para>Used to boot a PXE or non-PXE device from the network with the default
network configuration strategy. This method is used for booting a diskless
client.</para>
</entry>
<entry colsep="1" rowsep="1">
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="ettmr">
How to Boot a System From the Network</olink>
</para>
</entry>
</row>
<row>
<entry colsep="1" rowsep="1">
<para>
<emphasis role="strong">Solaris 10:</emphasis> Use the Device Configuration
Assistant on a Solaris Operating System x86 based system.</para>
<note>

<para>Starting with the Solaris 10 1/06 and
the Solaris Express 6/05 release, the Device Configuration Assistant has
been replaced by the GRUB menu.</para>
</note>
</entry>
<entry colsep="1" rowsep="1">
<para>Used after changing the hardware configuration of the system. This utility
enables you to boot the Solaris  system from a different boot device, configure
new or misconfigured hardware, or perform other device-related or boot-related
tasks.</para>
</entry>
<entry colsep="1" rowsep="1">
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-55">
How to Enter the Device Configuration Assistant</olink>
</para>
</entry>
</row>
<row>
<entry colsep="1" morerows="2" rowsep="1">
<para>Boot a system for recovery purposes.</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Boot for recovery purposes - Used to boot the system when a damaged
file is preventing the system from booting. You might need to do one or both
of the following to boot for recovery purposes:</para>
</entry>
<entry colsep="1" rowsep="0">
<para>
</para>
</entry>
</row>
<row>
<entry colsep="1">
<orderedlist>
<listitem>
<para>First, stop the system to attempt recovery.</para>
</listitem>
<listitem>
<para>Force a crash dump and reboot the system - Used to force a
crash dump for troubleshooting purposes.</para>
</listitem>
<listitem>
<para>Boot to repair an important system file that is preventing
the system from booting successfully.</para>
</listitem>
</orderedlist>
</entry>
<entry colsep="1">
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-51369">
How to Stop a System for Recovery Purposes</olink>
</para>
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-36">
Forcing a Crash Dump and Reboot of the System</olink>
</para>
<para>
</para>
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-35111">
How to Boot a System for Recovery Purposes</olink>
</para>
</entry>
</row>
<row>
<entry colsep="1" rowsep="1">
<para>Boot <command>kmdb</command> – Used to troubleshoot system problems.</para>
</entry>
<entry colsep="1" rowsep="1">
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-59">
How to Boot a System With the Kernel Debugger (<command>kmdb</command>)</olink>
</para>
<para>Use the <command>reboot</command> and <command>halt</command> command
with the <option>
d</option> option if you do not have time to debug the system
interactively. Running the <command>halt</command> command with the <option>
d</option> option
requires a manual reboot of the system afterwards. Whereas, if you use the <command>reboot</command> command, the system boots automatically. </para>
</entry>
</row>
<row>
<entry colsep="1" rowsep="1">
<para>Troubleshoot boot problems on systems that have 64-bit computing capabilities.</para>
</entry>
<entry colsep="1">
<para>If you have hardware that requires the system to load one or more device
drivers that are not available in 64-bit mode, booting the system to 64-bit
mode could fail. You would then need to boot the system to 32-bit mode.</para>
</entry>
<entry colsep="1">
<para>
<olink remap="internal" targetdoc="chapter-12.xml" targetptr="ffktz">
Troubleshooting a Failed 64-Bit Boot</olink>
</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1>
<sect1 arch="x86" xml:id="hbx86boot-1">
<title>
Booting an x86 Based System</title>
<para>The following procedures use the reset button to restart the system.
If your system does not have a reset button, use the power switch to restart
the system. You might be able to press Ctrl-Alt-Del to interrupt system operation,
depending upon the state of the system.</para>
<sect2>
<title/>
<task arch="x86" id="hbx86boot-92385">

<title>
How to Boot a System to Run Level
3 (Multiuser Level)</title>
<tasksummary>
<para>Use this procedure to boot a system that is currently at run level 0
to run level 3.</para>
</tasksummary>
<procedure>
<step xml:id="hbx86boot-step-3">
<para>If the system displays the <literal>Press
any key to reboot</literal> prompt, press any key to reboot the system.</para>
<para>You can also use the Reset button at this prompt. If the system is shut
down, turn the system on with the power switch.</para>
<para>The Current Boot
Parameters menu is displayed after a few minutes.</para>
</step>
<step xml:id="hbx86boot-step-4">
<para>
<indexterm xml:id="hbx86boot-ix1019">
<primary>run level</primary>
<secondary>3 (multiuser with NFS)</secondary>
<tertiary>booting to</tertiary>
</indexterm>Type <command>b</command> to boot the system to run level 3. Press
Enter. </para>
<para>If you do not make a selection within five seconds, the
system is automatically booted to run level 3.</para>
</step>
<step xml:id="hbx86boot-step-42">
<para>Verify that the system has booted to run
level 3.</para>
<para>The login prompt is displayed when the boot process has
finished successfully.</para>
<screen>
<replaceable>hostname</replaceable> console login:</screen>
</step>
</procedure>
<example arch="x86">

<title>
Booting a System to Run Level 3 (Multiuser Level)</title>
<para>For new installations of the Solaris OS, typing <command>b</command> at
the boot prompt automatically boots 64-bit capable x86 based systems to 64-bit
mode. For upgrade installations of the Solaris OS, typing <command>b</command> at
the boot prompt also boots 64-bit capable x86 based systems to 64-bit mode,
unless the <command>eeprom</command> <literal>boot-file</literal> parameter
was previously set to a value other than <filename>kernel/unix</filename>.</para>
<para>This example shows how to boot an x86 based system that has 64-bit computing
capabilities to run level 3.</para>
<screen>Press any key to reboot
           .
           .
           .
                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args: 
Type    b [file-name] [boot-flags] &lt;ENTER&gt;      to boot with options
or      i &lt;ENTER&gt;                               to enter boot interpreter
or      &lt;ENTER&gt;                                 to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <userinput>b</userinput>
SunOS Release 5.10 Version amd64-gate-2004-09-27 64-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
Hostname: venus
NIS domain name is example.com
checking ufs filesystems
/dev/rdsk/c1d0s7: is logging.
venus console login:</screen>
</example>
<example arch="amd64" xml:id="fcozs">

<title>
Manually Booting a System That Has 64-Bit Computing Capabilities in
64-Bit Mode to Run Level 3 (Multiuser Level)</title>
<para>For new installations of the Solaris OS, typing <command>b</command> at
the boot prompt automatically boots 64-bit capable x86 based systems to 64-bit
mode. For upgrade installations of the Solaris OS, typing <command>b</command> at
the boot prompt also boots 64-bit capable x86 based systems to 64-bit mode,
unless the <command>eeprom</command> <literal>boot-file</literal> parameter
was previously set to a value other than <filename>kernel/unix</filename>.</para>
<para>This example shows how to <emphasis>manually</emphasis> boot this type
of system in 64-bit mode to run level 3.</para>
<screen># <userinput>init 0</userinput>
# svc.startd: The system is coming down.  Please wait.
svc.startd: 68 system services are now being stopped.
umount: /etc/svc/volatile busy
svc.startd: The system is down.
syncing file systems... done
Press any key to reboot.

Initializing system
Please wait...


                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;    to boot with options
or      i &lt;ENTER&gt;                             to enter boot interpreter
or      &lt;ENTER&gt;                               to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <userinput>b kernel/amd64/unix</userinput>
SunOS Release 5.10 Version amd64-gate-2004-09-27 64-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
Hostname: venus
NIS domain name is example.com
checking ufs filesystems
/dev/rdsk/c1d0s7: is logging.
venus console login:</screen>
</example>
<example arch="amd64" xml:id="fcoyg" wordsize="bits32">

<title>
Manually Booting a System That Has 64-Bit Computing Capabilities in
32-Bit Mode to Run Level 3 (Multiuser Level)</title>
<para>For new installations of the Solaris OS, typing <command>b</command> at
the boot prompt automatically boots 64-bit capable x86 based systems to 64-bit
mode. For upgrade installations of the Solaris OS, typing <command>b</command> at
the boot prompt also boots 64-bit capable x86 based systems to 64-bit mode,
unless the <command>eeprom</command> <literal>boot-file</literal> parameter
was previously set to a value other than <filename>kernel/unix</filename>.</para>
<para>This example shows how to <emphasis>manually</emphasis> boot this type
of system in 32-bit mode to run level 3.</para>
<screen># <userinput>init 0</userinput>
# svc.startd: The system is coming down.  Please wait.
svc.startd: 68 system services are now being stopped.
umount: /etc/svc/volatile busy
svc.startd: The system is down.
syncing file systems... done
Press any key to reboot.
Resetting...
If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.

                                                    
Initializing system
Please wait...


                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args: 

Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <userinput>b kernel/unix</userinput>
SunOS Release 5.10 Version amd64-gate-2004-09-30 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
Hostname: venus
NIS domain name is example.com
checking ufs filesystems
/dev/rdsk/c1d0s7: is logging.
venus console login:</screen>
</example>
</task>
</sect2>
<sect2>
<title/>
<task arch="x86" id="hbx86boot-10398">

<title>
How to Boot a System to Run Level
S (Single-User Level)</title>
<tasksummary>
<para>Use this procedure to boot a system that is currently at run level 0
to run level S.</para>
</tasksummary>
<procedure>
<step xml:id="hbx86boot-step-8">
<para>If the system displays the <literal>Press
any key to reboot</literal> prompt, press any key to reboot the system.</para>
<para>You can also use the Reset button at this prompt. If the system is shut
down, turn the system on with the power switch.</para>
<para>The Current Boot
Parameters menu is displayed after a few minutes.</para>
</step>
<step xml:id="hbx86boot-step-9">
<para>
<indexterm xml:id="hbx86boot-ix1021">
<primary>run level</primary>
<secondary>s or S (single-user level)</secondary>
<tertiary>booting to</tertiary>
</indexterm>Type <command>b -s</command> to boot the system to run level S.
Press Enter. </para>
<para>If you do not make a selection within five seconds,
the system is automatically booted to run level 3.</para>
</step>
<step xml:id="hbx86boot-step-45">
<para>Type the superuser password, if prompted.</para>
</step>
<step xml:id="hbx86boot-step-11">
<para>Verify that the system is at run level
S.</para>
<screen># <userinput>who -r</userinput>
   .       run-level S  Jul 19 14:37     S      0  3</screen>
</step>
<step xml:id="hbx86boot-step-12">
<para>Perform the maintenance task that required
the run level change to S.</para>
</step>
<step xml:id="hbx86boot-step-13">
<para>After you complete the system maintenance
task, type Control-D to bring the system to the multiuser state.</para>
</step>
</procedure>
<example arch="x86">

<title>
Booting a System to Run Level S (Single-User Level)</title>
<screen>Press any key to reboot.
Resetting...
.
.
.
Initializing system 
Please wait...


                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <userinput>b -s</userinput>
SunOS Release 5.10 Version amd64-gate-2004-09-30 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
Booting to milestone "milestone/single-user:default".
Hostname: venus
NIS domain name is example.com
Requesting System Maintenance Mode
SINGLE USER MODE

Root password for system maintenance (control-d to bypass): <userinput>xxxxxx</userinput>
Entering System Maintenance Mode
.
.
.
# <userinput>who -r</userinput>
   .       run-level S  Jul 19 14:37     S      0  3
<lineannotation>(Perform some maintenance task)</lineannotation>
# <userinput>^D</userinput>
</screen>
</example>
</task>
</sect2>
<sect2>
<title/>
<task arch="x86" id="hbx86boot-33570">

<title>
How to Boot a System Interactively</title>
<tasksummary>
<para>Use this procedure to boot a system when you need to specify an alternate
kernel or the <filename>/etc/system</filename> file.</para>
</tasksummary>
<procedure>
<step xml:id="hbx86boot-step-16">
<para>If the system displays the <literal>Press
any key to reboot</literal> prompt, press any key to reboot the system.</para>
<para>You can also use the reset button at this prompt. If the system is shut
down, turn the system on with the power switch.</para>
<para>The Primary Boot
Subsystem menu is displayed after a few minutes.</para>
</step>
<step xml:id="hbx86boot-step-69">
<para>Select the Solaris partition (if not marked
as active) from the list. Press Enter.</para>
<para>If you do not make a selection
within five seconds, the active boot partition is selected automatically.</para>
<para>The Current Boot Parameters menu is displayed after a few minutes.</para>
</step>
<step xml:id="hbx86boot-step-17">
<para>Type <literal>b -a</literal> to boot the
system interactively. Press Enter.</para>
<para>If you do not make a selection
within five seconds, the system is automatically booted to run level 3.</para>
</step>
<step xml:id="hbx86boot-step-18">
<para>Answer the following system prompts.</para>
<substeps>
<step>
<para>When prompted, enter the name of the kernel to use for booting.</para>
<para>Press enter to use the default kernel file name. Otherwise, provide
the name of an alternate kernel, press Enter.</para>
</step>
<step>
<para>When prompted, provide an alternate path for the module directories.</para>
<para>Press enter to use the default module directories. Otherwise, provide
the alternate paths to module directories, press Enter.</para>
</step>
<step>
<para>When prompted, provide the name of an alternate system file.</para>
<para>Type <filename>/dev/null</filename> if your <filename>/etc/system</filename> file
has been damaged. </para>
</step>
<step>
<para>When prompted, enter the <literal>root</literal> file system type.</para>
<para>Press enter to select local disk booting with UFS, which is the default,
or enter NFS for network booting.</para>
</step>
<step>
<para>When prompted, enter the physical name of <literal>root</literal> device. </para>
<para>Provide an alternate device name or press return to use the default.</para>
</step>
</substeps>
</step>
<step>
<para>If you are not prompted to answer these questions, verify that
you typed the <command>boot</command> <option>
a</option> command correctly.</para>
</step>
</procedure>
<example arch="x86">

<title>
Booting a System Interactively</title>
<para>In the following example, the default choices (shown in square brackets <literal>[]</literal>) are accepted.</para>
<screen width="100">Press any key to reboot.
Resetting...
.
.
.
Autobooting from bootpath: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a


If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.


Initializing system
Please wait...


                     &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults
Running Configuration Assistant...
                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <userinput>b -a</userinput>
Enter default directory for modules [/platform/i86pc/kernel /kernel /usr/kernel]:
<lineannotation>Press Enter</lineannotation>
Name of system file [etc/system]: <lineannotation>Press Enter</lineannotation>
SunOS Release 5.10 Version amd64-gate-2004-09-30 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
root filesystem type [ufs]: <lineannotation>Press Enter</lineannotation>
Enter physical name of root device[/pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a]: <lineannotation>Press Enter</lineannotation>
Hostname: venus
NIS domain name is example.com
checking ufs filesystems
/dev/rdsk/c1d0s7: is logging.
venus console login:</screen>
</example>
</task>
</sect2>
<sect2 arch="x86" xml:id="ettmq">
<title>
Booting From the Network</title>
<para>Any system can boot from the network if a boot server is available.
You might want to boot a stand-alone system from the network for recovery
purposes if the system cannot boot from the local disk.</para>
<para>You can boot Solaris OS x86 based systems directly from a network without
the Solaris boot diskette on x86 based systems that support the Preboot Execution
Environment (PXE) network booting protocol. The PXE network boot is available
only for devices that implement the Intel Preboot Execution Environment specification.
If the system is capable of a PXE network boot, you might want to boot the
system directly from the network without using either the Device Configuration
Assistant boot diskette or the Solaris Software 1 CD or DVD.</para>
</sect2>
<sect2>
<title/>
<task arch="x86" id="ettmr">

<title>
How to Boot a System From the Network</title>
<tasksummary>
<para>This procedure includes instructions for booting an x86 based system
from the network with the Solaris Device Configuration Assistant. Note that
the behavior of the Device Configuration assistant changed , starting with
the Solaris 10 release.</para>
<para>Starting with the Solaris 10 1/06 and the Solaris Express 10/05 releases,
GRUB based booting has been implemented on x86 based systems that are running
the Solaris OS. The GRUB menu replaces the Device Configuration Assistant.
For information about booting an x86 based system from the Network with GRUB,
see <olink remap="external" targetdoc="chapter-11.xml" targetptr="fvzok">
Performing a GRUB Based Boot From the Network</olink>
</para>
<para>There are two network configuration strategies, Reverse Address Resolution
Protocol (RARP) or Dynamic Host Configuration Protocol (DHCP). The default
network boot strategy for a PXE network boot is DHCP. The default network
boot strategy for non-PXE devices is RARP. For non-PXE devices, you can use
either strategy, depending on whether a RARP boot server or a DHCP boot server
is available on your network. </para>
<note>

<para>If you use a DHCP server for PXE network boots, additional DHCP
configuration is required. For general information on DHCP configuration,
see <olink remap="external" targetdoc="819-3000" targetptr="dhcptm-1">Part III, <citetitle remap="chapter">DHCP,</citetitle> in <citetitle remap="book">System Administration Guide: IP Services</citetitle>
</olink>. If you want to set up your DHCP server
to support installation, see <olink remap="external" targetdoc="819-2394">
<citetitle remap="book">Solaris Express Installation Guide: Network-Based Installations</citetitle>
</olink>.</para>
</note>
<para>In the Solaris 10 release, if you are performing a PXE network boot,
or if you are booting the system from the Solaris Software 1 CD or DVD, the
system boots automatically. The Device Configuration Assistant menu is no
longer displayed by default. If you are booting a non-PXE device, you will
need to follow the steps in this procedure that describe how to enter the
Device Configuration Assistant menu to change the network configuration.</para>
</tasksummary>
<procedure>
<step xml:id="hbx86boot-step-41">
<para>Insert the Device Configuration Assistant
boot diskette or the Solaris Software 1 CD or DVD that you want to boot from.
Or, use the system or network adapter BIOS configuration program to enable
the PXE network boot.</para>
<itemizedlist>
<listitem>
<para>If you are using the boot diskette, the first menu of the
Device Configuration Assistant is displayed.</para>
</listitem>
<listitem>
<para>If you are using the Solaris Software 1 CD, DVD, or booting
a PXE device from the network, the system boots automatically.</para>
<para>If
you choose to change the network configuration and enter the Device Configuration
Assistant menu, press Esc when the following message is displayed.</para>
<screen>If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.

Press ESCape to interrupt autoboot in 5 seconds.</screen>
</listitem>
</itemizedlist>
<para>The Device Configuration Assistant screen is displayed.</para>
</step>
<step>
<para>If the system displays the <literal>Press any key to reboot</literal> prompt,
press any key to reboot the system.</para>
<para>You can also use the reset
button at this prompt. If the system is shut down, turn the system on with
the power switch.</para>
</step>
<step xml:id="hbx86boot-step-49">
<para>Press the F2 key (F2_Continue) to scan
for devices.</para>
<para>Device identification is performed. Then, the Identified
Devices screen is displayed.</para>
</step>
<step>
<para>Press the F2 key (F2_Continue) to load drivers.</para>
<para>Bootable
drivers are loaded. Then, the Boot Solaris menu is displayed.</para>
</step>
<step xml:id="hbx86boot-step-50">
<para>Use the Device Configuration Assistant
to change the network configuration.</para>
<substeps>
<step>
<para>Press the F4 key (F4_Boot Tasks).</para>
</step>
<step>
<para>Select <literal>Set Network Configuration Strategy</literal>.
Press the F2 key (F2_Continue).</para>
</step>
<step>
<para>Select either <literal>RARP</literal> or <literal>DHCP</literal> and
press the F2 key (F2_Continue).</para>
<note>

<para>The previous step applies only if you are booting a non-PXE device
from the network. For a PXE network boot, you must use DHCP, which is the
default network boot strategy.</para>
</note>
<para>A screen that confirms your new network boot strategy is displayed.
Your network boot strategy selection is saved as the default network boot
method for the next time this diskette is used for booting.</para>
</step>
<step>
<para>Press F3_Back to return to the Boot Solaris menu.</para>
</step>
</substeps>
</step>
<step xml:id="hbx86boot-step-51">
<para>Select <literal>NET</literal> as the boot
device. Then, press F2_Continue to boot the network device.</para>
<para>The
Solaris boot option screen is displayed.</para>
</step>
</procedure>
</task>
</sect2>
<sect2 arch="x86" xml:id="hbx86boot-54">
<title>
Using the Device Configuration
Assistant</title>
<indexterm xml:id="indexterm-220">
<primary>Solaris Device Configuration Assistant</primary>
<secondary>overview</secondary>
</indexterm>
<note>

<para>In this Solaris release the Device Configuration
Assistant has been replaced by the GRUB menu. For more information about this
feature, see <olink remap="external" targetdoc="chapter-11.xml" targetptr="hbx86boot-68676">Chapter 11, GRUB Based Booting (Tasks)</olink>.</para>
</note>
<para>
<emphasis role="strong">Solaris 10:</emphasis> The Device Configuration
Assistant for Solaris Operating System x86 based systems is a program that
enables you to perform various hardware configuration and booting tasks. You
can access the Device Configuration Assistant menu from either of the following:</para>
<itemizedlist>
<listitem>
<para>Solaris boot diskette</para>
</listitem>
<listitem>
<para>Solaris Software 1 CD or DVD</para>
</listitem>
<listitem>
<para>PXE network boot</para>
</listitem>
<listitem>
<para>Hard disk with Solaris OS installed</para>
</listitem>
</itemizedlist>
<para>For the procedures in this chapter, you might be requested to insert
the Device Configuration Assistant boot diskette to boot the Configuration
Assistant. Alternately, if your system's BIOS supports booting from the CD
or DVD, you can insert the Solaris Software 1 CD or DVD to boot the Device
Configuration Assistant.</para>
<task arch="x86" xml:id="hbx86boot-55">
<title>
How to Enter the Device Configuration
Assistant</title>
<tasksummary>
<para>
<emphasis role="strong">Solaris 10:</emphasis> This procedure shows
how to interrupt the boot process to enter the Device Configuration Assistant.
In the current Solaris release, the GRUB menu replaces the Device Configuration
Assistant.</para>
</tasksummary>
<procedure>
<step xml:id="hbx86boot-step-72">
<para>Boot the system. <indexterm xml:id="indexterm-221">
<primary>booting</primary>
<secondary>the Solaris Device Configuration Assistant (how to)</secondary>
<tertiary>x86</tertiary>
</indexterm>
</para>
<itemizedlist>
<listitem>
<para>If you are booting from the Device Configuration boot diskette,
the first menu of the Device Configuration Assistant is displayed after a
few minutes.</para>
</listitem>
<listitem>
<para>If you are booting from the Solaris Software 1 CD, DVD, hard
disk, or performing a PXE network boot, the following message is displayed:</para>
<screen>If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.

Press ESCape to interrupt autoboot in 5 seconds.</screen>
<para>If you choose to enter the Device Configuration Assistant menu, press
Esc to interrupt the autoboot process.</para>
<para>The Device Configuration
Assistant menu is displayed.</para>
</listitem>
</itemizedlist>
</step>
<step>
<para>If the system displays the <literal>Press any key to reboot</literal> prompt,
press any key to reboot the system. </para>
<para>You can also use the reset
button at this prompt. If the system is shut down, turn the system on with
the power switch.</para>
</step>
</procedure>
</task>
</sect2>
<sect2>
<title/>
<task arch="x86" id="hbx86boot-51369">

<title>
How to Stop a System for Recovery
Purposes</title>
<procedure>
<step>
<para>
<indexterm xml:id="indexterm-222">
<primary>stopping</primary>
<secondary>a system for recovery purposes (how to)</secondary>
<tertiary>x86</tertiary>
</indexterm>Stop the system by using one of the following commands, if possible:</para>
<itemizedlist>
<listitem>
<para>If the system is running, become superuser and type <command>init
0</command> to stop the system. After the <literal>Press any key to reboot</literal> prompt
appears, press any key to reboot the system.</para>
</listitem>
<listitem>
<para>If the system is running, become superuser and type <command>init
6</command> to reboot the system. </para>
</listitem>
</itemizedlist>
</step>
<step xml:id="hbx86boot-step-77">
<para>If the system doesn't respond to any input
from the mouse or keyboard, press the Reset key, if it exists, to reboot the
system. Or, you can use the power switch to reboot the system.</para>
</step>
</procedure>
</task>
</sect2>
<sect2>
<title/>
<task arch="x86" id="hbx86boot-35111">

<title>
How to Boot a System for Recovery
Purposes</title>
<tasksummary>
<para>Follow these steps to boot the system to repair a critical system resource.
The example shows you how to boot from a Solaris Software 1 CD or from the
network, mount the root (<filename>/</filename>) file system on the disk,
and repair the <filename>/etc/passwd</filename> file.</para>
<para>Substitute the device name of the file system to be repaired for the <replaceable>device-name</replaceable> variable. If you need help identifying a system's
device names, refer to <olink remap="external" targetdoc="819-2723" targetptr="devconfig-27211">
<citetitle remap="section">Displaying Device Configuration Information</citetitle> in <citetitle remap="book">System Administration Guide: Devices and File Systems</citetitle>
</olink>.</para>
</tasksummary>
<procedure>
<step xml:id="hbx86boot-step-74">
<para>Stop the system by using the system's Stop
key sequence.</para>
<para>Use the Stop key sequence for your system if you
don't know the <literal>root</literal> password, or if you can't log in to
the system. For more information, see <olink remap="internal" targetdoc="chapter-12.xml" targetptr="hbx86boot-51369">
How to Stop a System for Recovery Purposes</olink>.</para>
</step>
<step xml:id="hbx86boot-step-20">
<para>Boot the system from the Solaris Software
1 CD, DVD, or from the network, to single-user mode.</para>
<substeps>
<step>
<para>Insert the Device Configuration Assistant boot diskette or the
Solaris Software 1 CD or DVD that you want to boot from.</para>
<note>

<para>If you are using the boot diskette the Device Configuration Assistant
menu is displayed. If you are using the Solaris Software 1 CD or DVD, the
system boots automatically. To enter the Device Configuration Assistant menu,
press Esc to interrupt the boot process, when prompted by the system.</para>
</note>
</step>
<step>
<para>If the system displays the <literal>Press any key to reboot</literal> prompt,
press any key to reboot the system.</para>
<para>You can also use the Reset
button at this prompt. If the system is shut down, turn the system on with
the power switch.</para>
</step>
</substeps>
</step>
<step>
<para>The Current Boot Parameters menu is displayed after a few minutes.</para>
</step>
<step>
<para>Type <command>b -s</command> at the prompt. Press Enter.</para>
<para>After a few minutes, the single-user mode <literal>#</literal> prompt
is displayed.</para>
</step>
<step xml:id="hbx86boot-step-27">
<para>Mount the root (<filename>/</filename>)
file system that contains the invalid <filename>passwd</filename> file.</para>
</step>
<step xml:id="hbx86boot-step-28">
<para>Change to the newly mounted <filename>etc</filename> directory.</para>
</step>
<step xml:id="hbx86boot-step-30">
<para>Make the necessary change to the file by
using an editor.</para>
</step>
<step xml:id="hbx86boot-step-31">
<para>Change to the root (<filename>/</filename>)
directory.</para>
</step>
<step xml:id="hbx86boot-step-32">
<para>Unmount the <filename>/a</filename> directory.</para>
</step>
<step xml:id="hbx86boot-step-33">
<para>Reboot the system. Verify that the system
has booted to run level 3.</para>
<para>The login prompt is displayed when
the boot process has finished successfully.</para>
<screen>
<replaceable>host-name</replaceable> console login:</screen>
</step>
</procedure>
<example arch="x86">

<title>
Solaris 10: Booting a System for Recovery Purposes</title>
<para>
<indexterm xml:id="hbx86boot-ix1025">
<primary>repairing the <filename>/etc/passwd</filename> file</primary>
<secondary>x86</secondary>
</indexterm>
<indexterm xml:id="hbx86boot-ix1026">
<primary>
<filename>/etc/passwd</filename> file</primary>
<secondary>recovering (example of)</secondary>
<tertiary>x86</tertiary>
</indexterm>
<indexterm xml:id="indexterm-223">
<primary>
<filename>passwd</filename> file</primary>
<secondary>recovering (example of)</secondary>
<tertiary>x86</tertiary>
</indexterm>The following example shows how to repair the <filename>/etc/passwd</filename> file
after booting the system automatically from a local CD-ROM in the Solaris
10 OS. GRUB based booting was introduced in the Solaris Express 6/05 release.
For information about booting a system for recovery purposes in a GRUB based
boot environment, see <olink remap="external" targetdoc="chapter-11.xml" targetptr="fvznb">
How to Boot the Failsafe Archive for Recovery Purposes</olink>.</para>
<screen>SunOS Secondary Boot version 3.00



                              Solaris Booting System



Running Configuration Assistant...





If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.

Press ESCape to interrupt autoboot in 5 seconds.





Initializing system
Please wait...


                         &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@1/sd@0,0:a
Boot args:


Select the type of installation you want to perform:

				1 Solaris Interactive
				2 Custom JumpStart
				3 Solaris Interactive Text (Desktop session)
				4 Solaris Interactive Text (Console session)
Enter the number of your choice followed by the &lt;ENTER&gt; key.
Alternatively, enter custom boot arguments directly.

If you wait for 30 seconds without typing anything,
an interactive installation will be started.

Select type of installation: <userinput>b -s</userinput>
      .
      .
      .
# <userinput>mount /dev/dsk/c0t0d0s0 /a</userinput>
      .
      .
      .
# <userinput>cd /a/etc</userinput>
# <userinput>vi passwd</userinput>
<lineannotation>(Remove invalid entry)</lineannotation>
# <userinput>cd /</userinput>
# <userinput>umount /a</userinput>
# <userinput>init 6</userinput>
</screen>
</example>
</task>
</sect2>
<sect2>
<title/>
<task arch="x86" id="hbx86boot-59">

<title>
How to Boot a System With the Kernel
Debugger (<command>kmdb</command>)</title>
<tasksummary>
<para>This procedure shows the basics for loading the kernel debugger (<command>kmdb</command>) in the Solaris 10 OS. The <command>savecore</command> feature
is enabled by default. For more detailed information about using the kernel
debugger, see the <olink remap="external" targetdoc="816-5041">
<citetitle remap="book">Solaris Modular Debugger Guide</citetitle>
</olink>.</para>
<para>For step-by-step instructions on booting a system with the kernel debugger
in the current Solaris release, see <olink remap="external" targetdoc="chapter-11.xml" targetptr="fvzpl">
How to Boot a System With the Kernel Debugger in the GRUB Based Boot Environment (<command>kmdb</command>)</olink>.</para>
</tasksummary>
<procedure>
<step>
<para>Boot the system.</para>
</step>
<step>
<para>Type <command>b <option>
k</option>
</command> at the <literal>Select
(b)oot or (i)nterpreter</literal> prompt. Press Enter.</para>
</step>
<step>
<para>Access the kernel debugger.</para>
<para>The method used to enter
the debugger is dependent upon the type of console that is used to access
the system:</para>
<itemizedlist>
<listitem>
<para>If a locally attached keyboard is being used, press F1–A.</para>
</listitem>
<listitem>
<para>If a serial console is being used, send a break by using the
method appropriate to the type of serial console that is being used.</para>
</listitem>
</itemizedlist>
<para>A welcome message is displayed when you access the kernel debugger for
the first time.</para>
</step>
</procedure>
<example arch="x86">

<title>
Booting a System With the Kernel Debugger (<command>kmdb</command>)</title>
<para>Typing <command>b</command> <option>
k</option> at the <literal>Select
(b)oot or (i)nterpreter</literal> boot prompt boots a system to its default
mode and also loads <command>kmdb</command>. This example shows how to boot
an x86 based system that has 32–bit computing capabilities to 32–bit
mode and also load <command>kmdb</command>.</para>
<screen>Press any key to reboot.
.
.
.
&lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults
Running Configuration Assistant...
                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <userinput>b -k</userinput>
Loading kmdb...
SunOS Release 5.10 Version gate:2004-10-21 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
.
.
.</screen>
</example>
<example arch="amd64" xml:id="ffkto">

<title>
Manually Booting a System That Has 64-Bit Computing Capabilities to
64-Bit Mode With the Kernel Debugger (<command>kmdb</command>)</title>
<para>This example shows how to manually boot an x86 based system that has
64-bit computing capabilities to 64-bit mode with <command>kmdb</command>. <indexterm xml:id="indexterm-224">
<primary>booting</primary>
<secondary>64-bit x86 based system in 32-bit mode (example of)</secondary>
</indexterm>
</para>
<screen>Press any key to reboot
        .
        .
        .
            &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:
Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults

            &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <userinput>b kernel/amd64/unix -k</userinput>
Loading kmdb...</screen>
</example>
<example arch="amd64" xml:id="ffzpu" wordsize="bits32">

<title>
Manually Booting a System That Has 64-Bit Computing Capabilities to
32-Bit Mode With the Kernel Debugger (<command>kmdb</command>)</title>
<para>This example shows how to manually boot an x86 based system that has
64-bit computing capabilities to 32-bit mode with <command>kmdb</command>. <indexterm xml:id="indexterm-225">
<primary>booting</primary>
<secondary>64-bit x86 based system in 32-bit mode (example of)</secondary>
</indexterm>
</para>
<screen>Press any key to reboot
        .
        .
        .
            &lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a
Boot args:
Type    b [file-name] [boot-flags] &lt;ENTER&gt;     to boot with options
or      i &lt;ENTER&gt;                              to enter boot interpreter
or      &lt;ENTER&gt;                                to boot with defaults

            &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter: <userinput>b kernel/unix -k</userinput>
Loading kmdb...</screen>
</example>
</task>
</sect2>
<sect2 arch="x86" xml:id="hbx86boot-36">
<title>
Forcing a Crash Dump and Reboot
of the System</title>
<para>Forcing a crash dump and rebooting the system is sometimes necessary
for troubleshooting purposes. The <command>savecore</command> feature is enabled
by default.</para>
<para>For more information on system crash dumps, see <olink remap="external" targetdoc="819-2380" targetptr="tscrashdumps-40145">Chapter 24, <citetitle remap="chapter">Managing System Crash Information (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Advanced Administration</citetitle>
</olink>. </para>
<task arch="x86" xml:id="hbx86boot-89163">
<title>
How to Force a Crash Dump and
Reboot of the System</title>
<tasksummary>
<para>If you cannot use the <command>reboot</command> <option>
d</option> or
the <command>halt</command> <option>
d</option> command, you can use the kernel
debugger, <command>kmdb</command>, to force a crash dump. The kernel debugger
must have been loaded, either at boot, or with the <command>mdb</command> <option>
k</option> command, for the following procedure to work.</para>
<note>

<para>You must be in text mode to enter the kernel debugger (<command>kmdb</command>).
So, first exit any window system.</para>
</note>
</tasksummary>
<procedure>
<step>
<para>If a locally-attached keyboard is being used as the system console,
press F1-A on that keyboard. If the system is configured to use a remote (serial)
console, use the mechanism that is appropriate to that console to send a break
character.</para>
<para>The <command>kmdb</command> prompt is displayed.</para>
</step>
<step>
<para>Use the <literal>systemdump</literal> macro to induce a crash.</para>
<screen>[0]&gt; $&lt;<userinput>systemdump</userinput>
</screen>
<para>Panic messages are displayed, the crash dump is saved, and the system
reboots.</para>
</step>
<step xml:id="hbx86boot-step-44">
<para>Verify that the system has rebooted by
logging in at the console login prompt.</para>
</step>
</procedure>
<example>

<title>
Forcing a Crash Dump and Reboot of the System by Using <command>halt</command> <option>
d</option>
</title>
<para>This example shows how to force a crash dump and reboot of the x86 based
system <literal>neptune</literal> by using the <command>halt</command> <option>
d</option> and <command>boot</command> commands. Use this method to force a crash dump of the system.
You will need to manually reboot the system after running the <command>halt</command> command
with the <option>
d</option> option.</para>
<screen width="100"># <userinput>halt -d</userinput>
Aug 11 12:51:27 neptune halt:
halted by &lt;user&gt; panic[cpu45]/thread=d3971a00: forced crash dump initiated at user request

d363ae58 genunix:kadmin+bd (5, 0, 0, d3fefac0)
d363af88 genunix:uadmin+88 (5, 0, 0, 0, 0, d363afb4)

syncing file systems... done
dumping to /dev/dsk/c0t0d0s1, offset 107806720, content: kernel
100% done: 40223 pages dumped, compression ratio 4.11, dump succeeded
Press any key to reboot.
Resetting...
.
.
.
SunOS Secondary Boot version 3.00
Autobooting from bootpath: /pci@0,0/pci1028,10a@3/sd@0,0:a 
Running Configuration Assistant... 
If the system hardware has changed, or to boot from a different
device, interrupt the autoboot process by pressing ESC.


Initializing system
Please wait...   

&lt;&lt;&lt; Current Boot Parameters &gt;&gt;&gt;
Boot path: /pci@0,0/pci1028,10a@3/sd@0,0:a
Boot args:

Type    b [file-name] [boot-flags] &lt;ENTER&gt;    to boot with options
or      i &lt;ENTER&gt;                             to enter boot interpreter
or      &lt;ENTER&gt;                               to boot with defaults

                  &lt;&lt;&lt; timeout in 5 seconds &gt;&gt;&gt;

Select (b)oot or (i)nterpreter:
Loading kmdb...
SunOS Release 5.10 Version s10_62 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
configuring IPv4 interfaces: iprb0.
add net default: gateway 172.20.26.248
Hostname: neptune
The system is coming up.  Please wait.
checking ufs filesystems
/dev/rdsk/c0t0d0s7: is logging.
NIS domain name is example.com
starting rpc services: rpcbind keyserv ypbind done.
Setting netmask of iprb0 to 255.255.255.0
Setting default IPv4 interface for multicast: add net 224.0/4: gateway venus
syslog service starting.
System dump time: Wed Aug 11 12:51:29 2004
Aug 11 13:13:26 venus savecore: saving system crash dump in /var/crash/venus/*.1
Constructing namelist /var/crash/venus/unix.1
Constructing corefile /var/crash/venus/vmcore.1
100% done: 42157 of 42157 pages saved
volume management starting.
The system is ready.
.
.
.</screen>
</example>
</task>
</sect2>
<sect2 arch="amd64" xml:id="ffktz">
<title>
Troubleshooting a Failed 64-Bit Boot</title>
<indexterm xml:id="indexterm-226">
<primary>troubleshooting</primary>
<secondary>a failed 64-bit boot</secondary>
</indexterm>
<para>In some instances, an attempt to boot a 64-bit capable x86 based system
to 64-bit mode might fail. This failure might produce an error similar to
the following:</para>
<screen>Select (b)oot or (i)nterpreter: <userinput>b kernel/amd64/unix</userinput>
.
.
.
pci: cannot load driver
Cannot load drivers for /pci@0,0/pci1022,7450@a/pci17c2,10@4/sd@0,0:a
(Can't load the root filesystem)
Press any key to reboot.
.
.
.</screen>
<para>In the event such a failure occurs, boot the system to 32-bit mode by
typing the following command at the <literal>Select (b)oot or (i)nterpreter</literal> boot
prompt:</para>
<screen>Select (b)oot or (i)nterpreter: <userinput>b kernel/unix</userinput>
</screen>
<para>For more information, see <olink remap="internal" targetdoc="chapter-12.xml" targetptr="fcoyg">Example 12–3</olink>.</para>
</sect2>
</sect1>
</chapter>
