<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Installing, Booting, Halting, Uninstalling
and Cloning <tt>lx</tt> Branded Zones (Tasks) - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p127.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p129.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="gdduh"></a>Chapter&nbsp;33<h3>Installing, Booting, Halting, Uninstalling
and Cloning <tt>lx</tt> Branded Zones (Tasks)</h3><p>This chapter describes how to install and boot an <tt>lx</tt> branded
zone. The following other tasks are also addressed:</p>
<ul><li><p>Using clone to install a zone on the same system</p>
</li>
<li><p>Halting, rebooting, and uninstalling zones</p>
</li>
<li><p>Removing a zone from a system</p>
</li>
</ul>
<a name="gdqtk"></a><h3><tt>lx</tt> Branded Zone Installation (Task
Map)</h3>
<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Obtain the Linux achives.</p>
</td><td><p>Before you can install the <tt>lx</tt> branded zone, you must
first obtain the Linux archives.</p>
</td><td><p><a href="p128.html#gdegc">How to Obtain the Linux Archives</a></p>
</td></tr>
<tr><td><p>Install a configured <tt>lx</tt> branded zone.</p>
</td><td><p>Install a zone that is in the configured state.</p>
</td><td><p><a href="p128.html#gddwf">How to Install an <tt>lx</tt> Branded Zone</a></p>
</td></tr>
<tr><td><p>(Optional) Install a subset of the available packages.</p>
</td><td><p>When installing from CD or ISO images, you can install a subset of the
packages on the install media.</p>
</td><td><p><a href="p129.html">How to Install a Subset of the Packages</a></p>
</td></tr>
<tr><td><p>(Optional) Enable networking in the zone.</p>
</td><td><p>Networking is disabled by default and must be enabled if you want this
functionality.</p>
</td><td><p><a href="p129.html#gdlhu">How to Enable Networking in an <tt>lx</tt> Branded Zone</a></p>
</td></tr>
<tr><td><p>Obtain the universally unique identifier (UUID) for the zone.</p>
</td><td><p>This separate identifier, assigned when the zone is installed, is an
alternate way to identify a zone.</p>
</td><td><p><a href="p129.html#gdqsq">How to Obtain the UUID of an Installed Branded Zone</a></p>
</td></tr>
<tr><td><p>(Optional) Transition an installed zone to the ready state.</p>
</td><td><p>You can skip this procedure if you want to boot the zone and use it
immediately. </p>
</td><td><p><a href="p129.html#gdelv">(Optional) Placing an Installed <tt>lx</tt>Branded Zone in the Ready State</a></p>
</td></tr>
<tr><td><p>Boot an <tt>lx</tt> branded zone.</p>
</td><td><p>Booting a zone places the zone in the running state. A zone can be booted
from the ready state or from the installed state. </p>
</td><td><p><a href="p129.html#gdekk">How to Boot an <tt>lx</tt> Branded Zone</a></p>
</td></tr>
<tr><td><p>Boot a zone in single-user mode.</p>
</td><td><p>Boots only to milestone <tt>svc:/milestone/single-user:default</tt>.
This milestone is equivalent to <tt>init</tt> level <tt>s</tt>.
See the <tt>init</tt>(1M) and <tt>svc.startd</tt>(1M) man pages.</p>
</td><td><p><a href="p71.html#fnjyv">How to Boot a Zone in Single-User Mode</a></p>
</td></tr>
</table><a name="gdbhu"></a><h3>Installing and Booting <tt>lx</tt> Branded
Zones</h3>
<p>Use the <tt>zoneadm</tt> command described in the <tt>zoneadm</tt>(1M) man
page to perform installation tasks for a non-global zone.</p>
<a name="gdegc"></a><h4><img src="graphics/procedure.gif"> How to Obtain the Linux Archives</h4>
<p><a name="indexterm-397"></a>Before you can
install the <tt>lx</tt> branded zone, you must first obtain the
Linux archives. The archives are distributed in the following forms:</p>
<ul><li><p>A compressed <tt>tar</tt> archive (a <b>tarball</b>)</p>
</li>
<li><p>A set of CD-ROM or DVD discs</p>
</li>
<li><p>A group of ISO images</p>
</li>
</ul>
<ol><li><b>Obtain the Linux distribution using one of the following methods:</b><ul><li><p>To download a tarball, go to <a href="http://opensolaris.org/os/community/brandz/downloads">http://opensolaris.org/os/community/brandz/downloads</a>. Follow the instructions on the downloads site.</p>
</li>
<li><p>To obtain a set of CD-ROM or DVD discs, go to the CentOS site
at <a href="http://www.centos.org">http://www.centos.org</a> or
the Red Hat site at <a href="http://www.redhat.com">http://www.redhat.com</a>. </p>
</li>
<li><p>To obtain an ISO image, go to the CentOS site at <a href="http://www.centos.org">http://www.centos.org</a> or the
Red Hat site at <a href="http://www.redhat.com">http://www.redhat.com</a>. </p>
</li>
</ul>
</li></ol><a name="gddwf"></a><h4><img src="graphics/procedure.gif"> How to Install an <tt>lx</tt> Branded Zone</h4>
<p><a name="indexterm-398"></a><a name="indexterm-399"></a><a name="indexterm-400"></a><a name="indexterm-401"></a><a name="indexterm-402"></a><a name="indexterm-403"></a>This procedure is used to install
a configured <tt>lx</tt> branded zone. Once the zone is installed,
all software configuration and management has to be done by the zone administrator
using Linux tools from inside the zone.</p>
<p>See <a href="p128.html#gdekz">Example 33-1</a>, <a href="p128.html#gdelj">Example 33-2</a>, and <a href="p128.html#gdelc">Example 33-3</a> for examples of zone installation command lines using the
different distribution paths. If you install from discs or from an ISO image,
you must specify Sun package cluster categories. See <a href="p125.html#gdlxb"><tt>lx</tt> Branded Zone Installation Methods</a> for information on package cluster
categories.</p>
<p>Note that you can verify a zone prior to installing it. If you skip
this procedure, the verification is performed automatically when you install
the zone. The procedure is documented in <a href="p70.html#z.inst.task-6">(Optional) How to Verify a Configured Zone Before It Is Installed</a>.</p>
<p>You must be the global administrator in the global zone to perform this
procedure.</p>
<hr>
<p><b>Note - </b>In Step 2, <b>if</b> the <tt>zonepath</tt> is
on ZFS, the <tt>zoneadm</tt> <tt>install</tt> command
automatically creates a ZFS file system (dataset) for the <tt>zonepath</tt> when
the zone is installed. You can block this action by including the <tt>-x</tt> <tt>nodataset</tt> parameter.</p>
<hr>
<ol><li><a name="gddwa"></a><b>Become superuser, or assume the Primary Administrator
role.</b><p>To create the role and assign the role to a user, see Using
the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><b>(Optional) If you intend to install from DVD or CD, enable <tt>volfs</tt> on your system and verify that it is running.</b><pre>global# <tt><b>svcadm enable svc:/system/filesystem/volfs:default</b></tt></pre><pre>global# <tt><b>svcs | grep volfs</b></tt></pre><p> You will see a display similar to the following:</p><pre>online  17:30 svc:/system/filesystem/volfs:default</pre></li><li><a name="gddvt"></a><b>Install the configured zone <tt>lx-zone</tt> by
using the <tt>zoneadm</tt> command with the <tt>install</tt> option
and the path to the archive.</b><ul><li><b>Install the zone, automatically creating a ZFS file system if
the <tt>zonepath</tt> is on ZFS.</b><pre>global# <tt><b>zoneadm -z lx-zone install -d archive_path</b></tt></pre><p>The system will display:</p><pre>A ZFS file system has been created for this zone.</pre></li><li><b>Install the zone that has a <tt>zonepath</tt> on ZFS,
but do <b>not</b> automatically create the ZFS file system.</b><pre>global# <tt><b>zoneadm -z lx-zone install -x nodataset -d archive_path</b></tt></pre></li></ul><p>You will see various messages as the files and directories needed for
the zone's root file system, as well as the package files, are installed under
the zone's root path.</p><hr>
<p><b>Note - </b>If you do not specify <tt>archive_path</tt>, the default
is <tt>CD</tt>.</p>
<hr>
</li><li><b>(Optional) If an error message is displayed and the zone fails
to install, type the following to get the zone state:</b><pre>global# <tt><b>zoneadm -z lx-zone list -iv</b></tt></pre><ul><li><p>If the state is listed as configured, make the corrections
specified in the message and try the <tt>zoneadm</tt> <tt>install</tt> command
again.</p>
</li>
<li><p>If the state is listed as incomplete, first execute this command:</p>
<pre>global# <tt><b>zoneadm -z lx-zone uninstall</b></tt></pre><p>Then make the corrections  specified in the message, and try the <tt>zoneadm</tt> <tt>install</tt> command again.</p>
</li>
</ul>
</li><li><a name="gddwi"></a><b>When the installation completes, use the <tt>list</tt> subcommand
with the <tt>-i</tt> and <tt>-v</tt> options to list the installed
zones and verify the status.</b><pre>global# <tt><b>zoneadm list -iv</b></tt></pre><p>You will see a display that is similar to the following:</p><pre>ID  NAME     STATUS       PATH                           BRAND      IP
 0  global   running      /                              native     shared
 -  lx-zone  installed    /export/home/lx-zone           lx         shared</pre></li></ol><a name="gdekz"></a>Example 33-1 Install Command Using a CentOS Compressed <tt>tar</tt> Archive<pre>global# <tt><b>zoneadm -z lx-zone install -d /export/centos_fs_image.tar.bz2</b></tt></pre><a name="gdelj"></a>Example 33-2 Install Command Using CentOS CDs<p>For CD or DVD installation, <tt>volfs</tt> must be enabled
on your system. You must specify a software cluster package. For example,
use <tt>development</tt> to install a full environment, or type
the names of particular clusters. If you do not specify a cluster package, <tt>desktop</tt> is installed by default. The CD device is <tt>/cdrom/cdrom0</tt>.</p>
<pre>global# <tt><b>zoneadm -z lx-zone install -d /cdrom/cdrom0 development</b></tt></pre><a name="gdelc"></a>Example 33-3 Install Command Using CentOS ISO Images<p>You must specify a software cluster package. Use <tt>development</tt> to
install a full environment, or specify particular clusters. If you do not
specify a cluster package, <tt>desktop</tt> is installed by default.
The CentOS ISO images  reside in the directory <tt>/export/centos_3.7</tt>.</p>
<pre>global# <tt><b>zoneadm -z lx-zone install -d /export/centos_3.7 development</b></tt></pre><h6>See Also</h6><p>For more information on datasets, see <i>Solaris ZFS Administration Guide</i></p>
<h6>Troubleshooting</h6><p>If a zone installation is interrupted or fails, the zone is left in
the incomplete state. Use <tt>uninstall</tt> <tt>-F</tt> to
reset the zone to the configured state.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p127.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p129.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

