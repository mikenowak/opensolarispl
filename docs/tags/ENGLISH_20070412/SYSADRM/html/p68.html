<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>The <tt>zoneadmd</tt> Daemon - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p67.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p67.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p69.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="z.inst.ov-12"></a><h3>The <tt>zoneadmd</tt> Daemon</h3>
<p><a name="indexterm-238"></a>The zones administration daemon, <tt>zoneadmd</tt>,
is the primary process for managing the zone's virtual platform. The daemon
is also responsible for managing zone booting and shutting down. There is
one <tt>zoneadmd</tt> process running for each active (ready, running,
or shutting down) zone on the system.</p>
<p>The <tt>zoneadmd</tt> daemon sets up the zone as specified
in the zone configuration. This process includes the following actions:</p>
<ul><li><p>Allocating the zone ID and starting the <tt>zsched</tt> system
process</p>
</li>
<li><p>Setting zone-wide resource controls</p>
</li>
<li><p>Preparing the zone's devices as specified in the zone configuration</p>
</li>
<li><p>Setting up network interfaces</p>
</li>
<li><p>Mounting loopback and conventional file systems</p>
</li>
<li><p>Instantiating and initializing the zone console device</p>
</li>
</ul>
<p>Unless the <tt>zoneadmd</tt> daemon is already running, it
is automatically started by <tt>zoneadm</tt>. Thus, if the daemon
is not running for any reason, any invocation of <tt>zoneadm</tt> 
to administer the zone will restart <tt>zoneadmd</tt>.</p>
<p>The man page for the <tt>zoneadmd</tt> daemon is <tt>zoneadmd</tt>(1M).</p>
<a name="z.inst.ov-13"></a><h3>The <tt>zsched</tt> Zone Scheduler</h3>
<p><a name="indexterm-239"></a>An active zone is a zone that is in the ready state, the running
state, or the shutting down state. Every active zone has an associated kernel
process, <tt>zsched</tt>. Kernel threads doing work on behalf of
the zone are owned by <tt>zsched</tt>. The <tt>zsched</tt> process
enables the zones subsystem to keep track of per-zone kernel threads.</p>
<a name="z.inst.ov-4"></a><h3>Zone Application Environment</h3>
<p>The <tt>zoneadm</tt> command is used to create the zone application
environment.</p>
<p>After a non-global zone is booted for the first time, the internal configuration
of the zone must be created. The internal configuration specifies a naming
service to use, the default locale and time zone, the zone's root password,
and other aspects of the application environment. For more information, see <a href="p75.html#z.login.ov-14">Internal Zone Configuration</a> and <a href="p77.html#z.login.task-31">Performing the Initial Internal Zone Configuration</a>.
Note that the default locale and time zone for a zone can be configured independently
of the global settings.</p>
<a name="z.inst.ov-6"></a><h3>About Halting, Rebooting, and Uninstalling
Zones</h3>
<p>This section provides an overview of the procedures for halting, rebooting,
uninstalling, and cloning zones.</p>
<a name="z.inst.ov-7"></a><h4>Halting a Zone</h4>
<p><a name="indexterm-240"></a><a name="indexterm-241"></a><a name="indexterm-242"></a>The <tt>zoneadm</tt> <tt>halt</tt> command
is used to remove both the application environment and the virtual platform
for a zone. The zone is then brought back to the installed state. All processes
are killed, devices are unconfigured, network interfaces are destroyed, file
systems are unmounted, and the kernel data structures are destroyed.</p>
<p>The <tt>halt</tt> command does <b>not</b> run
any shutdown scripts within the zone. To shut down a zone, see <a href="p79.html">How to Use <tt>zlogin</tt> to Shut Down a Zone</a>.</p>
<p>If the halt operation fails, see <a href="p113.html#gcrsr">Zone Does Not Halt</a>.</p>
<a name="z.inst.ov-8"></a><h4>Rebooting a Zone</h4>
<p><a name="indexterm-243"></a><a name="indexterm-244"></a>The <tt>zoneadm</tt> <tt>reboot</tt> command is used to reboot a zone. The
zone is halted and then booted again. The zone ID will change when the zone
is rebooted.</p>
<a name="gdepq"></a><h4>Zone Boot Arguments</h4>
<p><a name="indexterm-245"></a>Zones support the following boot arguments used with the <tt>zoneadm</tt> <tt>boot</tt> and <tt>reboot</tt> commands:</p>
<ul><li><p><tt>-i</tt> <i>altinit</i></p>
</li>
<li><p><tt>-m</tt> <i>smf_options</i></p>
</li>
<li><p><tt>-s</tt></p>
</li>
</ul>
<p>The following definitions apply:</p>
<dl><dt><tt>-i</tt> <i>altinit</i></dt>
<dd><p>Selects an alternative executable to be the first process. <i>altinit</i> must be a valid path to an executable. The default first
process is described in <tt>init</tt>(1M).</p>
</dd>
<dt><tt>-m</tt> <i>smf_options</i></dt>
<dd><p>Controls the boot behavior of SMF. There are two categories
of options, recovery options and messages options. Message options determine
the type and number of messages that displays during boot. Service options
determine the services that are used to boot the system.</p>
<p>Recovery options include the following:</p>
<dl><dt>debug</dt>
<dd><p>Prints standard per-service output and all <tt>svc.startd</tt> messages
to log.</p>
</dd>
<dt><tt>milestone=</tt><i>milestone</i></dt>
<dd><p>Boot to the subgraph defined by the given milestone. Legitimate
  milestones are <tt>none</tt>, <tt>single-user</tt>, <tt>multi-user</tt>, <tt>multi-user-server</tt>, and <tt>all</tt>.</p>
</dd>
</dl>
<p>Message options include the following:</p>
<dl><dt><tt>quiet</tt></dt>
<dd><p>Prints standard per-service output and error messages requiring
administrative intervention</p>
</dd>
<dt><tt>verbose</tt></dt>
<dd><p>Prints standard per-service output and messages providing
more information.</p>
</dd>
</dl>
</dd>
<dt><tt>-s</tt></dt>
<dd><p>Boots only to milestone <tt>svc:/milestone/single-user:default</tt>. This milestone is equivalent to <tt>init</tt> level <tt>s</tt>.</p>
</dd>
</dl>
<p>For usage examples, see <a href="p71.html#z.inst.task-13">How to Boot a Zone</a> and <a href="p71.html#fnjyv">How to Boot a Zone in Single-User Mode</a>. </p>
<p>For information on the Solaris service management facility (SMF) and <tt>init</tt> , see Chapter
14, Managing Services (Overview), in <i>System Administration Guide: Basic Administration</i>, <tt>svc.startd</tt>(1M) and <tt>init</tt>(1M).</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p67.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p69.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

