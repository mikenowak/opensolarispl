<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Using IP Security Architecture in Zones - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p95.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p100.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p102.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="z.admin.ov-29"></a><h3>Using IP Security Architecture in Zones</h3>
<p><a name="indexterm-319"></a><a name="indexterm-320"></a>The
Internet Protocol Security Architecture (IPsec), which provides IP datagram
protection, is described in Chapter
21, IP Security Architecture (Overview), in <i>System Administration Guide: IP Services</i>.
The Internet Key Exchange (IKE) protocol is used to manage the required keying
material for authentication and encryption automatically.</p>
<p>For more information, see the <tt>ipsecconf</tt>(1M) and <tt>ipseckey</tt>(1M) man pages.</p>
<a name="geodp"></a><h4>IP Security Architecture in Shared-IP Zones</h4>
<p>IPsec can be used in the global zone. However, IPsec in a non-global
zone cannot use IKE. Therefore, you must manage the IPsec keys and policy
for the non-global zones by running the <tt>ipseckey</tt> and <tt>ipsecconf</tt> commands from the global zone. Use the source address
that corresponds to the non-global zone that you are configuring.</p>
<a name="geodx"></a><h4>IP Security Architecture in Exclusive-IP Zones</h4>
<p>IPsec can be used in exclusive-IP zones.</p>
<a name="z.admin.ov-20"></a><h3>Using Solaris Auditing in Zones</h3>
<p>Solaris auditing is described in Chapter 27, Solaris Auditing
(Overview), in <i>System Administration Guide:
Security Services</i>. For zones considerations associated
with auditing, see the following sections:</p>
<ul><li><p>Chapter
28, Planning for Solaris Auditing, in <i>System Administration Guide: Security Services</i></p>
</li>
<li><p>Auditing and Solaris Zones in <i>System Administration Guide: Security Services</i></p>
</li>
</ul>
<p>An audit record describes an event, such as logging in to a system or
writing to a file. The record is composed of tokens, which are sets of audit
data. By using the <tt>zonename</tt> token, you can configure Solaris
auditing to identify audit events by zone. Use of the <tt>zonename</tt> token
allows you to produce the following information:</p>
<ul><li><p>Audit records that are marked with the name of the zone that
generated the record</p>
</li>
<li><p>An audit log for a specific zone that the global administrator
can make available to the zone administrator</p>
</li>
</ul>
<a name="z.admin.ov-27"></a><h4>Configuring Audit in the Global Zone</h4>
<p>Solaris audit trails are configured in the global zone. Audit policy
is set in the global zone and applies to processes in all zones. The audit
records can be marked with the name of the zone in which the event occurred.
To include zone names in audit records, you must edit the <tt>/etc/security/audit_startup</tt> file before you install any non-global zones. The zone name selection
is case-sensitive.</p>
<p>To configure auditing in the global zone to include all zone audit records,
add this line to the <tt>/etc/security/audit_startup</tt> file:</p>
<pre>/usr/sbin/auditconfig -setpolicy +zonename</pre><p>As the global administrator in the global zone, execute the <tt>auditconfig</tt> utility:</p>
<pre>global# <tt><b>auditconfig -setpolicy +zonename</b></tt></pre><p>For additional information, see the <tt>audit_startup</tt>(1M) and <tt>auditconfig</tt>(1M) man pages and &ldquo;Configuring
Audit Files (Task Map)&rdquo; in <i>System Administration Guide: Security
Services</i>.</p>
<a name="z.admin.ov-30"></a><h4>Configuring User Audit Characteristics in
a Non-Global Zone</h4>
<p>When a non-global zone is installed, the <tt>audit_control</tt> file
and the <tt>audit_user</tt> file in the global zone are copied to
the zone's <tt>/etc/security</tt> directory. These files might
require modification to reflect the zone's audit needs.</p>
<p>For example, each zone can be configured to audit some users differently
from others. To apply different per-user preselection criteria, both the <tt>audit_control</tt> and the <tt>audit_user</tt> files must
be edited. The <tt>audit_user</tt> file in the non-global zone might
also require revisions to reflect the user base for the zone if necessary.
Because each zone can be configured differently with regard to auditing users,
it is possible for the  <tt>audit_user</tt> file to be empty.</p>
<p>For additional information, see the <tt>audit_control</tt>(4) and <tt>audit_user</tt>(4) man pages.</p>
<a name="z.admin.ov-28"></a><h4>Providing Audit Records for a Specific Non-Global
Zone</h4>
<p>By including the <tt>zonename</tt> token as described in <a href="p101.html#z.admin.ov-27">Configuring Audit in the Global Zone</a>, Solaris
audit records can be categorized by zone. Records from different zones can
then be collected by using the <tt>auditreduce</tt> command to create
logs for a specific zone.</p>
<p>For more information, see the <tt>audit_startup</tt>(1M) and <tt>auditreduce</tt>(1M) man pages.</p>
<a name="z.admin.ov-21"></a><h3>Core Files in Zones</h3>
<p>The <tt>coreadm</tt> command is used to specify the name and
location of core files produced by abnormally terminating processes. Core
file paths that include the <i>zonename</i> of the zone
in which the process executed can be produced by specifying the <tt>%z</tt> variable.
The path name is relative to a zone's root directory.</p>
<p>For more information, see the <tt>coreadm</tt>(1M) and <tt>core</tt>(4) man pages.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p100.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p102.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

