<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Projects and Tasks (Overview) - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p5.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p7.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmtaskproj-1"></a>Chapter&nbsp;2<h3>Projects and Tasks (Overview)</h3><p>This chapter discusses the <b>project</b> and <b>task</b> facilities
of Solaris resource management. Projects and tasks are used to label workloads
and separate them from one another.</p>
<p>The following topics are covered in this chapter:</p>
<ul><li><p><a href="p6.html#rmtaskproj-2">Project and Task Facilities</a></p>
</li>
<li><p><a href="p6.html#rmtaskproj-6">Project Identifiers</a></p>
</li>
<li><p><a href="p8.html">Task Identifiers</a></p>
</li>
<li><p><a href="p8.html#rmtaskproj-14">Commands Used With Projects and Tasks</a></p>
</li>
</ul>
<p>To use the projects and tasks facilities, see <a href="p9.html">Chapter&nbsp;3, Administering Projects and Tasks</a>.</p>
<a name="rmtaskproj-2"></a><h3>Project and Task Facilities</h3>
<p>To optimize workload response, you must first be able to identify the
workloads that are running on the system you are analyzing. This information
can be difficult to obtain by using either a purely process-oriented or a
user-oriented method alone. In the Solaris system, you have two additional
facilities that can be used to separate and identify workloads: the project
and the task. The <b>project</b> provides a network-wide administrative
identifier for related work. The  <b>task</b> collects a group
of processes into a manageable entity that represents a workload component.</p>
<p>The controls specified in the <tt>project</tt> name service
database are set on the process, task, and project.  Since process and task
controls are inherited across <tt>fork</tt> and <tt>settaskid</tt> system
calls, all processes and tasks that are created within the project inherit
these controls. For information on these system calls, see the <tt>fork</tt>(2) and <tt>settaskid</tt>(2) man pages.</p>
<p>Based on their project or task membership, running processes can be
manipulated with standard Solaris commands. The extended accounting facility
can report on both process usage and task usage, and tag each record with
the governing project identifier. This process enables offline workload analysis
to be correlated with online monitoring. The project identifier can be shared
across multiple machines through the <tt>project</tt> name service
database. Thus, the resource consumption of related workloads that run on
(or span) multiple machines can ultimately be analyzed across all of the machines.</p>
<a name="rmtaskproj-6"></a><h3>Project Identifiers</h3>
<p><a name="indexterm-6"></a>The project identifier is an administrative identifier that is
used to identify related work. The project identifier can be thought of as
a workload tag equivalent to the user and group identifiers. A user or group
can belong to one or more projects. These projects can be used to represent
the workloads in which the user (or group of users) is allowed to participate.
This membership can then be the basis of chargeback that is based on, for
example, usage or initial resource allocations. Although a user must be assigned
to a default project, the processes that the user launches can be associated
with any of the projects of which that user is a member.</p>
<a name="rmtaskproj-3"></a><h4>Determining a User's Default Project</h4>
<p><a name="indexterm-7"></a>To log in to
the system, a user must be assigned a default project. A user is automatically
a member of that default project, even if the user is not in the user or group
list specified in that project.</p>
<p>Because each process on the system possesses project membership, an
algorithm to assign a default project to the login or other initial process
is necessary. The algorithm is documented in the man page <tt>getprojent</tt>(3C). The system follows ordered steps to determine the default
project. If no default project is found, the user's login, or request to start
a process, is denied.</p>
<p>The system sequentially follows these steps to determine a user's default
project:</p>
<ol><li><p><a name="indexterm-8"></a>If the user has an entry with a <tt>project</tt> attribute
defined in the <tt>/etc/user_attr</tt> extended user attributes
database, then the value of the <tt>project</tt> attribute is the
default project. See the <tt>user_attr</tt>(4) man
page.</p>
</li>
<li><p>If a project with the name <tt>user.</tt><i>user-id</i> is present in the <tt>project</tt> database, then
that project is the default project. See the <tt>project</tt>(4) man page for more information.</p>
</li>
<li><p>If a project with the name <tt>group.</tt><i>group-name</i> is present in the <tt>project</tt> database,
where <i>group-name</i> is the name of the default group
for the user, as specified in the <tt>passwd</tt> file, then that
project is the default project. For information on the <tt>passwd</tt> file,
see the <tt>passwd</tt>(4) man
page.</p>
</li>
<li><p>If the special project <tt>default</tt> is present
in the <tt>project</tt> database, then that project is the default
project.</p>
</li>
</ol>
<p>This logic is provided by the <tt>getdefaultproj()</tt> library
function. See the <tt>getprojent</tt>(3PROJECT) man page for more information.</p>
<a name="rmtaskproj-15"></a><h4>Setting User Attributes With the <tt>useradd</tt>, <tt>usermod</tt>, and <tt>passmgmt</tt> Commands</h4>
<p>You can use the following commands with the <tt>-K</tt> option
and a <i>key</i><tt>=</tt><i>value</i> pair
to set user attributes in local files :</p>
<dl><dt><tt>passmgmt</tt></dt>
<dd><p>Modify user information</p>
</dd>
<dt><tt>useradd</tt></dt>
<dd><p>Set default project for user</p>
</dd>
<dt><tt>usermod</tt></dt>
<dd><p>Modify user information</p>
</dd>
</dl>
<p>Local files can include the following:</p>
<ul><li><p><tt>/etc/group</tt></p>
</li>
<li><p><tt>/etc/passwd</tt></p>
</li>
<li><p><tt>/etc/project</tt></p>
</li>
<li><p><tt>/etc/shadow</tt></p>
</li>
<li><p><tt>/etc/user_attr</tt></p>
</li>
</ul>
<p>If a network naming service such as NIS is being used to supplement
the local file with additional entries, these commands cannot change information
supplied by the network name service. However, the commands do verify the
following against the external <b>naming service database</b>:</p>
<ul><li><p>Uniqueness of the user name (or role)</p>
</li>
<li><p>Uniqueness of the user ID</p>
</li>
<li><p>Existence of any group names specified</p>
</li>
</ul>
<p>For more information, see the <tt>passmgmt</tt>(1M), <tt>useradd</tt>(1M), <tt>usermod</tt>(1M), and <tt>user_attr</tt>(4) man pages.</p>
<a name="rmtaskproj-9"></a><h4><tt>project</tt> Database</h4>
<p><a name="indexterm-9"></a><a name="indexterm-10"></a>You can store project data in a local
file, in the Domain Name System (DNS), in a Network Information Service (NIS)
project map, or in a Lightweight Directory Access Protocol (LDAP) directory
service. The <tt>/etc/project</tt> file or naming service is used
at login and by all requests for account management by the pluggable authentication
module (PAM) to bind a user to a default project.</p>
<hr>
<p><b>Note - </b>Updates to entries in the project database, whether to the <tt>/etc/project</tt> file or to a representation of the database in a network
naming service, are not applied to currently active projects. The updates
are applied to new tasks that join the project when either the <tt>login</tt> or
the <tt>newtask</tt> command is used. For more information, see
the <tt>login</tt>(1) and <tt>newtask</tt>(1) man pages.</p>
<hr>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p5.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p7.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

