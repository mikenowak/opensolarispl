<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Creating and Administering Resource Pools
(Tasks) - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p41.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p43.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmpool.task-1"></a>Chapter&nbsp;13<h3>Creating and Administering Resource Pools
(Tasks)</h3><p>This chapter describes how to set up and administer resource pools on
your system.</p>
<p>For background information about resource pools, see <a href="p32.html">Chapter&nbsp;12, Resource Pools (Overview)</a>.</p>
<h3>Administering Resource Pools (Task Map)</h3>
<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Enable or disable resource pools.</p>
</td><td><p>Activate or disable resource pools on your system.</p>
</td><td><p><a href="p42.html#rmpool.task-57">Enabling and Disabling the Pools Facility</a></p>
</td></tr>
<tr><td><p>Enable or disable dynamic resource pools.</p>
</td><td><p>Activate or disable dynamic resource pools facilities on your system.</p>
</td><td><p><a href="p42.html#rmpool.task-57">Enabling and Disabling the Pools Facility</a></p>
</td></tr>
<tr><td><p>Create a static resource pools configuration.</p>
</td><td><p>Create a static configuration file that matches the current dynamic
configuration.  For more information, see <a href="p34.html">Resource Pools Framework</a>.</p>
</td><td><p><a href="p43.html#rmpool.task-84">How to Create a Static Configuration</a></p>
</td></tr>
<tr><td><p>Modify a resource pools configuration.</p>
</td><td><p>Revise a pools configuration on your system, for example, by creating
additional pools.</p>
</td><td><p><a href="p43.html#rmpool.task-15">How to Modify a Configuration</a></p>
</td></tr>
<tr><td><p>Associate a resource pool with a scheduling class.</p>
</td><td><p>Associate a pool with a scheduling class so that all processes bound
to the pool use the specified scheduler.</p>
</td><td><p><a href="p43.html#rmpool.task-22">How to Associate a Pool With a Scheduling Class</a></p>
</td></tr>
<tr><td><p>Set configuration constraints and define configuration objectives.</p>
</td><td><p>Specify objectives for <tt>poold</tt> to consider when taking
corrective action. For more information on configuration objectives, see <a href="p36.html"><tt>poold</tt> Overview</a>.</p>
</td><td><p><a href="p44.html">How to Set Configuration Constraints</a> and <a href="p44.html#rmpool.task-108">How to Define Configuration Objectives</a></p>
</td></tr>
<tr><td><p>Set the logging level.</p>
</td><td><p>Specify the level of logging information that <tt>poold</tt> generates.</p>
</td><td><p><a href="p44.html#rmpool.task-117">How to Set the <tt>poold</tt> Logging Level</a></p>
</td></tr>
<tr><td><p>Use a text file with the <tt>poolcfg</tt> command.</p>
</td><td><p>The <tt>poolcfg</tt> command can take input from a text file.</p>
</td><td><p><a href="p44.html#rmpool.task-27">How to Use Command Files With <tt>poolcfg</tt></a></p>
</td></tr>
<tr><td><p>Transfer resources in the kernel.</p>
</td><td><p>Transfer resources in the kernel. For example, transfer resources with
specific IDs to a target set.</p>
</td><td><p><a href="p45.html">Transferring Resources</a></p>
</td></tr>
<tr><td><p>Activate a pools configuration.</p>
</td><td><p>Activate the configuration in the default configuration file.</p>
</td><td><p><a href="p45.html#rmpool.task-33">How to Activate a Pools Configuration</a></p>
</td></tr>
<tr><td><p>Validate a pools configuration before you commit the configuration.</p>
</td><td><p>Validate a pools configuration to test what will happen when the validation
occurs.</p>
</td><td><p><a href="p45.html#rmpool.task-66">How to Validate a Configuration Before Committing the Configuration</a></p>
</td></tr>
<tr><td><p>Remove a pools configuration from your system.</p>
</td><td><p>All associated resources, such as processor sets, are returned to their
default status.</p>
</td><td><p><a href="p45.html#rmpool.task-37">How to Remove a Pools Configuration</a></p>
</td></tr>
<tr><td><p>Bind processes to a pool.</p>
</td><td><p>Manually associate a running process on your system with a resource
pool.</p>
</td><td><p><a href="p46.html#rmpool.task-42">How to Bind Processes to a Pool</a></p>
</td></tr>
<tr><td><p>Bind tasks or projects to a pool.</p>
</td><td><p>Associate tasks or projects with a resource pool.</p>
</td><td><p><a href="p46.html#rmpool.task-46">How to Bind Tasks or Projects to a Pool</a></p>
</td></tr>
<tr><td><p>Bind new processes to a resource pool.</p>
</td><td><p>To automatically bind new processes in a project to a given pool, add
an attribute to each entry in the <tt>project</tt> database.</p>
</td><td><p><a href="p46.html#rmpool.task-50">How to Set the <tt>project.pool</tt> Attribute for a Project</a></p>
</td></tr>
<tr><td><p>Use <tt>project</tt> attributes to bind a process to a different
pool.</p>
</td><td><p>Modify the pool binding for new processes that are started.</p>
</td><td><p><a href="p46.html#rmpool.task-51">How to Use <tt>project</tt> Attributes to Bind a Process to a Different Pool</a></p>
</td></tr>
<tr><td><p>Use the <tt>poolstat</tt> utility to produce reports.</p>
</td><td><p>Produce multiple reports at specifed intervals.</p>
</td><td><p><a href="p47.html#rmpool.task-106">Producing Multiple Reports at Specific Intervals</a></p>
</td></tr>
<tr><td><p>Report resource set statistics.</p>
</td><td><p>Use the <tt>poolstat</tt> utility to report statistics for
a pset resource set.</p>
</td><td><p><a href="p47.html#rmpool.task-107">Reporting Resource Set Statistics</a></p>
</td></tr>
</table><a name="rmpool.task-57"></a><h3>Enabling and Disabling the Pools Facility</h3>
<p><a name="indexterm-119"></a><a name="indexterm-120"></a><a name="indexterm-121"></a><a name="indexterm-122"></a><a name="indexterm-123"></a><a name="indexterm-124"></a><a name="indexterm-125"></a><a name="indexterm-126"></a>You can enable and disable the resource pools and dynamic resource
pools services on your system by using the <tt>svcadm</tt> command
described in the <tt>svcadm</tt>(1M) man
page.</p>
<p>You can also use the <tt>pooladm</tt> command described in
the <tt>pooladm</tt>(1M) man
page to perform the following tasks:</p>
<ul><li><p>Enable the pools facility so that pools can be manipulated</p>
</li>
<li><p>Disable the pools facility so that pools cannot be manipulated</p>
</li>
</ul>
<hr>
<p><b>Note - </b>When a system is upgraded, if the resource pools framework is
enabled and an <tt>/etc/pooladm.conf</tt> file exists, the pools
service is enabled and the configuration contained in the file is applied
to the system.</p>
<hr>
<a name="gbvca"></a><h4><img src="graphics/procedure.gif"> How to Enable the Resource Pools Service Using <tt>svcadm</tt></h4>
<ol><li><a name="gbvdc"></a><b>Become superuser, or assume a role that includes the
Process Management profile.</b><p>The System Administrator role includes
the Process Management profile. For more information about roles, see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><b>Enable the resource pools service.</b><pre># <tt><b>svcadm enable system/pools:default</b></tt></pre></li></ol><a name="gbvbg"></a><h4><img src="graphics/procedure.gif"> How to Disable the Resource Pools Service Using <tt>svcadm</tt></h4>
<ol><li><a name="gbvbh"></a><b>Become superuser, or assume a role that includes the
Process Management profile.</b><p>The System Administrator role includes
the Process Management profile. For more information about roles, see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><b>Disable the resource pools service.</b><pre># <tt><b>svcadm disable system/pools:default</b></tt></pre></li></ol><a name="gbvdw"></a><h4><img src="graphics/procedure.gif"> How to Enable the Dynamic Resource Pools Service Using <tt>svcadm</tt></h4>
<ol><li><a name="gbvdd"></a><b>Become superuser, or assume a role that includes the
Service Management rights profile.</b><p>Roles contain authorizations
and privileged commands. For more information about roles, see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><b>Enable the dynamic resource pools service.</b><pre># <tt><b>svcadm enable system/pools/dynamic:default</b></tt></pre></li></ol><a name="gbvvh"></a>Example 13-1 Dependency of the Dynamic Resource Pools Service on the Resource Pools
Service<p>This example shows that you must first enable resource pools if you
want to run DRP.</p>
<p>There is a dependency between resource pools and dynamic resource pools.
DRP is now a dependent service of resource pools. DRP can be independently
enabled and disabled apart from resource pools.</p>
<p>The following display shows that both resource pools and dynamic resource
pools are currently disabled:</p>
<pre># <tt><b>svcs *pool*</b></tt>
STATE          STIME    FMRI
disabled       10:32:26 svc:/system/pools/dynamic:default
disabled       10:32:26 svc:/system/pools:default</pre><p>Enable dynamic resource pools :</p>
<pre># <tt><b>svcadm enable svc:/system/pools/dynamic:default</b></tt>
# svcs -a | grep pool
disabled       10:39:00 svc:/system/pools:default
offline        10:39:12 svc:/system/pools/dynamic:default</pre><p>Note that the DRP service is still offline.</p>
<p>Use the <tt>-x</tt> option of the <tt>svcs</tt> command
to determine why the DRP service is offline:</p>
<pre># <tt><b>svcs -x *pool*</b></tt>
svc:/system/pools:default (resource pools framework)
 State: disabled since Wed 25 Jan 2006 10:39:00 AM GMT
Reason: Disabled by an administrator.
   See: http://sun.com/msg/SMF-8000-05
   See: libpool(3LIB)
   See: pooladm(1M)
   See: poolbind(1M)
   See: poolcfg(1M)
   See: poolstat(1M)
   See: /var/svc/log/system-pools:default.log
Impact: 1 dependent service is not running.  (Use -v for list.)

svc:/system/pools/dynamic:default (dynamic resource pools)
 State: offline since Wed 25 Jan 2006 10:39:12 AM GMT
Reason: Service svc:/system/pools:default is disabled.
   See: http://sun.com/msg/SMF-8000-GE
   See: poold(1M)
   See: /var/svc/log/system-pools-dynamic:default.log
Impact: This service is not running.</pre><p>Enable the resource pools service so that the DRP service can run:</p>
<pre># <tt><b>svcadm enable svc:/system/pools:default</b></tt></pre><p>When the <tt>svcs *pool*</tt> command is used, the system
displays:</p>
<pre># <tt><b>svcs *pool*</b></tt>
STATE          STIME    FMRI
online         10:40:27 svc:/system/pools:default
online         10:40:27 svc:/system/pools/dynamic:default</pre><a name="gbvxa"></a>Example 13-2 Effect on Dynamic Resource Pools When the Resource Pools Service Is
Disabled<p>If both services are online and you disable the resource pools service:</p>
<pre># <tt><b>svcadm disable svc:/system/pools:default</b></tt> </pre><p>When the <tt>svcs *pool*</tt> command is used, the system
displays:</p>
<pre># <tt><b>svcs *pool*</b></tt>
STATE          STIME    FMRI
disabled       10:41:05 svc:/system/pools:default
online         10:40:27 svc:/system/pools/dynamic:default
# <tt><b>svcs *pool*</b></tt>
STATE          STIME    FMRI
disabled       10:41:05 svc:/system/pools:default
online         10:40:27 svc:/system/pools/dynamic:default</pre><p>But eventually, the DRP service moves to <tt>offline</tt> because
the resource pools service has been disabled:</p>
<pre># <tt><b>svcs *pool*</b></tt>
STATE          STIME    FMRI
disabled       10:41:05 svc:/system/pools:default
offline        10:41:12 svc:/system/pools/dynamic:default</pre><p>Determine why the DRP service is offline:</p>
<pre># <tt><b>svcs -x *pool*</b></tt>
svc:/system/pools:default (resource pools framework)
 State: disabled since Wed 25 Jan 2006 10:41:05 AM GMT
Reason: Disabled by an administrator.
   See: http://sun.com/msg/SMF-8000-05
   See: libpool(3LIB)
   See: pooladm(1M)
   See: poolbind(1M)
   See: poolcfg(1M)
   See: poolstat(1M)
   See: /var/svc/log/system-pools:default.log
Impact: 1 dependent service is not running.  (Use -v for list.)

svc:/system/pools/dynamic:default (dynamic resource pools)
 State: offline since Wed 25 Jan 2006 10:41:12 AM GMT
Reason: Service svc:/system/pools:default is disabled.
   See: http://sun.com/msg/SMF-8000-GE
   See: poold(1M)
   See: /var/svc/log/system-pools-dynamic:default.log
Impact: This service is not running.</pre><p>Resource pools must be started for DRP to work. For example, resource
pools could be started by using the <tt>pooladm</tt> command with
the <tt>-e</tt> option:</p>
<pre># <tt><b>pooladm -e</b></tt></pre><p>Then the <tt>svcs *pool*</tt> command displays:</p>
<pre># <tt><b>svcs *pool*</b></tt>
STATE          STIME    FMRI
online         10:42:23 svc:/system/pools:default
online         10:42:24 svc:/system/pools/dynamic:default</pre><a name="gbvda"></a><h4><img src="graphics/procedure.gif"> How to Disable the Dynamic Resource Pools Service
Using <tt>svcadm</tt></h4>
<ol><li><a name="gbvcw"></a><b>Become superuser, or assume a role that includes the
Process Management profile.</b><p>The System Administrator role includes
the Process Management profile. For more information about roles, see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></p></li><li><b>Disable the dynamic resource pools service.</b><pre># <tt><b>svcadm disable system/pools/dynamic:default</b></tt></pre></li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p41.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p43.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

