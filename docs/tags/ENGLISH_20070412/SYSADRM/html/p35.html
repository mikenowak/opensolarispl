<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Implementing Pools on a System - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p32.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p34.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p36.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmpool-17"></a><h3>Implementing Pools on a System</h3>
<p><a name="indexterm-99"></a><a name="indexterm-100"></a>User-defined pools can be implemented on a system by using one
of these methods.</p>
<ul><li><p>When the Solaris software boots, an <tt>init</tt> script
checks to see if the <tt>/etc/pooladm.conf</tt> file exists. If
this file is found and pools are enabled, then <tt>pooladm</tt> is
invoked to make this configuration the active pools configuration. The system
creates a dynamic configuration to reflect the organization that is requested
in <tt>/etc/pooladm.conf</tt>, and the machine's resources are
partitioned accordingly.</p>
</li>
<li><p>When the Solaris system is running, a pools configuration
can either be activated if it is not already present, or modified by using
the <tt>pooladm</tt>  command. By default, the <tt>pooladm</tt> command
operates on <tt>/etc/pooladm.conf</tt>. However, you can optionally
specify an alternate location and file name, and use that file to update the
pools configuration.</p>
</li>
</ul>
<p>For information about enabling and disabling resource pools, see <a href="p42.html#rmpool.task-57">Enabling and Disabling the Pools Facility</a>.
The pools facility cannot be disabled when there are user-defined pools or
resources in use.</p>
<p>To configure resource pools, you must have superuser privileges or have
the Process Management profile in your list of profiles. The System Administrator
role includes the Process Management profile.</p>
<p>The <tt>poold</tt> resource controller is started with the
dynamic resource pools facility.</p>
<a name="rmpool-117"></a><h3><tt>project.pool</tt> Attribute</h3>
<p><a name="indexterm-101"></a><a name="indexterm-102"></a>The <tt>project.pool</tt> attribute
can be added to a project entry in the <tt>/etc/project</tt> file
to associate a single pool with that entry. New work that is started on a
project is bound to the appropriate pool. See <a href="p6.html">Chapter&nbsp;2, Projects and Tasks (Overview)</a> for more information.</p>
<p>For example, you can use the <tt>projmod</tt> command to set
the <tt>project.pool</tt> attribute for the project <i>sales</i> in
the <tt>/etc/project</tt> file:</p>
<pre># <tt><b>projmod -a -K project.pool=mypool sales</b></tt></pre><a name="rmpool-58"></a><h3>SPARC: Dynamic Reconfiguration Operations
and Resource Pools</h3>
<p><a name="indexterm-103"></a>Dynamic Reconfiguration (DR) enables you to reconfigure
hardware while the system is running. A DR operation can increase, reduce,
or have no effect on a given type of resource. Because DR can affect available
resource amounts, the pools facility must be included in these operations.
When a DR operation is initiated, the pools framework acts to validate the
configuration.</p>
<p>If the DR operation can proceed without causing the current pools configuration
to become invalid, then the private configuration file is updated. An invalid
configuration is one that cannot be supported by the available resources.</p>
<p>If the DR operation would cause the pools configuration to be invalid,
then the operation fails and you are notified by a message to the message
log. If you want to force the configuration to completion, you must use the
DR force option. The pools configuration is then modified to comply with the
new resource configuration. For information on the DR process and the force
option, see the dynamic reconfiguration user guide for your Sun hardware.</p>
<p>If you are using dynamic resource pools, note that it is possible for
a partition to move out of <tt>poold</tt> control while the daemon
is active. For more information, see <a href="p39.html#rmpool-87">Identifying a Resource Shortage</a>.</p>
<a name="rmpool-9"></a><h3>Creating Pools Configurations</h3>
<p><a name="indexterm-104"></a><a name="indexterm-105"></a>The
configuration file contains a description of the pools to be created on the
system. The file describes the elements that can be manipulated.</p>
<ul><li><p>system</p>
</li>
<li><p>pool</p>
</li>
<li><p>pset</p>
</li>
<li><p>cpu</p>
</li>
</ul>
<p>See <tt>poolcfg</tt>(1M) for
more information on elements that be manipulated.</p>
<p>When pools are enabled, you can create a structured <tt>/etc/pooladm.conf</tt> file in two ways.</p>
<ul><li><p>You can use the <tt>pooladm</tt> command with the <tt>-s</tt> option to discover the resources on the current system and place
the results in a configuration file.</p>
<p>This method is preferred.
All active resources and components on the system that are capable of being
manipulated by the pools facility are recorded. The resources include existing
processor set configurations. You can then modify the configuration to rename
the processor sets or to create additional pools if necessary.</p>
</li>
<li><p>You can use the <tt>poolcfg</tt> command with the <tt>-c</tt> option and the <tt>discover</tt> or <tt>create system</tt> <i>name</i> subcommands to create a new pools configuration.</p>
<p>These
options are maintained for backward compatibility with previous releases.</p>
</li>
</ul>
<p>Use <tt>poolcfg</tt> or <tt>libpool</tt> to modify
the <tt>/etc/pooladm.conf</tt> file. Do not directly edit this
file.</p>
<a name="rmpool-72"></a><h3>Directly Manipulating the Dynamic Configuration</h3>
<p>It is possible to directly manipulate CPU resource types in the dynamic
configuration by using the <tt>poolcfg</tt> command with the <tt>-d</tt> option.
There are two methods used to transfer resources.</p>
<ul><li><p>You can make a general request to transfer any available identified
resources between sets.</p>
</li>
<li><p>You can transfer resources with specific IDs to a target set.
Note that the system IDs associated with resources can change when the resource
configuration is altered or after a system reboot.</p>
</li>
</ul>
<p>For an example, see <a href="p45.html">Transferring Resources</a>.</p>
<p>If DRP is in use, note that the resource transfer might trigger action
from <tt>poold</tt>. See <a href="p36.html"><tt>poold</tt> Overview</a> for
more information.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p34.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p36.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

