<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Transferring Resources - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p42.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p44.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p46.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmpool.task-80"></a><h3>Transferring Resources</h3>
<p>Use the <tt>transfer</tt> subcommand argument to the <tt>-c</tt> option
of <tt>poolcfg</tt> with the <tt>-d</tt> option to transfer
resources in the kernel. The <tt>-d</tt> option specifies that the
command operate directly on the kernel and not take input from a file.</p>
<p>The following procedure moves two CPUs from processor set <tt>pset1</tt> to
processor set <tt>pset2</tt> in the kernel.</p>
<h4><img src="graphics/procedure.gif"> How to Move CPUs Between Processor Sets</h4>
<ol><li><a name="rmpool.task-step-82"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-83"></a><b>Move two CPUs from <tt>pset1</tt> to <tt>pset2</tt>.</b><p>The <tt>from</tt> and <tt>to</tt> subclauses
can be used in any order. Only one <tt>to</tt> and <tt>from</tt> subclause
is supported per command.</p><pre># <tt><b>poolcfg -dc 'transfer 2 from pset pset1 to pset2'</b></tt></pre></li></ol>Example 13-3 Alternative Method to Move CPUs Between Procesor Sets<p>If specific known IDs of a resource type are to be transferred, an alternative
syntax is provided. For example, the following command assigns two CPUs with
IDs <tt>0</tt> and <tt>2</tt> to the <tt>pset_large</tt> processor
set:</p>
<pre># <tt><b>poolcfg -dc "transfer to pset pset_large (cpu 0; cpu 2)"</b></tt></pre><h6><h6>More Information</h6>Troubleshooting<p>If a transfer fails because there are not enough resources to match
the request or because the specified IDs cannot be located, the system displays
an error message.</p>
</h6><a name="rmpool.task-32"></a><h3>Activating and Removing Pool Configurations</h3>
<p>Use the <tt>pooladm</tt> command to make a particular pool
configuration active or to remove the currently active pool configuration.
See the <tt>pooladm</tt>(1M) man
page for more information about this command.</p>
<a name="rmpool.task-33"></a><h4><img src="graphics/procedure.gif"> How to Activate a Pools Configuration</h4>
<p><a name="indexterm-127"></a>To activate the configuration in the default configuration file, <tt>/etc/pooladm.conf</tt>, invoke <tt>pooladm</tt> with the <tt>-c</tt> option, &ldquo;commit configuration.&rdquo;</p>
<ol><li><a name="rmpool.task-step-35"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-74"></a><b>Commit the configuration at <tt>/etc/pooladm.conf</tt>.</b><pre># <tt><b>pooladm -c</b></tt></pre></li><li><a name="rmpool.task-step-94"></a><b>(Optional) Copy the dynamic configuration
to a static configuration file, for example, <tt>/tmp/backup</tt>.</b><pre># <tt><b>pooladm -s /tmp/backup</b></tt></pre></li></ol><a name="rmpool.task-66"></a><h4><img src="graphics/procedure.gif"> How to Validate a Configuration Before Committing
the Configuration</h4>
<p>You can use the <tt>-n</tt> option with the <tt>-c</tt> option
to test what will happen when the validation occurs. The configuration will
not actually be committed.</p>
<p>The following command attempts to validate the configuration contained
at <tt>/home/admin/newconfig</tt>. Any error conditions encountered
are displayed, but the configuration itself is not modified.</p>
<ol><li><a name="rmpool.task-step-68"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-69"></a><b>Test the validity of the configuration
before committing it.</b><pre># <tt><b>pooladm -n -c /home/admin/newconfig</b></tt></pre></li></ol><a name="rmpool.task-37"></a><h4><img src="graphics/procedure.gif"> How to Remove a Pools Configuration</h4>
<p><a name="indexterm-128"></a>To remove the current active configuration and return all associated
resources, such as processor sets, to their default status, use the <tt>-x</tt> option
for &ldquo;remove configuration.&rdquo;</p>
<ol><li><a name="rmpool.task-step-39"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-40"></a><b>Remove the current active configuration.</b><pre># <tt><b>pooladm -x</b></tt></pre><p><a name="indexterm-129"></a><a name="indexterm-130"></a>The <tt>-x</tt> option to <tt>pooladm</tt> removes
all user-defined elements from the dynamic configuration. All resources revert
to their default states, and all pool bindings are replaced with a binding
to the default pool.</p></li></ol><h6><h6>More Information</h6>Mixing Scheduling Classes Within a Processor Set<p>You can safely mix processes in the TS and IA classes in the same processor
set. Mixing other scheduling classes within one processor set can lead to
unpredictable results. If the use of <tt>pooladm</tt> <tt>-x</tt> results
in mixed scheduling classes within one processor set, use the <tt>priocntl</tt> command
to move running processes into a different scheduling class. See <a href="p25.html#rmfss.task-7">How to Manually Move Processes From the TS Class Into the FSS Class</a>. Also see the <tt>priocntl</tt>(1) man page.</p>
</h6>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p44.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p46.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

