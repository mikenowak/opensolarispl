<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p102.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p104.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipsec-ov-1"></A><b>Chapter&nbsp;19</b><h1>IP Security Architecture (Overview)</h1>
<p>The IP Security Architecture (IPsec) provides cryptographic protection
for IP datagrams in IPv4 and IPv6 network packets.</p>
<p>This chapter contains the following information:</p>
<ul><li><p><A HREF="p103.html#ipsec-ov-25">What's New in IPsec?</A></p>
</li>
<li><p><A HREF="p103.html#ipsec-ov-2">Introduction to IPsec</A></p>
</li>
<li><p><A HREF="p104.html#ipsec-ov-54">IPsec Packet Flow</A></p>
</li>
<li><p><A HREF="p104.html#ipsec-ov-5">IPsec Security Associations</A></p>
</li>
<li><p><A HREF="p104.html#ipsec-ov-7">IPsec Protection Mechanisms</A></p>
</li>
<li><p><A HREF="p105.html#ipsec-ov-12">IPsec Protection Policies</A></p>
</li>
<li><p><A HREF="p105.html#ipsec-ov-13">Transport and Tunnel Modes in IPsec</A></p>
</li>
<li><p><A HREF="p106.html#ipsec-ov-15">Virtual Private Networks and IPsec</A></p>
</li>
<li><p><A HREF="p106.html#ipsec-ov-24">IPsec and NAT Traversal</A></p>
</li>
<li><p><A HREF="p106.html#ipsec-ov-22">IPsec and SCTP</A></p>
</li>
<li><p><A HREF="p106.html#ipsec-ov-18">IPsec and Solaris Zones</A></p>
</li>
<li><p><A HREF="p106.html#ipsec-ov-21">IPsec Utilities and Files</A></p>
</li>
<li><p><A HREF="p106.html#ipsec-ov-16">Changes to IPsec for the Solaris 10 Release</A></p>
</li>
</ul>
<p>To implement IPsec on your network, see <A HREF="p107.html#ipsec-mgtasks-1">Chapter&nbsp;20, Configuring IPsec (Tasks)</A>. For reference information,
see <A HREF="p115.html#ipsecref-1">Chapter&nbsp;21, IP Security Architecture (Reference)</A>.</p>
<A NAME="ipsec-ov-25"></A><h2>What's New in IPsec?</h2>
<A NAME="indexterm-1589"></A><A NAME="indexterm-1590"></A><A NAME="indexterm-1591"></A><A NAME="indexterm-1592"></A><p><b>Solaris Express, Developer Edition 2/07</b>: In
this release, IPsec fully implements tunnels in tunnel mode, and modifies
the utilities that support tunnels.</p>
<ul><li><p><A NAME="indexterm-1593"></A><A NAME="indexterm-1594"></A>IPsec implements tunnels in tunnel mode for Virtual Private Networks
(VPNs). In tunnel mode, IPsec supports multiple clients behind a single NAT.
In tunnel mode, IPsec is interoperable with implementations of IP-in-IP tunnels
by other vendors. IPsec continues to support tunnels in transport mode, so
is compatible with earlier Solaris releases.</p>
</li>
<li><p>The syntax to create a tunnel is simplified. To manage IPsec
policy, the <tt>ipsecconf</tt> command has been expanded. The <tt>ifconfig</tt> command is deprecated for managing IPsec policy.</p>
</li>
</ul>
<p>In this release, the <tt>/etc/ipnodes</tt> file
is removed. Use the <tt>/etc/hosts</tt> file to configure network
IPv6 addresses.</p>
<p><A NAME="indexterm-1595"></A><A NAME="indexterm-1596"></A><A NAME="indexterm-1597"></A><A NAME="indexterm-1598"></A><b>Solaris 10 1/06</b>: In this release,
IKE is fully compliant with NAT-Traversal support as described in RFC 3947
and RFC 3948. IKE operations use the PKCS&nbsp;#11 library from the cryptographic
framework, which improves performance.</p>
<p>The cryptographic framework provides a softtoken keystore for applications
that use the metaslot. When IKE uses the metaslot, you have the option of
storing the keys on disk, on an attached board, or in the softtoken keystore.</p>
<ul><li><p>To use the softtoken keystore, see the <tt>cryptoadm</tt>(1M) man page.</p>
</li>
<li><p>For a complete listing of new Solaris features and a description
of Solaris releases, see <i>Solaris Express, Developer Edition What's New</i>.</p>
</li>
</ul>
<A NAME="ipsec-ov-2"></A><h2>Introduction to IPsec</h2>
<p><A NAME="indexterm-1599"></A><A NAME="indexterm-1600"></A><A NAME="indexterm-1601"></A><A NAME="indexterm-1602"></A><A NAME="indexterm-1603"></A><A NAME="indexterm-1604"></A><A NAME="indexterm-1605"></A><A NAME="indexterm-1606"></A><A NAME="indexterm-1607"></A><A NAME="indexterm-1608"></A><A NAME="indexterm-1609"></A><A NAME="indexterm-1610"></A><A NAME="indexterm-1611"></A>IPsec protects IP packets by authenticating the packets, by encrypting
the packets, or by doing both. IPsec is performed inside the IP module, well
below the application layer. Therefore, an Internet application can take advantage
of IPsec while not having to configure itself to use IPsec. When used properly,
IPsec is an effective tool in securing network traffic.</p>
<p><A NAME="indexterm-1612"></A>IPsec protection involves five main components:</p>
<ul><li><p><A NAME="indexterm-1613"></A><A NAME="indexterm-1614"></A><b>Security protocols -</b> The
IP datagram protection mechanisms. The <A HREF="p193.html#glossary-34">authentication header</A> (AH) signs IP packets and ensures integrity. The content of
the datagram is not encrypted, but the receiver is assured that the packet
contents have not been altered. The receiver is also assured that the packets
were sent by the sender. The <A HREF="p193.html#glossary-35">encapsulating security payload (ESP)</A> encrypts IP data, thus obscuring the content
during packet transmission. ESP also can ensure data integrity through an
authentication algorithm option.</p>
</li>
<li><p><A NAME="indexterm-1615"></A><b>Security associations database (SADB) -</b> The database that associates a security protocol with an IP destination
address and an indexing number. The indexing number is called the <A HREF="p193.html#glossary-94">security parameter index (SPI)</A>. These three
elements (the security protocol, the destination address, and the SPI) uniquely
identify a legitimate IPsec packet. The database ensures that a protected
packet that arrives to the packet destination is recognized by the receiver.
The receiver also uses information from the database to decrypt the communication,
verify that the packets are unchanged, reassemble the packets, and deliver
the packets to their ultimate destination.</p>
</li>
<li><p><b>Key management -</b> The
generation and distribution of keys for the cryptographic algorithms and for
the SPI.</p>
</li>
<li><p><A NAME="indexterm-1616"></A><b>Security mechanisms -</b> The
authentication and encryption algorithms that protect the data in the IP datagrams.</p>
</li>
<li><p><A NAME="indexterm-1617"></A><A NAME="indexterm-1618"></A><A NAME="indexterm-1619"></A><b>Security policy database (SPD) -</b> The
database that specifies the level of protection to apply to a packet. The
SPD filters IP traffic to determine how the packets should be processed. A
packet can be discarded. A packet can be passed in the clear. Or, a packet
can be protected with IPsec. For outbound packets, the SPD and the SADB determine
what level of protection to apply. For inbound packets, the SPD helps to determine
if the level of protection on the packet is acceptable. If the packet is protected
by IPsec, the SPD is consulted after the packet has been decrypted and has
been verified.</p>
</li>
</ul>
<p>When you invoke IPsec, IPsec applies the security mechanisms to IP datagrams
that travel to the IP destination address. The receiver uses information in
its SADB to verify that the arriving packets are legitimate, and to decrypt
them. Applications can invoke IPsec to apply security mechanisms to IP datagrams
on a per-socket level as well.</p>
<p>Note
that sockets behave differently from ports:</p><ul><li><p>Per-socket SAs override their corresponding port entry in
the SPD.</p>
</li>
<li><p>Also, if a socket on a port is connected, and IPsec policy
is later applied to that port, then traffic that uses that socket is not protected
by IPsec.</p>
<p>Of course, a socket that is opened on a port <b>after</b> IPsec policy is applied to the port is protected by IPsec policy.</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p102.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p104.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

