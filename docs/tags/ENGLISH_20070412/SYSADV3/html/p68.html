<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p67.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p69.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="chap2-26"></A><b>Chapter&nbsp;13</b><h1>Planning for DHCP Service (Tasks)</h1>
<p>You can use the DHCP service in a network that you are creating or in
a network that exists. If you are setting up a network, see <A HREF="p6.html#ipplan-1">Chapter&nbsp;2, Planning an IPv4 Addressing Scheme (Tasks</A> before
you attempt to set up the DHCP service. If the network already exists, continue
in this chapter.</p>
<p>This chapter describes what you need to do before you set up the DHCP
service on your network. The information is intended for use with DHCP Manager,
although you can also use the command-line utility <tt>dhcpconfig</tt> to
set up the DHCP service.</p>
<p>This chapter contains the following information:</p><ul><li><p><A HREF="p68.html#chapter2-4">Preparing Your Network for the DHCP Service (Task Map)</A></p>
</li>
<li><p><A HREF="p69.html#chapter2-29">Making Decisions for Your DHCP Server Configuration (Task Map)</A></p>
</li>
<li><p><A HREF="p69.html#chapter2-30">Making Decisions for IP Address Management (Task Map)</A></p>
</li>
<li><p><A HREF="p70.html#dhcp-plan-1">Planning for Multiple DHCP Servers</A></p>
</li>
<li><p><A HREF="p70.html#dhcp-plan-2">Planning DHCP Configuration of Your Remote Networks</A></p>
</li>
<li><p><A HREF="p70.html#chapter2-34">Selecting the Tool for Configuring DHCP</A></p>
</li>
</ul>
<A NAME="chapter2-4"></A><h2>Preparing Your Network for the DHCP Service
(Task Map)</h2>
<p><A NAME="indexterm-1369"></A><A NAME="indexterm-1370"></A>Before you set up your network to use DHCP, you must collect information
to help you make decisions for configuring one or more servers. Use the following
task map to identify the tasks for preparing your network for DHCP.</p>
<A NAME="indexterm-1371"></A>
<table cellspacing="5" border="1">
<tr><th scope="col"><p>Task</p></th><th scope="col"><p>Description</p></th><th scope="col"><p>For Instructions</p></th></tr>
<tr><td><p>Map your network topology.</p></td><td><p>Determine and locate the services that are available on the network.</p></td><td><p><A HREF="p68.html#chapter2-5">Mapping Your Network Topology</A>&nbsp;</p></td></tr>
<tr><td><p>Determine the number of DHCP servers you need.</p></td><td><p>Use the expected number of DHCP clients as a basis for determining the
number of DHCP servers you need.</p></td><td><p><A HREF="p68.html#dhcp-plan-3">Determining the Number of DHCP Servers</A>&nbsp;</p></td></tr>
<tr><td><p>Update system files and <tt>netmasks</tt> table.</p></td><td><p>Reflect the network topology accurately.</p></td><td><p><A HREF="p68.html#chapter2-7">Updating System Files and Netmask Tables</A>&nbsp;</p></td></tr>
</table><A NAME="chapter2-5"></A><h3>Mapping Your Network Topology</h3>
<p><A NAME="indexterm-1372"></A><A NAME="indexterm-1373"></A>If you have not already done so, you should map the physical structure
of your network. Indicate the location of routers and clients, and the location
of servers that provide network services. This map of your network topology
can help you determine which server to use for the DHCP service. The map can
also help you determine the configuration information that the DHCP server
can provide to clients.</p>
<p>See <A HREF="p6.html#ipplan-1">Chapter&nbsp;2, Planning an IPv4 Addressing Scheme (Tasks</A> for more information about planning your network.</p>
<p>The DHCP configuration process can gather some network information from
the server's system and network files. <A HREF="p68.html#chapter2-7">Updating System Files and Netmask Tables</A> discusses these files. However, you
might want to give clients other service information, which you must enter
into the server's macros. As you examine your network topology, record the
IP addresses of any servers you want your clients to know about. The following
servers, for example, might provide services on your network. The DHCP configuration
does not discover these servers.</p><ul><li><p>Time server</p>
</li>
<li><p>Log server</p>
</li>
<li><p>Print server</p>
</li>
<li><p>Install server</p>
</li>
<li><p>Boot server</p>
</li>
<li><p>Web proxy server</p>
</li>
<li><p>Swap server</p>
</li>
<li><p>X Window font server</p>
</li>
<li><p>Trivial File Transfer Protocol (TFTP) server</p>
</li>
</ul>
<A NAME="chapter2-6"></A><h4>Network Topology to Avoid</h4>
<p>In some IP network environments, several local area networks (LANs)
share the same network hardware media. The networks may use multiple network
hardware interfaces or multiple logical interfaces. DHCP does not work well
in this kind of shared media network. When multiple LANs run across the same
physical network, a DHCP client's request arrives on all network hardware
interfaces. This effect makes the client appear to be attached to all of the
IP networks simultaneously.</p>
<p>DHCP must be able to determine the address of a client's network in
order to assign an appropriate IP address to the client. If more than one
network is present on the hardware media, the server cannot determine the
client's network. The server cannot assign an IP address without knowing the
network number.</p>
<p>You can use DHCP on only one of the networks. If one network does not
suit your DHCP needs, you must reconfigure the networks. You should consider
the following suggestions:</p><ul><li><p>Use a variable length subnet mask (VLSM) on your subnets to
make better use of the IP address space you have. You may not need to run
multiple networks on the same physical network. See the <tt>netmasks</tt>(4) man page for information about
implementing variable length subnetting. For more detailed information about
Classless Inter-Domain Routing (CIDR) and VLSM, see <A  HREF="http://www.ietf.org/rfc/rfc1519.txt">http://www.ietf.org/rfc/rfc1519.txt</A>.</p>
</li>
<li><p>Configure the ports on your switches to assign devices to
different physical LANs. This technique preserves the mapping of one LAN to
one IP network, required for Solaris DHCP. See the documentation for the switch
for information about port configuration.</p>
</li>
</ul>
<A NAME="dhcp-plan-3"></A><h3>Determining the Number of DHCP Servers</h3>
<p><A NAME="indexterm-1374"></A>The data store option that you choose has a direct effect on the
number of servers you must have to support your DHCP clients. The following
table shows the maximum number of DHCP and BOOTP clients that can be supported
by one DHCP server for each data store.</p>
<A NAME="dhcp-plan-tbl-3"></A><p><b>Table 13-1 </b>Estimated Maximum Number
of Clients Supported by One DHCP Server</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Data Store Type</p></th><th scope="col"><p>Maximum Number of Clients Supported</p></th></tr>
<tr><td><p>Text files</p></td><td><p>10,000</p></td></tr>
<tr><td><p>NIS+</p></td><td><p>40,000</p></td></tr>
<tr><td><p>Binary files</p></td><td><p>100,000</p></td></tr>
</table><p>This maximum number is a general guideline, not an absolute number.
A DHCP server's client capacity depends greatly on the number of transactions
per second that the server must process. Lease times and usage patterns have
a significant impact on the transaction rate. For example, suppose leases
are set to 12 hours and users turn their systems off at night. If many users
turn on their systems at the same time in the morning, the server must handle
transaction peaks as many clients request leases simultaneously. The DHCP
server can support fewer clients in such an environment. The DHCP server can
support more clients in an environment with longer leases, or an environment
that consists of constantly connected devices such as cable modems.</p>
<p>The section <A HREF="p69.html#chapter2-39">Choosing the DHCP Data Store</A> compares
the types of data stores.</p>
<A NAME="chapter2-7"></A><h3>Updating System Files and Netmask Tables</h3>
<p>During DHCP configuration, the DHCP tools scan various system files
on your server for information that can be used to configure the server.</p>
<p>You must be sure the information in the system files is current before
you run DHCP Manager or <tt>dhcpconfig</tt> to configure your server.
If you notice errors after you configure the server, use DHCP Manager or <tt>dhtadm</tt> to modify the macros on the server.</p>
<p><A NAME="indexterm-1375"></A>The following table lists some of the information gathered during
DHCP server configuration, and the sources for the information. Be sure this
information is set correctly on the server before you configure DHCP on the
server. If you make changes to the system files after you configure the server,
you should reconfigure the service to reflect these changes.</p>
<A NAME="chapter2-tbl-8"></A><p><b>Table 13-2 </b>Information Used for DHCP
Configuration</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Information</p></th><th scope="col"><p>Source</p></th><th scope="col"><p>Comments</p></th></tr>
<tr><td><p>Time zone</p></td><td><p>System date, time zone settings</p></td><td><p>The date and time zone are initially set during Solaris installation.
You can change the date by using the <tt>date</tt> command. You
can change the time zone by editing the <tt>/etc/default/init</tt> file
to set the <tt>TZ</tt> environment variable. See the <tt>TIMEZONE</tt>(4) man page for
more information.</p></td></tr>
<tr><td><p>DNS parameters</p></td><td><p><tt>/etc/resolv.conf</tt> </p></td><td><p>The DHCP server uses the <tt>/etc/resolv.conf</tt> file
to obtain DNS parameters such as the DNS domain name and DNS server addresses.
See <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i> or
the <tt>resolv.conf</tt>(4) man page for more information about <tt>resolv.conf</tt>.</p></td></tr>
<tr><td><p>NIS or NIS+ parameters</p></td><td><p>System domain name, <tt>nsswitch.conf</tt>, NIS or NIS+</p></td><td><p>The DHCP server uses the <tt>domainname</tt> command to obtain
the domain name of the server system. The <tt>nsswitch.conf</tt> file
tells the server where to look for domain-based information. If the server
system is an NIS or NIS+ client, the DHCP server performs a query to get NIS
or NIS+ server IP addresses. See the <tt>nsswitch.conf</tt>(4) man page for more information.</p></td></tr>
<tr><td><p>Default router</p></td><td><p>System routing tables, user prompt</p></td><td><p>The DHCP server searches the network routing tables to find the default
router for clients that are attached to the local network. For clients not
on the same network, the DHCP server must prompt you for the information.</p></td></tr>
<tr><td><p>Subnet mask</p></td><td><p>Network interface, <tt>netmasks</tt> table</p></td><td><p>The DHCP server looks to its own network interfaces to determine the
netmask and broadcast address for local clients. If the request was forwarded
by a relay agent, the server obtains the subnet mask in the <tt>netmasks</tt> table
on the relay agent's network.</p></td></tr>
<tr><td><p>Broadcast address</p></td><td><p>Network interface, <tt>netmasks</tt> table</p></td><td><p>For the local network, the DHCP server obtains the broadcast address
by querying the network interface. For remote networks, the server uses the
BOOTP relay agent's IP address and the remote network's netmask to calculate
the broadcast address for the network.</p></td></tr>
</table>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p67.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p69.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

