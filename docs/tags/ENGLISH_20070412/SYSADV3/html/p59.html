<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p55.html#ipv6-ref-76">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p56.html#ipv6-ref-83">Solaris 10 IPv6 Implementation</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p57.html#ipv6-ref-74">IPv6-Related Commands</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p58.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p60.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipv6-ref-24"></A><h4><tt>snoop</tt> Command Modifications
for IPv6 Support</h4>
<p><A NAME="indexterm-1220"></A><A NAME="indexterm-1221"></A>The <tt>snoop</tt> command can capture both IPv4 and
IPv6 packets. This command can display IPv6 headers, IPv6 extension headers,
ICMPv6 headers, and Neighbor Discovery protocol data. By default, the <tt>snoop</tt> command displays both IPv4 and IPv6 packets. If you specify the <tt>ip</tt> or <tt>ip6</tt> protocol keyword, the <tt>snoop</tt> command
displays only IPv4 or IPv6 packets. The IPv6 filter option enables you to
filter through all packets,  both IPv4 and IPv6, displaying only the IPv6
packets. See the <tt>snoop</tt>(1M) man
page for details. See <A HREF="p46.html#ipv6-admintasks-10">How to Monitor IPv6 Network Traffic</A> for procedures that use the <tt>snoop</tt> command.</p>
<A NAME="ipv6-ref-25"></A><h4><tt>route</tt> Command Modifications
for IPv6 Support</h4>
<p><A NAME="indexterm-1222"></A>The <tt>route</tt> command operates on both IPv4 and
IPv6 routes, with IPv4 routes as the default. If you use the <tt>-inet6</tt> option
on the command line immediately after the <tt>route</tt> command,
operations are performed on IPv6 routes. See the <tt>route</tt>(1M) man page for details. </p>
<A NAME="ipv6-ref-26"></A><h4><tt>ping</tt> Command Modifications
for IPv6 Support</h4>
<p><A NAME="indexterm-1223"></A>The <tt>ping</tt> command can use both IPv4 and IPv6
protocols to probe target hosts. Protocol selection depends on the addresses
that are returned by the name server for the specific target host. By default,
if the name server returns an IPv6 address for the target host, the <tt>ping</tt> command uses the IPv6 protocol. If the server returns only an IPv4
address, the <tt>ping</tt> command uses the IPv4 protocol. You can
override this action by using the <tt>-A</tt> command-line option to
specify which protocol to use.</p>
<p>For detailed information, see the <tt>ping</tt>(1M) man page. For procedures that use <tt>ping</tt>, refer to <A HREF="p44.html#ipv6-admintasks-53">Probing Remote Hosts With the <tt>ping</tt> Command</A>.</p>
<A NAME="ipv6-ref-27"></A><h4><tt>traceroute</tt> Command Modifications
for IPv6 Support</h4>
<p><A NAME="indexterm-1224"></A>You can use the <tt>traceroute</tt> command to trace
both the IPv4 and IPv6 routes to a specific host. From a protocol perspective, <tt>traceroute</tt> uses the same algorithm as <tt>ping</tt>. Use
the <tt>-A</tt> command-line option to override this selection. You
can trace each individual route to every address of a multihomed host by using
the <tt>-a</tt> command-line option. </p>
<p>For detailed information, see the <tt>traceroute</tt>(1M) man page. For procedures
that use <tt>traceroute</tt>, refer to <A HREF="p45.html#ipv6-admintasks-72">Displaying Routing Information With the <tt>traceroute</tt> Command</A>.</p>
<A NAME="ipv6-ref-75"></A><h3>IPv6-Related Daemons</h3>
<p>This section discusses the IPv6-related daemons.</p>
<A NAME="ipv6-ref-28"></A><h4><tt>in.ndpd</tt> Daemon, for Neighbor
Discovery</h4>
<p><A NAME="indexterm-1225"></A><A NAME="indexterm-1226"></A><A NAME="indexterm-1227"></A><A NAME="indexterm-1228"></A><A NAME="indexterm-1229"></A><A NAME="indexterm-1230"></A><A NAME="indexterm-1231"></A>The<tt>in.ndpd</tt> daemon implements the IPv6 Neighbor
Discovery protocol and router discovery. The daemon also implements address
autoconfiguration for IPv6. The following shows the supported options of <tt>in.ndpd</tt>.</p>
<table border="0" cellspacing="5"><tr><td valign="top"><p><tt>-d</tt></p></td><td valign="top"><p>Turns on debugging.</p>
</td></tr><tr><td valign="top"><p><tt>-D</tt></p></td><td valign="top"><p>Turns on debugging for specific events.</p>
</td></tr><tr><td valign="top"><p><tt>-f</tt></p></td><td valign="top"><p>Specifies a file to read configuration data from,  instead
of the default <tt>/etc/inet/ndpd.conf</tt> file.</p>
</td></tr><tr><td valign="top"><p><tt>-I</tt></p></td><td valign="top"><p>Prints related information for each interface.</p>
</td></tr><tr><td valign="top"><p><tt>-n</tt></p></td><td valign="top"><p>Does not loop back router advertisements.</p>
</td></tr><tr><td valign="top"><p><tt>-r</tt></p></td><td valign="top"><p>Ignores received packets.</p>
</td></tr><tr><td valign="top"><p><tt>-v</tt></p></td><td valign="top"><p>Specifies verbose mode, reporting various types of diagnostic
messages.</p>
</td></tr><tr><td valign="top"><p><tt>-t</tt></p></td><td valign="top"><p>Turns on packet tracing.</p>
</td></tr></table>
<p><A NAME="indexterm-1232"></A><A NAME="indexterm-1233"></A>The <tt>in.ndpd</tt> daemon is controlled by parameters
that are set in the <tt>/etc/inet/ndpd.conf</tt> configuration
file and any applicable parameters in the <tt>/var/inet/ndpd_state.</tt><i>interface</i> startup file.</p>
<p>When the <tt>/etc/inet/ndpd.conf</tt> file exists, the file
is parsed and used to configure a node as a router. <A HREF="p56.html#ipv6-ref-tbl-84">Table 11-2</A> lists the valid keywords
that might appear in this file. When a host is booted, routers might not be
immediately available. Advertised packets by the router might be dropped.
Also, advertised packets might not reach the host. </p>
<p>The <tt>/var/inet/ndpd_state</tt>.<i>interface</i> file
is a state file. This file is updated periodically by each node. When the
node fails and is restarted, the node can configure its interfaces in the
absence of routers. This file contains the interface address, the last time
that the file was updated, and how long the file is valid. This file also
contains other parameters that are "learned" from previous router
advertisements.</p>
<p><hr size="1" noshade><p><b>Note - </b><A NAME="indexterm-1234"></A>You do not need to alter the contents of state files. The <tt>in.ndpd</tt> daemon automatically maintains state files.</p>
<hr size="1" noshade></p><p>See the <tt>in.ndpd</tt>(1M) man
page and the <tt>ndpd.conf</tt>(4) man
page for lists of configuration variables and allowable values.</p>
<A NAME="ipv6-ref-31"></A><h4><tt>in.ripngd</tt> Daemon, for
IPv6 Routing</h4>
<p><A NAME="indexterm-1235"></A><A NAME="indexterm-1236"></A><A NAME="indexterm-1237"></A>The <tt>in.ripngd</tt> daemon implements the Routing
Information Protocol next-generation for IPv6 routers (RIPng). RIPng defines
the IPv6 equivalent of RIP. When you configure an IPv6 router with the <tt>routeadm</tt> command and turn on IPv6 routing, the <tt>in.ripngd</tt> daemon
implements RIPng on the router.</p>
<p>The following shows the supported options of RIPng.</p>
<table border="0" cellspacing="5"><tr><td valign="top"><p><tt>-p</tt> <i>n</i></p></td><td valign="top"><p><i>n</i> specifies the alternate port
number that is used to send or receive RIPnG packets.</p>
</td></tr><tr><td valign="top"><p><tt>-q</tt></p></td><td valign="top"><p>Suppresses routing information.</p>
</td></tr><tr><td valign="top"><p><tt>-s</tt></p></td><td valign="top"><p>Forces routing information even if  the daemon is acting as
a router.</p>
</td></tr><tr><td valign="top"><p><tt>-P</tt></p></td><td valign="top"><p>Suppresses use of poison reverse.</p>
</td></tr><tr><td valign="top"><p><tt>-S</tt></p></td><td valign="top"><p>If <tt>in.ripngd</tt> does not act as a router,
the daemon enters only a default route for each router.</p>
</td></tr></table>
<A NAME="fapbh"></A><h4><tt>inetd</tt> Daemon and IPv6 Services</h4>
<A NAME="indexterm-1238"></A><p>An IPv6-enabled server application can handle both IPv4 requests and
IPv6 requests, or IPv6 requests only. The server always handles  requests
through an IPv6 socket. Additionally, the server uses the same protocol that
the corresponding client uses. To add or modify a service for IPv6, use the
commands available from the Service Management Facility (SMF).</p>
<ul><li><p>For information about the SMF commands, refer to "SMF Command-Line Administrative Utilities" in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<li><p>For an example task that uses SMF to configure an IPv4 service
manifest that runs over SCTP, refer to <A HREF="p23.html#ermig">How to Add Services That Use the SCTP Protocol</A>.</p>
</li>
</ul>
<p>To configure an IPv6 service, you must ensure that the <tt>proto</tt> field
value in the <tt>inetadm</tt> profile for that service lists the
appropriate value:</p>
<ul><li><p>For a service that handles both IPv4 and IPv6 requests, choose <tt>tcp6</tt>, <tt>udp6</tt>, or <tt>sctp</tt>. A <tt>proto</tt> value  of <tt>tcp6</tt>, <tt>udp6</tt>, or <tt>sctp6</tt> causes <tt>inetd</tt> to pass on an IPv6 socket
to the  server. The server contains an IPv4-mapped address in case a IPv4
client  has a request.</p>
</li>
<li><p>For a service that handles only IPv6 requests, choose <tt>tcp6only</tt> or <tt>udp6only</tt>. With either of these values for <tt>proto</tt>, <tt>inetd</tt>  passes the server an IPv6 socket.</p>
</li>
</ul>
<p>If you replace a Solaris command with another implementation, you must
verify that the implementation of that service supports IPv6. If the implementation
does not support IPv6, then you must specify the <tt>proto</tt> value
as either <tt>tcp</tt>, <tt>udp</tt>, or <tt>sctp</tt>.</p>
<p>Here is a profile that results from running <tt>inetadm</tt> for
an <tt>echo</tt> service manifest that supports both IPv4 and IPv6
and runs over SCTP:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># inetadm -l svc:/network/echo:sctp_stream
	SCOPE    NAME=VALUE	  name="echo"
	         endpoint_type="stream"
	         proto="sctp6"
	         isrpc=FALSE
	         wait=FALSE
	         exec="/usr/lib/inet/in.echod -s"
	         user="root"
	default  bind_addr=""
	default  bind_fail_max=-1
	default  bind_fail_interval=-1
	default  max_con_rate=-1
	default  max_copies=-1
	default  con_rate_offline=-1
	default  failrate_cnt=40
	default  failrate_interval=60
	default  inherit_env=TRUE
	default  tcp_trace=FALSE
	default  tcp_wrappers=FALSE</pre>
</td></table><br><p>To change the value of the <tt>proto</tt> field, use the following
syntax:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>inetadm -m </tt><i>FMRI<tt></i> proto="</tt><i>transport-protocols<tt></i>"</b></tt></pre>
</td></table><br><p>All servers that are provided with Solaris software require only one
profile entry that specifies <tt>proto</tt> as <tt>tcp6</tt>, <tt>udp6</tt>, or <tt>sctp6</tt>. However, the remote shell server
(<tt>shell</tt>)  and the remote execution server (<tt>exec</tt>)
now are composed of a single service  instance, which requires a <tt>proto</tt> value
containing both the <tt>tcp</tt> and <tt>tcp6only</tt> values.
 For example, to set the <tt>proto</tt> value for <tt>shell,</tt> you
would issue the following command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>inetadm -m network/shell:default proto="tcp,tcp6only"</b></tt></pre>
</td></table><br><p>See IPv6 extensions to the Socket API in <i>Programming Interfaces Guide</i> for more details
on writing IPv6-enabled servers that use sockets.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p58.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p60.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

