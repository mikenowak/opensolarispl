<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p141.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p143.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="mipoverview-1"></A><b>Chapter&nbsp;27</b><h1>Mobile IP (Overview)</h1>
<p>Mobile Internet Protocol (IP) enables the transfer of information between mobile
computers. <b>Mobile computers</b> include lap tops and wireless communications.
The mobile computer can change its location to a foreign network. At the foreign network,
the mobile computer can still communicate through the home network of the mobile computer.
The Solaris implementation of Mobile IP supports only IPv4.</p>
<p>This chapter contains the following information:</p>
<ul><li><p><A HREF="p142.html#mipoverview-25">Introduction to Mobile IP</A></p>
</li>
<li><p><A HREF="p142.html#mipoverview-29">Mobile IP Functional Entities</A></p>
</li>
<li><p><A HREF="p142.html#mipoverview-2">How Mobile IP Works</A></p>
</li>
<li><p><A HREF="p142.html#mipoverview-5">Agent Discovery</A></p>
</li>
<li><p><A HREF="p143.html#mipoverview-30">Care-of Addresses</A></p>
</li>
<li><p><A HREF="p143.html#mipoverview-45">Mobile IP With Reverse Tunneling</A></p>
</li>
<li><p><A HREF="p143.html#mipoverview-12">Mobile IP Registration</A></p>
</li>
<li><p><A HREF="p144.html#mipoverview-18">Routing Datagrams to and From Mobile Nodes</A></p>
</li>
<li><p><A HREF="p144.html#mipoverview-23">Security Considerations for Mobile IP</A></p>
</li>
</ul>
<p>For Mobile IP-related tasks, refer to <A HREF="p145.html#mipimplementing-1">Chapter&nbsp;28, Administering Mobile IP (Tasks)</A>. For Mobile IP reference
materials, refer to <A HREF="p150.html#mipmanaging-22">Chapter&nbsp;29, Mobile IP Files and Commands (Reference)</A>.</p>
<A NAME="mipoverview-25"></A><h2>Introduction to Mobile IP</h2>
<p><A NAME="indexterm-2460"></A>Current versions of the Internet Protocol (IP) assume that the point at
which a computer attaches to the Internet or a network is fixed. IP also assumes that
the IP address of the computer identifies the network to which the computer is attached.
Datagrams that are sent to a computer are based on the location information that is
contained in the IP address. Many Internet Protocols require that a node's IP address
remain unchanged. If any of these protocols are active on a Mobile IP computing device,
their applications fail. Even HTTP would fail if not for the short-lived nature of
its TCP connections. Updating an IP address and refreshing the web page is not a burden.</p>
<p><A NAME="indexterm-2461"></A>If a mobile computer, or <b>mobile node</b>, moves to a
new network while its IP address is unchanged, the mobile node address does not reflect
the new point of attachment. Consequently, routing protocols that exist cannot route
datagrams to the mobile node correctly. You must reconfigure the mobile node with
a different IP address that represents the new location. Assigning a different IP
address is cumbersome. Thus, under the current Internet Protocol, if the mobile node
moves without changing its address, it loses routing. If the mobile node does change
its address, it loses connections.</p>
<p><A NAME="indexterm-2462"></A><A NAME="indexterm-2463"></A>Mobile IP solves this problem by allowing the mobile node to use two IP
addresses. The first address is a fixed <b>home address</b>. The second
address is a <b>care-of address</b> that changes at each new point of
attachment. Mobile IP enables a computer to roam freely on the Internet. Mobile IP
also enables a computer to roam freely on an organization's network while still maintaining
the same home address. Consequently, communication activities are not disrupted when
the user changes the computer's point of attachment. Instead, the network is updated
with the new location of the mobile node. See the <A HREF="p193.html#glossary-1">Glossary</A> for definitions of terms that are associated with Mobile IP.</p>
<p><A NAME="indexterm-2464"></A>The following figure illustrates the general Mobile IP topology. </p>
<A NAME="mipoverview-fig-26"></A><p><b>Figure 27-1 </b>Mobile IP Topology</p>
<IMG src="figures/MIPtopology.gif" class="figure" alt="Shows a mobile node's relationship between it's home agent's
home network and a foreign agent's foreign network." title="Shows a mobile node's relationship between it's home agent's
home network and a foreign agent's foreign network."><p><A NAME="indexterm-2465"></A>By using this figure's Mobile IP topology, the following scenario shows
how a datagram moves from one point to another point within the Mobile IP framework:</p>
<ol Type="1"><li><p><A NAME="indexterm-2466"></A>The Internet host sends a datagram to the mobile node by using the mobile
node's home address (normal IP routing process).</p>
</li>
<li><p><A NAME="indexterm-2467"></A>If the mobile node is on its home network, the datagram is delivered through
the normal IP process to the mobile node. Otherwise, the home agent receives the datagram.</p>
</li>
<li><p><A NAME="indexterm-2468"></A><A NAME="indexterm-2469"></A><A NAME="indexterm-2470"></A>If the  mobile node is on a foreign network, the home agent forwards the
datagram to the foreign agent. The home agent must encapsulate the datagram in an
outer datagram so that the foreign agent's IP address appears in the outer IP header. </p>
</li>
<li><p>The foreign agent delivers the datagram to the mobile node.</p>
</li>
<li><p>Datagrams from the mobile node to the Internet host are sent by using
normal IP routing procedures. If the mobile node is on a foreign network, the packets
are delivered to the foreign agent. The foreign agent forwards the datagram to the
Internet host.</p>
</li>
<li><p>In situations with ingress filtering present, the source address must
be topologically correct for the subnet that the datagram is coming from, or a router
cannot forward the datagram. If this scenario exists on links between the mobile node
and the correspondent node, the foreign agent needs to provide reverse tunneling support.
Then, the foreign agent can deliver every datagram that the mobile node sends to its
home agent. The home agent then forwards the datagram through the path that the datagram
would have taken had the mobile node resided on the home network. This process guarantees
that the source address is correct for all links that the datagram must traverse.</p>
</li>
</ol>
<p><A NAME="indexterm-2471"></A><A NAME="indexterm-2472"></A><A NAME="indexterm-2473"></A>Regarding wireless communications, <A HREF="p142.html#mipoverview-fig-26">Figure 27-1</A> depicts the use of wireless transceivers to transmit the
datagrams to the mobile node. Also, all datagrams between the Internet host and the
mobile node use the home address of the mobile node. The home address is used even
when the mobile node is located on the foreign network. The care-of address is used
only for communication with mobility agents. The care-of address is invisible to the
Internet host.</p>
<A NAME="mipoverview-29"></A><h2>Mobile IP Functional Entities</h2>
<p>Mobile IP introduces the following new functional entities:</p>
<ul><li><p><A NAME="indexterm-2474"></A><b>Mobile node (MN)</b> - Host or router
that changes its point of attachment from one network to another network while maintaining
all existing communications by using its IP home address.</p>
</li>
<li><p><b>Home agent (HA)</b> - Router
or server on the home network of a mobile node. The router intercepts datagrams that
are destined for the mobile node. The router then delivers the datagrams through the
care-of address. The home agent also maintains current information on the location
of the mobile node. </p>
</li>
<li><p><A NAME="indexterm-2475"></A><b>Foreign agent (FA)</b> - Router or
server on the foreign network that the mobile node visits. Provides host routing services
to the mobile node. The foreign agent might also provide a care-of address to the
mobile node while the mobile node is registered.</p>
</li>
</ul>
<A NAME="mipoverview-2"></A><h2>How Mobile IP Works</h2>
<A NAME="indexterm-2476"></A><p><A NAME="indexterm-2477"></A><A NAME="indexterm-2478"></A><A NAME="indexterm-2479"></A><A NAME="indexterm-2480"></A>Mobile IP enables routing of IP datagrams to mobile nodes. The home address
of the mobile node always identifies the mobile node regardless of where the mobile
node is attached. When away from home, a care-of address is associated with the mobile
node's home address. The care-of address provides information about the current point
of attachment of the mobile node. Mobile IP uses a registration mechanism to register
the care-of address with a home agent.</p>
<p><A NAME="indexterm-2481"></A><A NAME="indexterm-2482"></A><A NAME="indexterm-2483"></A>The home agent redirects datagrams from the home network to the care-of
address. The home agent constructs a new IP header that contains the care-of address
of the mobile node as the destination IP address. This new header encapsulates the
original IP datagram. Consequently, the home address of the mobile node has no effect
on the routing of the encapsulated datagram until the datagram arrives at the care-of
address. This type of encapsulation is called <b>tunneling</b>. After
the datagram arrives at the care-of address, the datagram is de-encapsulated. Then
the datagram is delivered to the mobile node.</p>
<p><A NAME="indexterm-2484"></A><A NAME="indexterm-2485"></A><A NAME="indexterm-2486"></A><A NAME="indexterm-2487"></A>The following figure shows a mobile node that resides on its home network,
Network A, before the mobile node moves to a foreign network, Network B. Both networks
support Mobile IP. The mobile node is always associated with the home address of the
mobile node, <tt>128.226.3.30</tt>.</p>
<A NAME="mipoverview-fig-27"></A><p><b>Figure 27-2 </b>Mobile Node Residing on Home Network</p>
<IMG src="figures/MNatHome.gif" class="figure" alt="Illustrates a mobile node that resides on its home network and
its connection to the home agent and the relationship to the foreign agent." title="Illustrates a mobile node that resides on its home network and
its connection to the home agent and the relationship to the foreign agent."><p>The following figure shows a mobile node that has moved to a foreign network,
Network B. Datagrams that are destined for the mobile node are intercepted by the
home agent on the home network, Network A. The datagrams are encapsulated. Then, the
datagrams are sent to the foreign agent on Network B. The foreign agent strips off
the outer header. Then the foreign agent delivers the datagram to the mobile node
that is located on Network B.</p>
<A NAME="mipoverview-fig-28"></A><p><b>Figure 27-3 </b>Mobile Node Moving to a Foreign Network</p>
<IMG src="figures/MNaway.gif" class="figure" alt="Illustrates a mobile node that currently resides on a foreign
network and its connection to the foreign agent and the relationship to the home agent." title="Illustrates a mobile node that currently resides on a foreign
network and its connection to the foreign agent and the relationship to the home agent."><p><A NAME="indexterm-2488"></A><A NAME="indexterm-2489"></A>The care-of address might belong to a foreign agent. The care-of address
might be acquired by the mobile node through the Dynamic Host Configuration Protocol
(DHCP) or the Point-to-Point Protocol (PPP). In the latter situation, a mobile node
has a colocated care-of address.</p>
<p><A NAME="indexterm-2490"></A><A NAME="indexterm-2491"></A><A NAME="indexterm-2492"></A><A NAME="indexterm-2493"></A><A NAME="indexterm-2494"></A>Mobility agents (home agents and foreign agents) advertise their presence
by using <b>agent advertisement</b> messages. Optionally, a mobile node
can solicit an agent advertisement message. The mobile node uses any mobility agent
that is attached locally through an <b>agent solicitation</b> message.
A mobile node uses the agent advertisements to determine whether the mobile node is
on the home network or a foreign network.</p>
<p><A NAME="indexterm-2495"></A><A NAME="indexterm-2496"></A><A NAME="indexterm-2497"></A><A NAME="indexterm-2498"></A>The mobile node uses a special registration process to inform the home
agent about the current location of the mobile node. The mobile node is always "listening"
for mobility agents advertising their presence. The mobile node uses these advertisements
to help determine when the mobile node moves to another subnet. When a mobile node
determines that the mobile node has moved its  location, the mobile node uses the
new foreign agent to forward a registration message to the home agent. The mobile
node uses the same process when the mobile node moves from one foreign network to
another foreign network.</p>
<p><A NAME="indexterm-2499"></A><A NAME="indexterm-2500"></A>When the mobile node detects that it is located on the home network, the
mobile node does not use mobility services. When the mobile node returns to the home
network, the mobile node <b>deregisters</b> with the home agent.</p>
<A NAME="mipoverview-5"></A><h2>Agent Discovery</h2>
<A NAME="indexterm-2501"></A><A NAME="indexterm-2502"></A><p>A mobile node uses a method that is known as <b>agent discovery</b> to
determine the following information:</p>
<ul><li><p>When the node has moved from one network to another network</p>
</li>
<li><p>Whether the network is the home network or a foreign network</p>
</li>
<li><p>The foreign agent care-of address that is offered by each foreign
agent on that network</p>
</li>
<li><p>Mobility services that are provided by the mobility agent, advertised
as flags, and additional extensions in the agent advertisement</p>
</li>
</ul>
<p><A NAME="indexterm-2503"></A><A NAME="indexterm-2504"></A><A NAME="indexterm-2505"></A><A NAME="indexterm-2506"></A>Mobility agents transmit <b>agent advertisements</b> to
advertise services on a network. In the absence of agent advertisements, a mobile
node can solicit advertisements. This capability is known as <b>agent solicitation</b>. If a mobile node is capable of supporting its own colocated care-of address,
the mobile node can use regular router advertisements for the same purposes. </p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p141.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p143.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

