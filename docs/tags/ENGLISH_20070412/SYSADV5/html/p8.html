<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Selecting a Different Configuration File - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-09-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)<?GenHTML /ReferencePage> > <a href="p6.html">2.&nbsp;&nbsp;The Name Service Switch (Overview)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p7.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p9.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="c8switch-18904"></a><h3>Selecting a Different Configuration File</h3>
<a name="indexterm-69"></a><a name="indexterm-70"></a><p>When you change a machine's naming service, you need to modify that machine's switch file accordingly. For example, if you change a machine's naming service from NIS to NIS+, you need to install a switch file appropriate for NIS+. You change switch files by
copying the appropriate template file to <tt>nsswitch.conf</tt>.</p>
<p>If you are installing NIS+ on a machine using the NIS+ installation scripts, the NIS+ template script is copied to <tt>nsswitch.conf</tt> for you. In this case, you do not have to configure the switch file unless you want to customize.</p>
<p>Before proceeding to change switch files, make sure the sources listed in the file are properly set up. In other words, if you are going to select the NIS+ version, the client must eventually have access to NIS+ service. If you select the local files version, those files must be properly set up on the client.</p>
<a name="c8switch-2"></a><h4><img src="graphics/procedure.gif"> How to Modify the Name Service Switch</h4>
<p>To change to a switch file, follow these steps.</p>
<hr>
<p><b>Note - </b>In order to use LDAP naming services, you must also properly configure all LDAP client machines, in addition to modifying the <tt>nsswitch.conf</tt>. See <a href="p45.html">Chapter&nbsp;12, Setting Up LDAP Clients (Tasks)</a> for more information.</p>
<hr>
<ol><li><a name="c8switch-step-3"></a><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see Chapter 8, Using Role-Based Access Control (Tasks), in <i>System Administration Guide: Security Services</i>.</p></li><li><a name="c8switch-step-4"></a><b><a name="indexterm-71"></a><a name="indexterm-72"></a>Copy the appropriate alternate file for the machine's naming service over the <tt>nsswitch.conf</tt> file.</b><p><b>NIS+ Version</b> (done automatically for you by NIS+ scripts)</p><pre>client1# <tt><b>cd /etc</b></tt>
client1# <tt><b>cp nsswitch.nisplus nsswitch.conf</b></tt></pre><p><b>NIS Version</b></p><pre>client1# <tt><b>cd /etc</b></tt>
client1# <tt><b>cp nsswitch.nis nsswitch.conf</b></tt></pre><p><b>Local</b> <tt>/etc</tt> <b>Files Version</b></p><pre>client1# <tt><b>cd /etc</b></tt>
client1# <tt><b>cp nsswitch.files nsswitch.conf</b></tt></pre></li><li><a name="c8switch-step-5"></a><b>Reboot the machine.</b><p>The <tt>nscd</tt> daemon caches switch information.  See the <tt>nscd</tt>(1M) man page for information.</p><p><a name="indexterm-73"></a><a name="indexterm-74"></a><a name="indexterm-75"></a><a name="indexterm-76"></a>Some library routines do not periodically check the <tt>nsswitch.conf</tt>
 file to see whether the file has been changed. You must reboot the machine to make sure that the daemon and those routines have the latest information in the file.</p></li></ol><a name="a12swit-66520"></a><h3>DNS and Internet Access</h3>
<a name="indexterm-77"></a><a name="indexterm-78"></a><a name="indexterm-79"></a><a name="indexterm-80"></a><p>The <tt>nsswitch.conf</tt> file also
controls DNS forwarding for clients as described in the following subsections. DNS forwarding grants Internet access to clients. For information on how to set DNS forwarding for NIS and NIS+, see <i>System Administration Guide: Naming and Directory Services (NIS+)</i>.</p>
<a name="a12swit-7"></a><h3>IPv6 and Solaris Naming Services</h3>
<a name="indexterm-81"></a><a name="indexterm-82"></a><a name="indexterm-83"></a><a name="indexterm-84"></a><p>NIS, NIS+ and LDAP support storing IPv6 data,
as well as using IPv6 transports for protocol traffic. Beginning with BIND version 8.3.3, DNS on Solaris supports the use of IPv6 transports on the client side. As of BIND version 8.4.2, DNS provides a complete client-server solution over IPv6 networks on Solaris.</p>
<p>The <tt>nsswitch.conf</tt> file controls search criteria for IPv6 addresses. IPv6 increases the IP address size from 32 bits to 128 bits to support more levels of addressing hierarchy. A larger address size provides a greater number of addressable nodes. For more information about IPv6, its configuration and implementation, see <i>System Administration Guide: IP Services</i>.</p>
<p>Use the new <tt>ipnodes</tt> source for IPv6 addresses. The <tt>/etc/inet/ipnodes</tt> file stores both IPv4 and IPv6 addresses. The <tt>/etc/inet/ipnodes</tt> file uses the same format convention as the <tt>/etc/hosts</tt> file.</p>
<p>IPv6 aware naming services use the new <tt>ipnodes</tt> source for its search forwarding. For instance, if LDAP is aware of IPv6 addresses, specify the following.</p>
<pre>ipnodes: ldap [NOTFOUND=return] files</pre><hr>
<p><b>Caution - </b>Potential delay issues:</p>
<ul><li><p><tt>ipnodes</tt> defaults to <tt>files</tt>. During the transition from IPv4 to IPv6, where all naming services are not aware of IPv6 addresses, accept the <tt>files</tt> default. Otherwise, unnecessary delays, such as boot timing delays, might result during the resolution of addresses.</p>
</li>
<li><p>An application searches all <tt>ipnodes</tt> databases for IPv4 addresses before searching for IPv4 addresses in the <tt>hosts</tt> databases. Before specifying <tt>ipnodes</tt>, consider the inherent delay of searching both databases for IPv4 addresses.</p>
</li>
</ul>
<hr>
<a name="a12swit-11308"></a><h3>Ensuring Compatibility With +/- Syntax</h3>
<p><a name="indexterm-85"></a><a name="indexterm-86"></a>If +/- is used in <tt>/etc/passwd</tt>, <tt>/etc/shadow,</tt> and <tt>/etc/group</tt> files, you need to modify the <tt>nsswitch.conf</tt> file to insure compatibility.</p>
<ul><li><p><a name="indexterm-87"></a><a name="indexterm-88"></a><a name="indexterm-89"></a><a name="indexterm-90"></a><b>NIS+</b>
. To provide +/- semantics with NIS+, change the <tt>passwd</tt> and <tt>groups</tt> sources to <tt>compat</tt>. Then,  add a <tt>passwd_compat: nisplus</tt> entry to the <tt>nsswitch.conf</tt> file after the <tt>passwd</tt> or <tt>group</tt> entry as shown below.</p>
<pre>passwd: compat
passwd_compat: nisplus
group: compat
group_compat: nisplus</pre><p><a name="indexterm-91"></a>The above specifies that client routines obtain their network information from <tt>/etc</tt> files and NIS+ tables as indicated by the <tt>+/-</tt> entries in the files.</p>
</li>
<li><p><a name="indexterm-92"></a><a name="indexterm-93"></a><b>NIS</b>. To provide the same syntax as in the Solaris 4.x release, change the <tt>passwd</tt> and <tt>groups</tt> sources to <tt>compat</tt>.</p>
<pre>passwd: compat
group: compat</pre><p>Specifies the <tt>/etc</tt> files and NIS maps as indicated by the +/- entries in the files.</p>
<hr>
<p><b>Note - </b><a name="indexterm-94"></a>Users working on a client machine being served by an NIS+ server running in NIS compatibility mode cannot run <tt>ypcat</tt> on the <tt>netgroup</tt> table. Doing so gives you results as if the table were empty even if the table has entries. </p>
<hr>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p7.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p9.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2006 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

