<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Mail
Addresses and Mail Routing - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p87.html">14.&nbsp;&nbsp;Mail Services (Reference)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p94.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p96.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="mailrefer-14"></a><h3>Mail
Addresses and Mail Routing</h3>
<p><a name="indexterm-1471"></a><a name="indexterm-1472"></a>The path that a mail message
follows during delivery depends on
the setup of the client system and
the topology of the mail domain. Each
additional level of mail hosts or
mail domains can add another alias
resolution, but the routing process
is basically the same on most hosts.</p>
<p>You can set up a client system
to receive mail locally. Receiving
mail locally is known as running <tt>sendmail</tt> in local mode.
Local mode is the default for all
mail servers and some clients. On
a mail server or a mail client in
local mode, a mail message is routed
the following way.</p>
<hr>
<p><b>Note - </b>The following example
assumes that you are using the default
rule set in the <tt>sendmail.cf</tt> file.</p>
<hr>
<ol><li><p>Expand the mail alias,
if possible, and restart the local
routing process.</p>
<p>The mail
address is expanded by checking for
the mail alias in the name service
and substituting the new value, if
a new value is found. This new alias
is then checked again.</p>
</li>
<li><p>If the mail is local,
deliver the mail to <tt>/usr/lib/mail.local</tt>.</p>
<p>The mail is
delivered to a local mailbox.</p>
</li>
<li><p>If the mail address
includes a host in this mail domain,
deliver the mail to that host.</p>
</li>
<li><p>If the address does
not include a host in this domain,
forward the mail to the mail host.</p>
<p>The mail host uses the same
routing process as the mail server.
However, the mail host can receive
mail that is addressed to the domain
name as well as to the host name.</p>
</li>
</ol>
<a name="mailrefer-24"></a><h3>Interactions
of <tt>sendmail</tt> With
Name Services</h3>
<p>This section describes domain
names as they apply to <tt>sendmail</tt> and
name services. Furthermore, this section
describes the rules for effective
use of name services, and the specific
interactions of <tt>sendmail</tt> with
name services. For details, refer
to the following topics.</p>
<ul><li><p><a href="p95.html#mailrefer-87"><tt>sendmail.cf</tt> and Mail Domains</a></p>
</li>
<li><p><a href="p95.html#mailrefer-25"><tt>sendmail</tt> and Name Services</a></p>
</li>
<li><p><a href="p96.html">Interactions of NIS and <tt>sendmail</tt></a></p>
</li>
<li><p><a href="p96.html#mailrefer-29">Interactions of <tt>sendmail</tt> With NIS and DNS</a></p>
</li>
<li><p><a href="p96.html#mailrefer-30">Interactions of NIS+ and <tt>sendmail</tt></a></p>
</li>
<li><p><a href="p96.html#mailrefer-31">Interactions of <tt>sendmail</tt> With NIS+ and DNS</a></p>
</li>
</ul>
<p>If you are looking for related
task information, refer to <a href="p75.html#mailadmin-122">How to Use DNS With <tt>sendmail</tt></a> or <a href="p79.html">Administering Mail Alias Files (Task Map)</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>
<a name="mailrefer-87"></a><h4><tt>sendmail.cf</tt> and Mail Domains</h4>
<p>The standard <tt>sendmail.cf</tt> file
uses mail domains to determine whether
mail is delivered directly or through
a mail host. Intradomain mail is delivered
through a direct SMTP connection,
while interdomain mail is forwarded
to a mail host.</p>
<p><a name="indexterm-1473"></a><a name="indexterm-1474"></a>In a secure network, only
a few selected hosts are authorized
to generate packets that are targeted
to external destinations. Even if
a host has the IP address of the remote
host that is external to the mail
domain, the establishment of an SMTP
connection is not guaranteed. The
standard <tt>sendmail.cf</tt> assumes
the following.</p>
<ul><li><p>The current host is
not authorized to send packets directly
to a host outside the mail domain.</p>
</li>
<li><p>The mail host is capable
of forwarding the mail to an authorized
host that can transmit packets directly
to an external host. Actually, the
mail host can be an authorized host.</p>
</li>
</ul>
<p>With these assumptions, the
mail host is responsible for delivering
or forwarding interdomain mail.</p>
<a name="mailrefer-25"></a><h4><tt>sendmail</tt> and Name Services</h4>
<p><a name="indexterm-1475"></a><tt>sendmail</tt> imposes
various requirements on name services.
To improve your understanding of these
requirements, this section first describes
the relationship of mail domains to
name service domains. Then the section
describes the various requirements.
Refer to the following.</p>
<ul><li><p><a href="p95.html#mailrefer-26">Mail Domains and Name Service Domains</a></p>
</li>
<li><p><a href="p95.html#mailrefer-27">Requirements for Name Services</a></p>
</li>
<li><p>Man pages for <tt>nis+</tt>(1), <tt>nisaddent</tt>(1M),
and <tt>nsswitch.conf</tt>(4)</p>
</li>
</ul>
<a name="mailrefer-26"></a><h5>Mail
Domains and Name Service Domains</h5>
<p>The mail domain name must be
a suffix of the name service domain.
For example, if the domain name of
the name service is <tt>A.B.C.D</tt>,
the mail domain name could be one
of the following.</p>
<ul><li><p><tt>A.B.C.D</tt></p>
</li>
<li><p><tt>B.C.D</tt></p>
</li>
<li><p><tt>C.D</tt></p>
</li>
<li><p><tt>D</tt></p>
</li>
</ul>
<p><a name="indexterm-1476"></a><a name="indexterm-1477"></a>When first established,
the mail domain name is often identical
to the name service domain. As the
network grows, the name service domain
can be divided into smaller pieces
to make the name service more manageable.
However, the mail domain often remains
undivided to provide consistent aliasing.</p>
<a name="mailrefer-27"></a><h5>Requirements
for Name Services</h5>
<p>This section describes the requirements
that <tt>sendmail</tt> imposes
on name services.</p>
<p>A host table or map in a name
service must be set up to support
three types of <tt>gethostbyname()</tt> queries.</p>
<ul><li><p><tt>mailhost</tt> &ndash;
Some name service configurations satisfy
this requirement automatically.</p>
</li>
<li><p>Full host name (for
example, <tt>smith.admin.acme.com</tt>) &ndash;
Many name service configurations satisfy
this requirement.</p>
</li>
<li><p>Short host name (for
example, <tt>smith</tt>) &ndash; <tt>sendmail</tt> must connect to
the mail host in order to forward
external mail. To determine if a mail
address is within the current mail
domain, <tt>gethostbyname()</tt> is
invoked with the full host name. If
the entry is found, the address is
considered internal.</p>
<p>NIS,
NIS+, and DNS support <tt>gethostbyname()</tt> with a short host name
as an argument, so this requirement
is automatically satisfied.</p>
</li>
</ul>
<p>Two additional rules about the
host name service need to be followed
to establish efficient <tt>sendmail</tt> services
within a name service.</p>
<ul><li><p><tt>gethostbyname()</tt> with
full host-name argument and short
host-name argument should yield consistent
results. For example, <tt>gethostbyname(smith.admin.acme.com)</tt> should return the same
result as <tt>gethostbyname(smith)</tt>,
if both functions are called from
the mail domain <tt>admin.acme.com</tt>.</p>
</li>
<li><p><a name="indexterm-1478"></a>For all name service domains
under a common mail domain, <tt>gethostbyname()</tt> with a short host name
should yield the same result. For
example, if the mail domain <tt>smith.admin.acme.com</tt> is given, <tt>gethostbyname(smith)</tt> should return the same
result when the call originates from
either the <tt>ebb.admin.acme.com</tt> domain
or the <tt>esg.admin.acme.com</tt> domain.
The mail domain name is usually shorter
than the name service domain, which
gives this requirement special implications
for various name services.</p>
</li>
</ul>
<p>For more information about the <tt>gethostbyname()</tt> function,
refer to the <tt>gethostbyname</tt>(3NSL) man page.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p94.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p96.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

