<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>How
to Set Up a Mail Gateway - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p72.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a> > <a href="p73.html#mailadmin-13">Setting Up Mail Services</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p74.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p76.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="mailadmin-37"></a><h4><img src="graphics/procedure.gif"> How
to Set Up a Mail Gateway</h4>
<p><a name="indexterm-1148"></a><a name="indexterm-1149"></a>A mail gateway manages
communication with networks outside
your domain. The mailer on the sending
mail gateway can match the mailer
on the receiving system.</p>
<p>A good candidate for a mail
gateway is a system that is attached
to Ethernet and phone lines. Another
good candidate is a system that is
configured as a router to the Internet.
You can configure the mail host or
another system as the mail gateway.
You might choose to configure more
than one mail gateway for your domain.
If you have UNIX-to-UNIX Copy Program
(UUCP) connections, you should configure
the system (or systems) with UUCP
connections as the mail gateway.</p>
<ol><li><a name="mailadmin-step-39"></a><b>Become
superuser on the mail gateway or assume
an equivalent role.</b><p>Roles
contain authorizations and privileged
commands. For more information about
roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="mailadmin-step-281"></a><b>Stop <tt>sendmail</tt>.</b><pre># <tt><b>svcadm -t disable network/smtp:sendmail</b></tt></pre></li><li><a name="mailadmin-step-41"></a><b>Verify
the host-name configuration.</b><p><a name="indexterm-1150"></a>Run the <tt>check-hostname</tt> script to verify that <tt>sendmail</tt> can identify the
fully qualified host name for this
server.</p><pre># <tt><b>/usr/sbin/check-hostname</b></tt>
hostname phoenix OK: fully qualified as phoenix.example.com</pre><p>If this script is not successful
in identifying the fully qualified
host name, you need to add the fully
qualified host name as the first alias
for the host in <tt>/etc/hosts</tt>.
If you need help with this step, refer
to <a href="p74.html#mailadmin-step-33">Step&nbsp;4</a> of <a href="p74.html#mailadmin-29">How to Set Up a Mail Host</a>. </p></li><li><a name="mailadmin-step-283"></a><b>Ensure
that your name service has been started.</b><ol><li><a name="mailadmin-step-236"></a>(Optional) <b>If you
are running NIS, use this command.</b><pre># <tt><b>ypwhich</b></tt></pre><p>For more information, refer
to the <tt>ypwhich</tt>(1) man
page.</p></li><li><a name="mailadmin-step-237"></a>(Optional) <b>If you
are running NIS+, use this command.</b><pre># <tt><b>nisls</b></tt></pre><p>For more information, refer
to the <tt>nisls</tt>(1) man
page.</p></li><li><a name="mailadmin-step-238"></a>(Optional) <b>If you
are running DNS, use this command.</b><pre># <tt><b>nslookup </tt><i>hostname</i><tt></b></tt></pre><dl><dt><i>hostname</i></dt>
<dd><p>Use your host name.</p>
</dd>
</dl>
<p>For more information, refer
to the <tt>nslookup</tt>(1M) man
page.</p></li><li><a name="mailadmin-step-239"></a>(Optional) <b>If you
are running LDAP, use this command.</b><pre># <tt><b>ldaplist</b></tt></pre><p>For more information, refer
to the <tt>ldaplist</tt>(1) man
page.</p></li></ol></li><li><a name="mailadmin-step-42"></a><b>Restart <tt>sendmail</tt>.</b><pre># <tt><b>svcadm enable network/smtp:sendmail</b></tt></pre></li><li><a name="mailadmin-step-282"></a><b>Test
your mail configuration.</b><p>See <a href="p85.html#mailadmin-181">How to Test the Mail Configuration</a> for
instructions.</p><hr>
<p><b>Note - </b>For more information about
the mail gateway, refer to <a href="p90.html#mailrefer-68">Hardware Components</a> in <a href="p87.html">Chapter&nbsp;14, Mail Services (Reference)</a>.</p>
<hr>
</li></ol><a name="mailadmin-122"></a><h4><img src="graphics/procedure.gif"> How
to Use DNS With <tt>sendmail</tt></h4>
<p><a name="indexterm-1151"></a><a name="indexterm-1152"></a><a name="indexterm-1153"></a>The DNS name service does
not support aliases for individuals.
This name service does support aliases
for hosts or domains that use Mail
Exchanger (MX) records and <tt>CNAME</tt> records. You can specify
host names, domain names, or both
names in the DNS database. For more
information about <tt>sendmail</tt> and
DNS, see <a href="p95.html#mailrefer-24">Interactions of <tt>sendmail</tt> With Name Services</a> in <a href="p87.html">Chapter&nbsp;14, Mail Services (Reference)</a>,
or see the <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i>. </p>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="mailadmin-step-125"></a><b>Enable
DNS host lookups (NIS+ only).</b><p><a name="indexterm-1154"></a><a name="indexterm-1155"></a>Edit the <tt>/etc/nsswitch.conf</tt> file and remove the <tt>#</tt> from the <tt>hosts</tt> definition
that includes the  <tt>dns</tt> flag. The host entry
must include the <tt>dns</tt> flag,
as the following example shows, in
order for the DNS host aliases to
be used. </p><pre># <tt><b>grep hosts /etc/nsswitch.conf</b></tt>
#hosts:     nisplus [NOTFOUND=return] files
hosts:      dns nisplus [NOTFOUND=return] files</pre></li><li><a name="mailadmin-step-126"></a><b>Check
for a <tt>mailhost</tt> and <tt>mailhost.</tt><i>domain</i> entry.</b><p>Use <tt>nslookup</tt> to
ensure that an entry exists for <tt>mailhost</tt> and <tt>mailhost.</tt><i>domain</i><tt></tt> in
the DNS database. For more information,
refer to the <tt>nslookup</tt>(1M) man
page.</p></li></ol><a name="mailadmin-268"></a><h4>Setting
Up a Virtual Host</h4>
<p><a name="indexterm-1156"></a><a name="indexterm-1157"></a>If you need to assign
more than one IP address to a host,
see this Web site: <a href="http://www.sendmail.org/virtual-hosting.html">http://www.sendmail.org/virtual-hosting.html</a>. This site provides complete
instructions about how to use <tt>sendmail</tt> to set up a virtual host.
However, in the &ldquo;Sendmail Configuration&rdquo;
section, do not perform step 3b, as
shown in the following.</p>
<pre># <tt><b>cd sendmail-VERSION/cf/cf</b></tt>
# <tt><b>./Build mailserver.cf</b></tt>
# <tt><b>cp mailserver.cf /etc/mail/sendmail.cf</b></tt></pre><p>Instead, for the Solaris operating
system, perform the following steps.</p>
<pre># <tt><b>cd /etc/mail/cf/cf</b></tt>
# <tt><b>/usr/ccs/bin/make</b></tt> <i>mailserver</i><tt><b>.cf</b></tt>
# <tt><b>cp</b></tt> <i>mailserver</i><tt><b>.cf /etc/mail/sendmail.cf</b></tt></pre><dl><dt><i>mailserver</i></dt>
<dd><p>Use the name of the <tt>.cf</tt> file.</p>
</dd>
</dl>
<p><a href="p76.html">Building the <tt>sendmail.cf</tt> Configuration File</a> outlines
the same three steps as part of the
build process.</p>
<p>After you have generated your <tt>/etc/mail/sendmail.cf</tt> file,
you can continue with the next steps
to create a virtual user table.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p74.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p76.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

