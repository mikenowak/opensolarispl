<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Mail
Services (Tasks) - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p71.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p73.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="mailadmin-1"></a>Chapter&nbsp;13<h3>Mail
Services (Tasks)</h3><p>This chapter describes how to
set up and administer mail services.
If you are not familiar with administering
mail services, read <a href="p70.html">Chapter&nbsp;12, Mail Services (Overview)</a> for
an introduction to the components
of mail services. This chapter also
provides a description of a typical
mail service configuration, as shown
in <a href="p71.html#mailintro-fig-18">Figure 12-1</a>. The following
list can help you find groups of related
procedures that are covered in this
chapter.</p>
<ul><li><p><a href="p72.html#mailadmin-270">Task Map for Mail Services</a></p>
</li>
<li><p><a href="p73.html">Setting Up Mail Services (Task Map)</a></p>
</li>
<li><p><a href="p79.html">Administering Mail Alias Files (Task Map)</a></p>
</li>
<li><p><a href="p83.html">Administering the Queue Directories (Task Map)</a></p>
</li>
<li><p><a href="p84.html#mailadmin-264">Administering <tt>.forward</tt> Files (Task Map)</a></p>
</li>
<li><p><a href="p85.html#mailadmin-265">Troubleshooting Procedures and Tips for Mail Services (Task Map)</a></p>
</li>
</ul>
<p>See <a href="p87.html">Chapter&nbsp;14, Mail Services (Reference)</a> for a more detailed description
of the components of mail services.
This chapter also describes the mail
service programs and files, the mail
routing process, the interactions
of <tt>sendmail</tt> with
name services, and the features in
version 8.13 of <tt>sendmail</tt> that
are not fully described in the <tt>sendmail</tt>(1M) man
page.</p>
<a name="mailadmin-270"></a><h3>Task
Map for Mail Services</h3>
<p><a name="indexterm-1122"></a>The following table refers
you to other task maps that focus
on a specific group of procedures.</p>
<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Setting up mail services</p>
</td><td><p>Use these procedures to set
up each component of your mail service.
Learn how to set up a mail server,
a mail client, a mail host, a mail
gateway, and a virtual host. Learn
how to use DNS with <tt>sendmail</tt>.</p>
</td><td><p><a href="p73.html">Setting Up Mail Services (Task Map)</a></p>
</td></tr>
<tr><td><p>Building a <tt>sendmail</tt> configuration
file</p>
</td><td><p>Use this procedure to modify
your <tt>sendmail.cf</tt> file.
See an example of how to enable domain
masquerading.</p>
</td><td><p><a href="p76.html">Building the <tt>sendmail.cf</tt> Configuration File</a></p>
</td></tr>
<tr><td><p>Setting SMTP to use Transport
Layer Security (TLS)</p>
</td><td><p>Use this procedure to enable
SMTP to have secure connections with
TLS.</p>
</td><td><p><a href="p77.html">Setting SMTP to Use TLS</a></p>
</td></tr>
<tr><td><p>Managing mail delivery with
an alternate configuration</p>
</td><td><p>Use this procedure to prevent
mail delivery problems that can occur
if the master daemon is disabled.</p>
</td><td><p><a href="p78.html">Managing Mail Delivery by Using an Alternate Configuration</a></p>
</td></tr>
<tr><td><p>Administering mail alias files</p>
</td><td><p>Use these procedures to provide
aliasing on your network. Learn how
to manage entries in NIS+ tables.
Also, learn how to set up an NIS map,
a local mail alias, a keyed map file,
and a postmaster alias.</p>
</td><td><p><a href="p79.html">Administering Mail Alias Files (Task Map)</a></p>
</td></tr>
<tr><td><p>Administering the mail queue</p>
</td><td><p>Use these procedures to provide
smooth queue processing. Learn how
to display and move the mail queue,
force mail queue processing, and run
a subset of the mail queue. Also,
learn how to run the old mail queue.</p>
</td><td><p><a href="p83.html">Administering the Queue Directories (Task Map)</a></p>
</td></tr>
<tr><td><p>Administering <tt>.forward</tt> files</p>
</td><td><p>Use these procedures to disable <tt>.forward</tt> files or change
the search path of the <tt>.forward</tt> file. Also, learn how
to permit users to use the <tt>.forward</tt> file by creating and populating <tt>/etc/shells</tt>.</p>
</td><td><p><a href="p84.html#mailadmin-264">Administering <tt>.forward</tt> Files (Task Map)</a></p>
</td></tr>
<tr><td><p>Troubleshooting procedures and
tips for mail services</p>
</td><td><p>Use these procedures and tips
to resolve problems with your mail
service. Learn how to test the mail
configuration, check mail aliases,
test the <tt>sendmail</tt> rule
sets, verify connections to other
systems, and log messages. Also, learn
where to look for other mail diagnostic
information.</p>
</td><td><p><a href="p85.html#mailadmin-265">Troubleshooting Procedures and Tips for Mail Services (Task Map)</a></p>
</td></tr>
<tr><td><p>Resolving error messages</p>
</td><td><p>Use the information in this
section to resolve some mail-related
error messages.</p>
</td><td><p><a href="p86.html#mailadmin-219">Resolving Error Messages</a></p>
</td></tr>
</table><a name="mailadmin-2"></a><h3>Planning
Your Mail System</h3>
<p><a name="indexterm-1123"></a>The following list describes
some concerns that should be part
of your planning process.</p>
<ul><li><p>Determine the type
of mail configuration that meets your
requirements. This section describes
two basic types of mail configuration
and briefly lists what you need to
set up each configuration. If you
need to set up a new mail system or
if you are expanding an existing one,
you might find this section useful. <a href="p72.html#mailadmin-3">Local Mail Only</a> describes the first configuration
type, and <a href="p72.html#mailadmin-7">Local Mail and a Remote Connection</a> describes
the second type.</p>
</li>
<li><p>As necessary, choose
the systems that are to act as mail
servers, mail hosts, and mail gateways.</p>
</li>
<li><p>Make a list of all
the mail clients for which you are
providing service and include the
location of their mailboxes. This
list can help you when you are ready
to create mail aliases for your users.</p>
</li>
<li><p>Decide how to update
aliases and forward mail messages.
You might set up an <tt>aliases</tt> mailbox
as a place for users to send requests
for mail forwarding. Users could also
use this mailbox to send requests
for changes to their default mail
alias. If your system uses NIS or
NIS+, you can administer mail forwarding,
rather than requiring users to manage
mail forwarding. <a href="p79.html">Administering Mail Alias Files (Task Map)</a> provides
a list of tasks that are related to
aliasing. <a href="p84.html#mailadmin-264">Administering <tt>.forward</tt> Files (Task Map)</a> provides
a list of tasks that are related to
managing <tt>.forward</tt> files.</p>
</li>
</ul>
<p>After you have completed the
planning process, set up the systems
on your site to perform the functions
that are described in <a href="p73.html">Setting Up Mail Services (Task Map)</a>.
For other task information, refer
to <a href="p72.html#mailadmin-270">Task Map for Mail Services</a>.</p>
<a name="mailadmin-3"></a><h4>Local
Mail Only</h4>
<p><a name="indexterm-1124"></a><a name="indexterm-1125"></a>The simplest mail configuration,
as shown in <a href="p72.html#mailadmin-fig-4">Figure 13-1</a>, is two or more
workstations that are connected to
one mail host. Mail is completely
local. All the clients store mail
on their local disks, and the clients
act as mail servers. Mail addresses
are parsed by using the <tt>/etc/mail/aliases</tt> files.</p>
<a name="mailadmin-fig-4"></a>Figure 13-1 Local
Mail Configuration<img src="figures/7153.LocalMailConfig.gif" alt=""></img><p>To set up this kind of mail
configuration, you need the following.</p>
<ul><li><p><a name="indexterm-1126"></a><a name="indexterm-1127"></a>The default <tt>/etc/mail/sendmail.cf</tt> file, which requires no
editing, on each mail client system.</p>
</li>
<li><p><a name="indexterm-1128"></a>A server that is designated
as the mail host. If you are running
NIS or NIS+, you can make this designation
by adding <tt>mailhost.</tt><i>domain-name</i><tt></tt> to
the <tt>/etc/hosts</tt> file
on the mail host. If you are running
another name service, such as DNS
or LDAP, you must provide additional
information in the <tt>/etc/hosts</tt> file.
See <a href="p74.html#mailadmin-29">How to Set Up a Mail Host</a>.</p>
</li>
<li><p>If you are using a
name service other than NIS or NIS+,
you need matching <tt>/etc/mail/aliases</tt> files on any system that
has a local mailbox.</p>
</li>
<li><p>Enough space in <tt>/var/mail</tt> on each mail
client system to hold the mailboxes.</p>
</li>
</ul>
<p>For task information about setting
up your mail service, refer to <a href="p73.html#mailadmin-13">Setting Up Mail Services</a>. If you are
looking for a particular procedure
that is related to setting up your
mail service, refer to <a href="p73.html">Setting Up Mail Services (Task Map)</a>.</p>
<a name="mailadmin-7"></a><h4>Local
Mail and a Remote Connection</h4>
<p><a name="indexterm-1129"></a>The most common mail configuration
in a small network is shown in <a href="p72.html#mailadmin-fig-8">Figure 13-2</a>. One system includes
the mail server, the mail host, and
the mail gateway that provides the
remote connection. Mail is distributed
by using the <tt>/etc/mail/aliases</tt> files
on the mail gateway. No name service
is required.</p>
<a name="mailadmin-fig-8"></a>Figure 13-2 Local
Mail Configuration With a UUCP Connection<img src="figures/7154.LocalMailUUCP.gif" alt=""></img><p><a name="indexterm-1130"></a>In this configuration,
you can assume that the mail clients
mount their mail files from <tt>/var/mail</tt> on the mail host. To set
up this kind of mail configuration,
you need the following.</p>
<ul><li><p>The default <tt>/etc/mail/sendmail.cf</tt> file on each mail client
system. This file does not require
any editing.</p>
</li>
<li><p><a name="indexterm-1131"></a>A server that is designated
as the mail host. If you are running
NIS or NIS+, you can make this designation
by adding <tt>mailhost.</tt><i>domain-name</i><tt></tt> to
the <tt>/etc/hosts</tt> file
on the mail host. If you are running
another name service, such as DNS
or LDAP, you must provide additional
information in the <tt>/etc/hosts</tt> file.
See <a href="p74.html#mailadmin-29">How to Set Up a Mail Host</a>.</p>
</li>
<li><p>If you are using a
name service other than NIS or NIS+,
you need matching <tt>/etc/mail/aliases</tt> files on any system that
has a local mailbox.</p>
</li>
<li><p>Enough space in <tt>/var/mail</tt> on the mail server
to hold the client mailboxes.</p>
</li>
</ul>
<p>For task information about setting
up your mail service, refer to <a href="p73.html#mailadmin-13">Setting Up Mail Services</a>. If you are
looking for a particular procedure
that is related to setting up your
mail service, refer to <a href="p73.html">Setting Up Mail Services (Task Map)</a>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p71.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p73.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

