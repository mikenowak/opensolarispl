<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Mounting File Systems - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p15.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p16.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p18.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rfsadmin-61"></a><h3>Mounting File Systems</h3>
<p><a name="indexterm-189"></a><a name="indexterm-190"></a>You can mount file systems in several ways. File systems can be
mounted automatically when the system is booted, on demand from the command
line, or through the automounter. The automounter provides many advantages
to mounting at boot time or mounting from the command line. However, many
situations require a combination of all three methods. Additionally,  several
ways of enabling or disabling processes exist, depending on the options you
use when mounting the file system. See the following table for a complete
list of the tasks that are associated with file-system mounting.</p>
<a name="rfsadmin-tbl-171"></a>Table 5-2 Task Map for Mounting
File Systems<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Mount a file system at boot time</p>
</td><td><p>Steps so that a file system is mounted whenever a system is rebooted.</p>
</td><td><p><a href="p17.html#rfsadmin-62">How to Mount a File System at Boot Time</a>.</p>
</td></tr>
<tr><td><p>Mount a file system by using a command</p>
</td><td><p>Steps to mount a file system when a system is running. This procedure
is useful when testing.</p>
</td><td><p><a href="p17.html#rfsadmin-66">How to Mount a File System From the Command Line</a>.</p>
</td></tr>
<tr><td><p>Mount with the automounter</p>
</td><td><p>Steps to access a file system on demand without using the command line.</p>
</td><td><p><a href="p17.html#rfsadmin-67">Mounting With the Automounter</a>.</p>
</td></tr>
<tr><td><p>Prevent large files</p>
</td><td><p>Steps to prevent large files from being created on a file system.</p>
</td><td><p><a href="p17.html#rfsadmin-75">How to Disable Large Files on an NFS Server</a>.</p>
</td></tr>
<tr><td><p>Start client-side failover</p>
</td><td><p>Steps to enable the automatic switchover to a working file system if
a server fails.</p>
</td><td><p><a href="p17.html#rfsadmin-81">How to Use Client-Side Failover</a>.</p>
</td></tr>
<tr><td><p>Disable mount access for a client</p>
</td><td><p>Steps to disable the ability of one client to access a remote file system.</p>
<hr>
<p><b>Note - </b>The procedure shows you
how to use the <tt>sharemgr</tt> command. The example that follows
the procedure uses the <tt>share</tt> and <tt>shareall</tt> commands
to complete the same task.</p>
<hr>
</td><td><p><a href="p18.html">How to Disable Mount Access for One Client</a>.</p>
</td></tr>
<tr><td><p>Provide access to a file system through a firewall</p>
</td><td><p>Steps to allow access to a file system through a firewall by using the
WebNFS protocol.</p>
</td><td><p><a href="p18.html#rfsadmin-88">How to Mount an NFS File System Through a Firewall</a>.</p>
</td></tr>
<tr><td><p>Mount a file system by using an NFS URL</p>
</td><td><p>Steps to allow access to a file system by using an NFS URL. This process
allows for file-system access without using the MOUNT protocol.</p>
</td><td><p><a href="p18.html#rfsadmin-92">How to Mount an NFS File System Using an NFS URL</a>.</p>
</td></tr>
</table><a name="rfsadmin-62"></a><h4><img src="graphics/procedure.gif"> How to Mount a File System at Boot Time</h4>
<p><a name="indexterm-191"></a><a name="indexterm-192"></a>If you want to mount file systems at boot time instead of using
autofs maps, follow this procedure. This procedure must be completed on every
client that should have access to remote file systems.   </p>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-64"></a><b>Add an entry for the file system to <tt>/etc/vfstab</tt>.</b><p><a name="indexterm-193"></a><a name="indexterm-194"></a>Entries in the <tt>/etc/vfstab</tt> file have the
following syntax:</p><pre>special  fsckdev  mountp  fstype  fsckpass  mount-at-boot  mntopts</pre><p>See the <tt>vfstab</tt>(4) man
page for more information.</p><hr>
<p><b>Caution - </b><a name="indexterm-195"></a><a name="indexterm-196"></a><a name="indexterm-197"></a>NFS servers that also have NFS client <tt>vfstab</tt> entries
must always specify the <tt>bg</tt> option to avoid
a system hang during reboot. For more information, see <a href="p36.html#rfsrefer-16"><tt>mount</tt> Options for NFS File Systems</a>.</p>
<hr>
</li></ol><a name="rfsadmin-ex-233"></a>Example 5-4 Entry in the Client's <tt>vfstab</tt> File<p>You want a client machine to mount the <tt>/var/mail</tt> directory
from the server <tt>wasp</tt>. You want the file system to be mounted
as <tt>/var/mail</tt> on the client and you want the client to
have read-write access. Add the following entry to the client's <tt>vfstab</tt> file.</p>
<pre>wasp:/var/mail - /var/mail nfs - yes rw</pre><a name="rfsadmin-66"></a><h4><img src="graphics/procedure.gif"> How to Mount a File System From the Command
Line</h4>
<p><a name="indexterm-198"></a>Mounting a file system from the command line is often performed
to test a new mount point. This type of mount allows for temporary access
to a file system that is not available through the automounter.</p>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-192"></a><b>Mount the file system.</b><p><a name="indexterm-199"></a><a name="indexterm-200"></a>Type the following
command:</p><pre># <tt><b>mount -F nfs -o ro bee:/export/share/local /mnt</b></tt></pre><p>In this instance, the <tt>/export/share/local</tt> file
system from the server <tt>bee</tt> is mounted on read-only <tt>/mnt</tt> on the local system. Mounting from the command line allows for
temporary viewing of the file system. You can unmount the file system with <tt>umount</tt> or by rebooting the local host.</p><hr>
<p><b>Caution - </b>Starting with the Solaris 2.6 release, all versions of the <tt>mount</tt> command do not warn about invalid options. The command silently
ignores any options that cannot be interpreted. To prevent unexpected behavior,
ensure that you verify all of the options that were used.</p>
<hr>
</li></ol><a name="rfsadmin-67"></a><h4>Mounting With the Automounter</h4>
<p><a name="indexterm-201"></a><a name="indexterm-202"></a><a href="p22.html#rfsadmin-127">Task Overview for Autofs Administration</a> includes the specific instructions for establishing and supporting
mounts with the automounter. Without any changes to the generic system, clients
should be able to access remote file systems through the <tt>/net</tt> mount
point. To mount the <tt>/export/share/local</tt> file system from
the previous example,  type the following:  </p>
<pre>% <tt><b>cd /net/bee/export/share/local</b></tt></pre><p>Because the automounter allows all users to mount file systems, <tt>root</tt> access is not required. The automounter also provides for automatic
unmounting of file systems, so you do not need to unmount file systems after
you are finished.</p>
<a name="rfsadmin-75"></a><h4><img src="graphics/procedure.gif"> How to Disable Large Files on an NFS Server</h4>
<p><a name="indexterm-203"></a><a name="indexterm-204"></a>For servers that are supporting clients that cannot handle a file
over 2 GBytes, you might need to disable the ability to create large files.</p>
<hr>
<p><b>Note - </b>Versions prior to the 2.6 release of the Solaris release cannot
use large files. If the clients need to access large files, check that the
clients of the NFS server are running, at minimum, the 2.6 release.</p>
<hr>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-77"></a><b>Check that no large files exist on the file
system.</b><p>For example:</p><pre># <tt><b>cd /export/home1</b></tt>
# <tt><b>find . -xdev -size +2000000 -exec ls -l {} \;</b></tt></pre><p>If large files are on the file system, you must remove or move these
files  to another file system.</p></li><li><a name="rfsadmin-step-78"></a><b>Unmount the file system.</b><pre># <tt><b>umount /export/home1</b></tt></pre></li><li><a name="rfsadmin-step-79"></a><b>Reset the file system state if the file
system has been mounted by using <tt>largefiles</tt>.</b><p><tt>fsck</tt> resets the file system state if no large files
exist on the file system:</p><pre># <tt><b>fsck /export/home1</b></tt></pre></li><li><a name="rfsadmin-step-80"></a><b><a name="indexterm-205"></a><a name="indexterm-206"></a><a name="indexterm-207"></a>Mount the file system by using <tt>nolargefiles</tt>.</b><pre># <tt><b>mount -F ufs -o nolargefiles /export/home1</b></tt></pre><p><a name="indexterm-208"></a><a name="indexterm-209"></a><a name="indexterm-210"></a>You can mount from the command line, but to make the option more
permanent, add an entry that resembles the following into <tt>/etc/vfstab</tt>:</p><pre>/dev/dsk/c0t3d0s1 /dev/rdsk/c0t3d0s1 /export/home1  ufs  2  yes  nolargefiles</pre></li></ol><a name="rfsadmin-81"></a><h4><img src="graphics/procedure.gif"> How to Use Client-Side Failover</h4>
<a name="indexterm-211"></a><a name="indexterm-212"></a><ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-83"></a><b>On the NFS client, mount the file system
by using the <tt>ro</tt> option.</b><p><a name="indexterm-213"></a><a name="indexterm-214"></a>You can mount from the command line, through the automounter,
or by adding an entry to <tt>/etc/vfstab</tt> that resembles the
following: </p><pre>bee,wasp:/export/share/local  -  /usr/local  nfs  -  no  ro</pre><p>This syntax has been allowed by the automounter. However, the failover
was not available while file systems were mounted, only when a server was
being selected.</p><hr>
<p><b>Note - </b>Servers that are running different versions of the NFS protocol
cannot be mixed by using a command line or in a <tt>vfstab</tt> entry.
Mixing servers that support NFS version 2, version 3, or version 4 protocols
can only be performed with autofs. In autofs, the best subset of version 2,
version 3, or version 4 servers is used.</p>
<hr>
</li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p16.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p18.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

