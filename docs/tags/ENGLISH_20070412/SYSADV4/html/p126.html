<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Common
Network Problems That Affect PPP - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p124.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a> > <a href="p125.html">Solving PPP-Related and PPPoE-Related Problems</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p125.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p127.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="ppp.trouble-108"></a><h4>Common
Network Problems That Affect PPP</h4>
<p><a name="indexterm-1930"></a>You can use the messages
that are generated by <tt>netstat</tt>  <tt>-s</tt> to fix the network problems
that are shown in the following table.
For related procedural information,
refer to <a href="p125.html#ppp.trouble-75">How to Diagnose Network Problems</a>.</p>
<a name="ppp.trouble-tbl-105"></a>Table 21-2 Common
Network Problems That Affect PPP<table><tr><th><p>Message</p>
</th><th><p>Problem</p>
</th><th><p>Solution</p>
</th></tr>
<tr><td><p>IP packets not
forwardable</p>
</td><td><p>The local host is missing a
route.</p>
</td><td><p>Add the missing route to the
local host's routing tables.</p>
</td></tr>
<tr><td><p>ICMP input destination
unreachable</p>
</td><td><p>The local host is missing a
route.</p>
</td><td><p>Add the missing route to the
local host's routing tables.</p>
</td></tr>
<tr><td><p>ICMP time exceeded</p>
</td><td><p>Two routers are forwarding the
same destination address to each other,
causing the packet to bounce back
and forth until the time-to-live (TTL)
value is exceeded.</p>
</td><td><p>Use <tt>traceroute</tt> to
find the source of the routing loop,
and then contact the administrator
of the router in error. For information
about <tt>traceroute</tt>,
refer to the <tt>traceroute</tt>(1M) man
page.</p>
</td></tr>
<tr><td><p>IP packets not
forwardable</p>
</td><td><p>The local host is missing a
route.</p>
</td><td><p>Add the missing route to the
local host's routing table.</p>
</td></tr>
<tr><td><p>ICMP input destination
unreachable</p>
</td><td><p>The local host is missing a
route.</p>
</td><td><p>Add the missing route to the
local host's routing tables.</p>
</td></tr>
</table><a name="ppp.trouble-93"></a><h4><img src="graphics/procedure.gif"> How
to Diagnose and Fix Communications
Problems</h4>
<p><a name="indexterm-1931"></a>Communications problems
occur when the two peers cannot successfully
establish a link. Sometimes these
problems are actually negotiation
problems that are caused by incorrectly
configured chat scripts. The following
procedure shows you how to clear communication
problems. For clearing negotiation
problems that are caused by a faulty
chat script, see <a href="p127.html#ppp.trouble-tbl-49">Table 21-5</a>.</p>
<ol><li><a name="ppp.trouble-step-98"></a><b>Become
superuser on the local machine or
assume an equivalent role.</b><p>Roles
contain authorizations and privileged
commands. For more information about
roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></p></li><li><b>Call the peer.</b></li><li><a name="ppp.trouble-step-95"></a><b>Call
the remote peer. Then enable debugging
features.</b><pre>% <tt><b>pppd debug call</b></tt> <i>peer-name</i></pre><p>You might need to obtain debugging
information from the peer in order
to fix certain communications problems.</p></li><li><a name="ppp.trouble-step-96"></a><b>Check
the resulting logs for communication
problems. For more information, refer
to <a href="p126.html#ppp.trouble-109">General Communications Problems That Affect PPP</a>.</b></li></ol><a name="ppp.trouble-109"></a><h4>General
Communications Problems That Affect
PPP</h4>
<p><a name="indexterm-1932"></a>The following table describes
symptoms that are related to log output
from the procedure, <a href="p126.html#ppp.trouble-93">How to Diagnose and Fix Communications Problems</a>.</p>
<a name="ppp.trouble-tbl-97"></a>Table 21-3 General
Communications Problems That Affect
PPP<table><tr><th><p>Symptom</p>
</th><th><p>Problem</p>
</th><th><p>Solution</p>
</th></tr>
<tr><td><p>too many Configure-Requests</p>
</td><td><p>One peer cannot hear the other
peer.</p>
</td><td><p>Check for the following problems:</p>
<ul><li><p>The machine or modem
might have faulty cabling.</p>
</li>
<li><p>The modem configuration
might have  incorrect bit settings.
Or, the configuration might  have
broken flow control.</p>
</li>
<li><p>The chat script might
have failed.  In this situation, see <a href="p127.html#ppp.trouble-tbl-49">Table 21-5</a>.</p>
</li>
</ul>
</td></tr>
<tr><td><p>The <tt>pppd debug</tt> output
shows that LCP starts, but higher-level
protocols fail or show CRC errors.</p>
</td><td><p>The asynchronous control character
map (ACCM) is incorrectly set.</p>
</td><td><p>Use the <tt>default-async</tt> option
to set the ACCM to the standard default
of FFFFFFFF. First, try to use <tt>default-async</tt> as an option to <tt>pppd</tt> on
the command line. If the problem clears,
then add <tt>default-async</tt> to <tt>/etc/ppp/options</tt> or to <tt>/etc/ppp/peers/</tt><i>peer-name</i> after the call option.</p>
</td></tr>
<tr><td><p>The <tt>pppd debug</tt> output
shows that IPCP starts but terminates
immediately.</p>
</td><td><p>IP addresses might be incorrectly
configured.</p>
</td><td><ol><li><p>Check the chat script
to verify whether the script has incorrect
IP addresses.</p>
</li>
<li><p>If  the chat script
is correct,  request debug logs for
the peer, and check IP addresses in
the peer logs. </p>
</li>
</ol>
</td></tr>
<tr><td><p>The link exhibits very poor
performance.</p>
</td><td><p>The modem might be incorrectly
configured, with flow-control configuration
errors, modem setup errors, and incorrectly
configured DTE rates.</p>
</td><td><p>Check the modem configuration.
 Adjust the configuration if necessary.</p>
</td></tr>
</table><a name="ppp.trouble-100"></a><h4><img src="graphics/procedure.gif"> How
to Diagnose Problems With the PPP
Configuration</h4>
<p><a name="indexterm-1933"></a><a name="indexterm-1934"></a>Some PPP problems can
be traced to problems in the PPP configuration
files. The following procedure shows
you how to isolate and fix general
configuration problems.</p>
<ol><li><a name="ppp.trouble-step-106"></a><b>Become
superuser on the local machine or
assume an equivalent role.</b><p>Roles
contain authorizations and privileged
commands. For more information about
roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="ppp.trouble-step-102"></a><b>Call
the remote peer. Then enable debugging
features.</b><pre>% <tt><b>pppd debug call</b></tt> <i>peer-name</i></pre></li><li><a name="ppp.trouble-step-103"></a><b>Check
the resulting log for the configuration
problems. For more information, refer
to <a href="p126.html#ppp.trouble-110">Common PPP Configuration Problems</a>.</b></li></ol><a name="ppp.trouble-110"></a><h4>Common
PPP Configuration Problems</h4>
<p><a name="indexterm-1935"></a>The following table describes
symptoms that are related to log output
from the procedure, <a href="p126.html#ppp.trouble-100">How to Diagnose Problems With the PPP Configuration</a>.</p>
<a name="ppp.trouble-tbl-104"></a>Table 21-4 Common
PPP Configuration Problems<table><tr><th><p>Symptom</p>
</th><th><p>Problem</p>
</th><th><p>Solution</p>
</th></tr>
<tr><td><p><tt>pppd debug</tt> output
contains the error message, <tt>Could
not determine remote IP address</tt>.</p>
</td><td><p>The <tt>/etc/ppp/peers/</tt><i>peer-name</i> file does
not have an IP address for the peer.
The peer does not provide an IP address
during link negotiation.</p>
</td><td><p>Supply an IP address for the
peer on the pppd command line or in <tt>/etc/ppp/peers/</tt><i>peer-name</i> by using the following
format:</p>
<p>:10.0.0.10</p>
</td></tr>
<tr><td><p><tt>pppd debug</tt> output
shows that CCP data compression has
failed. The output also indictes that
the link is dropped.</p>
</td><td><p>The peers' PPP compression configurations
might be in conflict.  </p>
</td><td><p>Disable CCP compression by adding
the <tt>noccp</tt> option
to <tt>/etc/ppp/options</tt> on
one of the peers.</p>
</td></tr>
</table><a name="ppp.trouble-27"></a><h4><img src="graphics/procedure.gif"> How
to Diagnose Modem Problems</h4>
<p><a name="indexterm-1936"></a><a name="indexterm-1937"></a>Modems can be major problem
areas for a dial-up link. The most
common indicator of problems with
the modem configuration is no response
from the peer. However, you might
have difficulties when determining
if a link problem is indeed the result
of modem configuration problems. </p>
<p>For basic modem troubleshooting
suggestions, refer to Troubleshooting Terminal and Modem Problems in <i>System Administration Guide: Advanced Administration</i>.
Modem manufacturers' documentation
and web sites also contain solutions
for problems with their particular
equipment. The following procedure
helps determine whether a faulty modem
configuration causes link problems.</p>
<ol><li><a name="ppp.trouble-step-69"></a><b>Call
the peer with debugging turned on,
as explained in <a href="p124.html#ppp.trouble-21">How to Turn on PPP Debugging</a>.</b></li><li><a name="ppp.trouble-step-29"></a><b>Display
the resulting <tt>/var/log/pppdebug</tt> log to check for faulty
modem configuration.</b></li><li><a name="ppp.trouble-step-32"></a><b>Use <tt>ping</tt> to send packets of
various sizes over the link.</b><p>For complete details about <tt>ping</tt>, refer to the <tt>ping</tt>(1M) man
page.</p><p>If small packets
are received but larger packets are
dropped, modem problems are indicated.</p></li><li><a name="ppp.trouble-step-33"></a><b>Check
for errors on interface <tt>sppp0</tt>:</b><pre>% <tt><b>netstat -ni</b></tt>
Name  Mtu  Net/Dest   Address      Ipkts    Ierrs Opkts    Oerrs Collis Queue 
lo0   8232 127.0.0.0  127.0.0.1    826808   0     826808   0     0      0     
hme0  1500 172.21.0.0 172.21.3.228 13800032 0     1648464  0     0      0     
<tt><b>sppp0 1500 10.0.0.2   10.0.0.1     210      0     128      0     0      0</b></tt></pre><p>If interface errors increase
over time, the modem configuration
might have problems.</p></li></ol><h6>Troubleshooting</h6><p>When you display the resulting <tt>/var/log/pppdebug</tt> log,
the following symptoms in the output
can indicate a faulty modem configuration.
The local machine can hear the peer,
but the peer cannot hear the local
machine.</p>
<ul><li><p>No &ldquo;<tt>recvd</tt>&rdquo;
messages have come from the peer.</p>
</li>
<li><p>The output contains
LCP messages from the peer, but the
link fails with <tt>too many
LCP Configure Requests</tt> messages
that are sent by the local machine.</p>
</li>
<li><p>The link terminates
with a SIGHUP signal.</p>
</li>
</ul>
<a name="ppp.trouble-44"></a><h4><img src="graphics/procedure.gif"> How
to Obtain Debugging Information for
Chat Scripts</h4>
<p><a name="indexterm-1938"></a>Use the following procedure
for obtaining debugging information
from <tt>chat</tt> and suggestions
for clearing common problems. For
more information, refer to <a href="p127.html">Common Chat Script Problems</a>.</p>
<ol><li><a name="ppp.trouble-step-70"></a><b>Become
superuser on the dial-out machine
or assume an equivalent role.</b><p>Roles contain authorizations
and privileged commands. For more
information about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="ppp.trouble-step-46"></a><b>Edit
the <tt>/etc/ppp/peers/</tt><i>peer-name</i> file for the
peer to be called.</b></li><li><a name="ppp.trouble-step-47"></a><b>Add <tt>-v</tt> as an argument to the <tt>chat</tt> command that is specified
in <tt>connect</tt> option.</b><pre>connect "/usr/bin/chat <tt><b>-v</b></tt> -f /etc/ppp/<i>chat-script-name</i>"</pre></li><li><a name="ppp.trouble-step-48"></a><b>View
chat script errors in the file <tt>/etc/ppp/connect-errors</tt>.</b><p>The following is the main error
that occurs with <tt>chat</tt>.</p><pre>Oct 31 08:57:13 deino chat[107294]: [ID 702911 local2.info] expect (CONNECT)
Oct 31 08:57:58 deino chat[107294]: [ID 702911 local2.info] alarm
Oct 31 08:57:58 deino chat[107294]: [ID 702911 local2.info] Failed</pre><p>The example shows timeout while
waiting for a (CONNECT)string.
When <tt>chat</tt> fails,
you get the following message from <tt>pppd</tt>:</p><pre>Connect script failed</pre></li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p125.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p127.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

