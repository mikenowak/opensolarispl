<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Controlling NFS Versions - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p12.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a> > <a href="p13.html#rfsintro-101">Features of the NFS Service</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p13.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p15.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="etezd"></a><h4>Controlling NFS Versions</h4>
<p><a name="indexterm-128"></a>The <tt>/etc/default/nfs</tt> file has keywords to
control the NFS protocols that are used by both the client and the server.
For example, you can use keywords to manage version negotiation. For more
information, refer to <a href="p31.html#rfsrefer-133">Keywords for the <tt>/etc/default/nfs</tt> File</a> or the <tt>nfs</tt>(4) man
page.</p>
<a name="rfsintro-10"></a><h4>NFS ACL Support</h4>
<p><a name="indexterm-129"></a><a name="indexterm-130"></a><a name="indexterm-131"></a>Access control list (ACL) support was added in the Solaris 2.5
release. ACLs provide a finer-grained mechanism to set file access permissions
than is available through standard UNIX file permissions. NFS ACL support
provides a method of changing and viewing ACL entries from a Solaris NFS client
to a Solaris NFS server. See Using Access Control Lists to Protect Files in <i>System Administration Guide: Security Services</i> for
more information about ACLs.</p>
<p>For information about support for ACLs in NFS version 4, see <a href="p49.html#gande">ACLs and <tt>nfsmapid</tt> in NFS Version 4</a>.</p>
<a name="rfsintro-11"></a><h4>NFS Over TCP</h4>
<p><a name="indexterm-132"></a>The default transport protocol for the NFS protocol was changed
to the Transport Control Protocol (TCP) in the Solaris 2.5 release. TCP helps
performance on slow networks and wide area networks. TCP also provides congestion
control and error recovery. NFS over TCP works with version 2, version 3,
and version 4. Prior to the Solaris 2.5 release, the default NFS protocol
was User Datagram Protocol (UDP).</p>
<hr>
<p><b>Note - </b>Starting in the Solaris 10 release, if RDMA for InfiniBand is
available, RDMA is the default transport protocol for NFS. For more information,
see <a href="p47.html#rfsrefer-154">NFS Over RDMA</a>. Note, however,
that if you use the <tt>proto=tcp</tt> mount option,
NFS mounts are forced to use TCP only.</p>
<hr>
<a name="rfsintro-30"></a><h4>NFS Over UDP</h4>
<a name="indexterm-133"></a><p>Starting in the Solaris 10 release, the NFS client no longer uses an
excessive number of UDP ports.  Previously, NFS transfers over UDP used a
separate UDP port for each outstanding request.  Now, by default, the NFS
client uses only one UDP reserved port.  However, this support is configurable.
 If the use of more simultaneous ports would increase system performance through
increased scalability, then the system can be configured to use more ports.
This capability also mirrors the NFS over TCP support, which has had this
kind of configurability since its inception. For more information, refer to
the <i>Solaris Tunable Parameters Reference Manual</i>.</p>
<hr>
<p><b>Note - </b>NFS version 4 does not use UDP. If you mount a file system with
the <tt>proto=udp</tt> option, then NFS version 3 is
used instead of version 4.</p>
<hr>
<a name="rfsintro-130"></a><h4>Overview of NFS Over RDMA</h4>
<p>Starting in the Solaris 10 release, the default transport for NFS is
the Remote Direct Memory Access (RDMA) protocol, which is a technology for
memory-to-memory transfer of data over high speed networks. Specifically,
RDMA provides remote data transfer directly to and from memory without CPU
intervention. To provide this capability, RDMA combines the interconnect I/O
technology of InfiniBand-on-SPARC platforms with the Solaris Operating System.
For more information, refer to <a href="p47.html#rfsrefer-154">NFS Over RDMA</a>.</p>
<a name="rfsintro-12"></a><h4>Network Lock Manager and NFS</h4>
<p><a name="indexterm-134"></a><a name="indexterm-135"></a><a name="indexterm-136"></a>The Solaris 2.5 release also included an improved version of the
network lock manager. The network lock manager provided UNIX record locking
and PC file sharing for NFS files. The locking mechanism is now more reliable
for NFS files, so commands that use locking are less likely to hang.</p>
<hr>
<p><b>Note - </b>The Network Lock Manager is used only for NFS version 2 and version
3 mounts. File locking is built into the NFS version 4 protocol.</p>
<hr>
<a name="rfsintro-13"></a><h4>NFS Large File Support</h4>
<p><a name="indexterm-137"></a>The Solaris 2.6 implementation of the NFS version 3 protocol was
changed to correctly manipulate files that were larger than 2 Gbytes. The
NFS version 2 protocol and the Solaris 2.5 implementation of the version 3
protocol could not handle files that were larger than 2 Gbytes. </p>
<a name="rfsintro-14"></a><h4>NFS Client Failover</h4>
<p><a name="indexterm-138"></a><a name="indexterm-139"></a>Dynamic failover of read-only file systems was added in the Solaris
2.6 release. Failover provides a high level of availability for read-only
resources that are already replicated, such as man pages, other documentation,
and shared binaries. Failover can occur anytime after the file system is mounted.
Manual mounts can now list multiple replicas, much like the automounter in
previous releases. The automounter has not changed, except that failover need
not wait until the file system is remounted. See <a href="p17.html#rfsadmin-81">How to Use Client-Side Failover</a> and <a href="p50.html#rfsrefer-51">Client-Side Failover</a> for more information.  </p>
<a name="rfsintro-15"></a><h4>Kerberos Support for the NFS Service</h4>
<p><a name="indexterm-140"></a>Support for Kerberos V4 clients was included in the Solaris 2.0
release. In the 2.6 release, the <tt>mount</tt> and <tt>share</tt> commands
were altered to support NFS version 3 mounts that use Kerberos V5 authentication.
Also, the <tt>share</tt> command was changed to enable multiple
authentication flavors for different clients. See <a href="p14.html#rfsintro-17">RPCSEC_GSS Security Flavor</a> for more information about changes that
involve security flavors. See Configuring Kerberos NFS Servers in <i>System Administration Guide: Security Services</i> for
information about Kerberos V5 authentication.</p>
<a name="rfsintro-16"></a><h4>WebNFS Support</h4>
<p><a name="indexterm-141"></a>The Solaris 2.6 release also included the ability to make a file
system on the Internet accessible through firewalls. This capability was provided
by using an extension to the NFS protocol. One of the advantages to using
the WebNFS protocol for Internet access is its reliability.
The service is built as an extension of the NFS version 3 and version 2 protocol.
Additionally, the WebNFS implementation provides the ability to share these
files without the administrative overhead of an anonymous <tt>ftp</tt> site.
See <a href="p14.html#rfsintro-21">Security Negotiation for the WebNFS Service</a> for
a description of more changes that are related to the WebNFS service. See <a href="p22.html">WebNFS Administration Tasks</a> for more task
information.</p>
<hr>
<p><b>Note - </b>The NFS version 4 protocol is preferred over the WebNFS service.
NFS version 4 fully integrates all the security negotiation that was added
to the MOUNT protocol and the WebNFS service.</p>
<hr>
<a name="rfsintro-17"></a><h4>RPCSEC_GSS Security Flavor</h4>
<p><a name="indexterm-142"></a><a name="indexterm-143"></a><a name="indexterm-144"></a>A security flavor, called RPCSEC_GSS, is supported in the Solaris
7 release. This flavor uses the standard GSS-API interfaces to provide authentication,
integrity, and privacy, as well as enabling support of multiple security mechanisms.
See <a href="p14.html#rfsintro-15">Kerberos Support for the NFS Service</a> for
more information about support of Kerberos V5 authentication. See <i>Solaris Security for Developers Guide</i> for more information about GSS-API.</p>
<a name="rfsintro-18"></a><h4>Solaris 7 Extensions for NFS Mounting</h4>
<p><a name="indexterm-145"></a><a name="indexterm-146"></a>The Solaris 7 release includes extensions to the <tt>mount</tt> command
and <tt>automountd</tt> command. The extensions  enable the mount
request to use the public file handle instead of the MOUNT protocol. The MOUNT
protocol is the same access method that the WebNFS service uses. By circumventing
the MOUNT protocol, the mount can occur through a firewall. Additionally,
because fewer transactions need to occur between the server and the client,
the mount should occur faster. </p>
<p><a name="indexterm-147"></a>The extensions also enable NFS URLs to be used instead of the
standard path name. Also, you can use the <tt>public</tt> option
with the <tt>mount</tt> command and the automounter maps to force
the use of the public file handle. See <a href="p14.html#rfsintro-16">WebNFS Support</a> for more information about changes to the WebNFS service.</p>
<a name="rfsintro-21"></a><h4>Security Negotiation for the WebNFS Service</h4>
<p><a name="indexterm-148"></a><a name="indexterm-149"></a>A new protocol has been added to enable a WebNFS client to negotiate
a security mechanism with an NFS server in the Solaris 8 release. This protocol
provides the ability to use secure transactions when using the WebNFS service.
See <a href="p51.html#egcod">How WebNFS Security Negotiation Works</a> for
more information.</p>
<a name="rfsintro-22"></a><h4>NFS Server Logging</h4>
<p><a name="indexterm-150"></a>In the Solaris 8 release, NFS server logging enables an NFS server
to provide a record of  file operations that have been performed on its file
systems. The record includes information about which file was accessed, when
the file was accessed, and who accessed the file. You can specify the location
of the logs that contain this information through a set of configuration options.
You can also use these options to select the operations that should be logged.
This feature is particularly useful for sites that make anonymous FTP archives
available to NFS and WebNFS clients. See <a href="p16.html#rfsadmin-101">How to Enable NFS Server Logging</a> for more information.</p>
<hr>
<p><b>Note - </b>NFS version 4 does not support server logging.</p>
<hr>
<a name="rfsintro-20"></a><h4>Autofs Features</h4>
<p><a name="indexterm-151"></a><a name="indexterm-152"></a><a name="indexterm-153"></a>Autofs works with file systems that are specified in the local
namespace. This information can be maintained in NIS, NIS+, or local files.
 </p>
<p><a name="indexterm-154"></a>A fully multithreaded version of <tt>automountd</tt> was
included in the Solaris 2.6 release. This enhancement makes autofs more reliable
and enables concurrent servicing of multiple mounts, which prevents the service
from hanging if a server is unavailable.</p>
<p><a name="indexterm-155"></a>The new <tt>automountd</tt> also provides better on-demand
mounting. Previous releases would mount an entire set of file systems if the
file systems  were hierarchically related. Now, only the top file system is
mounted. Other file systems that are related to this mount point are mounted
when needed.</p>
<p><a name="indexterm-156"></a><a name="indexterm-157"></a><a name="indexterm-158"></a>The autofs service supports browsability of indirect maps. This
support enables a user to see which directories could be mounted, without
having to actually mount each file system. A <tt>-nobrowse</tt> option
has been added to the autofs maps so that large file systems, such as <tt>/net</tt> and <tt>/home</tt>, are not automatically browsable.
Also, you can turn off autofs browsability on each client by using the <tt>-n</tt> option
with <tt>automount</tt>. See <a href="p26.html#rfsadmin-195">Disabling Autofs Browsability</a> for more information. </p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p13.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p15.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

