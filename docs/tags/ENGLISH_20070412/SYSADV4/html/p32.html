<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title><tt>/etc/default/nfslogd</tt> File - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p31.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a> > <a href="p31.html#rfsrefer-6">NFS Files</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p31.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p33.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rfsrefer-101"></a><h4><tt>/etc/default/nfslogd</tt> File</h4>
<a name="indexterm-508"></a><a name="indexterm-509"></a><p>This file defines some of the parameters that are used when using NFS
server logging. The following parameters can be defined.</p>
<dl><dt>CYCLE_FREQUENCY</dt>
<dd><p>Determines the number of hours that must pass before the log
files are cycled.  The default value is 24 hours. This option is used to prevent
the log files from growing too large. </p>
</dd>
<dt>IDLE_TIME</dt>
<dd><p>Sets the number of seconds <tt>nfslogd</tt> should
sleep before checking for more information in the buffer file. This parameter
also determines how often the configuration file is checked. This parameter,
along with MIN_PROCESSING_SIZE, determines how often the buffer file is processed.
The default value is 300 seconds. Increasing this number can improve performance
by reducing the number of checks.</p>
</dd>
<dt>MAPPING_UPDATE_INTERVAL</dt>
<dd><p>Specifies the number of seconds between updates of the records
in the file-handle-to-path mapping tables. The default value is 86400 seconds
or one day. This parameter helps keep the file-handle-to-path mapping tables
up-to-date without having to continually update the tables.</p>
</dd>
<dt>MAX_LOGS_PRESERVE</dt>
<dd><p>Determines the number of log files to be saved. The default
value is 10. </p>
</dd>
<dt>MIN_PROCESSING_SIZE</dt>
<dd><p>Sets the minimum number of bytes that the buffer file must
reach before processing and writing to the log file. This parameter, along
with IDLE_TIME, determines how often the buffer file is processed. The default
value is 524288 bytes. Increasing this number can improve performance by reducing
the number of times the buffer file is processed.</p>
</dd>
<dt>PRUNE_TIMEOUT</dt>
<dd><p>Selects the number of hours that must pass before a file-handle-to-path
mapping record times out and can be reduced. The default value is 168 hours
or 7 days.</p>
</dd>
<dt>UMASK</dt>
<dd><p>Specifies the file mode creation mask for the log files that
are created by <tt>nfslogd</tt>. The default value is 0137.</p>
</dd>
</dl>
<a name="rfsrefer-102"></a><h4><tt>/etc/nfs/nfslog.conf</tt> File</h4>
<a name="indexterm-510"></a><a name="indexterm-511"></a><p>This file defines the path, file names, and type of logging to be used
by <tt>nfslogd</tt>. Each definition is associated with a <i>tag</i>. Starting NFS server logging requires that you identify
the <i>tag</i> for each file system. The global tag defines
the default values. You can use the following parameters with each tag as
needed.</p>
<dl><dt>defaultdir=<i>path</i></dt>
<dd><p>Specifies the default directory path for the logging files.
Unless you specify differently, the default directory is <tt>/var/nfs</tt>.</p>
</dd>
<dt>log=<i>path/filename</i></dt>
<dd><p>Sets the path and file name for the log files. The default
is <tt>/var/nfs/nfslog</tt>.</p>
</dd>
<dt>fhtable=<i>path/filename</i></dt>
<dd><p>Selects the path and file name for the file-handle-to-path
database files. The default is <tt>/var/nfs/fhtable</tt>.</p>
</dd>
<dt>buffer=<i>path/filename</i></dt>
<dd><p>Determines the path and file name for the buffer files. The
default is <tt>/var/nfs/nfslog_workbuffer</tt>.</p>
</dd>
<dt>logformat=<i>basic</i>|<i>extended</i></dt>
<dd><p>Selects the format to be used when creating user-readable
log files. The basic format produces a log file that is similar to some <tt>ftpd</tt> daemons. The extended format gives a more detailed view.</p>
</dd>
</dl>
<p>If the path is not specified, the path that is defined by <tt>defaultdir</tt> is used. Also, you can override <tt>defaultdir</tt> by
using an absolute path.</p>
<p>To identify the files more easily, place the files in separate directories.
Here is an example of the changes that are needed.</p>
<pre>% <tt><b>cat /etc/nfs/nfslog.conf</b></tt>
#ident  "@(#)nfslog.conf        1.5     99/02/21 SMI"
#
  .
  .
# NFS server log configuration file.
#

global  defaultdir=/var/nfs \
        log=nfslog fhtable=fhtable buffer=nfslog_workbuffer

publicftp log=logs/nfslog fhtable=fh/fhtables buffer=buffers/workbuffer</pre><p>In this example, any file system that is shared with <tt>log=publicftp</tt> uses the following values: </p>
<ul><li><p>The default directory is <tt>/var/nfs</tt>.</p>
</li>
<li><p>Log files are stored in <tt>/var/nfs/logs/nfslog*</tt>.</p>
</li>
<li><p>File-handle-to-path database tables are stored in <tt>/var/nfs/fh/fhtables</tt>.</p>
</li>
<li><p>Buffer files are stored in <tt>/var/nfs/buffers/workbuffer</tt>.</p>
</li>
</ul>
<p>For procedural information, refer to <a href="p16.html#rfsadmin-101">How to Enable NFS Server Logging</a>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p31.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p33.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

