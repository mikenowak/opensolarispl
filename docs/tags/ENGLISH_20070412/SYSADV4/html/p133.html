<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>How
to Invoke a Chat Script (Task) - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p129.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a> > <a href="p132.html#pppsvrconfig.reference-66">Defining the Conversation on the Dial-up Link</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p132.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p134.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="ppp.reference-2"></a><h4><img src="graphics/procedure.gif"> How
to Invoke a Chat Script (Task)</h4>
<a name="indexterm-2028"></a><ol><li><a name="pppsvrconfig.reference-step-41"></a><b>Create the chat script as an
ASCII file. </b></li><li><a name="pppsvrconfig.reference-step-40"></a><b>Invoke the chat script in any
PPP configuration file by using the
following syntax:</b><pre>connect 'chat  -f <i>/etc/ppp/chatfile</i>'</pre><p>The <tt>-f</tt> flag
indicates that a file name is to follow. <i>/etc/ppp/chatfile</i> represents
the name of the chat file.</p></li><li><a name="pppsvrconfig.reference-step-15"></a><b>Give read permission for the
external chat file to the user who
 runs the <tt>pppd</tt> command.</b><hr>
<p><b>Caution - </b>The chat program always
runs with the user's privileges, even
if the <tt>connect 'chat ...'</tt> option
is invoked from a privileged source.
Thus, a separate chat file that is
read with the <tt>-f</tt> option
must be readable by the invoking user.
This privilege can be a security problem
if the chat script contains passwords
or other sensitive information.</p>
<hr>
</li></ol>Example 22-1 Inline Chat Script<p>You can place the entire chat
script conversation on a single line,
similar to the following:</p>
<pre>connect 'chat "" "AT&amp;F1" OK ATDT5551212 CONNECT "\c"'</pre><p>The complete chat script  follows
the <tt>chat</tt> keyword.
The script terminates with <tt>"\c"'</tt>. You use this form in any
PPP configuration file or on the command
line as an argument to <tt>pppd</tt>.</p>
<h6><h6>More Information</h6>Chat Script
in an External File<p>If the chat script that is needed
for a particular peer is long or complicated,
consider creating the script as a
separate file. External chat files
are easy to maintain and to document.
You can add comments to the chat file
by preceding the comments  with the
hash (#) sign.</p>
<p>The procedure <a href="p112.html#pppsvrconfig.dialin-50">How to Create the Instructions for Calling a Peer</a> shows the use of a
chat script that is contained in an
external file.</p>
</h6><a name="ppp.reference-43"></a><h4>Creating
a Chat File That Is Executable</h4>
<p><a name="indexterm-2029"></a>You can create a chat
file that is an executable script
to be run automatically when the dial-up
link is initiated. Thus, you can run
additional commands during link initiation,
such as <tt>stty</tt> for
parity settings, besides the commands
that are contained in a traditional
chat script.</p>
<p>This executable chat script
logs in to an old-style UNIX system
that requires 7 bits with even parity.
 The system then changes to 8 bits
with no parity when running PPP.</p>
<pre>#!/bin/sh
chat "" "AT&amp;F1" OK "ATDT555-1212" CONNECT "\c"
stty evenp
chat ogin: pppuser ssword: "\q\U" % "exec pppd"
stty -evenp</pre><a name="ppp.reference-3"></a><h4><img src="graphics/procedure.gif"> How
to Create an Executable Chat Program</h4>
<ol><li><a name="ppp.reference-step-34"></a><b>Use
your text editor to create an executable
chat program, such as the previous
example.</b></li><li><a name="ppp.reference-step-35"></a><b>Make
the chat program executable.</b><pre># chmod +x /etc/ppp/<i>chatprogram</i></pre></li><li><a name="ppp.reference-step-36"></a><b>Invoke
the chat program.</b><pre>connect /etc/ppp/<i>chatprogram</i></pre><p>Chat programs do not have to
be located within the <tt>/etc/ppp</tt> file
system. You can store chat programs
in any location.</p></li></ol><a name="pppsvrconfig.reference-17"></a><h3>Authenticating Callers on a
Link</h3>
<p>This section explains how the
PPP authentication protocols work
and explains the databases that are
associated with the authentication
protocols.</p>
<a name="pppsvrconfig.intro-8"></a><h4>Password
Authentication Protocol (PAP)</h4>
<p><a name="indexterm-2030"></a>PAP authentication is
somewhat similar in operation to the
UNIX <tt>login</tt> program,
though PAP does not grant shell access
to the user. PAP uses the PPP configuration
files and PAP database in the form
of the <tt>/etc/ppp/pap-secrets</tt> file
for setting up authentication. PAP
also uses <tt>/etc/ppp/pap-secrets</tt> for
defining PAP security credentials.
These credentials include a peer name,
a &ldquo;user name&rdquo; in PAP parlance,
and a password. PAP credentials also
contain related information for each
caller who is permitted to link to
the local machine. The PAP user names
and passwords can be identical to
or different from the UNIX user names
and passwords in the password database.</p>
<a name="pppsvrconfig.reference-25"></a><h5><tt>/etc/ppp/pap-secrets</tt> File</h5>
<p><a name="indexterm-2031"></a>The PAP database is implemented
in the <tt>/etc/ppp/pap-secrets</tt> file.
Machines on both sides of the PPP
link must have properly configured
PAP credentials in their <tt>/etc/ppp/pap-secrets</tt> files for successful authentication.
The caller (authenticatee) supplies
credentials in the <tt>user</tt> and <tt>password</tt> columns of the <tt>/etc/ppp/pap-secrets</tt> file
or in the obsolete <tt>+ua</tt> file.
The server (authenticator) validates
these credentials against information
in <tt>/etc/ppp/pap-secrets</tt>,
through the UNIX <tt>passwd</tt> database,
or in the PAM facility.</p>
<p><a name="indexterm-2032"></a>The <tt>/etc/ppp/pap-secrets</tt> file has the following
syntax.</p>
<pre>myclient ISP-server mypassword *</pre><p>The parameters have the following
meaning.</p>
<dl><dt><tt>myclient</tt></dt>
<dd><p>PAP user name of the
caller. Often, this name is identical
to the caller's UNIX user name, particularly
if the dial-in server uses the <tt>login</tt> option of PAP.</p>
</dd>
<dt><tt>ISP-server</tt></dt>
<dd><p>Name of the remote
machine, often a dial-in server.</p>
</dd>
<dt><tt>mypassword</tt></dt>
<dd><p>Caller's PAP password.</p>
</dd>
<dt><tt>*</tt></dt>
<dd><p>IP address that is
associated with the caller. Use an
asterisk (*) to indicate any IP address.</p>
</dd>
</dl>
<a name="egkab"></a><h5>Creating
PAP Passwords</h5>
<p><a name="indexterm-2033"></a>PAP passwords are sent
over the link  <b>in the clear</b>,
that is,  in readable ASCII format.
For the caller (authenticatee), the
PAP password must be stored in the
clear in any of the following locations:</p>
<ul><li><p>In <tt>/etc/ppp/pap-secrets</tt></p>
</li>
<li><p>In another external
file</p>
</li>
<li><p>In a named pipe through
the <tt>pap-secrets</tt> @
feature</p>
</li>
<li><p>As an option to <tt>pppd</tt>, either on the command
line or in a PPP configuration file</p>
</li>
<li><p>Through the <tt>+ua</tt> file</p>
</li>
</ul>
<p>On the server (authenticator),
the PAP password can be hidden by
doing one of the following:</p>
<ul><li><p>Specifying <tt>papcrypt</tt> and using passwords that
are hashed by <tt>crypt</tt>(3C)
in the <tt>pap-secrets</tt> file.</p>
</li>
<li><p>Specifying the <tt>login</tt> option to <tt>pppd</tt> and
omitting the password from the <tt>pap-secrets</tt> file by placing
double quotes (<tt>""</tt>)
in the password column. In this instance,
authentication is performed through
the UNIX passwd database or the <tt>pam</tt>(3pam) mechanism.</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p132.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p134.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

