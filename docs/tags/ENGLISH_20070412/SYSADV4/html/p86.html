<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>How
to Verify Connections to Other Systems - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p72.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a> > <a href="p85.html#mailadmin-180">Troubleshooting Procedures and Tips for Mail Services</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p85.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p87.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="mailadmin-200"></a><h4>How
to Verify Connections to Other Systems</h4>
<a name="indexterm-1232"></a><a name="indexterm-1233"></a><a name="indexterm-1234"></a><a name="indexterm-1235"></a><a name="indexterm-1236"></a><p>The <tt>mconnect</tt> program
opens a connection to a mail server
on a host that you specify and enables
you to test that connection. The program
runs interactively, so you can issue
various diagnostic commands. See the <tt>mconnect</tt>(1) man
page for a complete description. The
following example verifies that mail
to the user name <tt>sandy</tt> is
deliverable.</p>
<pre>% <tt><b>mconnect phoenix</b></tt>

connecting to host phoenix (172.31.255.255), port 25
connection open
220 phoenix.example.com ESMTP Sendmail 8.13.1+Sun/8.13.1; Sat, 4 Sep 2004 3:52:56 -0700
<tt><b>expn sandy</b></tt>
250 2.1.5 &lt;sandy@phoenix.example.com>
<tt><b>quit</b></tt></pre><p>If you cannot use <tt>mconnect</tt> to connect to an <tt>SMTP</tt> port, check these conditions.</p>
<ul><li><p>Is the system load
too high?</p>
</li>
<li><p>Is the <tt>sendmail</tt> daemon running?</p>
</li>
<li><p>Does the system have
the appropriate <tt>/etc/mail/sendmail.cf</tt> file?</p>
</li>
<li><p>Is port 25, the port
that <tt>sendmail</tt> uses,
active?</p>
</li>
</ul>
<a name="mailadmin-201"></a><h4>Logging
Error Messages</h4>
<p>Your mail service logs most
error messages by using the <tt>syslogd</tt> program. By default, the <tt>syslogd</tt> program sends these
messages to a system that is called <tt>loghost</tt>, which is specified
in the <tt>/etc/hosts</tt> file.
You can define <tt>loghost</tt> to
hold all logs for an entire NIS domain.
If no <tt>loghost</tt> is
specified, error messages from <tt>syslogd</tt> are not reported.</p>
<p><a name="indexterm-1237"></a><a name="indexterm-1238"></a>The <tt>/etc/syslog.conf</tt> file controls where the <tt>syslogd</tt> program forwards
messages. You can change the default
configuration by editing the <tt>/etc/syslog.conf</tt> file. You must restart
the <tt>syslog</tt> daemon
for any changes to become active.
To gather information about mail,
you can add the following selections
to the file.</p>
<ul><li><p><tt>mail.alert</tt> &ndash;
Messages about conditions that should
be fixed now</p>
</li>
<li><p><tt>mail.crit</tt> &ndash;
Critical messages</p>
</li>
<li><p><tt>mail.warning</tt> &ndash;
Warning messages</p>
</li>
<li><p><tt>mail.notice</tt> &ndash;
Messages that are not errors, but
might need attention</p>
</li>
<li><p><tt>mail.info</tt> &ndash;
Informational messages</p>
</li>
<li><p><tt>mail.debug</tt> &ndash;
Debugging messages</p>
</li>
</ul>
<p>The following entry in the <tt>/etc/syslog.conf</tt> file sends
a copy of all critical, informational,
and debug messages to <tt>/var/log/syslog</tt>.</p>
<pre>mail.crit;mail.info;mail.debug			/var/log/syslog</pre><p>Each line in the system log
contains a timestamp, the name of
the system that generated the line,
and a message. The <tt>syslog</tt> file
can log a large amount of information.</p>
<p>The log is arranged in a succession
of levels. At the lowest level, only
unusual occurrences are logged. At
the highest level, even the most mundane
and uninteresting events are recorded.
As a convention, log levels under
10 are considered &ldquo;useful.&rdquo;
Log levels that are higher than 10
are usually used for debugging. See Customizing System Message Logging in <i>System Administration Guide: Advanced Administration</i> for
information about <tt>loghost</tt> and
the <tt>syslogd</tt> program.</p>
<a name="mailadmin-203"></a><h4>Other
Sources for Mail Diagnostic Information</h4>
<p>For other diagnostic information,
check the following sources.</p>
<ul><li><p>Look at the <tt>Received</tt> lines in the header of
the message. These lines trace the
route that the message took as the
message was relayed. Remember to consider
time&ndash;zone differences.</p>
</li>
<li><p><a name="indexterm-1239"></a><a name="indexterm-1240"></a>Look at the messages from <tt>MAILER-DAEMON</tt>. These messages
typically report delivery problems.
 </p>
</li>
<li><p>Check the system log
that records delivery problems for
your group of systems. The <tt>sendmail</tt> program always records
its activities in the system log.
You might want to modify the <tt>crontab</tt> file to run a shell script
nightly. The script searches the log
for <tt>SYSERR</tt> messages
and mails any messages that it finds
to the postmaster.</p>
</li>
<li><p>Use the <tt>mailstats</tt> program to test mail types
and determine the number of incoming
messages and outgoing messages.</p>
</li>
</ul>
<a name="mailadmin-219"></a><h3>Resolving
Error Messages</h3>
<p><a name="indexterm-1241"></a><a name="indexterm-1242"></a>This section describes
how you can resolve some <tt>sendmail</tt>&ndash;related error messages.
You can also refer to <a href="http://www.sendmail.org/faq/">http://www.sendmail.org/faq/</a>.</p>
<p>The following error messages
contain two or more of the following
types of information.</p>
<ul><li><p><b>Cause:</b> What might have happened
to cause the message</p>
</li>
<li><p><b>Description:</b> What the user was doing
when the error message occurred</p>
</li>
<li><p><b>Solution:</b> What you can do to fix
the problem or to continue with your
work</p>
</li>
</ul>
<p>451
timeout waiting for input during <i>source</i></p>
Cause: <p>When <tt>sendmail</tt> reads from any
source that might time out, such as
an SMTP connection, the program sets
a timer to the value of  various <tt>Timeout</tt> options
before reading begins. If the read
is not completed before the timer
expires, this message appears and
reading stops. Usually, this situation
occurs during <tt>RCPT</tt>.
The mail message is then queued for
later delivery.</p>
Solution: <p>If
you see this message often, increase
the value of various <tt>Timeout</tt> options
in the <tt>/etc/mail/sendmail.cf</tt> file.
If the timer is already set to a large
number, look for hardware problems,
such as poor network cabling or connections.</p>
<p>550 <i>hostname</i>... Host unknown</p>
Cause: <p>This <tt>sendmail</tt> message indicates
that the destination host machine,
which is specified by the portion
of the address after the at sign (@),
was not found during domain name system
(DNS) lookup.</p>
Solution: <p>Use
the <tt>nslookup</tt> command
to verify that the destination host
exists in that domain or other domains,
perhaps with a slightly different
spelling. Otherwise, contact the intended
recipient and ask for a proper address.</p>
<p>550 <i>username</i>... User unknown</p>
Cause: <p>This <tt>sendmail</tt> message indicates
that the intended recipient, who is
specified by the portion of the address
before the at sign (@), could not
be located on the destination host
machine.</p>
Solution: <p>Check
the email address and try again, perhaps
with a slightly different spelling.
If this remedy does not work, contact
the intended recipient and ask for
a proper address.</p>
<p>554 <i>hostname</i>... Local configuration
error</p>
Cause: <p>This <tt>sendmail</tt> message usually
indicates that the local host is trying
to send mail to itself.</p>
Solution: <p>Check
the value of the <tt>$j</tt> macro
in the <tt>/etc/mail/sendmail.cf</tt> file
to ensure that this value is a fully
qualified domain name.</p>
Description: <p>When
the sending system provides its host
name to the receiving system in the
SMTP <tt>HELO</tt> command,
the receiving system compares its
name to the sender's name. If these
names are the same, the receiving
system issues this error message and
closes the connection. The name that
is provided in the <tt>HELO</tt> command
is the value of the <tt>$j</tt> macro.</p>
<p>For additional information,
refer to <a href="http://www.sendmail.org/faq/section4.html#4.5">http://www.sendmail.org/faq/section4.html#4.5</a>.</p>
<p>config
error: mail loops back to myself.</p>
Cause: <p>This
error message occurs if you set up
an MX record and make host <i>bar</i> the mail exchanger
for domain <i>foo</i>.
However, you fail to configure host <i>bar</i> to know that it
is the mail exchanger for domain <i>foo</i>.</p>
<p>Also,
another possibility is that both the
sending system and the receiving system
are identifying as the same domain.</p>
Solution: <p>For
instructions, refer to <a href="http://www.sendmail.org/faq/section4.html#4.5">http://www.sendmail.org/faq/section4.html#4.5</a>.</p>
<p>host
name configuration error</p>
Description: <p>This
is an old <tt>sendmail</tt> message,
which replaced <tt>I refuse to
talk to myself</tt> and is now
replaced by the <tt>Local configuration
error</tt> message.</p>
Solution: <p>Follow
the instructions that were provided
for resolving this error message, <tt>554</tt> <i>hostname</i><tt>... Local configuration error</tt>.</p>
<p>user
unknown</p>
Cause: <p>When
you try to send mail to a user, the
error  <tt>Username... user unknown</tt> is
displayed.  The user is on the same
system.</p>
Solution: <p>Check
for a typographical error in the entered
email address. Otherwise, the user
could be aliased to a nonexistent
email address in <tt>/etc/mail/aliases</tt> or in the user's  <tt>.mailrc</tt> file. Also, check for
uppercase characters in the user name.
Preferably, email addresses should
not be case sensitive.</p>
<p>For
additional information, refer to <a href="http://www.sendmail.org/faq/section4.html#4.17">http://www.sendmail.org/faq/section4.html#4.17</a>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p85.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p87.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

