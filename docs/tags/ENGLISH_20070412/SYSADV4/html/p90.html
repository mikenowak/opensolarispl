<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Mailbox
Files - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p87.html">14.&nbsp;&nbsp;Mail Services (Reference)</a> > <a href="p88.html">Software and Hardware Components of Mail Services</a> > <a href="p88.html#mailrefer-54">Software Components</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p89.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p91.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="mailrefer-64"></a><h5>Mailbox
Files</h5>
<p>A <b>mailbox</b> is
a file that is the final destination
for email messages. The name of the
mailbox can be the user name or the
identity of a specific function, such
as the postmaster. Mailboxes are in
the <tt>/var/mail/</tt><i>username</i> file, which
can exist either on the user's local
system or on a remote mail server.
In either instance, the mailbox is
on the system to which the mail is
delivered.</p>
<p><a name="indexterm-1275"></a>Mail should always be
delivered to a local file system so
that the user agent can pull mail
from the mail spool and store it readily
in the local mailbox. Do not use NFS-mounted
file systems as the destination for
a user's mailbox. Specifically, do
not direct mail to a mail client that
is mounting the <tt>/var/mail</tt> file
system from a remote server. Mail
for the user, in this instance, should
be addressed to the mail server and
not to the client host name. NFS-mounted
file systems can cause problems with
mail delivery and handling.</p>
<p><a name="indexterm-1276"></a><a name="indexterm-1277"></a><a name="indexterm-1278"></a><a name="indexterm-1279"></a>The <tt>/etc/mail/aliases</tt> file and name services
such as NIS and NIS+ provide mechanisms
for creating aliases for electronic
mail addresses. So, users do not need
to know the precise local name of
a user's mailbox.</p>
<p>The following table shows some
common naming conventions for special-purpose
mailboxes.</p>
<a name="mailrefer-tbl-65"></a>Table 14-8 Conventions
for the Format of Mailbox Names<a name="indexterm-1280"></a><table><tr><th><p>Format</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><a name="indexterm-1281"></a><i>username</i> </p>
</td><td><p>User names are frequently the
same as mailbox names.</p>
</td></tr>
<tr><td><p><a name="indexterm-1282"></a><a name="indexterm-1283"></a><i>Firstname</i><tt>.</tt><i>Lastname</i> <i>Firstname</i><tt>_</tt><i>Lastname</i> <i>Firstinitial</i><tt>.</tt><i>Lastname</i> <i>Firstinitial</i><tt>_</tt><i>Lastname</i>   </p>
</td><td><p>User names can be identified
as full names with a dot (or an underscore)
that separates the first and last
names. Alternately, user names can
be identified by a first initial with
a dot (or an underscore) that separates
the initial and the last name.</p>
</td></tr>
<tr><td><p><a name="indexterm-1284"></a><tt>postmaster</tt> </p>
</td><td><p>Users can address questions
and report problems with the mail
system to the <tt>postmaster</tt> mailbox.
Each site and domain should have a <tt>postmaster</tt> mailbox.</p>
</td></tr>
<tr><td><p><tt>MAILER-DAEMON</tt></p>
</td><td><p><tt>sendmail</tt> automatically
routes any mail that is addressed
to the <tt>MAILER-DAEMON</tt> to
the postmaster.</p>
</td></tr>
<tr><td><p><a name="indexterm-1285"></a></p>
<p><i>aliasname</i><tt>-request</tt> </p>
</td><td><p>Names that end in <tt>-request</tt> are administrative addresses
for distribution lists. This address
should redirect mail to the person
who maintains the distribution list.</p>
</td></tr>
<tr><td><p><a name="indexterm-1286"></a></p>
<p><tt>owner-</tt><i>aliasname</i></p>
</td><td><p>Names that begin with <tt>owner-</tt> are administrative addresses
for distribution lists. This address
should redirect mail to the person
who handles mail errors.</p>
</td></tr>
<tr><td><p><a name="indexterm-1287"></a></p>
<p><tt>owner-owner</tt></p>
</td><td><p>This alias is used when no <tt>owner-</tt><i>aliasname</i> alias
exists for errors to be returned to.
This address should redirect mail
to the person who handles mail errors.
This address also should be defined
on any system that maintains a large
number of aliases.</p>
</td></tr>
<tr><td><p><a name="indexterm-1288"></a><a name="indexterm-1289"></a><a name="indexterm-1290"></a><a name="indexterm-1291"></a><i>local</i><tt>%</tt><i>domain</i> 
   </p>
</td><td><p><a name="indexterm-1292"></a>The percent sign (<tt>%</tt>)
marks a local address that is expanded
when the message arrives at its destination.
Most mail systems interpret mailbox
names with <tt>%</tt> characters
as full mail addresses. The <tt>%</tt> is
replaced with an <tt>@</tt>,
and the mail is redirected accordingly.
Although many people use the <tt>%</tt> convention,
this convention is not a formal standard.
This convention is referred to as
the &ldquo;percent hack.&rdquo; This
feature is often used to help debug
mail problems.</p>
</td></tr>
</table><p>Starting with <tt>sendmail</tt> version
8, the envelope sender for mail that
is sent to a group alias has been
changed to the address that is expanded
from the owner alias, if an owner
alias exists. This change enables
any mail errors to be sent to the
alias owner, rather than being returned
to the sender. With this change, users
notice that mail that was sent to
an alias looks as if the mail came
from the alias owner, when delivered.
 The following alias format helps
with some of the problems that are
associated with this change.</p>
<pre>mygroup: :include:/pathname/mygroup.list
owner-mygroup: mygroup-request
mygroup-request: sandys, ignatz</pre><p><a name="indexterm-1293"></a>In this example, the <tt>mygroup</tt> alias is the actual
mail alias for the group. The <tt>owner-mygroup</tt> alias receives error messages.
The <tt>mygroup-request</tt> alias
should be used for administrative
requests. This structure means that
in mail sent to the <tt>mygroup</tt> alias,
the envelope sender changes to <tt>mygroup-request</tt>.</p>
<a name="mailrefer-66"></a><h5>Mail
Aliases</h5>
<p>An <b>alias</b> is
an alternate name. For email, you
can use aliases to assign a mailbox
location or to define mailing lists.
For a task map, refer to <a href="p79.html">Administering Mail Alias Files (Task Map)</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>. Also,
you can refer to <a href="p93.html">Mail Alias Files</a> in this chapter.</p>
<p><a name="indexterm-1294"></a><a name="indexterm-1295"></a><a name="indexterm-1296"></a>For large sites, the mail
alias typically defines the location
of a mailbox. Providing a mail alias
is like providing a room number as
part of the address for an individual
at a large corporation that occupies
multiple rooms. If you do not provide
the room number, the mail is delivered
to a central address. Without a room
number, extra effort is required to
determine where within the building
the mail is to be delivered. So, the
possibility of an error increases.
For example, if two people who are
named Kevin Smith are in the same
building, only one of them might get
mail. To correct the problem, each
Kevin Smith should have a room number
added to his address.</p>
<p>Use domains and location-independent
addresses as much as possible when
you create mailing lists. To enhance
portability and flexibility of alias
files, make your alias entries in
mailing lists as generic and system
independent as possible. For example,
if you have a user who is named <tt>ignatz</tt> on system <tt>mars</tt>,
in domain <tt>example.com</tt>,
create the alias <tt>ignatz@example</tt> instead
of <tt>ignatz@mars</tt>.
If user <tt>ignatz</tt> changes
the name of his system but remains
within the <tt>example</tt> domain,
you do not need to update alias files
to reflect the change in system name.</p>
<p>When you create alias entries,
type one alias per line. You should
have only one entry that contains
the user's system name. For example,
you could create the following entries
for user <tt>ignatz</tt>.</p>
<pre>ignatz: iggy.ignatz
iggyi: iggy.ignatz
iggy.ignatz: ignatz@mars</pre><p>You can create an alias for
local names or domains. For example,
an alias entry for user <tt>fred</tt>,
who has a mailbox on the system <tt>mars</tt> and is in the domain <tt>planets</tt>, could have this
entry in the NIS+ aliases table.</p>
<pre>fred: fred@planets</pre><p><a name="indexterm-1297"></a>When you create mail lists
that include users outside your domain,
create the alias with the user name
and the domain name. For example,
if you have a user who is named <tt>smallberries</tt> on system <tt>privet</tt>, in domain <tt>example.com</tt>, create the alias as <tt>smallberries@example.com</tt>.
The email address of the sender is
now automatically translated to a
fully qualified domain name when mail
goes outside the user's domain.</p>
<p>The following list describes
methods for creating and administering
mail alias files.</p>
<ul><li><p>You can create mail
aliases for global use in the NIS+ <tt>mail_aliases</tt> table, the
NIS <tt>aliases</tt> map,
or in local <tt>/etc/mail/aliases</tt> files.
You can also create and administer
mailing lists that use the same alias
files.</p>
</li>
<li><p>Depending on the configuration
of your mail services, you can administer
aliases by using the NIS or NIS+ name
service to maintain a global <tt>aliases</tt> database. Otherwise, you
could update all the local <tt>/etc/mail/aliases</tt> files to keep the aliases
synchronized.</p>
</li>
<li><p><a name="indexterm-1298"></a>Users can also create
and use aliases. Users can create
aliases either in their local <tt>~/.mailrc</tt> file, which only the user
 can use, or in their local <tt>/etc/mail/aliases</tt> file, which anyone can
use. Users cannot normally create
or administer NIS or NIS+ alias files.</p>
</li>
</ul>
<a name="mailrefer-68"></a><h4>Hardware
Components</h4>
<p><a name="indexterm-1299"></a>You can provide the three
required elements of mail configuration
in the same system or have separate
systems provide these elements.</p>
<ul><li><p><a href="p90.html#mailrefer-69">Mail Host</a></p>
</li>
<li><p><a href="p90.html#mailrefer-70">Mail Server</a></p>
</li>
<li><p><a href="p90.html#mailrefer-71">Mail Client</a></p>
</li>
</ul>
<p>When users are to communicate
with networks outside your domain,
you must also add a fourth element,
a mail gateway. For more information,
refer to <a href="p90.html#mailrefer-72">Mail Gateway</a>. The following
sections describe each hardware component.</p>
<a name="mailrefer-69"></a><h5>Mail
Host</h5>
<p><a name="indexterm-1300"></a><a name="indexterm-1301"></a>A <b>mail host</b> is
the machine that you designate as
the main mail machine on your network.
A mail host is the machine to which
other systems at the site forward
mail that cannot be delivered. You
designate a system as a mail host
in the <tt>hosts</tt> database
by adding the word <tt>mailhost</tt> to
the right of the IP address in the
local <tt>/etc/hosts</tt> file.
Alternately, you can add the word <tt>mailhost</tt> similarly to the
hosts file in the name service. For
detailed task information, refer to <a href="p74.html#mailadmin-29">How to Set Up a Mail Host</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>
<p>A good candidate for a mail
host is a system that is configured
as a router from your network to the
Internet global network. For more
information, refer to <a href="p102.html">Chapter&nbsp;15, Solaris PPP 4.0 (Overview)</a>, <a href="p140.html">Chapter&nbsp;24, UUCP (Overview)</a>, and Configuring an IPv4 Router in <i>System Administration Guide: IP Services</i>.
If no systems on your local network
have a modem, designate a system as
the mail host.</p>
<p>Some sites use standalone machines
that are not networked in a time-sharing
configuration. Specifically, the standalone
machine serves terminals that are
attached to its serial ports. You
can set up electronic mail for this
configuration by designating the standalone
system as the mail host of a single-system
network. <a href="p71.html#mailintro-17">Overview of the Hardware Components</a> in <a href="p70.html">Chapter&nbsp;12, Mail Services (Overview)</a> provides
a figure that shows a typical email
configuration.</p>
<a name="mailrefer-70"></a><h5>Mail
Server</h5>
<p><a name="indexterm-1302"></a><a name="indexterm-1303"></a>A <b>mailbox</b> is
a single file that contains email
for a particular user. Mail is delivered
to the system where the user's mailbox
resides, which can be on a local machine
or a remote server. A <b>mail
server</b> is any system that
maintains user mailboxes in its <tt>/var/mail</tt> directory. For
task information, refer to <a href="p73.html#mailadmin-15">How to Set Up a Mail Server</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>
<p>The mail server routes all mail
from a client. When a client sends
mail, the mail server puts the mail
in a queue for delivery. After the
mail is in the queue, a user can reboot
or turn off the client without losing
those mail messages. When the recipient
gets mail from a client, the path
in the <tt>From</tt> line
of the message contains the name of
the mail server. If the recipient
responds, the response goes to the
user's mailbox. Good candidates for
mail servers are systems that provide
a home directory for users or systems
that are backed up regularly.</p>
<p><a name="indexterm-1304"></a>If the mail server is
not the user's local system, users
in configurations that use NFS software
can mount the <tt>/var/mail</tt> directory
by using the <tt>/etc/vfstab</tt> file,
if they have <tt>root</tt> access.
Otherwise, users can use the automounter.
If NFS support is not available, users
can log in to the server to read their
mail.</p>
<p><a name="indexterm-1305"></a><a name="indexterm-1306"></a><a name="indexterm-1307"></a><a name="indexterm-1308"></a><a name="indexterm-1309"></a><a name="indexterm-1310"></a>If users on your network
send other types of mail, such as
audio files or files from desktop
publishing systems, you need to allocate
more space on the mail server for
mailboxes.      </p>
<p><a name="indexterm-1311"></a><a name="indexterm-1312"></a><a name="indexterm-1313"></a><a name="indexterm-1314"></a><a name="indexterm-1315"></a>By establishing a mail
server for all mailboxes, you can
simplify your process of doing backups.
Backups can be difficult to do when
mail is spread over many systems.
The disadvantage of storing many mailboxes
on one server is that the server can
be a single point of failure for many
users. However, the advantages of
providing good backups usually make
the risk worthwhile.</p>
<a name="mailrefer-71"></a><h5>Mail
Client</h5>
<p><a name="indexterm-1316"></a><a name="indexterm-1317"></a>A mail client is a user
of mail services with a mailbox on
a mail server. Additionally, the mail
client has a mail alias in the <tt>/etc/mail/aliases</tt> file
that points to the location of the
mailbox. For task information, refer
to <a href="p74.html">How to Set Up a Mail Client</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>
<a name="mailrefer-72"></a><h5>Mail
Gateway</h5>
<p><a name="indexterm-1318"></a>The <b>mail gateway</b> is
a machine that handles connections
between networks that run different
communications protocols or communications
between different networks that use
the same protocol. For example, a
mail gateway might connect a TCP/IP
network to a network that runs the
Systems Network Architecture (SNA)
protocol suite. </p>
<p><a name="indexterm-1319"></a><a name="indexterm-1320"></a><a name="indexterm-1321"></a>The simplest mail gateway
to set up is the mail gateway that
connects two networks that use the
same protocol or mailer. This system
handles mail with an address for which <tt>sendmail</tt> cannot find a recipient
in your domain. If a mail gateway
exists, <tt>sendmail</tt> uses
the gateway to send and receive mail
outside your domain.  </p>
<p><a name="indexterm-1322"></a><a name="indexterm-1323"></a>You can set up a mail
gateway between two networks that
use unmatched mailers, as shown in
the next figure. To support this configuration,
you must customize the <tt>sendmail.cf</tt> file on the mail gateway
system, which can be a difficult and
time-consuming process.  </p>
<a name="mailrefer-fig-73"></a>Figure 14-1 Gateway
Between Different Communications Protocols<img src="figures/7152.Gateway.gif" alt=""></img><p>If you have a machine that provides
connections to the Internet, you can
configure that machine as the mail
gateway. Carefully consider your site's
security needs before you configure
a mail gateway. You might need to
create a firewall gateway between
your corporate network and other networks,
and set up that gateway as the mail
gateway. For task information, refer
to <a href="p75.html">How to Set Up a Mail Gateway</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p89.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p91.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

