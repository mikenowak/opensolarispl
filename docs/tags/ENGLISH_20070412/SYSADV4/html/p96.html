<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Interactions
of NIS and <tt>sendmail</tt> - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p87.html">14.&nbsp;&nbsp;Mail Services (Reference)</a> > <a href="p95.html#mailrefer-24">Interactions of <tt>sendmail</tt> With Name Services</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p95.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p97.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="mailrefer-28"></a><h4>Interactions
of NIS and <tt>sendmail</tt></h4>
<p><a name="indexterm-1479"></a>The following list describes
the interactions of <tt>sendmail</tt> and
NIS and provides some guidance.</p>
<ul><li><p><b>Mail
domain name</b> &ndash; If
you are setting up NIS as the primary
name service, <tt>sendmail</tt> automatically
strips the first component of the
NIS domain name and uses the result
as the mail domain name. For example, <tt>ebs.admin.acme.com</tt> becomes <tt>admin.acme.com</tt>.</p>
</li>
<li><p><b>Mail
host name</b> &ndash; You must
have a <tt>mailhost</tt> entry
in the NIS host map.</p>
</li>
<li><p><b>Full
host names</b> &ndash; The
normal NIS setup does not &ldquo;understand&rdquo;
the full host name. Rather than trying
to make NIS understand the full host
name, turn off this requirement from
the <tt>sendmail</tt> side
by editing the <tt>sendmail.cf</tt> file
and replacing all occurrences of <tt>%l</tt> with <tt>%y</tt>.
This change turns off <tt>sendmail</tt>'s
interdomain mail detection. If the
target host can be resolved to an
IP address, a direct SMTP delivery
is attempted. Ensure that your NIS
host map does not contain any host
entry that is external to the current
mail domain. Otherwise, you need to
further customize the <tt>sendmail.cf</tt> file.</p>
</li>
<li><p><b>Matching
full host names and short host names</b> &ndash;
Follow the previous instructions about
how to turn off <tt>gethostbyname()</tt> for
a full host name.</p>
</li>
<li><p><b>Multiple
NIS domains in one mail domain</b> &ndash;
All NIS host maps under a common mail
domain should have the same set of
host entries. For example, the host
map in the <tt>ebs.admin.acme.com</tt> domain
should be the same as the host map
in the <tt>esg.admin.acme.com</tt>.
Otherwise, one address might work
in one NIS domain, but fail in the
other NIS domain. </p>
</li>
</ul>
<p>For task information, refer
to <a href="p79.html">Administering Mail Alias Files (Task Map)</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>
<a name="mailrefer-29"></a><h4>Interactions
of <tt>sendmail</tt> With
NIS and DNS</h4>
<p><a name="indexterm-1480"></a>The following list describes
the interactions of <tt>sendmail</tt> with
NIS and DNS and provides some guidance.</p>
<ul><li><p><b>Mail
domain name</b> &ndash; If
you are setting up NIS as the primary
name service, <tt>sendmail</tt> automatically
strips the first component of the
NIS domain name and uses the result
as the mail domain name. For example, <tt>ebs.admin.acme.com</tt> becomes <tt>admin.acme.com</tt>.</p>
</li>
<li><p><b>Mail
host name</b> &ndash; When
the DNS forwarding feature is turned
on, queries that NIS cannot resolve
are forwarded to DNS, so you do not
need a <tt>mailhost</tt> entry
in the NIS host map. </p>
</li>
<li><p><b>Full
host names</b> &ndash; Although
NIS does not &ldquo;understand&rdquo;
full host names, DNS does understand.
This requirement is satisfied when
you follow the regular procedure for
setting up NIS and DNS. </p>
</li>
<li><p><b>Matching
full host names and short host names</b> &ndash;
For every host entry in the NIS host
table, you must have a corresponding
host entry in DNS.</p>
</li>
<li><p><b>Multiple
NIS domains in one mail domain</b> &ndash;
All NIS host maps under a common mail
domain should have the same set of
host entries. For example, the host
map in the <tt>ebs.admin.acme.com</tt> domain
should be the same as the host map
in the <tt>esg.admin.acme.com</tt> domain.
Otherwise, one address might work
in one NIS domain, but fail in the
other NIS domain.</p>
</li>
</ul>
<p>For task information, refer
to <a href="p75.html#mailadmin-122">How to Use DNS With <tt>sendmail</tt></a> and <a href="p79.html">Administering Mail Alias Files (Task Map)</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>
<a name="mailrefer-30"></a><h4>Interactions
of NIS+ and <tt>sendmail</tt></h4>
<p><a name="indexterm-1481"></a>The following list describes
the interactions of <tt>sendmail</tt> with
NIS+ and provides some guidance.</p>
<ul><li><p><b>Mail
domain name</b> &ndash; If
you are setting up NIS+ as your primary
name service, <tt>sendmail</tt> can
check the mail domain from the NIS+ <tt>sendmailvars</tt> table. This
NIS+ table has one key column and
one value column. To set up your mail
domain, you must add one entry to
this table. This entry should have
the key column set to the literal
string <tt>maildomain</tt> and
the value column set to your mail
domain name. An example is <tt>admin.acme.com</tt>. Although NIS+ allows any
string in the <tt>sendmailvars</tt> table,
the suffix rule still applies for
the mail system to work correctly.
You can use <tt>nistbladm</tt> to
add the <tt>maildomain</tt> entry
to the <tt>sendmailvars</tt> table.
Notice in the following example that
the mail domain is a suffix of the
NIS+ domain.</p>
<pre>nistbladm -A key="maildomain" value=&lt;mail domain> sendmailvars.org_dir.&lt;NIS+ domain></pre></li>
<li><p><b>Mailhost
host name</b> &ndash; You must
have a <tt>mailhost</tt> entry
in the NIS+ hosts table.</p>
</li>
<li><p><b>Full
host names</b> &ndash; NIS+ &ldquo;understands&rdquo;
the full host name. Following the
regular NIS+ setup procedure satisfies
this requirement.</p>
</li>
<li><p><b>Matching
full host names and short host names</b> &ndash;
To satisfy this requirement, you can
duplicate the entries in the host
table. Otherwise, you can enter all
host entries in the user name-service
domains into a master host table at
mail domain level. </p>
</li>
<li><p><b>Multiple
NIS domains in one mail domain</b> &ndash;
To satisfy this requirement, you can
duplicate the entries in all the host
tables. Otherwise, you can type all
host entries in the user name service
domains into a master host table at
mail domain level. Effectively, you
are merging multiple host tables that
are logical or physical into one host
table. Therefore, the same host name
cannot be reused in the multiple name
service domain that shares a common
mail domain.</p>
</li>
</ul>
<p>For task information, refer
to <a href="p79.html">Administering Mail Alias Files (Task Map)</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>
<a name="mailrefer-31"></a><h4>Interactions
of <tt>sendmail</tt> With
NIS+ and DNS</h4>
<p><a name="indexterm-1482"></a>The following list describes
the interactions of <tt>sendmail</tt> with
NIS+ and DNS and provides some guidance.</p>
<ul><li><p><b>Mail
domain name</b> &ndash; If
you are setting up NIS+ as your primary
name service, <tt>sendmail</tt> can
check the mail domain from the NIS+ <tt>sendmailvars</tt> table. This
NIS+ table has one key column and
one value column. To set up your mail
domain, you must add one entry to
this table. This entry should have
the key column set to the literal
string <tt>maildomain</tt> and
the value column set to your mail
domain name. An example is <tt>admin.acme.com</tt>. Although NIS+ allows any
string in the <tt>sendmailvars</tt> table,
the suffix rule still applies for
the mail system to work correctly.
You can use <tt>nistbladm</tt> to
add the <tt>maildomain</tt> entry
to the <tt>sendmailvars</tt> table.
Notice in the following example that
the mail domain is a suffix of the
NIS+ domain.</p>
<pre>nistbladm -A key="maildomain" value=&lt;mail domain> sendmailvars.org_dir.&lt;NIS+ domain></pre></li>
<li><p><b>Mailhost
host name</b> &ndash; If your
network uses both NIS+ and DNS as
the source for the host database,
you can put the <tt>mailhost</tt> entry
in either the NIS+ or DNS host table.
Ensure that your users include both
NIS+ and DNS as the source for the
host database in the <tt>/etc/nsswitch.conf</tt> file.</p>
</li>
<li><p><b>Full
host names</b> &ndash; Both
NIS+ and DNS &ldquo;understand&rdquo;
full host names. Following the regular
NIS+ and DNS setup procedures satisfies
this requirement.</p>
</li>
<li><p><b>Matching
full host names and short host names</b> &ndash;
For every host entry in the NIS+ host
table, you must have a corresponding
host entry in DNS.</p>
</li>
<li><p><b>Multiple
NIS domains in one mail domain</b> &ndash;
To satisfy this requirement, you can
duplicate the entries in all the host
tables. Alternately, you can type
all host entries in the user name-service
domains into a master host table at
the mail domain level.</p>
</li>
</ul>
<p>For task information, refer
to <a href="p79.html">Administering Mail Alias Files (Task Map)</a> and <a href="p75.html#mailadmin-122">How to Use DNS With <tt>sendmail</tt></a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p95.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p97.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

