<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Modifying Timeouts on SLP Discovery Requests - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p59.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p62.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p64.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="slp.config-19"></a><h3>Modifying Timeouts on SLP Discovery Requests</h3>
<p><a name="indexterm-1017"></a><a name="indexterm-1018"></a><a name="indexterm-1019"></a>Two situations might require that you change the timeouts for
SLP discovery requests:</p>
<ul><li><p>If the SLP agents are separated by multiple subnets, dial-up
lines, or other WANs, the network latency can be high enough that the default
timeouts are insufficient for a request or registration to be completed. Conversely,
if your network is low latency, you can improve performance by decreasing
the timeouts.</p>
</li>
<li><p>If the network is subject to heavy traffic or a high collision
rates, the maximum period that SAs and UAs need to wait before sending a message
might be insufficient to assure collision-free transactions.</p>
</li>
</ul>
<a name="slp.config-20"></a><h4>Changing Default Timeouts</h4>
<p><a name="indexterm-1020"></a><a name="indexterm-1021"></a>High network latency can cause UAs and SAs to time out before
a response returns for requests and registrations. Latency can be a problem
if a UA is separated from an SA, or if both a UA and an SA are separated from
a DA;either by multiple subnets, a dial-up line, or a WAN. You can determine
if latency is a problem by checking whether SLP requests are failing because
of timeouts on UA and SA requests and registrations. You can also use the <tt>ping</tt> command to measure the actual latency.</p>
<p>The following table lists configuration properties that control timeouts.
You can use the procedures in this section to modify these properties.</p>
<a name="slp.config-tbl-cdto"></a>Table 9-4 Time-out Properties<table><tr><th><p>Property</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>net.slp.multicastTimeouts</tt></p>
<p><tt>net.slp.DADiscoveryTimeouts</tt></p>
<p><tt>net.slp.datagramTimeouts</tt></p>
</td><td><p>The properties that control timeouts for repeated multicast and unicast
UDP message transmissions before the transmission is abandoned.</p>
</td></tr>
<tr><td><p><tt>net.slp.multicastMaximumWait</tt></p>
</td><td><p>The property that controls the maximum amount of time a multicast message
is transmitted before it is abandoned.</p>
</td></tr>
<tr><td><p><tt>net.slp.datagramTimeouts</tt></p>
</td><td><p>The upper bound of a DA timeout that is specified by the sum of values
that are listed for this property. A UDP datagram is repeatedly sent to a
DA until a response is received or the time-out bound is reached.</p>
</td></tr>
</table><p><a name="indexterm-1022"></a><a name="indexterm-1023"></a>If frequent timeouts are occurring during multicast service discovery
or DA discovery, increase the <tt>net.slp.multicastMaximumWait</tt> property
from the default value of 15000 milliseconds (15 seconds). Increasing the
maximum wait period allows more time for requests on high latency networks
to be completed. After you change the <tt>net.slp.multicastMaximumWait</tt>,
you should also modify the <tt>net.slp.multicastTimeouts</tt> and <tt>net.slp.DADiscoveryTimeouts</tt>. The sum of the timeout values for these
properties equals the <tt>net.slp.multicastMaximumWait</tt> value.</p>
<a name="slp.config-44"></a><h4><img src="graphics/procedure.gif"> How to Change Default Timeouts</h4>
<p>Use the following procedure to change the SLP properties that control
timeouts.</p>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="slp.config-step-47"></a><b>Stop <tt>slpd</tt> and all SLP
activity on the host.</b><pre># <tt><b>svcadm disable network/slp</b></tt></pre></li><li><a name="slp.config-step-48"></a><b><a name="indexterm-1024"></a>Back up the default <tt>/etc/inet/slp.conf</tt> file
before you change the configuration settings.</b></li><li><a name="slp.config-step-49"></a><b>Change the <tt>net.slp.multicastMaximumWait</tt> property in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.multicastMaximumWait</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>A 32&ndash;bit integer that lists the sum of the values that
are set for <tt>net.slp.multicastTimeouts</tt> and <tt>net.slp.DADiscoveryTimeouts</tt></p>
<p>Default Value=15000 milliseconds (15 seconds)</p>
<p>Range of Values=1000 to 60000 milliseconds</p>
</dd>
</dl>
<p>For example, if you determine that multicast requests require 20 seconds
(20000 milliseconds), you would adjust the values that are listed for <tt>net.slp.multicastTimeouts</tt> and the <tt>net.slp.DADiscoveryTimeouts</tt> properties
to equal 20000 milliseconds.</p><pre>net.slp.multicastMaximumWait=20000
net.slp.multicastTimeouts=2000,5000,6000,7000
net.slp.DADiscoveryTimeouts=3000,3000,6000,8000</pre></li><li><a name="slp.config-step-50"></a><b>If necessary, change the <tt>net.slp.datagramTimeouts</tt> property in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.datagramTimeouts</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>A list of 32&ndash;bit integers that specify timeouts, in
milliseconds, to implement unicast datagram transmission to DAs</p>
<p>Default=3000,3000,3000</p>
</dd>
</dl>
<p>For example, you can increase the datagram timeout to 20000 milliseconds
to avoid frequent timeouts.</p><pre>net.slp.datagramTimeouts=2000,5000,6000,7000</pre><p>In high-performance networks, you can reduce the time-out bound for
multicast and unicast UDP datagram transmission. When you reduce the time-out
bound, you decrease latency that is required to satisfy SLP requests.</p></li><li><a name="slp.config-step-51"></a><b>Save your changes and close the file.</b></li><li><a name="slp.config-step-52"></a><b>Restart <tt>slpd</tt> to activate
your changes.</b><pre># <tt><b>svcadm enable network/slp</b></tt></pre></li></ol><a name="slp.config-21"></a><h4>Configuring the Random-Wait Bound</h4>
<p><a name="indexterm-1025"></a><a name="indexterm-1026"></a><a name="indexterm-1027"></a><a name="indexterm-1028"></a>In networks with heavy traffic or a high collision rate, communication
with a DA might be affected. When collision rates are high, the sending agent
must retransmit the UDP datagram. You can determine if retransmission is occurring
by using <tt>snoop</tt> to monitor traffic on a network of hosts
that are running <tt>slpd</tt> as an SA server and a host that is
running <tt>slpd</tt> as a DA. If multiple service registration
messages  for the same service appear in the <tt>snoop</tt> trace
from the host that is running <tt>slpd</tt> as an SA server, you
might have notice collisions.</p>
<p><a name="indexterm-1029"></a>Collisions can be particularly troubling at boot time. When a
DA first starts, it sends unsolicited advertisements and the SAs respond with
registrations. SLP requires the SAs to wait for a random amount of time after
receiving a DA advertisement before responding. The random-wait bound is uniformly
distributed with a maximum value that is controlled by the <tt>net.slp.randomWaitBound</tt>. The default random-wait bound is 1000 milliseconds (1 second).</p>
<a name="slp.config-53"></a><h4><img src="graphics/procedure.gif"> How to Configure the Random-Wait Bound</h4>
<p>Use the following procedure to change the <tt>net.slp.RandomWaitBound</tt> property
in the <tt>slp.conf</tt> file.</p>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="slp.config-step-56"></a><b>Stop <tt>slpd</tt> and all SLP
activity on the host.</b><pre># <tt><b>svcadm disable network/slp</b></tt></pre></li><li><a name="slp.config-step-57"></a><b><a name="indexterm-1030"></a>Back up the default <tt>/etc/inet/slp.conf</tt> file
before you change the configuration settings.</b></li><li><a name="slp.config-step-58z"></a><b>Change the <tt>net.slp.RandomWaitBound</tt> property
in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.RandomWaitBound</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>The upper bound for calculating the random-wait time before
attempting to contact a DA</p>
<p>Default Value=1000 milliseconds (1 second)</p>
<p>Range of Values=1000 to 3000 milliseconds</p>
</dd>
</dl>
<p>For example, you can lengthen the maximum wait to 2000 milliseconds
(2 seconds).</p><pre>net.slp.randomWaitBound=2000</pre><p>When you lengthen the random-wait bound, a longer delay in registration
occurs. SAs can complete registrations with newly discovered DAs more slowly
to avoid collisions and timeouts.</p></li><li><a name="slp.config-step-59"></a><b>If necessary, change the <tt>net.slp.datagramTimeouts</tt> property in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.datgramTimeouts</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>A list of 32&ndash;bit integers that specify timeouts, in
milliseconds, to implement unicast datagram transmission to DAs</p>
<p>Default=3000,3000,3000</p>
</dd>
</dl>
<p>For example, you can increase the datagram timeout to 20000 milliseconds
to avoid frequent timeouts.</p><pre>net.slp.datagramTimeouts=2000,5000,6000,7000</pre><p>In high-performance networks, you can reduce the time-out bound for
multicast and unicast UDP datagram transmission. This setting reduces the
amount of latency in satisfying SLP requests.</p></li><li><a name="slp.config-step-60"></a><b>Save your changes and close the file.</b></li><li><a name="slp.config-step-61"></a><b>Restart <tt>slpd</tt> to activate
your changes.</b><pre># <tt><b>svcadm enable network/slp</b></tt></pre></li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p62.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p64.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

