<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting
Up a PPPoE Access Server - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p122.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p122.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p124.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="ppp.pppoe-5"></a><h3>Setting
Up a PPPoE Access Server</h3>
<p><a name="indexterm-1895"></a><a name="indexterm-1896"></a>If your company is a service
provider, you can offer Internet and
other services to clients that reach
your site through DSL connections.
The procedure involves determining
which interfaces on the server to
involve in the PPPoE tunnel and defining
which services are made available
to the users.</p>
<a name="ppp.pppoe-58"></a><h4><img src="graphics/procedure.gif"> How
to Set Up a PPPoE Access Server</h4>
<p>Use this procedure to define
the Ethernet interface to be used
for the PPPoE tunnel and to configure
the services that the access server
offers.</p>
<ol><li><a name="ppp.pppoe-step-14"></a><b>Become
superuser on the access server or
assume an equivalent role.</b><p>Roles
contain authorizations and privileged
commands. For more information about
roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="ppp.pppoe-step-26"></a><b>Add
the name of the Ethernet interfaces
that are dedicated to the PPPoE tunnels
to the <tt>/etc/ppp/pppoe.if</tt> file.</b><p><a name="indexterm-1897"></a><a name="indexterm-1898"></a>For example, you would
use the following <tt>/etc/ppp/pppoe.if</tt> file for the access server <tt>dslserve</tt> that is shown in <a href="p110.html#ppp.p2plink-28">Example of a Configuration for a PPPoE Tunnel</a>.</p><pre># <tt><b>cat /etc/ppp/pppoe.if</b></tt>
<tt><b>hme1</b></tt>
<tt><b>hme2</b></tt></pre></li><li><b><a name="indexterm-1899"></a>Define global services
that are provided by the access server
in the <tt>/etc/ppp/pppoe</tt> file.</b><p>The following <tt>/etc/ppp/pppoe</tt> file lists the services
that are provided by access server <tt>dslserve</tt>, which was shown
in <a href="p110.html#ppp.p2plink-fig-38">Figure 16-5</a>.</p><pre><tt><b>device hme1,hme2</b></tt>
<tt><b>service internet</b></tt>
    <tt><b>pppd "proxyarp 192.168.1.1:"</b></tt>
<tt><b>service debugging</b></tt>
    <tt><b>pppd "debug proxyarp 192.168.1.1:"</b></tt></pre><p>In the file example, Internet
service is announced for <tt>dslserve</tt>'s Ethernet interfaces <tt>hme1</tt> and <tt>hme2</tt>.
Debugging is turned on for PPP links
on the Ethernet interfaces.</p></li><li><b>Set up the PPP configuration
files in the same way that you would
for a dial-in server.</b><p>For
more information, refer to <a href="p135.html">Creating an IP Addressing Scheme for Callers</a>.</p></li><li><b><a name="indexterm-1900"></a>Start the <tt>pppoed</tt> daemon.</b><pre><tt><b># /etc/init.d/pppd start</b></tt></pre><p><tt>pppd</tt> also
plumbs the interfaces that are listed
in <tt>/etc/ppp/pppoe.if</tt>.</p></li><li><a name="ppp.pppoe-step-45"></a>(Optional) <b>Verify
that the interfaces on the server
are plumbed for PPPoE.</b><pre># <tt><b>/usr/sbin/sppptun query</b></tt>
hme1:pppoe
hme1:pppoed
hme2:pppoe
hme2:pppoed</pre><p>The previous sample shows that
interfaces <tt>hme1</tt> and <tt>hme2</tt> are currently plumbed
for PPPoE. You can also use the <tt>/usr/sbin/sppptun</tt> command
to manually plumb interfaces for PPPoE.
For instructions, refer to <a href="p136.html#ppp.reference-49"><tt>/usr/sbin/sppptun</tt> Command</a>.</p></li></ol><a name="ppp.pppoe-60"></a><h4><img src="graphics/procedure.gif"> How
to Modify an Existing <tt>/etc/ppp/pppoe</tt> File</h4>
<a name="indexterm-1901"></a><a name="indexterm-1902"></a><a name="indexterm-1903"></a><ol><li><a name="ppp.pppoe-step-50"></a><b>Become
superuser on the access server or
assume an equivalent role.</b><p>Roles
contain authorizations and privileged
commands. For more information about
roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="ppp.pppoe-step-47"></a><b>Modify <tt>/etc/ppp/pppoe</tt>, as needed.</b></li><li><a name="ppp.pppoe-step-48"></a><b>Cause
the <tt>pppoed</tt> daemon
to recognize the new services.</b><pre># <tt><b>pkill -HUP pppoed</b></tt></pre></li></ol><a name="ppp.pppoe-61"></a><h4><img src="graphics/procedure.gif"> How
to Restrict the Use of an Interface
to Particular Clients</h4>
<p><a name="indexterm-1904"></a>The next procedure shows
how to restrict an interface to a
group of PPPoE clients. Before performing
this task, you need to obtain the
real Ethernet MAC addresses of the
clients you are assigning to the interface.</p>
<hr>
<p><b>Note - </b>Some systems allow you
to change the MAC address on the Ethernet
interface. You should view this ability
as a convenience factor, not a security
measure. </p>
<hr>
<p>Using the example that is shown
in <a href="p110.html#ppp.p2plink-28">Example of a Configuration for a PPPoE Tunnel</a>,
these steps show how to reserve one
of <tt>dslserve</tt>'s interfaces, <tt>hme1</tt>, for clients at MiddleCo.</p>
<ol><li><a name="ppp.pppoe-step-44"></a><b><a name="indexterm-1905"></a>Configure the access server's
interfaces and define the services,
as shown in <a href="p123.html#ppp.pppoe-58">How to Set Up a PPPoE Access Server</a>.</b></li><li><a name="ppp.pppoe-step-52"></a><b>Create
entries for clients in the server's <tt>/etc/ethers</tt> database.</b><p>Here is a sample entry for clients
Red, Blue, and Yellow.</p><pre>8:0:20:1:40:30 redether
8:0:20:1:40:10 yellowether
8:0:20:1:40:25 blueether</pre><p>The sample assigns the symbolic
names <tt>redether</tt>, <tt>yellowether</tt>, and <tt>blueether</tt> to the Ethernet addresses
of clients Red, Yellow, and Blue.
The assignment of symbolic names to
the MAC addresses is optional. </p></li><li><a name="ppp.pppoe-step-32"></a><b><a name="indexterm-1906"></a><a name="indexterm-1907"></a>Restrict services that
are provided on a specific interface
by defining the following information
in the <tt>/etc/ppp/pppoe.</tt><b>device</b> file.</b><p>In
this file, <b>device</b> is
the name of the device to be defined.</p><pre># <tt><b>cat /etc/ppp/pppoe.hme1</b></tt>
service internet
     pppd "name dslserve-hme1"
     clients redether,yellowether,blueether</pre><p><tt>dslserve-hme1</tt> is
the access server's name, which is
used in matching entries in the <tt>pap-secrets</tt> file. The <tt>clients</tt> option restricts
the use of interface <tt>hme1</tt> to
clients with the symbolic Ethernet
names <tt>redether</tt>, <tt>yellowether</tt>, and <tt>blueether</tt>. </p><p>If you did
not define symbolic names for client's
MAC addresses in <tt>/etc/ethers</tt>,
you can use the numeric addresses
as arguments for the <tt>clients</tt> option.
Wildcards are allowed.</p><p>For
example, you can specify the numeric
address <tt>clients 8:0:20:*:*:*</tt>.
By using wildcards, all matching addresses
in <tt>/etc/ethers</tt> are
accepted.</p></li><li><a name="ppp.pppoe-step-37"></a><b><a name="indexterm-1908"></a>Create the <tt>/etc/ppp/pap-secrets</tt> file for the access server: </b><pre><tt><b>Red         dslserve-hme1   redpasswd     *</b></tt>
<tt><b>Blue        dslserve-hme1   bluepasswd    *</b></tt>
<tt><b>Yellow      dslserve-hme1   yellowpassd   *</b></tt></pre><p>The entries are the PAP names
and passwords of clients that are
allowed to run PPP over <tt>dslserve</tt>'s <tt>hme1</tt> interface. </p><p>For more information
about PAP authentication, see <a href="p118.html#pppsvrconfig.auth-2">Configuring PAP Authentication</a>.</p></li></ol><h6>See Also</h6><p>The following list provides
references to related information.</p>
<ul><li><p>To learn more about
PPPoE, see <a href="p136.html">Creating PPPoE Tunnels for DSL Support</a>.</p>
</li>
<li><p>To troubleshoot PPPoE
and PPP problems, see <a href="p125.html">Solving PPP-Related and PPPoE-Related Problems</a>.</p>
</li>
<li><p>To configure a PPPoE
client, see <a href="p122.html#ppp.pppoe-2">Setting Up the PPPoE Client</a>.</p>
</li>
<li><p>To configure PAP authentication
for a client, see <a href="p119.html">Configuring PAP Authentication for Trusted Callers (Dial-out Machines)</a>.</p>
</li>
<li><p>To configure PAP authentication
on a server, see <a href="p118.html#pppsvrconfig.auth-3">Configuring PAP Authentication on the Dial-in Server</a>.</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p122.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p124.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

