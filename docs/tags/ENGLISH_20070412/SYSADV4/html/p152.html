<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>UUCP <tt>COMMANDS</tt> Option - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p146.html">26.&nbsp;&nbsp;UUCP (Reference)</a> > <a href="p151.html#uucpov-62">UUCP <tt>/etc/uucp/Permissions</tt> File</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p151.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p153.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="uucpov-71"></a><h4>UUCP <tt>COMMANDS</tt> Option</h4>
<a name="indexterm-2730"></a><hr>
<p><b>Caution - </b><a name="indexterm-2731"></a><a name="indexterm-2732"></a><a name="indexterm-2733"></a><a name="indexterm-2734"></a><a name="indexterm-2735"></a><a name="indexterm-2736"></a><a name="indexterm-2737"></a><a name="indexterm-2738"></a><a name="indexterm-2739"></a><a name="indexterm-2740"></a><a name="indexterm-2741"></a>The <tt>COMMANDS</tt> option can compromise the
security of your system. Use this
option with extreme care.        
   </p>
<hr>
<p>You can use the <tt>COMMANDS</tt> option
in <tt>MACHINE</tt> entries
to specify the commands that a remote
computer can execute on your machine.
The <tt>uux</tt> program
generates remote execution requests
and queues the requests to be transferred
to the remote computer. Files and
commands are sent to the target computer
for remote execution, which is an
exception to the rule that <tt>MACHINE</tt> entries apply only when
your system calls out. </p>
<p>Note that <tt>COMMANDS</tt> is not used in a <tt>LOGNAME</tt> entry. <tt>COMMANDS</tt> in <tt>MACHINE</tt> entries
defines command permissions, whether
you call the remote system or the
remote system calls you. </p>
<p>The string <tt>COMMANDS=rmail</tt> specifies
the default commands that a remote
computer can execute on your computer.
If a command string is used in a <tt>MACHINE</tt> entry, the default
commands are overridden. For instance,
the following entry overrides the
COMMAND default so that the computers
that are named <tt>owl</tt>, <tt>raven</tt>, <tt>hawk</tt>,
and <tt>dove</tt> can now
execute <tt>rmail</tt>, <tt>rnews</tt>, and <tt>lp</tt> on
your computer. </p>
<pre>MACHINE=owl:raven:hawk:dove COMMANDS=rmail:rnews:lp </pre><p>In addition to the names as
just specified,you can have full path
names of commands. For example, the
following entry specifies that command <tt>rmail</tt> uses the default search
path.</p>
<pre>COMMANDS=rmail:/usr/local/rnews:/usr/local/lp </pre><p>The default search path for
UUCP is <tt>/bin</tt> and <tt>/usr/bin</tt>. When the remote
computer specifies <tt>rnews</tt> or <tt>/usr/local/rnews</tt> for the
command to be executed, <tt>/usr/local/rnews</tt> is executed regardless
of the default path. Likewise, <tt>/usr/local/lp</tt> is the <tt>lp</tt> command
that is executed. </p>
<p>Including the <tt>ALL</tt> value
in the list means that any command
from the remote computers that are
specified in the entry is executed.
If you use this value, you give the
remote computers full access to your
machine.</p>
<hr>
<p><b>Caution - </b>This value allows far
more access than normal users have.
You should use this value only when
both machines are at the same site,
are closely connected, and the users
are trusted. </p>
<hr>
<p>Here is the string with the <tt>ALL</tt> value added:</p>
<pre>COMMANDS=/usr/local/rnews:ALL:/usr/local/lp </pre><p>This string illustrates two
points:</p>
<ul><li><p><a name="indexterm-2742"></a>The <tt>ALL</tt> value
can appear anywhere in the string. </p>
</li>
<li><p>The path names that
are specified for <tt>rnews</tt> and <tt>lp</tt> are used (instead of
the default) if the requested command
does not contain the full path names
for <tt>rnews</tt> or <tt>lp</tt>.</p>
</li>
</ul>
<p><a name="indexterm-2743"></a><a name="indexterm-2744"></a><a name="indexterm-2745"></a><a name="indexterm-2746"></a><a name="indexterm-2747"></a><a name="indexterm-2748"></a>You should use the <tt>VALIDATE</tt> option
whenever you specify potentially dangerous
commands, such as <tt>cat</tt> and <tt>uucp</tt> with the <tt>COMMANDS</tt> option.
Any command that reads or writes files
is potentially dangerous to local
security when the command is executed
by the UUCP remote execution daemon
(<tt>uuxqt</tt>).       </p>
<a name="uucpov-72"></a><h4>UUCP <tt>VALIDATE</tt> Option</h4>
<p><a name="indexterm-2749"></a><a name="indexterm-2750"></a><a name="indexterm-2751"></a><a name="indexterm-2752"></a><a name="indexterm-2753"></a><a name="indexterm-2754"></a>Use the <tt>VALIDATE</tt> option in conjunction
with the <tt>COMMANDS</tt> option
whenever you specify commands that
are potentially dangerous to your
machine's security. <tt>VALIDATE</tt> is merely an added
level of security on top of the <tt>COMMANDS</tt> option,
though it is a more secure way to
open command access than <tt>ALL</tt>.
      </p>
<p><tt>VALIDATE</tt> provides
a certain degree of verification of
the caller's identity by cross-checking
the host name of a calling machine
against the login name it uses. The
following string ensures that if any
machine other than <tt>widget</tt> or <tt>gadget</tt> tries to log in as <tt>Uwidget</tt>, the connection
is refused.</p>
<pre>LOGNAME=Uwidget VALIDATE=widget:gadget </pre><p>The <tt>VALIDATE</tt> option
requires privileged computers to have
a unique login and password for UUCP
transactions. An important aspect
of this validation is that the login
and password that are associated with
this entry are protected. If an outsider
obtains that information, that particular <tt>VALIDATE</tt> option
can no longer be considered secure. </p>
<p><a name="indexterm-2755"></a><a name="indexterm-2756"></a><a name="indexterm-2757"></a><a name="indexterm-2758"></a>Carefully consider which
remote computers you are granting
privileged logins and passwords for
UUCP transactions. Giving a remote
computer a special login and password
with file access and remote execution
capability is like giving anyone on
that computer a normal login and password
on your computer. Therefore, if you
cannot trust someone on the remote
computer, do not provide that computer
with a privileged login and password.
   </p>
<p>The following <tt>LOGNAME</tt> entry
specifies that if one of the remote
computers that claims to be <tt>eagle</tt>, <tt>owl</tt>,
or <tt>hawk</tt> logs in
on your computer, it must have used
the login <tt>uucpfriend</tt>:</p>
<pre>LOGNAME=uucpfriend VALIDATE=eagle:owl:hawk </pre><p>If an outsider obtains the <tt>uucpfriend</tt> login and password,
masquerading is easy. </p>
<p><a name="indexterm-2759"></a><a name="indexterm-2760"></a><a name="indexterm-2761"></a><a name="indexterm-2762"></a>But what does this entry
have to do with the <tt>COMMANDS</tt> option, which appears
only in <tt>MACHINE</tt> entries?
This entry links the <tt>MACHINE</tt> entry
(and <tt>COMMANDS</tt> option)
with a <tt>LOGNAME</tt> entry
that is associated with a privileged
login. This link is needed because
the execution daemon is not running
while the remote computer is logged
in. Actually, the link is an asynchronous
process that does not know which computer
sent the execution request. Therefore,
the real question is: How does your
computer know where the execution
files came from?    </p>
<p>Each remote computer has its
own spool directory on your local
machine. These spool directories have
write permission that is given only
to the UUCP programs. The execution
files from the remote computer are
put in its spool directory after being
transferred to your computer. When
the <tt>uuxqt</tt> daemon
runs, it can use the spool directory
name to find the <tt>MACHINE</tt> entry
in the <tt>Permissions</tt> file
and get the <tt>COMMANDS</tt> list.
Or, if the computer name does not
appear in the <tt>Permissions</tt> file,
the default list is used. </p>
<p>This example shows the relationship
between the <tt>MACHINE</tt> and <tt>LOGNAME</tt> entries: </p>
<pre>MACHINE=eagle:owl:hawk REQUEST=yes \ 
COMMANDS=rmail:/usr/local/rnews \ 
READ=/ WRITE=/ 
LOGNAME=uucpz VALIDATE=eagle:owl:hawk \ 
REQUEST=yes SENDFILES=yes \ 
READ=/ WRITE=/ </pre><p>The value in the <tt>COMMANDS</tt> option
means that remote users can execute <tt>rmail</tt> and <tt>/usr/local/rnews</tt>. </p>
<p><a name="indexterm-2763"></a><a name="indexterm-2764"></a><a name="indexterm-2765"></a><a name="indexterm-2766"></a><a name="indexterm-2767"></a><a name="indexterm-2768"></a><a name="indexterm-2769"></a><a name="indexterm-2770"></a><a name="indexterm-2771"></a><a name="indexterm-2772"></a><a name="indexterm-2773"></a><a name="indexterm-2774"></a>In the first entry, you
must assume that when you want to
call one of the computers that is
listed, you are really calling either <tt>eagle</tt>, <tt>owl</tt>,
or <tt>hawk</tt>. Therefore,
any files that are put into one of
the <tt>eagle</tt>, <tt>owl</tt>, or <tt>hawk</tt> spool
directories is put there by one of
those computers. If a remote computer
logs in and says that it is one of
these three computers, its execution
files are also put in the privileged
spool directory. You therefore have
to validate that the computer has
the privileged login <tt>uucpz</tt>.
           </p>
<a name="uucpov-73"></a><h4>UUCP <tt>MACHINE</tt> Entry for <tt>OTHER</tt></h4>
<p><a name="indexterm-2775"></a><a name="indexterm-2776"></a><a name="indexterm-2777"></a><a name="indexterm-2778"></a><a name="indexterm-2779"></a><a name="indexterm-2780"></a>You might want to specify
different option values for remote
machines that are not mentioned in
specific <tt>MACHINE</tt> entries.
The need might arise when many computers
are calling your host, and the command
set changes from time to time. The
name <tt>OTHER</tt> for
the computer name is used for this
entry as shown in this example:  
   </p>
<pre>MACHINE=OTHER \ 
COMMANDS=rmail:rnews:/usr/local/Photo:/usr/local/xp </pre><p>All other options that are available
for the <tt>MACHINE</tt> entry
can also be set for the computers
that are not mentioned in other <tt>MACHINE</tt> entries. </p>
<a name="uucpov-74"></a><h4>Combining <tt>MACHINE</tt> and <tt>LOGNAME</tt> Entries
for UUCP</h4>
<p><a name="indexterm-2781"></a><a name="indexterm-2782"></a><a name="indexterm-2783"></a><a name="indexterm-2784"></a><a name="indexterm-2785"></a><a name="indexterm-2786"></a>You can combine <tt>MACHINE</tt> and <tt>LOGNAME</tt> entries
into a single entry when the common
options are the same. For example,
the two sets of entries that follow
share the same <tt>REQUEST</tt>, <tt>READ</tt>,
and <tt>WRITE</tt> options:</p>
<pre>MACHINE=eagle:owl:hawk REQUEST=yes \ 
READ=/ WRITE=/</pre><p>and</p>
<pre>LOGNAME=uupz REQUEST=yes SENDFILES=yes \ 
READ=/ WRITE=/</pre><p>You can merge these entries,
as shown:</p>
<pre>MACHINE=eagle:owl:hawk REQUEST=yes \ 
logname=uucpz SENDFILES-yes \ 
READ=/ WRITE=/</pre><p>Combining <tt>MACHINE</tt> and <tt>LOGNAME</tt> entries makes the <tt>Permissions</tt> file more manageable
and efficient.</p>
<a name="uucpov-75"></a><h4>UUCP
Forwarding</h4>
<p><a name="indexterm-2787"></a><a name="indexterm-2788"></a><a name="indexterm-2789"></a><a name="indexterm-2790"></a><a name="indexterm-2791"></a><a name="indexterm-2792"></a><a name="indexterm-2793"></a><a name="indexterm-2794"></a><a name="indexterm-2795"></a>When sending files through
a series of machines, the intermediary
machines must have the command <tt>uucp</tt> among their <tt>COMMANDS</tt> options.
If you type the following command,
the forwarding operation works only
if machine <tt>willow</tt> permits
machine <tt>oak</tt> to
execute the <tt>uucp</tt> program.
        </p>
<pre>% <tt><b>uucp sample.txt oak\!willow\!pine\!/usr/spool/uucppublic</b></tt></pre><p>The machine <tt>oak</tt> also
must permit your machine to execute
the  <tt>uucp</tt> program.
The machine <tt>pine</tt>,
as the last machine designated, does
not have to permit the <tt>uucp</tt> command
because the machine is not doing any
forwarding operations. Machines are
not normally set up this way. </p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p151.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p153.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

