<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p73.html#dhcp-admin-9">15.&nbsp;&nbsp;Administering DHCP (Tasks)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p87.html#dhcp-admin-cv1211">Converting to a New DHCP Data Store</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p87.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p89.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="dhcp-admin-576"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Convert the DHCP Data Store <tt>(dhcpconfig
-C</tt>)</h3>
<ol><li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-admin-step-579"></A><li><p><b>Convert the data store by typing a command
of the following format:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>/usr/sbin/dhcpconfig -C -r </tt><i>resource<tt></i> -p </tt><i>path<tt></i></b></tt></pre>
</td></table><br><table border="0" cellspacing="5"><tr><td valign="top"><p><i>resource</i></p></td><td valign="top"><p>is the new data store type, such as <tt>SUNWbinfiles</tt></p>
</td></tr><tr><td valign="top"><p><i>path</i></p></td><td valign="top"><p>is the path to the data, such as <tt>/var/dhcp</tt></p>
</td></tr></table>
<p>Note that if you want to keep the original data in the old data store
after the conversion, specify the <tt>-k</tt> option. For example,
to convert your data store to <tt>SUNWbinfiles</tt> and save the
old data store, you would type:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># /usr/sbin/dhcpconfig -C -r SUNWbinfiles -p /var/dhcp -k</pre>
</td></table><br><p>See the <tt>dhcpconfig</tt>(1M) man page for more information about the <tt>dhcpconfig</tt> utility.</p>
</li>
</ol><A NAME="dhcp-admin-mv1211"></A><h2>Moving Configuration Data Between DHCP
Servers (Task Map)</h2>
<A NAME="indexterm-1502"></A><p>DHCP Manager and the <tt>dhcpconfig</tt> utility enable you
to move some or all the DHCP configuration data from one Solaris DHCP server
to another server. You can move entire networks and all the IP addresses,
macros, and options associated with the networks. Alternatively, you can select
specific IP addresses, macros, and options to move. You can also copy macros
and options without removing the macros and options from the first server.</p>
<p>You might want to move data if you are going to do any of the following
tasks:</p><ul><li><p>Add a server to share DHCP duties.</p>
</li>
<li><p>Replace the DHCP server's system.</p>
</li>
<li><p>Change the path for the data store, while still using the
same data store.</p>
</li>
</ul>
<p><A NAME="indexterm-1503"></A>The following task map identifies the procedures that you must
perform when you move DHCP configuration data.</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Task</p></th><th scope="col"><p>Description</p></th><th scope="col"><p>For Instructions</p></th></tr>
<tr><td><p>1. Export the data from the first server.</p></td><td><p>Select the data that you want to move to another server, and create
a file of exported data.</p></td><td><p><A HREF="p88.html#dhcp-admin-proc-1204">How to Export Data From a DHCP Server (DHCP Manager)</A>&nbsp;</p><p><A HREF="p88.html#dhcp-admin-proc-1205">How to Export Data From a DHCP Server (<tt>dhcpconfig -X</tt>)</A>&nbsp;</p></td></tr>
<tr><td><p>2. Import the data to the second server.</p></td><td><p>Copy exported data to another DHCP server's data store.</p></td><td><p><A HREF="p88.html#dhcp-admin-proc-510">How to Import Data on a DHCP Server (DHCP Manager)</A>&nbsp;</p><p><A HREF="p89.html#dhcp-admin-proc-317">How to Import Data on a DHCP Server (<tt>dhcpconfig -I</tt>)</A>&nbsp;</p></td></tr>
<tr><td><p>3. Modify the imported data for the new server environment.</p></td><td><p>Change server-specific configuration data to match the new server's
information.</p></td><td><p><A HREF="p89.html#dhcp-admin-proc-257">How to Modify Imported DHCP Data (DHCP Manager)</A>&nbsp;</p><p><A HREF="p89.html#dhcp-admin-proc-324">How to Modify Imported DHCP Data (<tt>pntadm</tt>, <tt>dhtadm</tt>)</A>&nbsp;</p></td></tr>
</table><p>In DHCP Manager, you use the Export Data wizard and the Import Data
wizard to move the data from one server to the other server. You then modify
macros in the Macros tab. The following figures show the initial dialog boxes
for the wizards.</p>
<A NAME="dhcp-admin-fig-336"></A><p><b>Figure 15-20 </b>Export Data Wizard Dialog Box in DHCP
Manager</p>
<IMG src="figures/dhcp-export-wiz.gif" class="figure" alt="Dialog box lists steps to export data to a file. Shows
two lists of networks, titled Do Not Export and Export. Shows arrow buttons
between the lists." title="Dialog box lists steps to export data to a file. Shows
two lists of networks, titled Do Not Export and Export. Shows arrow buttons
between the lists."><A NAME="dhcp-admin-fig-337"></A><p><b>Figure 15-21 </b>Import Data Wizard Dialog Box in DHCP
Manager</p>
<IMG src="figures/dhcp-import-wiz.gif" class="figure" alt="Dialog box lists steps to import data from a file. Shows
Import File field and Overwrite existing data check box." title="Dialog box lists steps to import data from a file. Shows
Import File field and Overwrite existing data check box."><A NAME="dhcp-admin-proc-1204"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Export Data From a DHCP Server
(DHCP Manager)</h3>
<A NAME="indexterm-1504"></A><ol><A NAME="dhcp-admin-step-583"></A><li><p><b>Start DHCP Manager on the server from
which you want to move or copy data.</b></p><p>See <A HREF="p74.html#dhcp-admin-4">How to Start and Stop DHCP Manager</A> for information
about DHCP Manager.</p>
</li>
<A NAME="dhcp-admin-step-584"></A><li><p><b>Choose Export Data from the Service menu.</b></p><p>The Export Data wizard opens as shown in <A HREF="p88.html#dhcp-admin-fig-336">Figure 15-20</A>.</p>
</li>
<A NAME="dhcp-admin-step-585"></A><li><p><b>Answer the wizard's prompts.</b></p><p>If
you have difficulty, click Help for detailed information about the prompts.</p>
</li>
<A NAME="dhcp-admin-step-586"></A><li><p><b>Move the export file to a file system
that is accessible to the DHCP server that must import the data.</b></p></li>
</ol><h5>See Also</h5><p>Import the data as described in <A HREF="p88.html#dhcp-admin-proc-510">How to Import Data on a DHCP Server (DHCP Manager)</A>.</p>
<A NAME="dhcp-admin-proc-1205"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Export Data From a DHCP Server
(<tt>dhcpconfig -X</tt>)</h3>
<A NAME="indexterm-1505"></A><ol><A NAME="dhcp-admin-step-604"></A><li><p><b>Log in to the server from which you want
to move or copy data.</b></p></li>
<li><p><b>Become superuser or assume a role
or user name that is assigned to the DHCP
Management profile.</b></p><p>For more information
about the DHCP Management profile, see <A HREF="p74.html#dhcp-admin-rbac1211">Setting Up User Access to DHCP Commands</A>.</p>
<p>Roles contain authorizations
and privileged commands. For more information
about roles, see "Configuring RBAC (Task Map)" in <i>System Administration Guide: Security Services</i>.</p>
</li>
<A NAME="dhcp-admin-step-605"></A><li><p><b>Export the data.</b></p><p>You can
export all of the DHCP data, or specific parts of the data.</p>
<ul><li><p><b>To export specific addresses, macros, and options, type a command
that uses the following format:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>dhcpconfig -X</b></tt> <i>filename</i> <tt><b>-a</b></tt> <i>network-addresses</i> <tt><b>-m</b></tt> <i>macros</i> <tt><b>-o</b></tt> <i>options</i></pre>
</td></table><br><p><i>filename</i> is the full path name that you want
to use to store the compressed exported data. You specify particular network
addresses, DHCP macros, and DHCP options in comma-separated lists. The following
example shows how to export specific networks, macros, and options.</p>
<pre style="font-family:arial,helvetica,sans-serif"># <tt><b>dhcpconfig -X /var/dhcp/0dhcp1065_data \
-a 10.63.0.0,10.62.0.0 \
-m 10.63.0.0,10.62.0.0,SUNW.Sun-Blade-100 -o Sterm</b></tt></pre>
</li>
<li><p><b>To export all DHCP data, type a command that uses the <tt>ALL</tt> keyword.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>dhcpconfig -X</b></tt> <i>filename</i> <tt><b>-a ALL -m ALL -o ALL</b></tt></pre>
</td></table><br><p><i>filename</i> is the full path name that you want
to use to store the compressed exported data. The keyword <tt>ALL</tt> can
be used with the command options to export all the network addresses, macros,
or options. The following example shows how to use the <tt>ALL</tt> keyword.</p>
<pre style="font-family:arial,helvetica,sans-serif"># <tt><b>dhcpconfig -X /var/dhcp/dhcp1065_data -a ALL -m ALL -o ALL</b></tt></pre>
</li>
</ul>
<p><hr size="1" noshade><p><b>Tip - </b>You can omit the export of a particular kind of data by not specifying
the <tt>dhcpconfig</tt> command option for that type of data. For
example, if you do not specify the <tt>-m</tt> option, no DHCP macros
are exported.</p>
<hr size="1" noshade></p><p>See the <tt>dhcpconfig</tt>(1M) man page for more information about the <tt>dhcpconfig</tt> command.</p>
</li>
<A NAME="dhcp-admin-step-606"></A><li><p><b>Move the export file to a location that
is accessible to the server that must import the data.</b></p></li>
</ol><h5>See Also</h5><p>Import the data as described in <A HREF="p89.html#dhcp-admin-proc-317">How to Import Data on a DHCP Server (<tt>dhcpconfig -I</tt>)</A>.</p>
<A NAME="dhcp-admin-proc-510"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Import Data on a DHCP Server
(DHCP Manager)</h3>
<A NAME="indexterm-1506"></A><ol><A NAME="dhcp-admin-step-588"></A><li><p><b>Start DHCP Manager on the server to which
you want to move data that you previously exported from a DHCP server.</b></p><p>See <A HREF="p74.html#dhcp-admin-4">How to Start and Stop DHCP Manager</A> for
information about DHCP Manager.</p>
</li>
<A NAME="dhcp-admin-step-589"></A><li><p><b>Choose Import Data from the Service menu.</b></p><p>The Import Data wizard opens, as shown in <A HREF="p88.html#dhcp-admin-fig-337">Figure 15-21</A>.</p>
</li>
<A NAME="dhcp-admin-step-590"></A><li><p><b>Answer the wizard's prompts.</b></p><p>If
you have difficulty, click Help for detailed information about the prompts.</p>
</li>
<li><p><b>Modify the imported data, if necessary.</b></p><p>See <A HREF="p89.html#dhcp-admin-proc-257">How to Modify Imported DHCP Data (DHCP Manager)</A></p>
</li>
</ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p87.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p89.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

