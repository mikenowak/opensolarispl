<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p50.html#ipref-8">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p50.html#ipconfig-12">TCP/IP Configuration Files</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p50.html#ipconfig-18"><tt>hosts</tt> Database</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p50.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p52.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipconfig-26"></A><h4>How Name Services Affect the <tt>hosts</tt> Database</h4>
<p><A NAME="indexterm-1000"></A><A NAME="indexterm-1001"></A><A NAME="indexterm-1002"></A>The NIS and DNS name services, and LDAP directory service, maintain
host names and addresses on one or more servers. These servers maintain <tt>hosts</tt> databases that contain information for every host and router
(if applicable) on the servers' network. Refer to <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i> for more information about these services.</p>
<A NAME="ipconfig-27"></A><h5>When Local Files Provide the Name Service</h5>
<p><A NAME="indexterm-1003"></A>On a network that uses local files for the name service, systems
that run in local files mode consult their individual <tt>/etc/inet/hosts</tt> files
for IPv4 addresses and host names of other systems on the network. Therefore,
these system's <tt>/etc/inet/hosts</tt> files must contain the
following: </p>
<ul><li><p>Loopback address</p>
</li>
<li><p>IPv4 address and host name of the local system (primary network
interface)</p>
</li>
<li><p>IPv4 address and host name of additional network interfaces
that are attached to this system, if applicable</p>
</li>
<li><p>IPv4 addresses and host names of all hosts on the local network</p>
</li>
<li><p>IPv4 addresses and host names of any routers that this system
must know about, if applicable</p>
</li>
<li><p>IPv4 address of any system your system wants to refer to by
its host name</p>
</li>
</ul>
<p><A NAME="indexterm-1004"></A><A HREF="p51.html#ipref-fig-17">Figure 10-1</A> shows
the <tt>/etc/inet/hosts</tt> file for system <tt>tenere</tt>.
This system runs in local files mode. Notice that the file contains the IPv4
addresses and host names for every system on the <tt>192.9.200</tt> network.
The file also contains the IPv4 address and interface name <tt>timbuktu-201</tt>.
This interface connects the <tt>192.9.200</tt> network to the <tt>192.9.201</tt> network. </p>
<p><A NAME="indexterm-1005"></A><A NAME="indexterm-1006"></A><A NAME="indexterm-1007"></A><A NAME="indexterm-1008"></A><A NAME="indexterm-1009"></A><A NAME="indexterm-1010"></A><A NAME="indexterm-1011"></A><A NAME="indexterm-1012"></A><A NAME="indexterm-1013"></A><A NAME="indexterm-1014"></A>A system that is configured as a network client uses the local <tt>/etc/inet/hosts</tt> file for its loopback address and IPv4 address.</p>
<A NAME="ipref-fig-17"></A><p><b>Figure 10-1 </b><tt>/etc/inet/hosts</tt> File
for a System Running in Local Files Mode</p>
<IMG src="figures/iptask.fig196.gif" class="figure" alt="Shows what the hosts file might look like for a system
that is running in local files mode." title="Shows what the hosts file might look like for a system
that is running in local files mode."><A NAME="ipconfig-30"></A><h3><tt>netmasks</tt> Database</h3>
<p><A NAME="indexterm-1015"></A><A NAME="indexterm-1016"></A><A NAME="indexterm-1017"></A><A NAME="indexterm-1018"></A><A NAME="indexterm-1019"></A><A NAME="indexterm-1020"></A><A NAME="indexterm-1021"></A>You need to edit the <tt>netmasks</tt> database as
part of network configuration <b>only</b> if you have set up
subnetting on your network. The <tt>netmasks</tt> database consists
of a list of networks and their associated subnet masks.</p>
<p><hr size="1" noshade><p><b>Note - </b>When you create subnets, each new network must be a separate physical
network. You cannot apply subnetting to a single physical network.</p>
<hr size="1" noshade></p><A NAME="ipconfig-31"></A><h4>What Is Subnetting?</h4>
<p><A NAME="indexterm-1022"></A><A NAME="indexterm-1023"></A><A NAME="indexterm-1024"></A><A NAME="indexterm-1025"></A><A NAME="indexterm-1026"></A><b>Subnetting</b> is a method for maximizing the
limited 32-bit IPv4 addressing space and reducing the size of the routing
tables in a large internetwork. With any address class, subnetting provides
a means of allocating a part of the host address space to network addresses,
which lets you have more networks. The part of the host address space that
is allocated to new network addresses is known as the <b>subnet number</b>.</p>
<p>In addition to making more efficient use of the IPv4 address space,
subnetting has several administrative benefits. Routing can become very complicated
as the number of networks grows. A small organization, for example, might
give each local network a class C number. As the organization grows, the administration
of a number of different network numbers could become complicated. A better
idea is to allocate a few class B network numbers to each major division in
an organization. For example, you could allocate one Class B network to Engineering,
one Class B to Operations, and so on. Then, you could divide each class B
network into additional networks, using the additional network numbers gained
by subnetting. This division can also reduce the amount of routing information
that must be communicated among routers.</p>
<A NAME="ipconfig-32"></A><h4>Creating the Network Mask for IPv4 Addresses</h4>
<p><A NAME="indexterm-1027"></A><A NAME="indexterm-1028"></A><A NAME="indexterm-1029"></A><A NAME="indexterm-1030"></A><A NAME="indexterm-1031"></A>As part of the subnetting process, you need to select a network-wide <b>netmask</b>. The netmask determines how many and which bits in the
host address space represent the subnet number and how many and which bits
represent the host number. Recall that the complete IPv4 address consists
of 32 bits. Depending on the address class, as many as 24 bits and as few
as 8 bits can be available for representing the host address space. The netmask
is specified in the <tt>netmasks</tt> database.</p>
<p>If you plan to use subnets, you must determine your netmask before you
configure TCP/IP. If you plan to install the operating system as part of network
configuration, the Solaris installation program requests the netmask for your
network.</p>
<p>As described in <A HREF="p7.html#ipplan-5">Designing an IPv4 Addressing Scheme</A>, 32-bit IP addresses consist of a network part and a host part.
The 32 bits are divided into 4 bytes. Each byte is assigned to either the
network number or the host number, depending on the network class. </p>
<p>For example, in a class B IPv4 address, the 2 bytes on the left are
assigned to the network number, and the 2 bytes on the right are assigned
to the host number. In the class B IPv4 address <tt>172.16.10</tt>,
you can assign the 2 bytes on the right to hosts.</p>
<p>If you are to implement subnetting, you need to use some of the bits
in the bytes that are assigned to the host number to apply to subnet addresses.
For example, a 16-bit host address space provides addressing for 65,534 hosts.
If you apply the third byte to subnet addresses and the fourth byte to host
addresses, you can address up to 254 networks, with up to 254 hosts on each
network.</p>
<p>The bits in the host address bytes that are applied to subnet addresses
and those applied to host addresses are determined by a <b>subnet mask</b>.
Subnet masks are used to select bits from either byte for use as subnet addresses.
Although netmask bits must be contiguous, they need not align on byte boundaries.</p>
<p><A NAME="indexterm-1032"></A><A NAME="indexterm-1033"></A><A NAME="indexterm-1034"></A>The netmask can be applied to an IPv4 address by using the bitwise
logical AND operator. This operation selects out the network number and subnet
number positions of the address. </p>
<p><A NAME="indexterm-1035"></A><A NAME="indexterm-1036"></A>Netmasks can be explained in terms of their binary representation.
You can use a calculator for binary-to-decimal conversion. The following examples
show both the decimal and binary forms of the netmask. </p>
<p>If a netmask <tt>255.255.255.0</tt> is applied to the IPv4
address <tt>172.16.41.101</tt>, the result is the IPv4 address of <tt>172.16.41.0.</tt></p>
<p><tt>172.16.41.101</tt> &amp; <tt>255.255.255.0</tt> = <tt>172.16.41.0</tt></p>
<p>In binary form, the operation is as follows:</p>
<p>10000001.10010000.00101001.01100101 (IPv4 address)</p>
<p>ANDed with</p>
<p>11111111.11111111.11111111.00000000 (netmask)</p>
<p>Now the system looks for a network number of <tt>172.16.41</tt> instead
of a network number of <tt>172.16</tt>. If your network has the
number <tt>172.16.41</tt>, that number is what the system checks
for and finds. Because you can assign up to 254 values to the third byte of
the IPv4 address space, subnetting lets you create address space for 254 networks,
where previously space was available for only one.</p>
<p>If you are providing address space for only two additional networks,
you can use the following subnet mask:</p>
<p><tt>255.255.192.0</tt></p>
<p>This netmask provides the following result:</p>
<p>11111111.11111111.1100000.00000000</p>
<p><A NAME="indexterm-1037"></A><A NAME="indexterm-1038"></A><A NAME="indexterm-1039"></A><A NAME="indexterm-1040"></A><A NAME="indexterm-1041"></A><A NAME="indexterm-1042"></A><A NAME="indexterm-1043"></A><A NAME="indexterm-1044"></A>This result still leaves 14 bits available for host addresses.
Because all 0s and 1s are reserved, at least 2 bits must be reserved for the
host number. </p>
<A NAME="ipconfig-33"></A><h4><tt>/etc/inet/netmasks</tt> File</h4>
<p><A NAME="indexterm-1045"></A><A NAME="indexterm-1046"></A><A NAME="indexterm-1047"></A>If your network runs NIS or LDAP, the servers for these name services
maintain <tt>netmasks</tt> databases. For networks that use local
files for the name service, this information is maintained in the <tt>/etc/inet/netmasks</tt> file. </p>
<p><hr size="1" noshade><p><b>Note - </b><A NAME="indexterm-1048"></A><A NAME="indexterm-1049"></A>For compatibility with BSD-based operating systems, the <tt>/etc/netmasks</tt> file is a symbolic link to <tt>/etc/inet/netmasks</tt>.</p>
<hr size="1" noshade></p><p>The following example shows the <tt>/etc/inet/netmasks</tt> file
for a class B network. </p>
<A NAME="ipconfig-ex-34"></A><p><b>Example 10-3 </b><tt>/etc/inet/netmasks</tt> File
for a Class B Network</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre> # The netmasks file associates Internet Protocol (IPv4) address
 # masks with IPv4 network numbers.
 #
 # 	network-number	netmask
 #
 # Both the network-number and the netmasks are specified in
 # "decimal dot" notation, e.g:
 #
 #        128.32.0.0   255.255.255.0
 192.168.0.0  255.255.255.0</pre>
</td></table><br><p>If the <tt>/etc/netmasks</tt> file does not exist, create
it with a text editor. Use the following syntax:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>network-number	netmask-number</i></pre>
</td></table><br><p>Refer to the <tt>netmasks</tt>(4) man
page for complete details.</p>
<p>When creating netmask numbers, type the network number that is assigned
by the ISP or Internet Registry (not the subnet number) and the netmask number
in <tt>/etc/inet/netmasks</tt>. Each subnet mask should be on
a separate line.</p>
<p>For example: </p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>128.78.0.0	    255.255.248.0</pre>
</td></table><br><p><A NAME="indexterm-1050"></A><A NAME="indexterm-1051"></A><A NAME="indexterm-1052"></A><A NAME="indexterm-1053"></A><A NAME="indexterm-1054"></A>You can also type symbolic names for network numbers in the <tt>/etc/inet/hosts</tt> file. You can then use these network names instead
of the network numbers as parameters to commands. </p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p50.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p52.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

