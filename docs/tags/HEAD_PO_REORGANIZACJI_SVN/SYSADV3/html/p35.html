<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p33.html#ipv6-config-tasks-1">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p34.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p36.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="ipv6-config-tasks-6"></A><h2>Modifying an IPv6 Interface Configuration
for Hosts and Servers</h2>
<A NAME="indexterm-740"></A><A NAME="indexterm-741"></A><p>This section explains how to modify the configuration of IPv6-enabled
interfaces on nodes that are hosts or servers. In most instances, you should
use address autoconfiguration for IPv6-enabled interfaces, as explained in <A HREF="p13.html#chapter1-49">Stateless Autoconfiguration Overview</A>. However,
you can modify the IPv6 address of an interface, if necessary, as explained
in the tasks of this section. </p>
<A NAME="gbuzn"></A><h3>Modifying an IPv6 Interface Configuration (Task Map)</h3>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Task</p></th><th scope="col"><p>Description</p></th><th scope="col"><p>For Instructions</p></th></tr>
<tr><td><p>Turn off IPv6 address autoconfiguration.</p></td><td><p>Use this task if you need to manually configure the interface ID portion
of the IPv6 address.</p></td><td><p><A HREF="p34.html#gbuzm">How to Turn Off IPv6 Address Autoconfiguration</A>&nbsp;</p></td></tr>
<tr><td><p>Create a temporary address for a host.</p></td><td><p>Hide a host's interface ID by configuring a randomly created temporary
address that is used as the lower 64 bits of the address.</p></td><td><p><A HREF="p35.html#ipv6-config-tasks-106">How to Configure a Temporary Address</A>&nbsp;</p></td></tr>
<tr><td><p>Configure a token for the interface ID of a system.</p></td><td><p>Create a 64-bit token to be used as the interface ID in an IPv6 address.</p></td><td><p><A HREF="p36.html#ipv6-config-tasks-70">How to Configure a User-Specified IPv6 Token</A>&nbsp;</p></td></tr>
</table><A NAME="ipv6-config-tasks-102"></A><h3>Using Temporary Addresses for an
Interface</h3>
<A NAME="indexterm-742"></A><A NAME="indexterm-743"></A><A NAME="indexterm-744"></A><A NAME="indexterm-745"></A><A NAME="indexterm-746"></A><A NAME="indexterm-747"></A><p>An IPv6 <b>temporary address</b> includes a randomly generated
64-bit number as the interface ID, instead of an interface's MAC address.
You can use temporary addresses for any interfaces on an IPv6 node that you
want to keep anonymous. For example, you might want to use temporary addresses
for the interfaces of a host that needs to access public web servers. Temporary
addresses implement IPv6 privacy enhancements. These enhancements are described
in RFC 3041, available at <A  HREF="http://www.ietf.org/rfc/rfc3041.txt?number=3041">"Privacy
Extensions for Stateless Address Autoconfiguration in IPv6"</A>.</p>
<p>You enable a temporary address in the <tt>/etc/inet/ndpd.conf</tt> file
for one or more interfaces, if needed. However, unlike standard, autoconfigured
IPv6 addresses, a temporary address consists of the 64-bit subnet prefix and
a randomly generated 64-bit number. This random number becomes the interface
ID segment of the IPv6 address. A link-local address is not generated with
the temporary address as the interface ID.</p>
<p>Be aware that temporary addresses have a default <b>preferred
lifetime</b> of one day. When you enable temporary address generation,
you may also configure the following variables in the <tt>/etc/inet/ndpd.conf</tt> file:</p>
<table border="0" cellspacing="5"><tr><td valign="top"><p><b>valid lifetime</b> TmpValidLifetime</p></td><td valign="top"><p>Time span in which the temporary address exists, after which
the address is deleted from the host.</p>
</td></tr><tr><td valign="top"><p><b>preferred lifetime</b> TmpPreferredLifetime</p></td><td valign="top"><p>Elapsed time before the temporary address is deprecated. This
time span should be shorter than the valid lifetime.</p>
</td></tr><tr><td valign="top"><p><b>address regeneration</b></p></td><td valign="top"><p>Duration of time before the expiration of the preferred lifetime,
during which the host should generate a new temporary address.</p>
</td></tr></table>
<p>You express the duration of time for temporary addresses as follows:</p>
<table border="0" cellspacing="5"><tr><td valign="top"><p><i>n</i></p></td><td valign="top"><p><i>n</i> number of seconds, which is the
default</p>
</td></tr><tr><td valign="top"><p><i>n</i> <tt>h</tt></p></td><td valign="top"><p><i>n</i> number of hours (<tt>h</tt>)</p>
</td></tr><tr><td valign="top"><p><i>n</i> <tt>d</tt></p></td><td valign="top"><p><i>n</i> number of days (<tt>d</tt>)</p>
</td></tr></table>
<A NAME="ipv6-config-tasks-106"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Configure a Temporary Address</h4>
<A NAME="indexterm-748"></A><ol><li><p><b>Log in to the IPv6 host as Primary Administrator or as superuser.</b></p><p>The Primary Administrator role includes the Primary Administrator profile.
To create the role and assign the role to a user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<A NAME="ipv6-config-tasks-step-104"></A><li><p><b>If necessary, enable IPv6 on the
host's interfaces</b></p><p>Refer to <A HREF="p33.html#ipv6-config-tasks-119">How to Enable an IPv6 Interface for the Current Session</A>.</p>
</li>
<A NAME="ipv6-config-tasks-step-105"></A><li><p><b>Edit the <tt>/etc/inet/ndpd.conf</tt> file to turn on temporary address generation.</b></p><ul><li><p><A NAME="indexterm-749"></A><A NAME="indexterm-750"></A>To configure temporary addresses on all interfaces of a host,
add the following line to <tt>/etc/inet/ndpd.conf</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>ifdefault TmpAddrsEnabled true</b></tt></pre>
</td></table><br></li>
<li><p>To configure a temporary address for a specific interface,
add the following line to <tt>/etc/inet/ndpd.conf</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>if</b></tt> <i>interface</i> <tt><b>TmpAddrsEnabled true</b></tt> </pre>
</td></table><br></li>
</ul>
</li>
<A NAME="ipv6-config-tasks-step-107"></A><li><p><b>(Optional) Specify the valid lifetime
for the temporary address. </b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>ifdefault TmpValidLifetime</b></tt> <i>duration</i></pre>
</td></table><br><p>This syntax specifies the valid lifetime for all interfaces on a host.
The value for <i>duration</i> should be in seconds, hours,
or days. The default valid lifetime is 7 days. You can also use <tt>TmpValidLifetime</tt> with the <tt>if</tt> <i>interface</i> keywords
to specify the valid lifetime for a temporary address of a particular interface.</p>
</li>
<A NAME="ipv6-config-tasks-step-108"></A><li><p><b>(Optional) Specify a preferred
lifetime for the temporary address, after which the address is deprecated.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>if</b></tt> <i>interface</i> <tt><b>TmpPreferredLifetime</b></tt> <i>duration</i></pre>
</td></table><br><p>This syntax specifies the preferred lifetime for the temporary address
of a particular interface. The default preferred lifetime is one day. You
can also use <tt>TmpPreferredLifetime</tt> with the <tt>ifdefault</tt> keyword
to specify the preferred lifetime for the temporary addresses on all interfaces
of a host.</p>
<p><hr size="1" noshade><p><b>Note - </b>Default address selection gives a lower priority to IPv6 addresses
that have been deprecated. If an IPv6 temporary address is deprecated, default
address selection chooses a nondeprecated address as the source address of
a packet. A nondeprecated address could be the automatically generated IPv6
address, or possibly, the interface's IPv4 address. For more information about
default address selection, see <A HREF="p47.html#ipv6-admintasks-43">Administering Default Address Selection</A>.</p>
<hr size="1" noshade></p></li>
<A NAME="ipv6-config-tasks-step-109"></A><li><p><b>(Optional) Specify the lead time
in advance of address deprecation, during which the host should generate a
new temporary address.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre><tt><b>ifdefault TmpRegenAdvance</b></tt> <b>duration</b></pre>
</td></table><br><p>This syntax specifies the lead time in advance of address deprecation
for the temporary addresses of all interfaces on a host. The default is 5
seconds.</p>
</li>
<A NAME="ipv6-config-tasks-step-110"></A><li><p><b>Change the configuration of the <tt>in.ndpd</tt> daemon.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>pkill -HUP in.ndpd</b></tt>
# <tt><b>/usr/lib/inet/in.ndpd</b></tt></pre>
</td></table><br></li>
<A NAME="ipv6-config-tasks-step-123"></A><li><p><b>Verify that temporary addresses
have been created by running the <tt>ifconfig</tt> <tt>-a6</tt> command,
as shown in <A HREF="p35.html#ekqwi">Example 7-5</A>.</b></p><p>The
output from <tt>ifconfig</tt> should have the word <tt>TEMPORARY</tt> in
the same line as the interface definition.</p>
</li>
</ol><A NAME="ipv6-config-tasks-113"></A><h5>Example 7-4 &nbsp;&nbsp;Temporary Address Variables in the <tt>/etc/inet/ndpd.conf</tt> File</h5>
<p>The following example shows a segment of an <tt>/etc/inet/ndpd.conf</tt> file
with temporary addresses enabled for the primary network interface.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>ifdefault TmpAddrsEnabled true

ifdefault TmpValidLifetime 14d

ifdefault TmpPreferredLifetime 7d

ifdefault TmpRegenAdvance 6s</pre>
</td></table><br><A NAME="ekqwi"></A><h5>Example 7-5 &nbsp;&nbsp;<tt>ifconfig</tt><tt>-a6</tt> Command Output with
Temporary Addresses Enabled</h5>
<p>This example shows the output of the <tt>ifconfig</tt> command
after temporary addresses are created.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig -a6</b></tt>
lo0: flags=2000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv6> mtu 8252 index 1 
     inet6 ::1/128
hme0: flags=2000841 &lt;UP,RUNNING,MULTICAST,IPv6> mtu 1500 index 2 
     ether 8:0:20:b9:4c:54
     inet6 fe80::a00:20ff:feb9:4c54/10
hme0:1: flags=2080841 &lt;UP,RUNNING,MULTICAST,ADDRCONF,IPv6> mtu 1500 index 2 
     inet6 2001:db8:3c4d:15:a00:20ff:feb9:4c54/64
hme0:2: flags=802080841&lt;UP,RUNNING,MULTICAST,ADDRCONF,IPv6,TEMPORARY> mtu 1500 index 2 
      inet6 2001:db8:3c4d:15:7c37:e7d1:fc9c:d2cb/64</pre>
</td></table><br><p>Note that the line following interface <tt>hme0:2</tt> includes
the word <tt>TEMPORARY</tt>. This designation indicates that the
address <tt>2001:db8:3c4d:15:7c37:e7d1:fc9c:d2cb/64</tt> has a temporary
interface ID.</p>
<h5>See Also</h5><ul><li><p>To set up name service support for IPv6 addresses, see <A HREF="p39.html#ipv6-config-tasks-10">Configuring Name Service Support for IPv6</A>.</p>
</li>
<li><p>To configure IPv6 addresses for a server, see <A HREF="p36.html#ipv6-config-tasks-70">How to Configure a User-Specified IPv6 Token</A>.</p>
</li>
<li><p>To monitor activities on IPv6 nodes, see <A HREF="p41.html#ipv6-admintasks-1">Chapter&nbsp;8, Administering a TCP/IP Network (Tasks)</A>.</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p34.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p36.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

