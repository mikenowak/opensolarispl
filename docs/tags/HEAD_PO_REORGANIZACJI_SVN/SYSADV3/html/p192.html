<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p188.html#ipqos-reference-1">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p191.html#ipqos-reference-22">IPQoS Configuration File</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p191.html#ipqos-reference-240"><tt>action</tt> Statement</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p191.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p193.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<table border="0" cellspacing="5"><tr><td valign="top"><p><tt>name</tt> <i>action_name</i></p></td><td valign="top"><p>Assigns a name to the action.</p>
</td></tr><tr><td valign="top"><p><tt>module</tt> <i>module_name</i></p></td><td valign="top"><p>Identifies the IPQoS module to be invoked, which must be one
of the modules in <A HREF="p192.html#ipqos-reference-tbl-2">Table 37-5</A>.</p>
</td></tr><tr><td valign="top"><p><i>params_clause</i></p></td><td valign="top"><p>Can be parameters for the classifier to process, such as global
statistics or the next action to process.</p>
</td></tr><tr><td valign="top"><p><i>cf_clauses</i></p></td><td valign="top"><p>A set of zero or more <tt>class</tt> clauses or <tt>filter</tt> clauses</p>
</td></tr></table>
<A NAME="ipqos-reference-260"></A><h3>Module Definitions</h3>
<p><A NAME="indexterm-3197"></A>The module definition indicates which module is to process the
parameters in the <tt>action</tt> statement. The IPQoS configuration
file can include the following modules.</p>
<A NAME="ipqos-reference-tbl-2"></A><p><b>Table 37-5 </b>IPQoS Modules</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Module Name</p></th><th scope="col"><p>Definition</p></th></tr>
<tr><td><p><tt>ipgpc</tt></p></td><td><p>IP classifier</p></td></tr>
<tr><td><p><tt>dscpmk</tt></p></td><td><p>Marker to be used to create DSCPs in IP packets</p></td></tr>
<tr><td><p><tt>dlcosmk</tt></p></td><td><p>Marker to be used with VLAN devices</p></td></tr>
<tr><td><p><tt>tokenmt</tt></p></td><td><p>Token bucket meter</p></td></tr>
<tr><td><p><tt>tswtclmt</tt></p></td><td><p>Time-sliding window meter</p></td></tr>
<tr><td><p><tt>flowacct</tt></p></td><td><p>Flow-accounting module</p></td></tr>
</table><A NAME="ipqos-reference-270"></A><h3><tt>class</tt> Clause</h3>
<p><A NAME="indexterm-3198"></A><A NAME="indexterm-3199"></A>You define a <tt>class</tt> clause for each class of
traffic. </p>
<p>Use this syntax to define the remaining classes in the IPQoS configuration:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>class {
     
      name <i>class-name</i>
      next_action <i>next-action-name</i>
}      </pre>
</td></table><br><p><A NAME="indexterm-3200"></A>To enable statistics collection on a particular class, you must
first enable global statistics in the <tt>ipgpc.classify</tt> <tt>action</tt> statement. For more information, refer to <A HREF="p191.html#ipqos-reference-240"><tt>action</tt> Statement</A>.</p>
<p><A NAME="indexterm-3201"></A>Use the <tt>enable_stats TRUE</tt> statement whenever
you want to turn on statistics collection for a class. If you do not need
to gather statistics for a class, you can specify <tt>enable_stats FALSE</tt>.
Alternatively, you can eliminate the <tt>enable_stats</tt> statement.</p>
<p>Traffic on an IPQoS-enabled network that you do not specifically define
is relegated to the <b>default class</b>.</p>
<A NAME="ipqos-reference-28"></A><h3><tt>filter</tt> Clause</h3>
<p><A NAME="indexterm-3202"></A><b>Filters</b> are made up of selectors that group
traffic flows into classes. These selectors specifically define the criteria
to be applied to traffic of the class that was created in the class clause.
If a packet matches all selectors of the highest-priority filter, the packet
is considered to be a member of the filter's class. For a complete list of
selectors that you can use with the <tt>ipgpc</tt> classifier, refer
to <A HREF="p188.html#ipqos-reference-tbl-32">Table 37-1</A>.</p>
<p><A NAME="indexterm-3203"></A>You define filters in the IPQoS configuration file by using a <b>filter clause</b>, which has the following syntax:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>filter { 
       name <i>filter-name</i>
       class <i>class-name</i> 
       <i>parameters (selectors)</i>
       }</pre>
</td></table><br><A NAME="ipqos-reference-29"></A><h3><tt>params</tt> Clause</h3>
<p><A NAME="indexterm-3204"></A>The <tt>params</tt> clause contains processing instructions
for the module that is defined in the action statement. Use the following
syntax for the <tt>params</tt> clause:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>params {
           <i>parameters</i>
           <i>params-stats |</i> ""
       }</pre>
</td></table><br><p><A NAME="indexterm-3205"></A>In the <tt>params</tt> clause, you use parameters that
are applicable to the module.</p>
<p>The <i>params-stats</i> value in the <tt>params</tt> clause
is either <tt>global_stats TRUE</tt> or <tt>global_stats FALSE</tt>.
The <tt>global_stats TRUE</tt> instruction turns on UNIX style statistics
for the <tt>action</tt> statement where global statistics is invoked.
You can view the statistics by using the <tt>kstat</tt> command.
You must enable <tt>action</tt> statement statistics before you
can enable per-class statistics.</p>
<A NAME="ipqos-reference-30"></A><h2><tt>ipqosconf</tt> Configuration
Utility</h2>
<p><A NAME="indexterm-3206"></A>You use the <tt>ipqosconf</tt> utility to read the IPQoS
configuration file and to configure IPQoS modules in the UNIX kernel. <tt>ipqosconf</tt> performs the following actions:</p>
<ul><li><p>Applies the configuration file to the IPQoS kernel modules
(<tt>ipqosconf -a</tt> <i>filename</i>)</p>
</li>
<li><p>Lists the IPQoS configuration file currently resident in the
kernel (<tt>ipqosconf -l</tt>)</p>
</li>
<li><p>Ensures that the current IPQoS configuration is read and applied
each time the machine reboots (<tt>ipqosconf -c</tt>)</p>
</li>
<li><p>Flushes the current IPQoS kernel modules (<tt>ipqosconf
-f</tt>)</p>
</li>
</ul>
<p>For technical information, refer to the <tt>ipqosconf</tt>(1M) man page.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p191.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p193.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

