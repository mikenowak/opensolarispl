<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p142.html#mipoverview-1">27.&nbsp;&nbsp;Mobile IP (Overview)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p142.html#mipoverview-5">Agent Discovery</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p142.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p144.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="mipoverview-10"></A><h3>Agent Advertisement</h3>
<A NAME="indexterm-2507"></A><A NAME="indexterm-2508"></A><p>Mobile nodes use agent advertisements to determine the current point of attachment
to the Internet or to an organization's network. An agent advertisement is an Internet
Control Message Protocol (ICMP) router advertisement that has been extended to also
carry a mobility agent advertisement extension.</p>
<p><A NAME="indexterm-2509"></A><A NAME="indexterm-2510"></A><A NAME="indexterm-2511"></A>A foreign agent (FA) can be too busy to serve additional mobile nodes.
However, a foreign agent must continue to send agent advertisements. Then, the mobile
node, which is already registered with a foreign agent, knows that the mobile node
has not moved out of range of the foreign agent. The mobile node also knows that the
foreign agent has not failed. A mobile node that is registered with a foreign agent
from which it no longer receives agent advertisements probably knows that the mobile
node can no longer contact that foreign agent.</p>
<A NAME="mipoverview-43"></A><h4>Agent Advertisement Over Dynamic Interfaces</h4>
<A NAME="indexterm-2512"></A><A NAME="indexterm-2513"></A><p>You can configure the implementation of the foreign agent to send advertisements
over dynamically created interfaces. You have options to enable or disable limited
unsolicited advertisements over the advertising interfaces. Dynamically created interfaces
are defined as only those interfaces that are configured after the <tt>mipagent</tt> daemon starts. Advertisement over dynamic interfaces is useful for applications
that support transient mobility interfaces. Moreover, by limiting unsolicited advertisement,
network bandwidth might be saved.</p>
<A NAME="mipoverview-11"></A><h3>Agent Solicitation</h3>
<A NAME="indexterm-2514"></A><A NAME="indexterm-2515"></A><p>Every mobile node should implement agent solicitation. The mobile node uses
the same procedures, defaults, and constants for agent solicitation that are specified
for solicitation messages of ICMP routers.</p>
<p>The rate that a mobile node sends solicitations is limited by the mobile node.
The mobile node can send three initial solicitations at a maximum rate of one solicitation
per second while the mobile node searches for an agent. After the mobile node registers
with an agent, the rate that solicitations are sent is reduced to limit the overhead
on the local network. </p>
<A NAME="mipoverview-30"></A><h2>Care-of Addresses</h2>
<A NAME="indexterm-2516"></A><p>Mobile IP provides the following alternative modes for the acquisition of a
care-of address:</p>
<ul><li><p><A NAME="indexterm-2517"></A><A NAME="indexterm-2518"></A><A NAME="indexterm-2519"></A><A NAME="indexterm-2520"></A><A NAME="indexterm-2521"></A><A NAME="indexterm-2522"></A>A foreign agent provides a <b>foreign agent care-of address</b>,
which is advertised to the mobile node through agent advertisement messages. The care-of
address is usually the IP address of the foreign agent that sends the advertisements.
The foreign agent is the endpoint of the tunnel. When the foreign agent receives datagrams
through a tunnel, the foreign agent de-encapsulates the datagrams. Then, the foreign
agent delivers the inner datagram to the mobile node. Consequently, many mobile nodes
can share the same care-of address. Bandwidth is important on wireless links. Wireless
links are good candidates from which foreign agents can provide Mobile IP services
to higher bandwidth-wired links.</p>
</li>
<li><p><A NAME="indexterm-2523"></A><A NAME="indexterm-2524"></A>A mobile node acquires a <b>colocated care-of address</b> as
a local IP address through some external means. The mobile node then associates with
one of its own network interfaces. The mobile node might acquire the address through
DHCP as a temporary address. The address might also be owned by the mobile node as
a long-term address. However, the mobile node can only use the address while visiting
the subnet to which this care-of address belongs. When using a colocated care-of address,
the mobile node serves as the endpoint of the tunnel. The mobile node performs de-encapsulation
of the datagrams that are tunneled to the mobile node.</p>
</li>
</ul>
<p><A NAME="indexterm-2525"></A>A colocated care-of address enables a mobile node to function without
a foreign agent. Consequently, a mobile node can use a colocated care-of address in
networks that have not deployed a foreign agent.</p>
<p>If a mobile node is using a colocated care-of address, the mobile node must
be located on the link that is identified by the network prefix of the care-of address.
Otherwise, datagrams that are destined to the care-of address cannot be delivered.</p>
<A NAME="mipoverview-45"></A><h2>Mobile IP With Reverse Tunneling</h2>
<A NAME="indexterm-2526"></A><A NAME="indexterm-2527"></A><p>The section <A HREF="p142.html#mipoverview-2">How Mobile IP Works</A> assumes
that the routing within the Internet is independent of the source address of the datagram.
However, intermediate routers might check for a topologically correct source address.
If an intermediate router does check, the mobile node needs to set up a reverse tunnel.
By setting up a reverse tunnel from the care-of address to the home agent, you ensure
a topologically correct source address for the IP data packet. Reverse tunnel support
is advertised by foreign agents and home agents. A mobile node can request a reverse
tunnel between the foreign agent and the home agent when the mobile node registers.
A reverse tunnel is a tunnel that starts at the care-of address of the mobile node
and terminates at the home agent. The following figure shows the Mobile IP topology
that uses a reverse tunnel.</p>
<A NAME="mipoverview-fig-36"></A><p><b>Figure 27-4 </b>Mobile IP With a Reverse Tunnel</p>
<IMG src="figures/ReverseTunnel.gif" class="figure" alt="Illustrates how a mobile node communicates through a reverse
tunnel to a correspondent node." title="Illustrates how a mobile node communicates through a reverse
tunnel to a correspondent node."><A NAME="mipoverview-46"></A><h3>Limited Private Addresses Support</h3>
<A NAME="indexterm-2528"></A><A NAME="indexterm-2529"></A><p>Mobile nodes that have private addresses that are not globally routeable through
the Internet require reverse tunnels. Solaris Mobile IP supports mobile nodes that
are privately addressed. See <A HREF="p150.html#mipmanaging-23">Overview of the Solaris Mobile IP Implementation</A> for the functions that Solaris Mobile IP does not
support.</p>
<p>Enterprises employ private addresses when external connectivity is not required.
Private addresses are not routeable through the Internet. When a mobile node has a
private address, the mobile node can only communicate with a correspondent node by
having its datagrams reverse-tunneled to its home agent. The home agent then delivers
the datagram to the correspondent node in whatever manner the datagram is normally
delivered when the mobile node is at home. The following figure shows a network topology
with two mobile nodes that are privately addressed. The two mobile nodes use the same
care-of address when they are registered to the same foreign agent.</p>
<A NAME="mipoverview-fig-38"></A><p><b>Figure 27-5 </b>Privately Addressed Mobile Nodes Residing on
the Same Foreign Network</p>
<IMG src="figures/PrivateAddr1.gif" class="figure" alt="Illustrates the network topology of two privately addressed mobile
nodes that use the same care-of address when registered to the same foreign agent." title="Illustrates the network topology of two privately addressed mobile
nodes that use the same care-of address when registered to the same foreign agent."><p>The care-of address and the home agent address must be globally routeable addresses
if these addresses belong to different domains that are connected by a public Internet.</p>
<p>The same foreign network can include two mobile nodes that are privately addressed
with the same IP address. However, each mobile node must have a different home agent.
Also, each mobile node must be on different advertising subnets of a single foreign
agent. The following figure shows a network topology that depicts this situation.</p>
<A NAME="mipoverview-fig-39"></A><p><b>Figure 27-6 </b>Privately Addressed Mobile Nodes Residing on
Different Foreign Networks</p>
<IMG src="figures/PrivateAddr2.gif" class="figure" alt="Illustrates the network topology of two privately addressed mobile
nodes that reside on different foreign networks." title="Illustrates the network topology of two privately addressed mobile
nodes that reside on different foreign networks."><A NAME="mipoverview-12"></A><h2>Mobile IP Registration</h2>
<p><A NAME="indexterm-2530"></A><A NAME="indexterm-2531"></A><A NAME="indexterm-2532"></A><A NAME="indexterm-2533"></A>Mobile nodes detect when they have moved from one subnet to another subnet
through the use of agent advertisements. When the mobile node receives an agent advertisement
that indicates that the mobile node has changed locations, the mobile node registers
through a foreign agent. Even though the mobile node might have acquired its own colocated
care-of address, this feature is provided to enable sites to restrict access to mobility
services.</p>
<p>Mobile IP registration provides a flexible mechanism for mobile nodes to communicate
the current reachability information to the home agent. The registration process enables
mobile nodes to perform the following tasks:</p>
<ul><li><p><A NAME="indexterm-2534"></A>Request forwarding services when visiting a foreign network</p>
</li>
<li><p>Inform the home agent of the current care-of address</p>
</li>
<li><p>Renew a registration that is about to expire</p>
</li>
<li><p><A NAME="indexterm-2535"></A><A NAME="indexterm-2536"></A>Deregister when the mobile node returns home</p>
</li>
<li><p>Request a reverse tunnel</p>
</li>
</ul>
<p><A NAME="indexterm-2537"></A><A NAME="indexterm-2538"></A><A NAME="indexterm-2539"></A><A NAME="indexterm-2540"></A>Registration messages exchange information between a mobile node, a foreign
agent, and the home agent. Registration creates or modifies a mobility binding at
the home agent. Registration associates the home address of the mobile node with the
care-of address of the mobile node for the specified lifetime.</p>
<p>The registration process also enables mobile nodes to do the following functions:</p>
<ul><li><p><A NAME="indexterm-2541"></A>Register with multiple foreign agents</p>
</li>
<li><p>Deregister specific care-of addresses while retaining other mobility
bindings</p>
</li>
<li><p>Discover the address of a home agent if the mobile node is not configured
with this information</p>
</li>
</ul>
<p>Mobile IP defines the following registration processes for a mobile node: </p>
<ul><li><p><A NAME="indexterm-2542"></A><A NAME="indexterm-2543"></A>If a mobile node registers a foreign agent care-of address, the mobile
node is informing the home agent that it is reachable through that foreign agent.</p>
</li>
<li><p>If a mobile node receives an agent advertisement that requires the
mobile node to register through a foreign agent, the mobile node can still attempt
to obtain a colocated care-of address. The mobile node can also register with that
foreign agent or any other foreign agent on that link.</p>
</li>
<li><p>If a mobile node uses a colocated care-of address, the mobile node
registers directly with the home agent.</p>
</li>
<li><p><A NAME="indexterm-2544"></A><A NAME="indexterm-2545"></A><A NAME="indexterm-2546"></A><A NAME="indexterm-2547"></A>If a mobile node returns to the home network, the mobile node deregisters
with the home agent.</p>
</li>
</ul>
<p><A NAME="indexterm-2548"></A><A NAME="indexterm-2549"></A><A NAME="indexterm-2550"></A>These registration processes involve the exchange of registration requests
and registration reply messages. When the mobile node registers by using a foreign
agent, the registration process takes the following steps, which the subsequent figure
shows:</p>
<ol Type="1"><li><p>The mobile node sends a registration request to the prospective foreign
agent to begin the registration process.</p>
</li>
<li><p>The foreign agent processes the registration request and then relays
the request to the home agent.</p>
</li>
<li><p>The home agent sends a registration reply to the foreign agent to
grant or deny the request.</p>
</li>
<li><p>The foreign agent processes the registration reply and then relays
the reply to the mobile node to inform the mobile node of the disposition of the request.</p>
</li>
</ol>
<A NAME="mipoverview-fig-31"></A><p><b>Figure 27-7 </b>Mobile IP Registration Process</p>
<IMG src="figures/registration.gif" class="figure" alt="Illustrates a mobile node registering with the home agent through
the foreign agent." title="Illustrates a mobile node registering with the home agent through
the foreign agent."><p>When the mobile node registers directly with the home agent, the registration
process requires only the following steps:</p>
<ul><li><p><A NAME="indexterm-2551"></A><A NAME="indexterm-2552"></A>The mobile node sends a registration request to the home agent.</p>
</li>
<li><p><A NAME="indexterm-2553"></A>The home agent sends a registration reply to the mobile node that grants
or denies the request.</p>
</li>
</ul>
<p><A NAME="indexterm-2554"></A><A NAME="indexterm-2555"></A>Also, either the foreign agent or the home agent might require a reverse
tunnel. If the foreign agent supports reverse tunneling, the mobile node uses the
registration process to request a reverse tunnel. The mobile node sets the reverse
tunnel flag in the registration request to request a reverse tunnel.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p142.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p144.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

