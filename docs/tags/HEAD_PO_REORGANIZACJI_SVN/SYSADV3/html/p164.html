<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p160.html#deploynetmult-56">31.&nbsp;&nbsp;Administering IPMP (Tasks)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p163.html#enflg">Maintaining IPMP Groups</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p163.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p165.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<A NAME="deploynetmult-8"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Move an Interface From One IPMP Group
to Another Group</h3>
<A NAME="indexterm-2966"></A><p>You can place an interface in a new IPMP group when the interface belongs
to an existing IPMP group.  You do not need to remove the interface from the
current IPMP group. When you place the interface in a new group, the interface
is automatically removed from any existing IPMP group. </p>
<ol><li><p><b>On the system with the IPMP group configuration, assume the Primary
Administrator role or become superuser.</b></p><p>The Primary Administrator
role includes the Primary Administrator profile. To create the role and assign
the role to a user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<A NAME="deploynetmult-step-26"></A><li><p><b>Move the interface to a new IPMP group.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># ifconfig <i>interface</i> group <i>group-name</i></pre>
</td></table><br><p>Placing the interface in a new group automatically removes the interface
 from any existing group.</p>
</li>
</ol><A NAME="esqak"></A><h5>Example 31-8 &nbsp;&nbsp;Moving an Interface to a Different IPMP Group</h5>
<p><A NAME="indexterm-2967"></A><A NAME="indexterm-2968"></A>To change the IPMP group of interface <tt>hme0</tt>,
you would type the following: </p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig hme0 group cs-link</b></tt></pre>
</td></table><br><p>This command removes the <tt>hme0</tt> interface from IPMP
group <tt>test</tt> and then puts the interface in the group <tt>cs-link</tt>.</p>
<A NAME="deploynetmult-92"></A><h2>Replacing a Failed Physical Interface
on Systems That Support Dynamic Reconfiguration</h2>
<A NAME="indexterm-2969"></A><A NAME="indexterm-2970"></A><p>This section contains procedures that relate to administering systems
that support dynamic reconfiguration (DR).</p>
<p><hr size="1" noshade><p><b>Note - </b>The tasks pertain only to IP layers that are configured by using
the <tt>ifconfig</tt> command. Layers before or after the IP layer,
such as ATM or other services, require specific manual steps if the layers
are not automated. The steps in the next procedures are used to unconfigure
interfaces during predetachment and configure interface after postattachment. </p>
<hr size="1" noshade></p><A NAME="deploynetmult-93"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Remove a Physical Interface That
Has Failed (DR-Detach)</h3>
<A NAME="indexterm-2971"></A><p>This procedure shows how to remove a physical interface on a system
that supports DR. The procedure assumes that the following conditions already
exist:</p>
<ul><li><p>Physical interfaces <tt>hme0</tt> and <tt>hme1</tt> are
the example interfaces.</p>
</li>
<li><p>Both interfaces are in the same IPMP group. </p>
</li>
<li><p><tt>hme0</tt> has failed. </p>
</li>
<li><p>Logical interface <tt>hme0:1</tt> has the test address.</p>
</li>
<li><p>You are replacing the failed interface with the same physical
interface name, for example, <tt>hme0</tt> with <tt>hme0</tt>.</p>
</li>
</ul>
<p><hr size="1" noshade><p><b>Note - </b>You can skip Step 2 if the test address is plumbed by using the <tt>/etc/hostname.hme0</tt> file.</p>
<hr size="1" noshade></p><ol><li><p><b>On the system with the IPMP group configuration, assume the Primary
Administrator role or become superuser.</b></p><p>The Primary Administrator
role includes the Primary Administrator profile. To create the role and assign
the role to a user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<A NAME="deploynetmult-step-95"></A><li><p><b>Display the test address configuration.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig hme0:</b></tt>1

hme0:1:
flags=9040842&lt;BROADCAST,RUNNING,MULTICAST,DEPRECATED,IPv4,NOFAILOVER>
mtu 1500 index 3
inet 192.168.233.250 netmask ffffff00 broadcast 192.168.233.255</pre>
</td></table><br><p>You need this information to replumb the test address when replacing
the physical interface.</p>
</li>
<A NAME="deploynetmult-step-96"></A><li><p><b>Remove the physical interface.</b></p><p>Refer to the following sources for a complete description of how to
remove the physical interface:</p>
<ul><li><p><tt>cfgadm</tt>(1M) man
page</p>
</li>
<li><p><i>Sun Enterprise 6x00, 5x00, 4x00, and 3x00 Systems
Dynamic Reconfiguration User's Guide</i></p>
</li>
<li><p><i>Sun Enterprise 10000 DR Configuration Guide</i></p>
</li>
</ul>
</li>
</ol><A NAME="deploynetmult-97"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">How to Replace a Physical Interface That
Has Failed (DR-Attach)</h3>
<A NAME="indexterm-2972"></A><p>This procedure shows how to replace a physical interface on a system
that supports DR. </p>
<ol><li><p><b>On the system with the IPMP group configuration, assume the Primary
Administrator role or become superuser.</b></p><p>The Primary Administrator
role includes the Primary Administrator profile. To create the role and assign
the role to a user, see Chapter 2, "Working With the Solaris Management Console (Tasks)," in <i>System Administration Guide: Basic Administration</i>.</p>
</li>
<A NAME="deploynetmult-step-99"></A><li><p><b>Replace the physical interface.</b></p><p>Refer to the instructions in the following sources:</p>
<ul><li><p><tt>cfgadm</tt>(1M) man
page</p>
</li>
<li><p><i>Sun Enterprise 6x00, 5x00, 4x00, and 3x00 Systems
Dynamic Reconfiguration User's Guide</i></p>
</li>
<li><p><i>Sun Enterprise 10000 DR Configuration Guide</i>,
or <i>Sun Fire 880 Dynamic Reconfiguration User's Guide</i> </p>
</li>
</ul>
</li>
<A NAME="deploynetmult-step-100"></A><li><p><b>Plumb and bring up the test address.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre># <tt><b>ifconfig hme0</b></tt> <i>test-address-configuration</i></pre>
</td></table><br><p>Use the same test address configuration that was configured in the <tt>/etc/hostname.hme0</tt> file. The test configuration is the same configuration
that is displayed in Step 2 in the procedure <A HREF="p164.html#deploynetmult-93">How to Remove a Physical Interface That Has Failed (DR-Detach)</A>.</p>
<p>This configuration triggers the <tt>in.mpathd</tt> daemon
to resume probing. As a result of this probing, <tt>in.mpathd</tt> detects
the repair. Consequently, <tt>in.mpathd</tt> causes the original
IP address to fail back from <tt>hme1</tt>.</p>
<p>See <A HREF="p157.html#emqvv">Test Addresses</A> for more details about test addresses.</p>
<p><hr size="1" noshade><p><b>Note - </b>The failback of IP addresses during the recovery of a failed physical
interface takes up to three minutes. This time might vary, depending on network
traffic. The time also depends on the stability of the incoming interface
to fail back the failed-over interfaces by the <tt>in.mpathd</tt> daemon.</p>
<hr size="1" noshade></p></li>
</ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p163.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p165.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

