<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@16097-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<title>System Administration Guide: IP Services</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<!--stopindex-->
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<A href="toc.html">System Administration Guide: IP Services</A> <font color="red">&gt;&gt;</font> <nobr><A HREF="p94.html#dhcp-trouble-1">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p94.html#dhcp-trouble-2">Troubleshooting DHCP Server Problems</A></nobr> <font color="red">&gt;&gt;</font> <nobr><A HREF="p94.html#dhcp-trouble-7">NIS+ Problems and the DHCP Data Store</A></nobr>&nbsp;
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="grey1"><td></td><td align="right"><A HREF="p94.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p96.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<p>The server system's name should be listed as an explicit member of the group or included
as an implicit member of the group. If necessary, add the server system's name to
the group using the <tt>nisgrpadm</tt> command.</p>
<p>For example,
to add the server name <tt>pacific</tt> to the group <tt>admin.example.com</tt>, you would type the following command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>nisgrpadm -a admin.example.com pacific.example.com</pre>
</td></table><br><p>See the <tt>nisgrpadm</tt>(1) man page
for more information.</p>
<p><b>Problem: </b>The DHCP server does not have valid Data Encryption Standard (DES)
credentials in the NIS+ <tt>cred</tt> table.</p>
<p><b>Solution: </b>If there is a credential problem, an error message states that the user
does not have DES credentials in the NIS+ name service. </p>
<p><A NAME="indexterm-1554"></A>Use the <tt>nisaddcred</tt> command to add security credentials
for the DHCP server system.</p>
<p>The following example shows how to add DES
credentials for the system <tt>mercury</tt> in the domain <tt>example.com</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>nisaddcred -p unix.mercury@example.com \
-P mercury.example.com. DES example.com.</pre>
</td></table><br><p>The command prompts for the root password, which is required to generate an
encrypted secret key.</p>
<p>See the <tt>nisaddcred</tt>(1M) man
page for more information.</p>
<A NAME="dhcp-trouble-35"></A><h3>IP Address Allocation Errors in DHCP</h3>
<p><A NAME="indexterm-1555"></A><A NAME="indexterm-1556"></A>When a client attempts to obtain or verify an IP address, you might see
problems logged to <tt>syslog</tt> or in server debugging mode output.
The following list of common error messages indicates the possible causes and solutions.</p>
<p>&nbsp;</p><p><tt>There is no <i>n.n.n.n</i> dhcp-network table for DHCP client's
network</tt></p><blockquote><p><b>Cause: </b>A client is requesting a specific IP address or seeking
to extend a lease on its current IP address. The DHCP server cannot find the DHCP
network table for that address.</p>
</blockquote>
<blockquote><p><b>Solution: </b>The DHCP network table might have been deleted mistakenly.
You can recreate the network table by adding the network again using DHCP Manager
or the <tt>dhcpconfig</tt> command.</p>
</blockquote>
<p>&nbsp;</p><p><tt>ICMP ECHO reply to OFFER candidate: <i>n.n.n.n</i>, disabling</tt></p><blockquote><p><b>Cause: </b>The IP address considered for offering to a DHCP client
is already in use. This problem might occur if more than one DHCP server owns the
address. The problem might also occur if an address was manually configured for a
non-DHCP network client.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Determine the proper ownership of the address. Correct
either the DHCP server database or the host's network configuration.</p>
</blockquote>
<p>&nbsp;</p><p><tt>ICMP ECHO reply to OFFER candidate: <i>n.n.n.n</i>. No corresponding
dhcp network record.</tt></p><blockquote><p><b>Cause: </b>The IP address considered for offering to a DHCP client
does not have a record in a network table. This error indicates that the IP address
record was deleted from the DHCP network table after the address was selected. This
error can only happen in the brief period before the duplicate address check is completed.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Use DHCP Manager or the <tt>pntadm</tt> command
to view the DHCP network table. If the IP address is missing, create the address with
DHCP Manager by choosing Create from the Edit menu on the Address tab. You can also
use <tt>pntadm</tt> to create the IP address.</p>
</blockquote>
<p>&nbsp;</p><p><tt>DHCP network record for <i>n.n.n.n</i>is unavailable, ignoring
request.</tt></p><blockquote><p><b>Cause: </b>The record for the requested IP address is not in the
DHCP network table, so the server is dropping the request.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Use DHCP Manager or the <tt>pntadm</tt> command
to view the DHCP network table. If the IP address is missing, create the address with
DHCP Manager by choosing Create from the Edit menu on the Address tab. You can also
use <tt>pntadm</tt> to create the address.</p>
</blockquote>
<p>&nbsp;</p><p><tt><i>n.n.n.n</i> currently marked as unusable.</tt></p><blockquote><p><b>Cause: </b>The requested IP address cannot be offered because the
address has been marked in the network table as unusable.</p>
</blockquote>
<blockquote><p><b>Solution: </b>You can use DHCP Manager or the <tt>pntadm</tt> command
to make the address usable.</p>
</blockquote>
<p>&nbsp;</p><p><tt><i>n.n.n.n</i> was manually allocated. No dynamic address
will be allocated.</tt></p><blockquote><p><b>Cause: </b>The client ID has been assigned a manually allocated
address, and that address is marked as unusable. The server cannot allocate a different
address to this client.</p>
</blockquote>
<blockquote><p><b>Solution: </b>You can use DHCP Manager or the <tt>pntadm</tt> command
to make the address usable, or manually allocate a different address to the client.</p>
</blockquote>
<p>&nbsp;</p><p><tt>Manual allocation (<i>n.n.n.n, client ID</i>) has <i>n</i> other records. Should have 0.</tt></p><blockquote><p><b>Cause: </b>The client that has the specified client ID has been
manually assigned more than one IP address. A client should be assigned only one address.
The server selects the last manually assigned address that is found in the network
table.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Use DHCP Manager or the <tt>pntadm</tt> command
to modify IP addresses to remove the additional manual allocations. </p>
</blockquote>
<p>&nbsp;</p><p><tt>No more IP addresses on <i>n.n.n.n</i>network.</tt></p><blockquote><p><b>Cause: </b>All IP addresses currently managed by DHCP on the specified
network have been allocated. </p>
</blockquote>
<blockquote><p><b>Solution: </b>Use DHCP Manager or the <tt>pntadm</tt> command
to create new IP addresses for this network.</p>
</blockquote>
<p>&nbsp;</p><p><tt>Client: <i>clientid</i> lease on <i>n.n.n.n</i> expired.</tt></p><blockquote><p><b>Cause: </b>The lease was not negotiable and timed out. </p>
</blockquote>
<blockquote><p><b>Solution: </b>The client should automatically restart the protocol
to obtain a new lease.</p>
</blockquote>
<p>&nbsp;</p><p><tt>Offer expired for client: <i>n.n.n.n</i></tt></p><blockquote><p><b>Cause: </b>The server made an IP address offer to the client, but
the client took too long to respond and the offer expired.</p>
</blockquote>
<blockquote><p><b>Solution: </b>The client should automatically issue another  discover
message. If this message also times out, increase the cache offer time out for the
DHCP server. In DHCP Manager, choose Modify from the Service menu. </p>
</blockquote>
<p>&nbsp;</p><p><tt>Client: <i>clientid</i> REQUEST is missing requested IP
option.</tt></p><blockquote><p><b>Cause: </b>The client's request did not specify the offered IP
address, so the DHCP server ignored the request. This problem might occur if you use
a third-party DHCP client that is not compliant with the updated DHCP protocol, RFC
2131.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Update the client software.</p>
</blockquote>
<p>&nbsp;</p><p><tt>Client: <i>clientid</i> is trying to renew <i>n.n.n.n</i>, an IP address it has not leased.</tt></p><blockquote><p><b>Cause: </b>The IP address for this client in the DHCP network table
does not match the IP address that the client specified in its renewal request. The
DHCP server does not renew the lease. This problem might occur if you delete a client's
record while the client is still using the IP address.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Use DHCP Manager or the <tt>pntadm</tt> command
to examine the network table, and correct the client's record, if necessary. The client
ID should be bound to the specified IP address. If the client ID is not bound, edit
the address properties to add the client ID.</p>
</blockquote>
<p>&nbsp;</p><p><tt>Client: <i>clientid</i> is trying to verify unrecorded address: <i>n.n.n.n</i>, ignored.</tt></p><blockquote><p><b>Cause: </b>The specified client has not been registered in the
DHCP network table with this address, so the request is ignored by this DHCP server.</p>
<p>Another DHCP server on the network might have assigned this client the
address. However, you might also have deleted the client's record while the client
was still using the IP address.</p>
</blockquote>
<blockquote><p><b>Solution: </b>Use DHCP Manager or the <tt>pntadm</tt> command
to examine the network table on this server and any other DHCP servers on the network.
Make corrections, if necessary.</p>
<p>You can also do nothing and allow the
lease to expire. The client automatically requests a new address lease.</p>
<p>If you want the client to get a new lease immediately, restart the DHCP protocol on
the client by typing the following commands:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>ifconfig <i>interface</i> dhcp release
ifconfig <i>interface</i> dhcp start</pre>
</td></table><br></blockquote>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="suntab"><td></td><td align="right"><A HREF="p94.html"><IMG BORDER="0" ALT="Previous" SRC="graphics/prev.gif"> Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="p96.html">Next <IMG BORDER="0" ALT="Next" SRC="graphics/next.gif"></A></td></tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

