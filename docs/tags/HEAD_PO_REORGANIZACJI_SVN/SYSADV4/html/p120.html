<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring
CHAP Authentication - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p118.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p119.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p121.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="pppsvrconfig.auth-5"></a><h3>Configuring
CHAP Authentication</h3>
<p><a name="indexterm-1863"></a>The
tasks in this section explain how
to implement authentication on a PPP
link by using the Challenge-Handshake
Authentication Protocol (CHAP). The
tasks use the example that is shown
in <a href="p109.html#pppsvrconfig.p2plink-fig-18">Figure 16-4</a> to illustrate a
working CHAP scenario for dialing
up a private network. Use the instructions
as the basis for implementing CHAP
authentication at your site.</p>
<p>Before you perform the next
procedures, you must have done the
following:</p>
<ul><li><p>Set up and tested
the dial-up link between the dial-in
server and dial-out machines that
belong to trusted callers</p>
</li>
<li><p>Obtained superuser
permission for the local machine,
either dial-in server or dial-out
machine</p>
</li>
</ul>
<a name="ppp.auth-59"></a><h4>Setting
Up CHAP Authentication (Task Maps)</h4>
<a name="indexterm-1864"></a><a name="indexterm-1865"></a><a name="pppsvrconfig.p2plink-tbl-12"></a>Table 19-4 Task
Map for CHAP Authentication (Dial-in
Server)<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>1. Assign CHAP secrets to all
trusted callers</p>
</td><td><p>Create, or have the callers
create, their CHAP secrets.</p>
</td><td><p><a href="p120.html#ppp.auth-67">How to Create a CHAP Credentials Database (Dial-in Server)</a></p>
</td></tr>
<tr><td><p>2. Create the chap-secrets database</p>
</td><td><p>Add the security credentials
for all trusted callers to the <tt>/etc/ppp/chap-secrets</tt> file.</p>
</td><td><p><a href="p120.html#ppp.auth-67">How to Create a CHAP Credentials Database (Dial-in Server)</a></p>
</td></tr>
<tr><td><p>3. Modify the PPP configuration
files</p>
</td><td><p>Add options specific to CHAP
to the <tt>/etc/ppp/options</tt> and <tt>/etc/ppp/peers/</tt><i>peer-name</i> files.</p>
</td><td><p><a href="p120.html#ppp.auth-68">How to Add CHAP Support to the PPP Configuration Files (Dial-in Server)</a></p>
</td></tr>
</table><a name="pppsvrconfig.p2plink-tbl-14"></a>Table 19-5 Task
Map for CHAP Authentication (Dial-out
Machine)<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>1. Create the CHAP database
for the trusted caller's machine</p>
</td><td><p>Create the security credentials
for the trusted caller and, if necessary,
security credentials for other users
who call the dial-out machine, in <tt>/etc/ppp/chap-secrets</tt>.</p>
</td><td><p><a href="p120.html#ppp.auth-67">How to Create a CHAP Credentials Database (Dial-in Server)</a></p>
</td></tr>
<tr><td><p>2. Modify the PPP configuration
files</p>
</td><td><p>Add options specific to CHAP
to the <tt>/etc/ppp/options</tt> file.</p>
</td><td><p><a href="p121.html#ppp.auth-70">How to Add CHAP Support to the PPP Configuration Files (Dial-out Machine)</a></p>
</td></tr>
</table><a name="pppsvrconfig.auth-7"></a><h4>Configuring
CHAP Authentication on the Dial-in
Server</h4>
<a name="indexterm-1866"></a><a name="indexterm-1867"></a><p>The first task in setting up
CHAP authentication is modifying the <tt>/etc/ppp/chap-secrets</tt> file.
This file contains the CHAP security
credentials, including the CHAP secret,
that are used to authenticate callers
on the link.</p>
<hr>
<p><b>Note - </b>UNIX or PAM authentication
mechanisms do not work with CHAP.
For example, you cannot use the PPP <tt>login</tt> option as described
in <a href="p118.html#ppp.auth-62">How to Create a PAP Credentials Database (Dial-in Server)</a>. If your
authentication scenario requires PAM
or UNIX-style authentication, choose
PAP instead.</p>
<hr>
<p>The next procedure implements
CHAP authentication for a dial-in
server in a private network. The PPP
link is the only connection to the
outside world. The only callers who
can access the network  have been
granted permission by managers of
the network, possibly including the
system administrator.</p>
<a name="ppp.auth-67"></a><h4><img src="graphics/procedure.gif"> How
to Create a CHAP Credentials Database
(Dial-in Server)</h4>
<a name="indexterm-1868"></a><a name="indexterm-1869"></a><a name="indexterm-1870"></a><ol><li><a name="pppsvrconfig.auth-step-37"></a><b>Assemble a list that contains
the user names of all trusted callers.
Trusted callers include all people
who have been granted permission to
call the private network.</b></li><li><a name="pppsvrconfig.auth-step-38"></a><b>Assign each user a CHAP secret.</b><hr>
<p><b>Note - </b>Be sure to choose a good
CHAP secret that is not easily guessed.
No other restrictions are placed on
the CHAP secret's contents.</p>
<hr>
<p>The method for assigning CHAP
secrets depends on your site's security
policy. Either you have the responsibility
for creating the secrets, or the callers
must create their own secrets. If
you are not responsible for CHAP secret
assignment, be sure to get the CHAP
secrets that were created by, or for,
each trusted caller.</p></li><li><b>Become superuser on the
dial-in server or assume an equivalent
role.</b><p>Roles contain authorizations
and privileged commands. For more
information about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="pppsvrconfig.auth-step-39"></a><b>Modify the <tt>/etc/ppp/chap-secrets</tt> file.</b><p>Solaris
PPP 4.0 includes an <tt>/etc/ppp/chap-secrets</tt> file that contains helpful
comments but no options. You can add
the following options for the server <tt>CallServe</tt> at the end of
the existing <tt>/etc/ppp/chap-secrets</tt> file.</p><pre><tt><b>account1  CallServe   key123   *</b></tt>
<tt><b>account2  CallServe   key456   *</b></tt></pre><p><tt>key123</tt> is
the CHAP secret for trusted caller <tt>account1</tt>. </p><p><tt>key456</tt> is the CHAP secret
for trusted caller <tt>account2</tt>.</p></li></ol><h6>See Also</h6><p>The following list provides
references to related information.</p>
<ul><li><p><a href="p120.html#ppp.auth-67">How to Create a CHAP Credentials Database (Dial-in Server)</a></p>
</li>
<li><p><a href="p120.html#ppp.auth-68">How to Add CHAP Support to the PPP Configuration Files (Dial-in Server)</a></p>
</li>
<li><p><a href="p120.html#pppsvrconfig.auth-42">Configuring CHAP Authentication for Trusted Callers (Dial-out Machines)</a></p>
</li>
</ul>
<a name="pppsvrconfig.auth-8"></a><h4>Modifying
the PPP Configuration Files for CHAP
(Dial-in Server)</h4>
<p>The task in this section explains
how to update existing PPP configuration
files to support CHAP authentication
on the dial-in server. </p>
<a name="ppp.auth-68"></a><h4><img src="graphics/procedure.gif"> How
to Add CHAP Support to the PPP Configuration
Files (Dial-in Server)</h4>
<a name="indexterm-1871"></a><a name="indexterm-1872"></a><ol><li><a name="pppsvrconfig.auth-step-19"></a><b>Log in to the dial-in server
as superuser.</b></li><li><a name="pppsvrconfig.auth-step-200"></a><b>Modify the <tt>/etc/ppp/options</tt> file.</b><p>Add
the options that are shown in bold
for CHAP support.</p><pre># <tt><b>cat /etc/ppp/options</b></tt>
lock
nodefaultroute
<tt><b>name CallServe</b></tt>
<tt><b>auth</b></tt></pre><dl><dt><tt>name</tt> <b>CallServe</b></dt>
<dd><p><a name="indexterm-1873"></a><a name="indexterm-1874"></a>Defines <b>CallServe</b> as
the CHAP name of the user on the local
machine, in this instance the dial-in
server</p>
</dd>
<dt><tt>auth</tt></dt>
<dd><p>Makes the local machine
authenticate callers before establishing
the link</p>
</dd>
</dl>
</li><li><a name="pppsvrconfig.auth-step-21"></a><b>Create the remaining PPP configuration
files to support the trusted callers.</b><p>See <a href="p113.html#ppp.dialin-10">How to Configure Users of the Dial-in Server</a> and <a href="p114.html#ppp.dialin-18">How to Define Communications Over the Serial Line (Dial-in Server)</a>.</p></li></ol><h6>See Also</h6><p>To configure CHAP authentication
credentials for trusted callers, refer
to <a href="p120.html#ppp.auth-67">How to Create a CHAP Credentials Database (Dial-in Server)</a>.</p>
<a name="pppsvrconfig.auth-42"></a><h4>Configuring
CHAP Authentication for Trusted Callers
(Dial-out Machines)</h4>
<p><a name="indexterm-1875"></a>This section contains
tasks for setting up CHAP authentication
on the dial-out machines of trusted
callers. Depending on your site's
security policy, either you or the
trusted callers might be responsible
for setting up CHAP authentication. </p>
<p>For remote callers  to configure
CHAP, ensure that the callers' local
CHAP secrets match the callers' equivalent
CHAP secrets in the dial-in server's <tt>/etc/ppp/chap-secrets</tt> file.
Then give the callers the tasks in
this section for configuring CHAP.</p>
<p>Configuring CHAP for trusted
callers involves two tasks:</p>
<ul><li><p>Creating the callers'
CHAP security credentials</p>
</li>
<li><p>Configuring the callers'
dial-out machines to support CHAP
authentication</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p119.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p121.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

