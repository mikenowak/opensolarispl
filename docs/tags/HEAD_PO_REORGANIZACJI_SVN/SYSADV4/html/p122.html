<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting
Up a PPPoE Tunnel (Tasks) - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p121.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p123.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="ppp.pppoe-1"></a>Chapter&nbsp;20<h3>Setting
Up a PPPoE Tunnel (Tasks)</h3><p>This chapter contains tasks
for setting up the participants on
either end of the PPPoE tunnel: the
PPPoE client and PPPoE access server.
Specific topics include the following:</p>
<ul><li><p><a href="p122.html#ppp.pppoe-40">Major Tasks for Setting Up a PPPoE Tunnel (Task Maps)</a></p>
</li>
<li><p><a href="p122.html#ppp.pppoe-2">Setting Up the PPPoE Client</a></p>
</li>
<li><p><a href="p123.html">Setting Up a PPPoE Access Server</a></p>
</li>
</ul>
<p>The tasks use the scenario that
was introduced in <a href="p110.html">Planning for DSL Support Over a PPPoE Tunnel</a> as
an example. For an overview of PPPoE,
refer to <a href="p106.html">Support for DSL Users Through PPPoE</a>.</p>
<a name="ppp.pppoe-40"></a><h3>Major
Tasks for Setting Up a PPPoE Tunnel
(Task Maps)</h3>
<p><a name="indexterm-1882"></a><a name="indexterm-1883"></a><a name="indexterm-1884"></a><a name="indexterm-1885"></a>The following tables list
the major tasks for configuring PPPoE
clients and the PPPoE access server.
To implement PPPoE at your site, you
need to set up only your end of the
PPPoE tunnel, either the client side
or access-server side.</p>
<a name="ppp.pppoe-tbl-53"></a>Table 20-1 Task
Map for Setting Up a PPPoE Client<a name="indexterm-1886"></a><table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>1. Configure an interface for
PPPoE</p>
</td><td><p>Define the Ethernet interface
to be used for the PPPoE tunnel.</p>
</td><td><p><a href="p122.html#ppp.pppoe-55">How to Configure an Interface for a PPPoE Client</a></p>
</td></tr>
<tr><td><p>2. Configure information about
the PPPoE access server</p>
</td><td><p>Define parameters for the access
server at the service provider end
of the PPPoE tunnel.</p>
</td><td><p><a href="p122.html#ppp.pppoe-56">How to Define a PPPoE Access Server Peer</a></p>
</td></tr>
<tr><td><p>3. Set up the PPP configuration
files</p>
</td><td><p>Define the PPP configuration
files for the client, if you have
not done so already.</p>
</td><td><p><a href="p112.html#ppp.dialin-53">How to Define Communications Over the Serial Line</a></p>
</td></tr>
<tr><td><p>4. Create the tunnel</p>
</td><td><p>Call the access server.</p>
</td><td><p><a href="p122.html#ppp.pppoe-56">How to Define a PPPoE Access Server Peer</a></p>
</td></tr>
</table><a name="ppp.pppoe-tbl-54"></a>Table 20-2 Task
Map for Setting Up a PPPoE Access
Server<table><tr><th><p>Task</p>
</th><th><p>Description </p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>1. Set up a PPPoE access server</p>
</td><td><p>Define the Ethernet interface
to be used for the PPPoE tunnel and
define the services that the access
server offers.</p>
</td><td><p><a href="p123.html#ppp.pppoe-58">How to Set Up a PPPoE Access Server</a></p>
</td></tr>
<tr><td><p>2.
Set up the PPP configuration files</p>
</td><td><p>Define the PPP configuration
files for the client, if you have
not done so already.</p>
</td><td><p><a href="p114.html">Configuring Communications Over the Dial-in Server</a></p>
</td></tr>
<tr><td><p>3. (Optional) Restrict use
of an interface</p>
</td><td><p>Use PPPoE options and PAP authentication
to restrict use of a particular Ethernet
interface to certain clients.</p>
</td><td><p><a href="p123.html#ppp.pppoe-61">How to Restrict the Use of an Interface to Particular Clients</a></p>
</td></tr>
</table><a name="ppp.pppoe-2"></a><h3>Setting
Up the PPPoE Client</h3>
<p>To provide PPP  to client systems
over DSL, you must first configure
PPPoE on the interface that is connected
to the modem or hub. Then you need
to change the PPP configuration files
to define the access server on the
opposite end of the PPPoE.</p>
<a name="ppp.pppoe-3"></a><h4>Prerequisites
for Setting Up the PPPoE Client</h4>
<a name="indexterm-1887"></a><p>Before you set up the PPPoE
client, you must have done the following:</p>
<ul><li><p>Installed Solaris
8 Update 6 release or subsequent releases
on the client machines to use the
PPPoE tunnel.</p>
</li>
<li><p>Contacted the service
provider for information about its
PPPoE access server.</p>
</li>
<li><p>Had the telephone
company or service provider assemble
the devices that are used by the client
machines. These devices  include,
for example, the DSL modem and the
splitter, which the telephone company
rather than you might assemble.</p>
</li>
</ul>
<a name="ppp.pppoe-55"></a><h4><img src="graphics/procedure.gif"> How
to Configure an Interface for a PPPoE
Client</h4>
<a name="indexterm-1888"></a><a name="indexterm-1889"></a><a name="indexterm-1890"></a><p>Use this procedure to define
the Ethernet interface to be used
for the PPPoE tunnel.</p>
<ol><li><a name="ppp.pppoe-step-16"></a><b>Become
superuser on the PPPoE client or assume
an equivalent role.</b><p>Roles
contain authorizations and privileged
commands. For more information about
roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="ppp.pppoe-step-12"></a><b><a name="indexterm-1891"></a>Add the name of the Ethernet
interface with the DSL connection
to the <tt>/etc/ppp/pppoe.if</tt> file.</b><p>For example, you add
the following entry to <tt>/etc/ppp/pppoe.if</tt> for a PPPoE client that
uses <tt>hme0</tt> as the
network interface that is connected
to the DSL modem. </p><pre><tt><b>hme0</b></tt></pre><p>For more information about <tt>/etc/ppp/pppoe.if</tt>, go to <a href="p136.html#ppp.reference-51"><tt>/etc/ppp/pppoe.if</tt> File</a>.</p></li><li><a name="ppp.pppoe-step-19"></a><b>Configure
the interface for PPPoE use.</b><pre># <tt><b>/etc/init.d/pppd start</b></tt></pre></li><li><a name="ppp.pppoe-step-49"></a>(Optional) <b>Verify
that the interface is now plumbed
for PPPoE.</b><pre># <tt><b>/usr/sbin/sppptun query</b></tt>
hme0:pppoe
hme0:pppoed</pre><p>You can also use the <tt>/usr/sbin/sppptun</tt> command to manually plumb
interfaces for PPPoE. For instructions,
refer to <a href="p136.html#ppp.reference-49"><tt>/usr/sbin/sppptun</tt> Command</a>.</p></li></ol><a name="ppp.pppoe-56"></a><h4><img src="graphics/procedure.gif"> How
to Define a PPPoE Access Server Peer</h4>
<p><a name="indexterm-1892"></a>You define the access
server in the <tt>/etc/ppp/peers/</tt><i>peer-name</i> file. Many
of the options that are used for the
access server are also used to define
the dial-in server in a dial-up scenario.
For a detailed explanation of <tt>/etc/ppp/peers.</tt><i>peer-name</i>,
refer to <a href="p131.html#pppsvrconfig.reference-56"><tt>/etc/ppp/peers/</tt><i>peer-name</i> File</a>.</p>
<ol><li><a name="ppp.pppoe-step-13"></a><b>Become
superuser on the PPPoE client or assume
an equivalent role.</b><p>Roles
contain authorizations and privileged
commands. For more information about
roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="ppp.pppoe-step-20"></a><b><a name="indexterm-1893"></a>Define the service provider's
PPPoE access server in the <tt>/etc/ppp/peers/</tt><i>peer-name</i> file.</b><p>For example, the following
file, <tt>/etc/ppp/peers/dslserve</tt>,
defines the access server <tt>dslserve</tt> at Far ISP that is introduced
in <a href="p110.html#ppp.p2plink-28">Example of a Configuration for a PPPoE Tunnel</a>. </p><pre># <tt><b>cat /etc/ppp/peers/dslserve</b></tt>
sppptun
plugin pppoe.so
connect "/usr/lib/inet/pppoec hme0"
noccp
noauth
user Red
password redsecret
noipdefault
defaultroute</pre><p>For a definition of the options
in this file, go to <a href="p137.html#ppp.reference-46"><tt>/etc/ppp/peers/</tt><i>peer-name</i> File for Defining an Access Server Peer</a>.</p></li><li><a name="ppp.pppoe-step-22"></a><b>Modify
the other PPP configuration files
on the PPPoE client.</b><ol><li><a name="ppp.pppoe-step-62"></a><b>Configure <tt>/etc/ppp/options</tt> as described
in the instructions for configuring
a dial-out machine in <a href="p111.html#pppsvrconfig.dialin-52">Configuring the Dial-out Machine</a>.</b></li><li><a name="ppp.pppoe-step-57"></a><b>Create
an <tt>/etc/ppp/options.sppptun</tt> file.
 <tt>/etc/ppp/options.sppptun</tt> 
defines PPP options for the serial
port to which the interface that is
plumbed for PPPoE is attached.</b><p>You can use any options that
are available for the <tt>/etc/ppp/options.</tt><i>ttyname</i> file
that is described in <a href="p130.html#pppsvrconfig.reference-4"><tt>/etc/ppp/options</tt>.<i>ttyname</i> Configuration File</a>. You must
name the file <tt>/etc/ppp/options.sppptun</tt> because <tt>sppptun</tt> is
the specified device name in the <tt>pppd</tt> configuration.</p></li></ol></li><li><a name="ppp.pppoe-step-21"></a><b>Ensure
that all users can start PPP on the
client.</b><pre># <tt><b>touch /etc/ppp/options</b></tt></pre></li><li><a name="ppp.pppoe-step-23"></a><b><a name="indexterm-1894"></a>Test if PPP can run over
the DSL line.</b><pre>% <tt><b>pppd debug updetach call dslserve</b></tt></pre><p><tt><b>dslserve</b></tt> is
the name that is given to the access
server at the ISP that is shown in <a href="p110.html#ppp.p2plink-28">Example of a Configuration for a PPPoE Tunnel</a>.
The <tt>debug updetach</tt> option
causes debugging information to be
displayed in a terminal window.</p><p>If PPP is running correctly,
the terminal output shows the link
becoming active. If PPP still does
not run, try the following command
to see if the servers are running
correctly:</p><pre># <tt><b>/usr/lib/inet/pppoec -i hme0</b></tt></pre><hr>
<p><b>Note - </b>Users of configured PPPoE
clients can begin running PPP over
a DSL line by typing the following:</p>
<pre>% pppd call <i>ISP-server-name</i></pre><p>Then the users can run an application
or a service.</p>
<hr>
</li></ol><h6>See Also</h6><p>The following list provides
references to related information.</p>
<ul><li><p>See <a href="p122.html#ppp.pppoe-2">Setting Up the PPPoE Client</a>.</p>
</li>
<li><p>See <a href="p136.html">Creating PPPoE Tunnels for DSL Support</a>.</p>
</li>
<li><p>See <a href="p124.html">Chapter&nbsp;21, Fixing Common PPP Problems (Tasks)</a>.</p>
</li>
<li><p>See <a href="p123.html">Setting Up a PPPoE Access Server</a>.</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p121.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p123.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

