<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Mount Point <tt>/&minus;</tt> - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p31.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a> > <a href="p52.html#rfsrefer-66">Autofs Maps</a> > <a href="p52.html#rfsrefer-72">Direct Autofs Maps</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p52.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p54.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rfsrefer-73"></a><h5>Mount Point <tt>/&minus;</tt></h5>
<p><a name="indexterm-831"></a><a name="indexterm-832"></a><a name="indexterm-833"></a><a name="indexterm-834"></a>In <a href="p52.html#rfsrefer-ex-68">Example 6-3</a>,
the mount point <tt>/-</tt> tells autofs not to associate the entries
in <tt>auto_direct</tt> with any specific mount point. Indirect
maps use mount points that are defined in the <tt>auto_master</tt> file.
Direct maps use mount points that are specified in the named map. Remember,
in a direct map the key, or mount point, is a full path name. </p>
<p>An NIS or NIS+ <tt>auto_master</tt> file can have only one
direct map entry because the mount point must be a unique value in the namespace.
An <tt>auto_master</tt> file that is a local file can have any
number of direct map entries if entries are not duplicated.</p>
<a name="rfsrefer-74"></a><h4>Indirect Autofs Maps</h4>
<p><a name="indexterm-835"></a><a name="indexterm-836"></a><a name="indexterm-837"></a>An indirect map uses a substitution value of a key to establish
the association between a mount point on the client and a directory on the
server. Indirect maps are useful for accessing specific file systems, such
as home directories. The <tt>auto_home</tt> map is an example
of an indirect map. </p>
<p><a name="indexterm-838"></a>Lines in indirect maps have the following general syntax: </p>
<p><i>key</i> <tt>[</tt> <i>mount-options</i> <tt>]</tt> <i>location</i></p>
<dl><dt><i>key</i></dt>
<dd><p><i>key</i> is a simple name without slashes
in an indirect map.</p>
</dd>
<dt><i>mount-options</i></dt>
<dd><p><i>mount-options</i> is the options that
you want to apply to this particular mount. These options are required only
if the options  differ from the map default. Options for each specific type
of file system are listed in the mount man page for that file system. For
example, see the <tt>mount_nfs</tt>(1M) man
page for NFS-specific mount options. </p>
</dd>
<dt><i>location</i></dt>
<dd><p><i>location</i> is the location of the
file system. One or more file systems are specified as <i>server</i>:<i>pathname</i>. </p>
<hr>
<p><b>Note - </b>The <i>pathname</i> should not include an
automounted mount point. The <i>pathname</i> should be
the actual absolute path to the file system. For instance, the location of
a directory should be listed as <i>server</i><tt>:/usr/local</tt>, not as <i>server</i><tt>:/net/</tt><i>server</i><tt>/usr/local</tt>.</p>
<hr>
</dd>
</dl>
<p><a name="indexterm-839"></a><a name="indexterm-840"></a><a name="indexterm-841"></a><a name="indexterm-842"></a><a name="indexterm-843"></a><a name="indexterm-844"></a><a name="indexterm-845"></a><a name="indexterm-846"></a><a name="indexterm-847"></a><a name="indexterm-848"></a>As in the master map, a line that begins with <tt>#</tt> is
a comment. All the text that follows until the end of the line is ignored.
Put a backslash (<tt>\</tt>) at the end of the line to split long
lines into shorter ones. <a href="p52.html#rfsrefer-ex-68">Example 6-3</a> shows
an <tt>auto_master</tt> map that contains the following entry:
  </p>
<pre>/home      auto_home        -nobrowse    </pre><p><a name="indexterm-849"></a><tt>auto_home</tt> is the name of the indirect map that
contains the entries to be mounted under <tt>/home</tt>. A typical <tt>auto_home</tt> map might contain the following: </p>
<pre>david                  willow:/export/home/david
rob                    cypress:/export/home/rob
gordon                 poplar:/export/home/gordon
rajan                  pine:/export/home/rajan
tammy                  apple:/export/home/tammy
jim                    ivy:/export/home/jim
linda    -rw,nosuid    peach:/export/home/linda</pre><p>As an example, assume that the previous map is on host <tt>oak</tt>.
Suppose that the user <tt>linda</tt> has an entry in the password
database that specifies her home directory as <tt>/home/linda</tt>.
Whenever <tt>linda</tt> logs in to computer <tt>oak</tt>,
autofs mounts the directory <tt>/export/home/linda</tt> that resides
on the computer <tt>peach</tt>. Her home directory is mounted read-write,
nosuid. </p>
<p>Assume the following conditions occur: User linda's home directory is
listed in the password database as <tt>/home/linda</tt>. Anybody,
including Linda, has access to this path from any computer that is set up
with the master map referring to the map in the previous example.</p>
<p>Under these conditions, user linda can run <tt>login</tt> or <tt>rlogin</tt> on any of these computers and have her home directory mounted
in place for her. </p>
<p>Furthermore, now Linda can also type the following command:  </p>
<pre>% <tt><b>cd ~david</b></tt></pre><p>autofs mounts David's home directory for her (if all permissions allow).</p>
<hr>
<p><b>Note - </b>No concatenation of options occurs between the automounter maps.
Any options that are added to an automounter map override all options that
are listed in maps that are searched earlier. For instance, options that are
included in the <tt>auto_master</tt> map are overridden by corresponding
entries in any other map.</p>
<hr>
<p><a name="indexterm-850"></a><a name="indexterm-851"></a><a name="indexterm-852"></a><a name="indexterm-853"></a>On a network without a name service, you have to change all the
relevant files (such as <tt>/etc/passwd</tt>) on all systems on
the network to allow Linda access to her files. With NIS, make the changes
on the NIS master server and propagate the relevant databases to the slave
servers. On a network that is running NIS+, propagating the relevant databases
to the slave servers is done automatically after the changes are made. </p>
<a name="rfsrefer-75"></a><h3>How Autofs Works</h3>
<p><a name="indexterm-854"></a><a name="indexterm-855"></a>Autofs is a client-side service that automatically mounts the
appropriate file system. The components that work together to accomplish automatic
mounting are the following:</p>
<ul><li><p>The <tt>automount</tt> command</p>
</li>
<li><p>The <tt>autofs</tt> file system</p>
</li>
<li><p>The <tt>automountd</tt> daemon</p>
</li>
</ul>
<p><a name="indexterm-856"></a>The automount service, <tt>svc:/system/filesystem/autofs</tt>,
which is called at system startup time, reads the master map file <tt>auto_master</tt> to create the initial set of autofs mounts. These autofs mounts
are not automatically mounted at startup time. These mounts are points under
which file systems are mounted in the future. These points are also known
as trigger nodes.</p>
<p><a name="indexterm-857"></a><a name="indexterm-858"></a>After the autofs mounts are set up, these mounts can trigger file
systems to be mounted under them. For example, when autofs receives a request
to access a file system that is not currently mounted, autofs calls <tt>automountd</tt>, which actually mounts the requested file system. </p>
<p><a name="indexterm-859"></a><a name="indexterm-860"></a><a name="indexterm-861"></a>After initially mounting autofs mounts, the <tt>automount</tt> command
is used to update autofs mounts as necessary. The command compares the list
of mounts in the <tt>auto_master</tt> map with the list of mounted
file systems in the mount table file <tt>/etc/mnttab</tt> (formerly <tt>/etc/mtab</tt>). <tt>automount</tt> then makes the appropriate
changes. This process allows system administrators to change mount information
within <tt>auto_master</tt> and have those changes used by the
autofs processes without stopping and restarting the autofs daemon. After
the file system is mounted, further access does not require any action from <tt>automountd</tt> until the file system is automatically unmounted. </p>
<p><a name="indexterm-862"></a><a name="indexterm-863"></a>Unlike <tt>mount</tt>, <tt>automount</tt> does
not read the <tt>/etc/vfstab</tt> file (which is specific to each
computer) for a list of file systems to mount. The <tt>automount</tt> command
is controlled within a domain and on computers through the namespace or local
files. </p>
<p>The following is a simplified overview of how autofs works. </p>
<p>The automount daemon <tt>automountd</tt> is started at boot
time by the service <tt>svc:/system/filesystem/autofs</tt>. See <a href="p53.html#rfsrefer-fig-76">Figure 6-3</a>. This service also runs
the <tt>automount</tt> command, which reads the master map and installs
autofs mount points. See <a href="p53.html#rfsrefer-79">How Autofs Starts the Navigation Process (Master Map)</a> for more information.</p>
<a name="rfsrefer-fig-76"></a>Figure 6-3 <tt>svc:/system/filesystem/autofs</tt> Service
Starts <tt>automount</tt><img src="figures/5368.gif" alt=""></img><p>Autofs is a kernel file system that supports automatic mounting and
unmounting. </p>
<p>When a request is made to access a file system at an autofs mount point,
the following occurs:</p>
<ol><li><p>Autofs intercepts the request. </p>
</li>
<li><p>Autofs sends a message to the <tt>automountd</tt> for
the requested file system to be mounted.</p>
</li>
<li><p><tt>automountd</tt> locates the file system information
in a map, creates the trigger nodes, and performs the mount. </p>
</li>
<li><p>Autofs allows the intercepted request to proceed.</p>
</li>
<li><p>Autofs unmounts the file system after a period of inactivity.</p>
</li>
</ol>
<hr>
<p><b>Note - </b>Mounts that are managed through the autofs service should not
be manually mounted or unmounted. Even if the operation is successful, the
autofs service does not check that the object has been unmounted, resulting
in possible inconsistencies. A reboot clears all the autofs mount points.</p>
<hr>
<a name="rfsrefer-78"></a><h4>How Autofs Navigates Through the Network (Maps)</h4>
<p><a name="indexterm-864"></a><a name="indexterm-865"></a><a name="indexterm-866"></a>Autofs searches a series of maps to navigate through the network.
Maps are files that contain information such as the password entries of all
users on a network or the names of all host computers on a network. Effectively,
the maps contain network-wide equivalents of UNIX administration files. Maps
are available locally or through a network name service such as NIS or NIS+.
You create maps to meet the needs of your environment by using the Solaris
Management Console tools. See <a href="p55.html#rfsrefer-94">Modifying How Autofs Navigates the Network (Modifying Maps)</a>. </p>
<a name="rfsrefer-79"></a><h4>How Autofs Starts the Navigation Process (Master
Map)</h4>
<p><a name="indexterm-867"></a><a name="indexterm-868"></a><a name="indexterm-869"></a>The <tt>automount</tt> command reads the master map
at system startup. Each entry in the master map is a direct map name or an
indirect map name, its path, and its mount options, as shown in <a href="p53.html#rfsrefer-fig-80">Figure 6-4</a>. The specific order of
the entries is not important. <tt>automount</tt> compares entries
in the master map with entries in the mount table to generate a current list. </p>
<a name="rfsrefer-fig-80"></a>Figure 6-4 Navigation Through the Master Map<img src="figures/5369.gif" alt=""></img>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p52.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p54.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

