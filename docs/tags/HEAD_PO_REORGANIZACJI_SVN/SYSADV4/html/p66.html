<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>SLP and Multihoming - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p59.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p65.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p67.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="slp.config-6"></a><h3>SLP and Multihoming</h3>
<p>A multihomed server acts as a host on multiple IP subnets. The server
can sometimes have more than one network interface card and can act as a router.
IP packets, including multicast packets, are routed between the interfaces.
In some situations, routing between interfaces is disabled. The following
sections describe how to configure SLP for such situations.</p>
<a name="slp.config-42"></a><h4>Multihoming Configuration for SLP</h4>
<a name="indexterm-1069"></a><p><a name="indexterm-1070"></a><a name="indexterm-1071"></a><a name="indexterm-1072"></a><a name="indexterm-1073"></a>Without configuration, <tt>slpd</tt> listens for multicast
and for UDP/TCP unicast on the default network interface. If unicast and multicast
routing is enabled between interfaces on a multihomed machine, no additional
configuration is needed. This is because multicast packets that arrive at
another interface are properly routed to the default. As a result, multicast
requests for DA or other service advertisements arrive at <tt>slpd</tt>.
If routing is not turned on for some reason, configuration is required.</p>
<a name="slp.config-43"></a><h4>When to Configure for Nonrouted, Multiple
Network Interfaces</h4>
<p>If one of the following conditions exist, you might need to configure
multihomed machines.</p>
<ul><li><p>Unicast routing is enabled between the interfaces and multicast
routing is disabled.</p>
</li>
<li><p>Unicast routing and multicast routing are both disabled between
the interfaces.</p>
</li>
</ul>
<p><a name="indexterm-1074"></a><a name="indexterm-1075"></a><a name="indexterm-1076"></a><a name="indexterm-1077"></a>When multicast routing is disabled between interfaces, it is usually
because multicast has not been deployed in the network. In that situation,
broadcast is normally used for  service discovery  that is not DA-based and
for DA discovery on the individual subnets. Broadcast is configured by setting
the <tt>net.slp.isBroadcastOnly</tt> property to <tt>True</tt>.</p>
<a name="slp.config-tcnmi"></a><h4>Configuring Nonrouted, Multiple Network
Interfaces (Task Map)</h4>
<a name="slp.config-tbl-2"></a>Table 9-5 Configuring Nonrouted,
Multiple Network Interfaces<table><tr><th><p>Task</p>
</th><th><p>Description</p>
</th><th><p>For Instructions</p>
</th></tr>
<tr><td><p>Configure the <tt>net.slp.interfaces</tt> property</p>
</td><td><p>Set this property to enable <tt>slpd</tt> to listen for
unicast and multicast/broadcast SLP requests on the specified interfaces.</p>
</td><td><p><a href="p66.html#slp.config-45">Configuring the <tt>net.slp.interfaces</tt> Property</a></p>
</td></tr>
<tr><td><p>Arrange proxy service advertisements so that UAs on subnets get service
URLs with reachable addresses</p>
</td><td><p>Restrict proxy advertisement to a machine that is running <tt>slpd</tt> connected
to a single subnet rather than a multihomed host.</p>
</td><td><p><a href="p66.html#slp.config-46">Proxy Advertising on Multihomed Hosts</a></p>
</td></tr>
<tr><td><p>Place the DAs and configure scopes to assure reachability between UAs
and SAs</p>
</td><td><p>Configure the <tt>net.slp.interfaces</tt> property on multihomed
hosts with a single interface host name or address.</p>
<p>Run a DA on a multihomed host, but configure scopes so that SAs and
UAs on each subnet use different hosts.</p>
</td><td><p><a href="p66.html#slp.config-47">DA Placement and Scope Name Assignment</a></p>
</td></tr>
</table><a name="slp.config-45"></a><h4>Configuring the <tt>net.slp.interfaces</tt> Property</h4>
<p><a name="indexterm-1078"></a><a name="indexterm-1079"></a>If the <tt>net.slp.interfaces</tt> property is set, <tt>slpd</tt> listens for unicast and multicast/broadcast SLP requests on
the interfaces that are listed in the property, rather than on the default
interface. </p>
<p><a name="indexterm-1080"></a><a name="indexterm-1081"></a><a name="indexterm-1082"></a>Usually, you set the <tt>net.slp.interfaces</tt> property
in conjunction with enabling broadcast by setting the <tt>net.slp.isBroadcastOnly</tt> property, because multicast has not been deployed in the network.
However, if  multicast has been deployed, but is not being routed on this
particular multihomed host, a multicast request can arrive at <tt>slpd</tt> from
more than one interface. This situation can occur when the routing of packets
is handled by another multihomed host or router that connects the subnets
that are served by the interfaces.</p>
<p><a name="indexterm-1083"></a>When such a situation occurs, the SA server or the UA that is
sending the request receives two responses from <tt>slpd</tt> on
the multihomed host. The responses are then filtered by the client libraries
and the client does not see them. The responses are, however, visible in the <tt>snoop</tt> trace.</p>
<hr>
<p><b>Note - <p>If unicast routing is turned off, services that are advertised by SA
clients on multihomed hosts might not be reachable from all the subnets. If
services are unreachable, SA clients can do the following:</p>
<ul><li><p>Advertise one service URL for each individual subnet.</p>
</li>
<li><p>Assure that requests from a particular subnet are answered
with a reachable URL.</p>
</li>
</ul>
<hr>
<p><a name="indexterm-1084"></a>The SA client library makes no effort to assure that reachable
URLs are advertised. The service program, which might or might not handle
a multihomed host with no routing, is then responsible for assuring that reachable
URLs are advertised. </p>
<p><a name="indexterm-1085"></a><a name="indexterm-1086"></a>Before you deploy a service on a multihomed host with  unicast
routing disabled, use <tt>snoop</tt> to determine whether the service
handles requests from multiple subnets correctly. Furthermore, if you plan
to deploy a DA on the multihomed host, see <a href="p66.html#slp.config-47">DA Placement and Scope Name Assignment</a>.</p>
<a name="slp.config-htcnsi"></a><h4><img src="graphics/procedure.gif"> How to Configure the <tt>net.slp.interfaces</tt> Property</h4>
<p>Use the following procedure to change the <tt>net.slp.interfaces</tt> property
in the <tt>slp.conf</tt> file.</p>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="slp.config-step-56z"></a><b>Stop <tt>slpd</tt> and all
SLP activity on the host.</b><pre># <tt><b>svcadm disable network/slp</b></tt></pre></li><li><a name="slp.config-step-57z"></a><b><a name="indexterm-1087"></a>Back up the default <tt>/etc/inet/slp.conf</tt> file
before you change the configuration settings.</b></li><li><a name="slp.config-step-58"></a><b>Change the <tt>net.slp.interfaces</tt> property
in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.interfaces</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>List of IPv4 addresses or host names of the network interface
cards on which the DA or SA should listen for multicast, unicast UDP, and
TCP messages on port 427</p>
</dd>
</dl>
<p>For example, a server with three network cards and multicast routing
that is  turned off is connected to three subnets. The IP addresses of the
three network interfaces are <tt>192.147.142.42</tt>, <tt>192.147.143.42</tt>, and <tt>192.147.144.42</tt>. The subnet mask is <tt>255.255.255.0</tt>. The following property setting causes <tt>slpd</tt> to
listen on all three interfaces for unicast and  multicast/broadcast messaging:</p><pre>net.slp.interfaces=192.147.142.42,192.147.143.42,192.147.144.42</pre><hr>
<p><b>Note - </b><a name="indexterm-1088"></a>You can specify IP addresses or resolvable host names for the <tt>net.slp.interfaces</tt> property.</p>
<hr>
</li><li><a name="slp.config-step-60z"></a><b>Save your changes and close the file.</b></li><li><a name="slp.config-step-61z"></a><b>Restart <tt>slpd</tt> to activate
your changes.</b><pre># <tt><b>svcadm enable network/slp</b></tt></pre></li></ol><a name="slp.config-46"></a><h4>Proxy Advertising on Multihomed Hosts</h4>
<a name="indexterm-1089"></a><a name="indexterm-1090"></a><a name="indexterm-1091"></a><p>If a host with multiple interfaces advertises services by using <tt>slpd</tt> and proxy registration, the service URLs that are advertised by <tt>slpd</tt> must contain reachable host names or addresses. If unicast
routing is enabled between the interfaces, hosts on all subnets can reach
hosts on other subnets. Proxy registrations can also be made for a service
on any subnet. If, however, unicast routing is disabled, service clients on
one subnet cannot reach services on another subnet through the multihomed
host. However, those clients might be able to reach the services through another
router.</p>
<p>For example, suppose the host with default host name <tt>bigguy</tt> has
three  interface cards on three different unrouted subnets. The host names
on these subnets are <tt>bigguy</tt>, with IP address <tt>192.147.142.42</tt>, <tt>bigguy1</tt>, with IP address <tt>192.147.143.42</tt>,
and <tt>bigguy2</tt>, with IP address <tt>192.147.144.42</tt>.
Now suppose that a legacy printer, <tt>oldprinter</tt>, is connected
to the <tt>143</tt> subnet and that the URL <tt>service:printing:lpr://oldprinter/queue1</tt> is configured with the <tt>net.slp.interfaces</tt> to
listen on all interfaces. The <tt>oldprinter</tt> URL is proxy-advertised
on all interfaces. The machines on the <tt>142</tt> and <tt>144</tt> subnets
receive the URL in response to service requests, but are unable to access
the <tt>oldprinter</tt> service.</p>
<p>The solution to this problem is to perform the proxy advertisement with <tt>slpd</tt> running on a machine that is connected to the <tt>143</tt> subnet
only, rather than on the multihomed host. Only hosts on the <tt>143</tt> subnet
can obtain the advertisement in response to a service request.</p>
<a name="slp.config-47"></a><h4>DA Placement and Scope Name Assignment</h4>
<p><a name="indexterm-1092"></a><a name="indexterm-1093"></a>The placement of DAs and assignment of scope names on a network
with a multihomed host must be done carefully to assure that clients obtain
accessible services. Be particularly cautious when routing is disabled and
the <tt>net.slp.interfaces</tt> property is configured. Again, if
unicast routing is enabled between the interfaces on a multihomed machine,
no special DA and scope configuration is necessary. The advertisements are
cached with the DA identify services that are accessible from any of the subnets.
However, if unicast routing is disabled, poor placement of DAs can result
in problems.</p>
<p>To see what problems can result in the previous example, consider what
would happen if <tt>bigguy</tt> runs a DA, and clients on all subnets
have the same scopes. SAs on the <tt>143</tt> subnet register their
service advertisements with the DA. UAs on the <tt>144</tt> subnet
can obtain those service advertisements, even though hosts on the <tt>143</tt> subnet
are unreachable.</p>
<p><a name="indexterm-1094"></a>One solution to this problem is to run a DA on each subnet and
not on the multihomed host. In this situation, the <tt>net.slp.interfaces</tt> property
on the multihomed hosts should be configured with a single interface host
name or address, or it should be left unconfigured, forcing the default interface
to be used. A disadvantage of this solution is that multihomed hosts are often
large machines that could better handle the computational load of a DA.</p>
<p>Another solution is to run a DA on the multihomed host, but configure
scopes so that the SAs and UAs on each subnet have a different scope. For
example, in the previous situation, UAs and SAs on the <tt>142</tt> subnet
might have a scope that is called <tt>scope142</tt>. UAs and SAs
on the <tt>143</tt> subnet might have another scope that is called <tt>scope143</tt> and UAs and SAs on the <tt>144</tt> subnet could
have third scope that is called <tt>scope144</tt>. You can configure
the <tt>net.slp.interfaces</tt> property on <tt>bigguy</tt> with
the three interfaces so that the DA serves three scopes on the three subnets.</p>
<a name="slp.config-48"></a><h4>Considerations When Configuring for Nonrouted,
Multiple Network Interfaces</h4>
<a name="indexterm-1095"></a><p><a name="indexterm-1096"></a>Configuring the <tt>net.slp.interfaces</tt> property
enables a DA on the multihomed host to bridge service advertisements between
the subnets. Such configuration is useful if multicast routing is turned off
in the network, but unicast routing between interfaces on a multihomed host
is enabled.  Because unicast is routed between the interfaces, hosts on a
subnet different from the subnet on which the service is located can contact
the service when they receive the service URL. Without the DA, SA servers
on a particular subnet receive only broadcasts that were made on the same
subnet, so they cannot locate services off of their subnet.</p>
<p>The most common situation that necessitates configuration of the <tt>net.slp.interfaces</tt> property occurs when multicast is not deployed on the network and
broadcast is used instead. Other situations require careful thought and planning
to avoid unnecessary duplicate responses or unreachable services.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p65.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p67.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

