<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Additional
Equates for Delivery Agents From Version
8.12 of <tt>sendmail</tt> - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p87.html">14.&nbsp;&nbsp;Mail Services (Reference)</a> > <a href="p98.html#mailrefer-105">Changes From Version 8.12 of <tt>sendmail</tt></a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p99.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p101.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="mailrefer-118"></a><h4>Additional
Equates for Delivery Agents From Version
8.12 of <tt>sendmail</tt></h4>
<p><a name="indexterm-1596"></a><a name="indexterm-1597"></a>The following table describes
additional equates that you can use
with the <tt>M</tt> delivery-agent
definition command. The following
syntax shows you how to append new
equates or new arguments to the equates
that already exist in the configuration
file.</p>
<pre>M<i>agent-name</i>, <i>equate</i>, <i>equate</i>, ...</pre><p>The following example includes
the new <tt>W=</tt> equate.
This equate specifies the maximum
time to wait for the mailer to return
after all data has been sent.</p>
<pre>Msmtp, P=[IPC], F=mDFMuX, S=11/31, R=21, E=\r\n, L=990, W=2m</pre><p>When you modify the definition
of a value for <tt>m4</tt> configuration,
use the syntax that is provided in
the following example.</p>
<pre>define(`SMTP_MAILER_MAXMSGS', `1000')</pre><p>The preceding example places
a limit of 1000 on the number of messages
that are delivered per connection
on an <tt>smtp</tt> mailer.</p>
<p>If you need to build a new <tt>sendmail.cf</tt> file, refer
to <a href="p76.html">Building the <tt>sendmail.cf</tt> Configuration File</a> in <a href="p72.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>
<hr>
<p><b>Note - </b>Typically, you modify
the equate definitions in the <tt>mailer</tt> directory only when you
fine-tune.</p>
<hr>
<a name="mailrefer-tbl-209"></a>Table 14-28 Additional
Equates for Delivery Agents<table><tr><th><p>Equate</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>/=</tt></p>
</td><td><p>Argument: Path to a directory</p>
<p>Specifies a directory to apply <tt>chroot()</tt> to before the mailer
program is executed</p>
</td></tr>
<tr><td><p><tt>m=</tt></p>
</td><td><p>Argument: Any of the following <tt>m4</tt> values that have previously
been defined with the <tt>define()</tt> routine</p>
<ul><li><p><tt>SMTP_MAILER_MAXMSGS</tt>, for the <tt>smtp</tt> mailer</p>
</li>
<li><p><tt>LOCAL_MAILER_MAXMSGS</tt>, for the <tt>local</tt> mailer</p>
</li>
<li><p><tt>RELAY_MAILER_MAXMSGS</tt>, for the <tt>relay</tt> mailer</p>
</li>
</ul>
<p>Limits the number of messages
that are delivered per connection
on an <tt>smtp</tt>, <tt>local</tt>, or <tt>relay</tt> mailer</p>
</td></tr>
<tr><td><p><tt>W=</tt></p>
</td><td><p>Argument: An increment of time</p>
<p>Specifies the maximum time to
wait for the return of the mailer
after all data has been sent</p>
</td></tr>
</table><a name="mailrefer-119"></a><h4>Additional
Queue Features From Version 8.12 of <tt>sendmail</tt></h4>
<p><a name="indexterm-1598"></a><a name="indexterm-1599"></a>The following list provides
details about additional queue features.</p>
<ul><li><p>This release supports
multiple queue directories. To use
multiple queues, supply a <tt>QueueDirectory</tt> option
value in the configuration file that
ends with an asterisk (*), as is shown
in the following example.</p>
<pre>O QueueDirectory=/var/spool/mqueue/q*</pre><p>The option value, <tt>/var/spool/mqueue/q*</tt>, uses all of the directories
(or symbolic links to directories)
that begin with &ldquo;<tt>q</tt>&rdquo;
as queue directories.  Do not change
the queue directory structure while <tt>sendmail</tt> is running.  Queue
runs create a separate process for
running each queue unless the verbose
flag (<tt>-v</tt>) is used
on a nondaemon queue run. The new
items are randomly assigned to a queue.</p>
</li>
<li><p>The new queue file-naming
system uses file names that are guaranteed
to be unique for 60 years. This system
allows queue IDs to be assigned without
complex file-system locking and simplifies
the movement of queued items between
queues.</p>
</li>
<li><p>Starting with version
8.12, only <tt>root</tt> can
run the mail queue. For further details,
refer to the changes that are described
in the <tt>mailq</tt>(1) man
page. For new task information, refer
to <a href="p83.html">Administering the Queue Directories (Task Map)</a>.</p>
</li>
<li><p>To accommodate envelope
splitting, queue file names are now
15&ndash;characters long, rather than
14&ndash;characters long. File systems
with a 14&ndash;character name limit
are no longer supported.</p>
</li>
</ul>
<p>For task information, refer
to <a href="p83.html">Administering the Queue Directories (Task Map)</a>.</p>
<a name="mailrefer-120"></a><h4>Changes
for LDAP From Version 8.12 of <tt>sendmail</tt></h4>
<p><a name="indexterm-1600"></a><a name="indexterm-1601"></a>The following list describes
changes in the use of the Lightweight
Directory Access Protocol (LDAP) with <tt>sendmail</tt>.</p>
<ul><li><p><tt>LDAPROUTE_EQUIVALENT()</tt> and <tt>LDAPROUTE_EQUIVALENT_FILE()</tt> permit you to specify
equivalent host names, which are replaced
by the masquerade domain name for
LDAP routing lookups. For more information,
refer to <tt>/etc/mail/cf/README</tt>. </p>
</li>
<li><p>As noted in the Release
Notes that are part of the <tt>sendmail</tt> distribution at <a href="ftp://ftp.sendmail.org">ftp://ftp.sendmail.org</a>, the LDAPX map has been renamed
to LDAP. Use the following syntax
for LDAP.</p>
<pre>Kldap ldap <i>options</i></pre></li>
<li><p>This release supports
the return of multiple values for
a single LDAP lookup.  Place the values
to be returned in a comma-separated
string with the <tt>-v</tt> option,
as is shown.</p>
<pre>Kldap ldap -v"<i>mail</i>,<i>more-mail</i>"</pre></li>
<li><p>If no LDAP attributes
are specified in an LDAP map declaration,
all attributes that are found in the
match are returned.</p>
</li>
<li><p>This version of <tt>sendmail</tt> prevents commas
in quoted key and value strings in
the specifications of the LDAP alias
file from dividing a single entry
into multiple entries.</p>
</li>
<li><p>This version of <tt>sendmail</tt> has a new option
for LDAP maps. The option <tt>-V</tt><i>separator</i> enables you
to specify a separator so that a lookup
can return both an attribute and a
value that are separated by the relevant <i>separator</i>.</p>
</li>
<li><p>In addition to using
the <tt>%s</tt> token to
parse an LDAP filter specification,
you can use the new token, <tt>%0</tt>,
to encode the key buffer. The <tt>%0</tt> token applies a literal
meaning to LDAP special characters.</p>
</li>
</ul>
<p>The following example shows
how these tokens differ for a &ldquo;<tt>*</tt>&rdquo; lookup.</p>
<a name="mailrefer-tbl-210"></a>Table 14-29 Comparison
of Tokens<table><tr><th><p>LDAP Map Specification</p>
</th><th><p>Specification Equivalent</p>
</th><th><p>Result</p>
</th></tr>
<tr><td><p><tt>-k"uid=%s"</tt></p>
</td><td><p><tt>-k"uid=*"</tt></p>
</td><td><p>Matches any record with a user
attribute</p>
</td></tr>
<tr><td><p><tt>-k"uid=%0"</tt></p>
</td><td><p><tt>-k"uid=\2A"</tt></p>
</td><td><p>Matches a user with the name &ldquo;<tt>*</tt>&rdquo;</p>
</td></tr>
</table><p>The following table describes
additional LDAP map flags.</p>
<a name="mailrefer-tbl-211"></a>Table 14-30 Additional
LDAP Map Flags<table><tr><th><p>Flag</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>-1</tt></p>
</td><td><p>Requires a single match to be
returned. If more than one match is
returned, the results are the equivalent
of no records being found.</p>
</td></tr>
<tr><td><p><tt>-r never|always|search|find</tt></p>
</td><td><p>Sets the LDAP alias dereference
option.</p>
</td></tr>
<tr><td><p><tt>-Z size</tt></p>
</td><td><p>Limits the number of matches
to return.</p>
</td></tr>
</table><a name="mailrefer-121"></a><h4>Change
to the Built-In Mailer From Version
8.12 of <tt>sendmail</tt></h4>
<p><a name="indexterm-1602"></a><a name="indexterm-1603"></a>The old <tt>[TCP]</tt> built-in
mailer is not available.  Use the <tt>P=[IPC]</tt> built-in mailer
instead. The interprocess communications
(<tt>[IPC]</tt>) built-in
mailer now enables delivery to a UNIX
domain socket on systems that support
it. You can use this mailer with <tt>LMTP</tt> delivery agents that
listen on a named socket.  An example
mailer might resemble the following.</p>
<pre>Mexecmail, P=[IPC], F=lsDFMmnqSXzA5@/:|, E=\r\n, 
S=10, R=20/40, T=DNS/RFC822/X-Unix, A=FILE /var/run/lmtpd</pre><p>The first mailer argument in
the <tt>[IPC]</tt> mailer
is now checked for a legitimate value.
The following table provides possible
values for the first mailer argument. </p>
<a name="mailrefer-tbl-212"></a>Table 14-31 Possible
Values for the First Mailer Argument<table><tr><th><p>Value</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>A=FILE</tt></p>
</td><td><p>Use for UNIX domain socket delivery</p>
</td></tr>
<tr><td><p><tt>A=TCP</tt></p>
</td><td><p>Use for TCP/IP connections</p>
</td></tr>
<tr><td><p><tt>A=IPC</tt></p>
</td><td><p>Is no longer available as a
first mailer argument</p>
</td></tr>
</table><a name="mailrefer-122"></a><h4>Additional
Rule Sets From Version 8.12 of <tt>sendmail</tt></h4>
<p><a name="indexterm-1604"></a><a name="indexterm-1605"></a>The following table lists
the additional rule sets and describes
what the rule sets  do.</p>
<a name="mailrefer-tbl-213"></a>Table 14-32 New
Rule Sets<table><tr><th><p>Set</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><a name="indexterm-1606"></a><tt>check_eoh</tt></p>
</td><td><p>Correlates information that
is gathered between headers and checks
for missing headers. This rule set
is used with the macro storage map
and is called after all of the headers
have been collected. </p>
</td></tr>
<tr><td><p><a name="indexterm-1607"></a><tt>check_etrn</tt></p>
</td><td><p>Uses the <tt>ETRN</tt> command
(as <tt>check_rcpt</tt> uses <tt>RCPT</tt>).</p>
</td></tr>
<tr><td><p><a name="indexterm-1608"></a><tt>check_expn</tt></p>
</td><td><p>Uses the <tt>EXPN</tt> command
(as <tt>check_rcpt</tt> uses <tt>RCPT</tt>).</p>
</td></tr>
<tr><td><p><a name="indexterm-1609"></a><tt>check_vrfy</tt></p>
</td><td><p>Uses the <tt>VRFY</tt> command
(as <tt>check_rcpt</tt> uses <tt>RCPT</tt>).</p>
</td></tr>
</table><p>The following list describes
additional rule set features.</p>
<ul><li><p>Numbered rule sets
are also named, but the rule sets
can still be accessed by their numbers.</p>
</li>
<li><p>The <tt>H</tt> header
configuration file command allows
for a default rule set to be specified
for header checks. This rule set is
called only if the individual header
has not been assigned its own rule
set.</p>
</li>
<li><p>Comments in rule sets
(that is, text within parentheses)
are not removed if the configuration
file version is nine or greater. 
For example, the following rule matches
the input <tt>token (1)</tt>,
but does not match the input <tt>token</tt>.</p>
<pre>R$+ (1)		$@ 1</pre></li>
<li><p><tt>sendmail</tt> accepts
the SMTP <tt>RSET</tt> command
even when it rejects commands because
of TCP wrappers or the <tt>check_relay</tt> rule set.</p>
</li>
<li><p>You receive a warning
if you set the <tt>OperatorChars</tt> option multiple times. 
Also, do not set <tt>OperatorChars</tt> after the rule sets are
defined.</p>
</li>
<li><p>The name of the rule
set, as well as its lines, are ignored
if an invalid rule set is declared.
The rule set lines are not added to <tt>S0</tt>.</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p99.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p101.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

