<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring Communications
on the Dial-out Machine - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p111.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a> > <a href="p111.html#pppsvrconfig.dialin-52">Configuring the Dial-out Machine</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p111.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p113.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="pppsvrconfig.dialin-17"></a><h4>Configuring Communications
on the Dial-out Machine</h4>
<p>The procedures in this section
show how to configure communications
over the serial line of the dial-out
machine. Before you can use these
procedures, you must have configured
the modem and serial port, as described
in <a href="p111.html#ppp.dialin-50">How to Configure the Modem and Serial Port (Dial-out Machine)</a>.</p>
<p>The next tasks show how to enable
the dial-out machine to successfully
initiate communications with the dial-in
server. Communications are initiated
as defined in the  options in the
PPP configuration files. You need
to create the following files:</p>
<ul><li><p><tt>/etc/ppp/options</tt></p>
</li>
<li><p><tt>/etc/ppp/options.</tt><i>ttyname</i></p>
</li>
<li><p>Chat script</p>
</li>
<li><p><tt>/etc/ppp/peers/</tt><i>peer-name</i></p>
</li>
</ul>
<p>Solaris PPP 4.0 provides templates
for the PPP configuration files, which
you can customize to accommodate your
needs. Refer to <a href="p111.html#ppp.dialin-20">Dial-up PPP Template Files</a> for detailed
information about these files. </p>
<a name="ppp.dialin-53"></a><h4><img src="graphics/procedure.gif"> How
to Define Communications Over the
Serial Line</h4>
<a name="indexterm-1762"></a><a name="indexterm-1763"></a><a name="indexterm-1764"></a><ol><li><a name="pppsvrconfig.dialin-step-23"></a><b>Become superuser on the dial-out
machine or assume an equivalent role.</b><p>Roles contain authorizations
and privileged commands. For more
information about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></p></li><li><a name="pppsvrconfig.dialin-step-1"></a><b>Create a file that is called <tt>/etc/ppp/options</tt> with the
following entry:</b><pre><tt><b>lock</b></tt></pre><p>The <tt>/etc/ppp/options</tt> file
is used for defining global parameters
that apply to all communications by
the local machine. The <tt>lock</tt> option
enables UUCP-style locking of the
form <tt>/var/spool/locks/LK.xxx.yyy.zzz</tt>.</p><hr>
<p><b>Note - </b>If the dial-out machine
does not have an <tt>/etc/ppp/options</tt> file, only the superuser
can run the <tt>pppd</tt> command.
However, the <tt>/etc/ppp/options</tt> can
be empty.</p>
<hr>
<p><a name="indexterm-1765"></a><a name="indexterm-1766"></a>For a complete description
of <tt>/etc/ppp/options</tt>,
refer to <a href="p130.html#pppsvrconfig.reference-46"><tt>/etc/ppp/options</tt> Configuration File</a>.</p></li><li><a name="pppsvrconfig.dialin-step-53"></a>(Optional) <b>Create
a file that is called <tt>/etc/ppp/options.</tt><i>ttyname</i> for
defining how communications should
be initiated from a specific serial
port.</b><p>The next example
shows an <tt>/etc/ppp/options.</tt><i>ttyname</i> file for the
port with the device name <tt>/dev/cua/a</tt>.</p><pre># <tt><b>cat /etc/ppp/options.cua.a</b></tt>
crtscts</pre><p><a name="indexterm-1767"></a><a name="indexterm-1768"></a><a name="indexterm-1769"></a>The
PPP option <tt>crtscts</tt> tells
the <tt>pppd</tt> daemon
to turn on hardware flow control for
serial port a.</p><p>For more
information about the <tt>/etc/ppp/options.ttyname</tt> file, go to <a href="p130.html#pppsvrconfig.reference-4"><tt>/etc/ppp/options</tt>.<i>ttyname</i> Configuration File</a>.</p></li><li><a name="ppp.dialin-step-9"></a><b>Set
the modem speed, as described in <a href="p113.html#ppp.dialin-5">How to Set the Modem Speed</a>.</b></li></ol><a name="pppsvrconfig.dialin-50"></a><h4><img src="graphics/procedure.gif"> How to Create the Instructions
for Calling a Peer</h4>
<p><a name="indexterm-1770"></a>Before the dial-out machine
can initiate a PPP link, you must
collect information about the dial-in
server that is to become the peer.
Then, you use this information to
create the chat script, which describes
the actual conversation between the
dial-out machine and the peer.</p>
<ol><li><a name="ppp.dialin-step-14"></a><b>Determine
the speed at which the dial-out machine's
modem needs to run. </b><p>For
more information, see <a href="p132.html">Configuring Modem Speed for a Dial-up Link</a>.</p></li><li><a name="ppp.dialin-step-2"></a><b>Obtain
the following information from the
dial-in server's site.</b><ul><li><p>Server's telephone
number</p>
</li>
<li><p>Authentication protocol
that is used, if appropriate</p>
</li>
<li><p>Login sequence that
is required by the peer for the chat
script</p>
</li>
</ul>
</li><li><a name="ppp.dialin-step-3"></a><b>Obtain
the names and IP addresses of name
servers at the dial-in server's site.</b></li><li><a name="ppp.dialin-step-4"></a><b>In
a chat script, provide instructions
for initiating calls to the particular
peer.</b><p><a name="indexterm-1771"></a><a name="indexterm-1772"></a><a name="indexterm-1773"></a>For example, you might
create the following chat script, <tt>/etc/ppp/mychat</tt>, to call
the dial-in server <tt>myserver</tt>. </p><pre>SAY "Calling the peer\n"
        TIMEOUT 10
        ABORT BUSY
        ABORT 'NO CARRIER'
        ABORT ERROR
        REPORT CONNECT
        "" AT&amp;F1&amp;M5S2=255
        TIMEOUT 60
        OK ATDT1-123-555-1234 
        CONNECT \c
        SAY "Connected; logging in.\n"
        TIMEOUT 5
        ogin:--ogin: pppuser
        TIMEOUT 20
        ABORT 'ogin incorrect'
        ssword: \qmypassword
        "% " \c
        SAY "Logged in.  Starting PPP on peer system.\n" 
        ABORT 'not found'
        "" "exec pppd"
        ~ \c</pre><p>The script contains instructions
for calling a Solaris dial-in server
that requires a login sequence. For
a description of each instruction,
refer to <a href="p132.html#pppsvrconfig.reference-14">Basic Chat Script Enhanced for a UNIX-Style Login</a>. For complete details
about creating a chat script, read
the section <a href="p132.html#pppsvrconfig.reference-66">Defining the Conversation on the Dial-up Link</a>.</p><hr>
<p><b>Note - </b>You do not invoke the
chat script directly. Rather, you
use the file name of the chat script
as an argument to the <tt>chat</tt> command,
which invokes the script.</p>
<hr>
<p>If a peer runs Solaris or a
similar operating system, consider
using the previous chat script as
a template for your dial-out machines. </p></li></ol><a name="ppp.dialin-55"></a><h4><img src="graphics/procedure.gif"> How
to Define the Connection With an Individual
Peer</h4>
<a name="indexterm-1774"></a><ol><li><a name="pppsvrconfig.dialin-step-30"></a><b>Become superuser on the dial-out
machine or assume an equivalent role.</b><p>Roles contain authorizations
and privileged commands. For more
information about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>.
To configure a role with the Primary
Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="pppsvrconfig.dialin-step-10"></a><b>Update DNS databases by creating
the following <tt>/etc/resolv.conf</tt> file:</b><pre><tt><b>domain bigcompany.com</b></tt>
<tt><b>nameserver 10.10.111.15</b></tt>
<tt><b>nameserver 10.10.130.8</b></tt></pre><dl><dt><tt><b>domain
bigcompany.com</b></tt></dt>
<dd><p>Specifies that the
peer's DNS domain is <tt>bigcompany.com</tt>.</p>
</dd>
<dt><tt><b>nameserver
10.10.111.15</b></tt>  and <tt><b>nameserver 10.10.130.8</b></tt></dt>
<dd><p>Lists the IP addresses
of name servers at <tt>bigcompany.com</tt>.</p>
</dd>
</dl>
</li><li><a name="pppsvrconfig.dialin-step-11"></a><b>Edit the <tt>/etc/nsswitch.conf</tt> file to have the DNS database
searched first for host information.</b><pre>hosts:      dns [NOTFOUND=return] files </pre></li><li><a name="pppsvrconfig.dialin-step-12"></a><b>Create a file for the peer.</b><p>For example, you would create
the following file to define the dial-in
server <tt>myserver</tt>:</p><pre># <tt><b>cat /etc/ppp/peers/myserver</b></tt>
/dev/cua/a
57600
noipdefault
defaultroute
idle 120
noauth
connect "chat -U 'mypassword' -T 1-123-555-1213 -f /etc/ppp/mychat"</pre><dl><dt>/dev/cua/a</dt>
<dd><p>Specifies that the
device <tt>/dev/cua/a</tt> should
be used as the serial interface for
calls to <tt>myserver</tt>.</p>
</dd>
<dt>57600</dt>
<dd><p>Defines the speed
of the link.</p>
</dd>
<dt>noipdefault</dt>
<dd><p><a name="indexterm-1775"></a><a name="indexterm-1776"></a>Specifies that for transactions
with peer <tt>myserver</tt>,
the dial-out machine initially has
an IP address of 0.0.0.0. <tt>myserver</tt> assigns an IP address to
the dial-out machine for every dial-up
session.</p>
</dd>
<dt>idle 120</dt>
<dd><p><a name="indexterm-1777"></a><a name="indexterm-1778"></a>Indicates that the link
must time out after an idle period
of 120 seconds.</p>
</dd>
<dt>noauth</dt>
<dd><p><a name="indexterm-1779"></a><a name="indexterm-1780"></a>Specifies that the peer <tt>myserver</tt> does not need to
provide authentication credentials
when negotiating the connection with
the dial-out machine.</p>
</dd>
<dt>connect "chat
-U 'mypassword' -T 1-123-555-1213
-f /etc/ppp/mychat"</dt>
<dd><p>Specifies the <tt>connect</tt> option and its arguments,
including the phone number of the
peer, and the chat script <tt>/etc/ppp/mychat</tt> with calling instructions.</p>
</dd>
</dl>
</li></ol><h6>See Also</h6><p>The following list provides
references to related information.</p>
<ul><li><p>To configure another
dial-out machine, see <a href="p111.html#ppp.dialin-50">How to Configure the Modem and Serial Port (Dial-out Machine)</a>.</p>
</li>
<li><p>To test modem connectivity
by dialing out to another computer,
see <tt>cu</tt>(1C) and <tt>tip</tt>(1) man
pages. These utilities can help you
test if your modem is properly configured.
Also, use these utilities to test
if you can establish a connection
with another machine.</p>
</li>
<li><p>To learn more about
the configuration files and options,
see <a href="p129.html#pppsvrconfig.reference-65">Using PPP Options in Files and on the Command Line</a>.</p>
</li>
<li><p>To configure a dial-in
server, see <a href="p113.html#pppsvrconfig.dialin-53">Configuring Devices on the Dial-in Server</a>.</p>
</li>
</ul>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p111.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p113.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

