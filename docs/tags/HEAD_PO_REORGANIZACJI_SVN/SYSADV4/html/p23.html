<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Modifying the Maps - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Network Services<?GenHTML /ReferencePage> > <a href="p15.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a> > <a href="p22.html#rfsadmin-127">Task Overview for Autofs Administration</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p22.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p24.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rfsadmin-132"></a><h4>Modifying the Maps</h4>
<p>The following procedures require that you use NIS+ as your name service.</p>
<a name="rfsadmin-133"></a><h4><img src="graphics/procedure.gif"> How to Modify the Master Map</h4>
<ol><li><a name="rfsadmin-step-211"></a><b>Log in as a user who has permissions to
change the maps.</b></li><li><a name="rfsadmin-step-135"></a><b><a name="indexterm-303"></a><a name="indexterm-304"></a><a name="indexterm-305"></a><a name="indexterm-306"></a>Using the <tt>nistbladm</tt> command, make your changes
to the master map.   </b><p>See the <i>System Administration Guide: Naming and Directory Services (NIS+)</i>.</p></li><li><a name="rfsadmin-step-136"></a><b>For each client, become superuser or assume
an equivalent role.</b><p>Roles contain authorizations and privileged
commands. For more information about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure a role with the Primary Administrator
profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-137"></a><b><a name="indexterm-307"></a>For each client, run the <tt>automount</tt> command
to ensure that your changes become effective.</b></li><li><a name="rfsadmin-step-138"></a><b>Notify your users of the changes. </b><p>Notification is required so that the users can also run the <tt>automount</tt> command as superuser on their own computers. Note that the <tt>automount</tt> command gathers information from the master map whenever it is
run.</p></li></ol><a name="rfsadmin-139"></a><h4><img src="graphics/procedure.gif"> How to Modify Indirect Maps</h4>
<ol><li><a name="rfsadmin-step-210"></a><b>Log in as a user who has permissions to
change the maps.</b></li><li><a name="rfsadmin-step-141"></a><b><a name="indexterm-308"></a><a name="indexterm-309"></a><a name="indexterm-310"></a><a name="indexterm-311"></a>Using the <tt>nistbladm</tt> command, make your changes
to the indirect map.  </b><p>See the <i>System Administration Guide: Naming and Directory Services (NIS+)</i>.
Note that the change becomes effective the next time that the map is used,
which is the next time a mount is performed.</p></li></ol><a name="rfsadmin-142"></a><h4><img src="graphics/procedure.gif"> How to Modify Direct Maps</h4>
<ol><li><a name="rfsadmin-step-212"></a><b>Log in as a user who has permissions to
change the maps.</b></li><li><a name="rfsadmin-step-144"></a><b><a name="indexterm-312"></a><a name="indexterm-313"></a><a name="indexterm-314"></a><a name="indexterm-315"></a>Using the <tt>nistbladm</tt> command, add or delete
your changes to the direct map.  </b><p>See the <i>System Administration Guide: Naming and Directory Services (NIS+)</i>.</p></li><li><a name="rfsadmin-step-145"></a><b><a name="indexterm-316"></a>If you added or deleted a mount-point entry in the previous step,
run the <tt>automount</tt> command.</b></li><li><a name="rfsadmin-step-146"></a><b>Notify your users of the changes. </b><p>Notification is required so that the users can also run the <tt>automount</tt> command as superuser on their own computers.</p><hr>
<p><b>Note - </b>If you only modify or change the contents of an existing direct
map entry, you do not need to run the <tt>automount</tt> command. </p>
<hr>
<p>For example, suppose you modify the <tt>auto_direct</tt> map
so that the <tt>/usr/src</tt> directory is now mounted from a
different server. If <tt>/usr/src</tt> is not mounted at this
time, the new entry becomes effective immediately when you try to access <tt>/usr/src</tt>. If <tt>/usr/src</tt> is mounted now, you
can wait until the auto-unmounting occurs, then access the file. </p><hr>
<p><b>Note - </b>Use indirect maps whenever possible. Indirect maps are easier
to construct and less demanding on the computers' file systems. Also, indirect
maps do not occupy as much space in the mount table as direct maps.</p>
<hr>
</li></ol><a name="rfsadmin-147"></a><h4>Avoiding Mount-Point Conflicts</h4>
<p><a name="indexterm-317"></a><a name="indexterm-318"></a><a name="indexterm-319"></a>If you have a local disk partition that is mounted on <tt>/src</tt> and
you plan to use the autofs service to mount other source directories, you
might encounter a problem. If you specify the mount point <tt>/src</tt>,
the NFS service hides the local partition whenever you try to reach it.   </p>
<p>You need to mount the partition in some other location, for example,
on <tt>/export/src</tt>. You then need an entry in <tt>/etc/vfstab</tt> such as the following:</p>
<pre><tt>/dev/dsk/d0t3d0s5 /dev/rdsk/c0t3d0s5 /export/src ufs 3 yes -</tt> </pre><p>You also need this entry in <tt>auto_src</tt>: </p>
<pre>terra		terra:/export/src </pre><p><tt>terra</tt> is the name of the computer.</p>
<a name="rfsadmin-148"></a><h4>Accessing Non-NFS File Systems</h4>
<p><a name="indexterm-320"></a><a name="indexterm-321"></a>Autofs can also mount files other than NFS files. Autofs mounts
files on removable media, such as diskettes or CD-ROM. Normally, you would
mount files on removable media by using the Volume Manager. The following
examples show how this mounting could be accomplished through autofs. The
Volume Manager and autofs do not work together, so these entries would not
be used without first deactivating the Volume Manager.  </p>
<p>Instead of mounting a file system from a server, you put the media in
the drive and reference the file system from the map. If you plan to access
non-NFS file systems and you are using autofs, see the following procedures.</p>
<a name="rfsadmin-149"></a><h4><img src="graphics/procedure.gif"> How to Access CD-ROM Applications With Autofs</h4>
<hr>
<p><b>Note - </b><a name="indexterm-322"></a>Use this procedure if you are <b>not</b> using Volume
Manager. </p>
<hr>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-151"></a><b>Update the autofs map.</b><p>Add
an entry for the CD-ROM file system, which should resemble the following:</p><pre>hsfs     -fstype=hsfs,ro     :/dev/sr0</pre><p><a name="indexterm-323"></a><a name="indexterm-324"></a><a name="indexterm-325"></a>The CD-ROM device that you intend to mount must appear as a name
that follows the colon.</p></li></ol><a name="rfsadmin-152"></a><h4><img src="graphics/procedure.gif"> How to Access PC-DOS Data Diskettes With Autofs</h4>
<hr>
<p><b>Note - </b><a name="indexterm-326"></a><a name="indexterm-327"></a><a name="indexterm-328"></a>Use this procedure if you are <b>not</b> using Volume
Manager.   </p>
<hr>
<ol><li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information
about roles, see Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i>. To configure
a role with the Primary Administrator profile, see Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rfsadmin-step-154"></a><b>Update the autofs map.</b><p><a name="indexterm-329"></a><a name="indexterm-330"></a><a name="indexterm-331"></a><a name="indexterm-332"></a><a name="indexterm-333"></a>Add an entry for the diskette file system such as the following:</p><pre> pcfs     -fstype=pcfs     :/dev/diskette</pre></li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p22.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p24.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

