<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Networking in Exclusive-IP Non-Global Zones - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p95.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p98.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p100.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="gelkh"></a><h3>Networking in Exclusive-IP Non-Global Zones</h3>
<p><a name="indexterm-315"></a><a name="indexterm-316"></a>An
exclusive-IP zone has its own IP-related state and tuning variables. The zone
is assigned its own set of data-links when the zone is configured.</p>
<p>For information on features that can be used in an exclusive-IP non-global
zone, see <a href="p55.html#gekkb">Exclusive-IP Non-Global Zones</a>.
For information on tuning IP <tt>ndd</tt> variables, see <i>Solaris Tunable Parameters
Reference Manual</i>.</p>
<a name="geodw"></a><h4>Exclusive-IP Zone Partitioning</h4>
<p>	Exclusive-IP zones have separate TCP/IP stacks, so the separation
reaches down to the data-link layer. One or more data-link names, which can
be a NIC or a VLAN on a NIC, are assigned to an exclusive-IP zone by the global
administrator. The zone administrator can configure IP on those data-links
with the same flexibility and options as in the global zone.</p>
<a name="geoes"></a><h4>Exclusive-IP Data-Link Interfaces</h4>
<p>A data-link name must be assigned exclusively to a single zone.</p>
<p>The <tt>dladm</tt> <tt>show-link</tt> command can
be used to display data-links assigned to running zones.</p>
<p>For more information, see <tt>dladm</tt>(1M)</p>
<a name="geoez"></a><h4>IP Traffic Between Exclusive-IP Zones on the Same
Machine</h4>
<p>There is no internal loopback of IP packets between exclusive-IP zones.
All packets are sent down to the data-link.  Typically, this means that the
packets are sent out on a network interface. Then, devices like Ethernet switches
or IP routers can forward the packets toward their destination, which might
be a different zone on the same machine as the sender.</p>
<a name="geoee"></a><h4>Solaris IP Filter in Exclusive-IP Zones</h4>
<p>You have the same IP Filter functionality that you have in the global
zone in an exclusive-IP zone. IP Filter is also configured the same way in
exclusive-IP zones and the global zone.</p>
<a name="geodh"></a><h4>IP Network Multipathing in Exclusive-IP Zones</h4>
<p>IP network multipathing (IPMP) provides physical interface failure detection
and transparent network access failover for a system with multiple interfaces
on the same IP link. IPMP also provides load spreading of packets for systems
with multiple interfaces.</p>
<p>The data-link configuration is done in the global zone. First, multiple
data-link interfaces are assigned to a zone using <tt>zonecfg</tt>.
The multiple data-link interfaces must be attached to the same IP subnet.
IPMP can then be configured from within the exclusive-IP zone by the zone
administrator.</p>
<a name="z.admin.ov-13"></a><h3>Device Use in Non-Global Zones</h3>
<p>The set of devices available within a zone is restricted to prevent
a process in one zone from interfering with processes running in other zones.
For example, a process in a zone cannot modify kernel memory or modify the
contents of the root disk. Thus, by  default, only certain pseudo-devices
that are considered safe for use in a zone are available. Additional devices
can be made available within specific zones by using the <tt>zonecfg</tt> utility.</p>
<a name="z.admin.ov-14"></a><h4><tt>/dev</tt> and the <tt>/devices</tt> Namespace</h4>
<p>The <tt>devfs</tt> file system described in the <tt>devfs</tt>(7FS) man page is used by the
Solaris system to manage <tt>/devices</tt>. Each element in this
namespace represents the physical path to a hardware device, pseudo-device,
or nexus device. The namespace is a reflection of the device tree. As such,
the file system is populated by a hierarchy of directories and device special
files.</p>
<p>Devices are grouped according to the relative <tt>/dev</tt> hierarchy.
For example, all of the devices under <tt>/dev</tt> in the global
zone are grouped as global zone devices. For a non-global zone, the devices
are grouped in a <tt>/dev</tt> directory under the zone's root path.
Each group is a mounted <tt>/dev</tt> file system instance that
is mounted under the <tt>/dev</tt> directory. Thus, the global zone
devices are mounted under <tt>/dev</tt>, while the devices for a
non-global zone named <tt>my-zone</tt> are mounted under <tt>/my-zone_rootpath/dev</tt>.</p>
<p>The <tt>/dev</tt> file hierarchy is managed by the <tt>dev</tt> file system described in the <tt>dev</tt>(7FS) man page.</p>
<hr>
<p><b>Caution - </b>Subsystems that rely on <tt>/devices</tt> path
names are not able to run in non-global zones. The subsystems must be updated
to use <tt>/dev</tt> path names.</p>
<hr>
<a name="z.admin.ov-15"></a><h4>Exclusive-Use Devices</h4>
<p>You might have devices that you want to assign to specific zones. Allowing
unprivileged users to access block devices could permit those devices to be
used to cause system panic, bus resets, or other adverse effects. Before making
such assignments, consider the following issues:</p>
<ul><li><p>Before assigning a SCSI tape device to a specific zone, consult
the <tt>sgen</tt>(7D) man page.</p>
</li>
<li><p>Placing a physical device into more than one zone can create
a covert channel between zones. Global zone applications that use such a device
risk the possibility of compromised data or data corruption by a non-global
zone.</p>
</li>
</ul>
<a name="z.admin.ov-16"></a><h4>Device Driver Administration</h4>
<p>In a non-global zone, you can use the <tt>modinfo</tt> command
described in the <tt>modinfo</tt>(1M) man
page to examine the list of loaded kernel modules.</p>
<p>Most operations concerning kernel, device, and platform management will
not work inside a non-global zone because modifying platform hardware configurations
violates the zone security model. These operations include the following:</p>
<ul><li><p>Adding and removing drivers</p>
</li>
<li><p>Explicitly loading and unloading kernel modules</p>
</li>
<li><p>Initiating dynamic reconfiguration (DR) operations</p>
</li>
<li><p>Using facilities that affect the state of the physical platform</p>
</li>
</ul>
<a name="z.admin.ov-19"></a><h4>Utilities That Do Not Work or Are Modified
in Non-Global Zones</h4>
<a name="z.admin.ov-40"></a><h5>Utilities That Do Not Work in Non-Global
Zones</h5>
<p>The following utilities do not work in a zone because they rely on devices
that are not normally available:</p>
<ul><li><p><tt>prtconf</tt> (see the <tt>prtconf</tt>(1M) man page)</p>
</li>
<li><p><tt>prtdiag</tt> (see the <tt>prtdiag</tt>(1M) man page)</p>
</li>
</ul>
<a name="z.admin.ov-41"></a><h5>SPARC: Utility Modified for Use in
a Non-Global Zone</h5>
<p>The <tt>eeprom</tt> utility can be used in a zone to view
settings. The utility cannot be used to change settings. For more information,
see the <tt>eeprom</tt>(1M) and <tt>openprom</tt>(7D) man pages.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p98.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p100.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

