<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>How to Set Configuration Constraints - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p42.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a> > <a href="p43.html#rmpool.task-2">Configuring Pools</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p43.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p45.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="gcvwh"></a><h4><img src="graphics/procedure.gif"> How to Set Configuration Constraints</h4>
<p>Constraints affect the range of possible configurations by eliminating
some of the potential changes that could be made to a configuration. This
procedure shows how to set the <tt>cpu.pinned</tt> property.</p>
<p>In the following examples, <tt>cpuid</tt> is an integer.</p>
<ol><li><b>Become superuser, or assume a role that includes the Process Management
profile.</b><p>The System Administrator role includes the Process Management
profile. For more information about roles, see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><b>Modify the <tt>cpu.pinned</tt> property in the static
or dynamic configuration:</b><ul><li><b>Modify the boot-time (static) configuration:</b><pre># <tt><b>poolcfg -c 'modify cpu &lt;cpuid> (boolean cpu.pinned = true)'</b></tt></pre></li><li><b>Modify the running (dynamic) configuration without modifying the
boot-time configuration:</b><pre># <tt><b>poolcfg -dc 'modify cpu &lt;cpuid> (boolean cpu.pinned = true)'</b></tt></pre></li></ul></li></ol><a name="rmpool.task-108"></a><h4><img src="graphics/procedure.gif"> How to Define Configuration Objectives</h4>
<p>You can specify objectives for <tt>poold</tt> to consider
when taking corrective action.</p>
<p>In the following procedure, the <tt>wt-load</tt> objective
is being set so that <tt>poold</tt> tries to match resource allocation
to resource utilization. The <tt>locality</tt> objective is disabled
to assist in achieving this configuration goal.</p>
<ol><li><a name="rmpool.task-step-110"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-111"></a><b>Modify system <tt>tester</tt> to
favor the <tt>wt-load</tt> objective.</b><pre># <tt><b>poolcfg -c 'modify system tester (string system.poold.objectives="wt-load")'</b></tt></pre></li><li><a name="rmpool.task-step-112"></a><b>Disable the <tt>locality</tt> objective
for the default processor set.</b><pre># <tt><b>poolcfg -c 'modify pset pset_default (string pset.poold.objectives="locality none")'</b></tt>one line</pre></li><li><a name="rmpool.task-step-113"></a><b>Disable the <tt>locality</tt> objective
for the <tt>pset_batch</tt> processor set.</b><pre># <tt><b>poolcfg -c 'modify pset pset_batch (string pset.poold.objectives="locality none")'</b></tt>one line</pre></li><li><a name="rmpool.task-step-114"></a><b>Display the edited configuration.</b><pre># <tt><b>poolcfg -c info</b></tt>
system tester
        string  system.comment
        int     system.version 1
        boolean system.bind-default true
        int     system.poold.pid 177916
        string  system.poold.objectives wt-load

        pool pool_default
                int     pool.sys_id 0
                boolean pool.active true
                boolean pool.default true
                int     pool.importance 1
                string  pool.comment 
                pset    pset_default

        pset pset_default
                int     pset.sys_id -1
                boolean pset.default true
                uint    pset.min 1
                uint    pset.max 65536
                string  pset.units population
                uint    pset.load 10
                uint    pset.size 4
                string  pset.comment 
                boolean testnullchanged true
                string  pset.poold.objectives locality none

                cpu
                        int     cpu.sys_id 3
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 2
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 1
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 0
                        string  cpu.comment 
                        string  cpu.status on-line

        pool pool_batch
                boolean pool.default false
                boolean pool.active true
                int pool.importance 1
                string pool.comment
                string pool.scheduler FSS
                pset batch

        pset pset_batch
                int pset.sys_id -2
                string pset.units population
                boolean pset.default true
                uint pset.max 10
                uint pset.min 2
                string pset.comment
                boolean pset.escapable false
                uint pset.load 0
                uint pset.size 0
                string  pset.poold.objectives locality none

                cpu
                        int     cpu.sys_id 5
                        string  cpu.comment
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 4
                        string  cpu.comment
                        string  cpu.status on-line</pre></li><li><a name="rmpool.task-step-115"></a><b>Commit the configuration at <tt>/etc/pooladm.conf</tt>.</b><pre># <tt><b>pooladm -c</b></tt></pre></li><li><a name="rmpool.task-step-116"></a><b>(Optional) To copy the dynamic configuration
to a static configuration file called <tt>/tmp/backup</tt>, type
the following:</b><pre># <tt><b>pooladm -s /tmp/backup</b></tt></pre></li></ol><a name="rmpool.task-117"></a><h4><img src="graphics/procedure.gif"> How to Set the <tt>poold</tt> Logging
Level</h4>
<p>To specify the level of logging information that <tt>poold</tt> generates,
set the <tt>system.poold.log-level</tt> property in the <tt>poold</tt> configuration.
The <tt>poold</tt> configuration is held in the <tt>libpool</tt> configuration.
For information, see <a href="p38.html#rmpool-95"><tt>poold</tt> Logging Information</a> and
the <tt>poolcfg</tt>(1M) and <tt>libpool</tt>(3LIB) man pages.</p>
<p>You can also use the <tt>poold</tt> command at the command
line to specify the level of logging information that <tt>poold</tt> generates.</p>
<ol><li><a name="rmpool.task-step-119"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-120"></a><b>Set the logging level by using the <tt>poold</tt> command with the <tt>-l</tt> option and a parameter,
for example, <tt>INFO</tt>.</b><pre># <tt><b>/usr/lib/pool/poold -l INFO</b></tt></pre><p>For information about available parameters, see <a href="p38.html#rmpool-95"><tt>poold</tt> Logging Information</a>. The default logging
level is <tt>NOTICE</tt>.</p></li></ol><a name="rmpool.task-27"></a><h4><img src="graphics/procedure.gif"> How to Use Command Files With <tt>poolcfg</tt></h4>
<p>The <tt>poolcfg</tt> command with the <tt>-f</tt> option
can take input from a text file that contains <tt>poolcfg</tt> subcommand
arguments to the <tt>-c</tt> option. This method is appropriate when
you want a set of operations to be performed. When processing multiple commands,
the configuration is only updated if all of the commands succeed. For large
or complex configurations, this technique can be more useful than per-subcommand
invocations.</p>
<p>Note that in command files,  the <tt>#</tt> character acts
as a comment mark for the rest of the line.</p>
<ol><li><a name="rmpool.task-step-29"></a><b>Create the input file <tt>poolcmds.txt</tt>.</b><pre>$ <tt><b>cat > poolcmds.txt</b></tt>
<tt><b>create system tester
create pset pset_batch (uint pset.min = 2; uint pset.max = 10)
create pool pool_batch
associate pool pool_batch (pset pset_batch)</b></tt></pre></li><li><a name="rmpool.task-step-30"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-31"></a><b>Execute the command:</b><pre># <tt><b>/usr/sbin/poolcfg -f poolcmds.txt</b></tt></pre></li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p43.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p45.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

