<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Using the <tt>zonecfg</tt> Command - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p54.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p56.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p58.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="z.config.ov-5"></a><h3>Using the <tt>zonecfg</tt> Command</h3>
<p><a name="indexterm-189"></a><a name="indexterm-190"></a>The <tt>zonecfg</tt> command,
which is described in the <tt>zonecfg</tt>(1M) man page, is used to configure a
non-global zone. This command can also be used to persistently specify the
resource management settings for the global zone.</p>
<p>The <tt>zonecfg</tt> command can be used in interactive mode,
in command-line mode, or in command-file mode. The following operations can
be performed using this command:</p>
<ul><li><p>Create or delete (destroy) a zone configuration</p>
</li>
<li><p>Add resources to a particular configuration</p>
</li>
<li><p>Set properties for resources added to a configuration</p>
</li>
<li><p>Remove resources from a particular configuration</p>
</li>
<li><p>Query or verify a configuration</p>
</li>
<li><p>Commit to a configuration</p>
</li>
<li><p>Revert to a previous configuration</p>
</li>
<li><p>Rename a zone</p>
</li>
<li><p>Exit from a <tt>zonecfg</tt> session</p>
</li>
</ul>
<p>The <tt>zonecfg</tt> prompt is of the following form:</p>
<pre>zonecfg:<i>zonename</i>></pre><p>When you are configuring a specific resource type, such as a file system,
that resource type is also included in the prompt:</p>
<pre>zonecfg:<i>zonename</i>:fs></pre><p>For more information, including procedures that show how to use the
various <tt>zonecfg</tt> components described in this chapter, see <a href="p61.html">Chapter&nbsp;18, Planning and Configuring Non-Global Zones (Tasks)</a>.</p>
<a name="z.config.ov-10"></a><h3><tt>zonecfg</tt> Modes</h3>
<p><a name="indexterm-191"></a><a name="indexterm-192"></a>The concept of  a <b>scope</b> is used
for the user interface. The scope can be either <b>global</b> or <b>resource specific</b>. The default scope is global.</p>
<p><a name="indexterm-193"></a><a name="indexterm-194"></a>In the global scope,
the <tt>add</tt> subcommand and the <tt>select</tt> subcommand
are used to select a specific resource. The scope then changes to that resource
type.</p>
<ul><li><p>For the <tt>add</tt> subcommand, the <tt>end</tt> or <tt>cancel</tt> subcommands are used to complete the resource specification.</p>
</li>
<li><p>For the <tt>select</tt> subcommand, the <tt>end</tt> or <tt>cancel</tt> subcommands are used to complete the resource modification.</p>
</li>
</ul>
<p>The scope then reverts back to global.</p>
<p>Certain subcommands, such as <tt>add</tt>, <tt>remove</tt>,
and <tt>set</tt>,  have  different semantics in each scope.</p>
<a name="z.config.ov-4"></a><h4><tt>zonecfg</tt> Interactive Mode</h4>
<p><a name="indexterm-195"></a>In interactive mode, the following subcommands are
supported. For detailed information about semantics and options used with
the subcommands, see the <tt>zonecfg</tt>(1M) man page for options. For any subcommand
that could result in destructive actions or  loss of work, the system requests
user confirmation before proceeding. You can use the <tt>-F</tt> (force)
option to bypass this confirmation.</p>
<dl><dt><tt>help</tt></dt>
<dd><p>Print general help, or display help about a given resource.</p>
<pre>zonecfg:my-zone:inherit-pkg-dir> <tt><b>help</b></tt></pre></dd>
<dt><tt>create</tt></dt>
<dd><p>Begin configuring an in-memory configuration for the specified
new zone for one of these purposes:</p>
<ul><li><p>To apply the Sun default settings to a new configuration.
This method is the default.</p>
</li>
<li><p>With the <tt>-t</tt> <i>template</i> option,
to create a configuration that is identical to the specified template. The
zone name is changed from the template name to the new zone name.</p>
</li>
<li><p>With the <tt>-F</tt> option, to overwrite an existing
configuration.</p>
</li>
<li><p>With the <tt>-b</tt> option, to create a blank configuration
in which nothing is set.</p>
</li>
</ul>
</dd>
<dt><tt>export</tt></dt>
<dd><p>Print the configuration to standard output, or to the output
file specified, in a form that can be used in a command file.</p>
</dd>
<dt><tt>add</tt></dt>
<dd><p>In the global scope, add the specified resource type to the
configuration.</p>
<p>In the resource scope, add a property of the given name with the given
value.</p>
<p>See <a href="p63.html#z.conf.start-29">How to Configure the Zone</a> and
the <tt>zonecfg</tt>(1M) man page for more information.</p>
</dd>
<dt><tt>set</tt></dt>
<dd><p>Set a given property name to the given property value. Note
that some properties, such as <tt>zonepath</tt>, are global, while
others are resource specific. Thus, this command is applicable in both the
global and resource scopes.</p>
</dd>
<dt><tt>select</tt></dt>
<dd><p>Applicable only in the global scope. Select the resource of
the given type that matches the given property name-property value pair criteria
for modification. The scope is changed to that resource type. You must specify
a sufficient number of property name-value pairs for the resource to be uniquely
identified.</p>
</dd>
<dt><tt>clear</tt></dt>
<dd><p>Clear the value for optional settings. Required settings cannot
be cleared. However, some required settings can be changed by assigning a
new value.</p>
</dd>
<dt><tt>remove</tt></dt>
<dd><p>In the global scope, remove the specified resource type. You
must specify a sufficient number of property name-value pairs for the resource
type to be uniquely identified. If no property name-value pairs are specified,
all instances will be removed.  If more than one exists, a confirmation is
required unless the <tt>-F</tt> option is used.</p>
<p>In the resource scope, remove the specified property name-property value
from the current resource.</p>
</dd>
<dt><tt>end</tt></dt>
<dd><p>Applicable only in the resource scope. End the resource specification.</p>
<p>The <tt>zonecfg</tt> command then verifies that the current
resource is fully specified.</p>
<ul><li><p>If the resource is fully specified, it is added to the in-memory
configuration and the scope will revert back to global.</p>
</li>
<li><p>If the specification is incomplete, the system displays an
error message that describes what needs to be done.</p>
</li>
</ul>
</dd>
<dt><tt>cancel</tt></dt>
<dd><p>Applicable only in the resource scope. End the resource specification
and reset the scope to global. Any partially specified resources are not retained.</p>
</dd>
<dt><tt>delete</tt></dt>
<dd><p>Destroy the specified configuration. Delete the configuration
both from memory and from stable storage. You must use the <tt>-F</tt> (force)
option with <tt>delete</tt>.</p>
<hr>
<p><b>Caution - </b>This action is instantaneous. No commit is required, and a
deleted zone cannot be reverted.</p>
<hr>
</dd>
<dt><tt>info</tt></dt>
<dd><p>Display information about the current configuration or the
global resource properties <tt>zonepath</tt>, <tt>autoboot</tt>,
and <tt>pool</tt>. If a resource type is specified, display information
only about resources of that type. In the resource scope, this subcommand
applies only to the resource being added or modified.</p>
</dd>
<dt><tt>verify</tt></dt>
<dd><p>Verify current configuration for correctness. Ensure that
all resources have all of their required properties specified.</p>
</dd>
<dt><tt>commit</tt></dt>
<dd><p>Commit current configuration from memory to stable storage.
Until the in-memory configuration is committed, changes can be removed with
the <tt>revert</tt> subcommand. A configuration must be committed
to be used by <tt>zoneadm</tt>. This operation is attempted automatically
when you complete a <tt>zonecfg</tt> session. Because only a correct
configuration can be committed, the commit operation automatically does a
verify.</p>
</dd>
<dt><tt>revert</tt></dt>
<dd><p>Revert configuration back to the last committed state.</p>
</dd>
<dt><tt>exit</tt></dt>
<dd><p>Exit the <tt>zonecfg</tt> session.   You can use
the <tt>-F</tt> (force) option with <tt>exit</tt>.</p>
<p>A <tt>commit</tt> is automatically attempted if  needed. Note
that an EOF character can also be used to exit the session.</p>
</dd>
</dl>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p56.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p58.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

