<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>How to Enable Resource Pools Using <tt>pooladm</tt> - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p42.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a> > <a href="p42.html#rmpool.task-57">Enabling and Disabling the Pools Facility</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p42.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p44.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmpool.task-58"></a><h4><img src="graphics/procedure.gif"> How to Enable Resource Pools Using <tt>pooladm</tt></h4>
<ol><li><a name="rmpool.task-step-60"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-61"></a><b>Enable the pools facility.</b><pre># <tt><b>pooladm -e</b></tt></pre></li></ol><a name="rmpool.task-62"></a><h4><img src="graphics/procedure.gif"> How to Disable Resource Pools Using <tt>pooladm</tt></h4>
<ol><li><a name="rmpool.task-step-64"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-65"></a><b>Disable the pools facility.</b><pre># <tt><b>pooladm -d</b></tt></pre></li></ol><a name="rmpool.task-2"></a><h3>Configuring Pools</h3>
<a name="rmpool.task-84"></a><h4><img src="graphics/procedure.gif"> How to Create a Static Configuration</h4>
<p>Use the <tt>-s</tt> option to <tt>/usr/sbin/pooladm</tt> to
create a static configuration file that matches the current dynamic configuration.
Unless a different file name is specified, the default location <tt>/etc/pooladm.conf</tt> is used.</p>
<p>Commit your configuration using the <tt>pooladm</tt> command
with the <tt>-c</tt> option. Then, use the <tt>pooladm</tt> command
with the <tt>-s</tt> option to update the static configuration to match
the state of the dynamic configuration.</p>
<hr>
<p><b>Note - </b>The new functionality <tt>pooladm</tt> <tt>-s</tt> is
preferred over the previous functionality <tt>poolcfg</tt> <tt>-c</tt> <tt>discover</tt> for creating a new configuration that matches the dynamic configuration.</p>
<hr>
<h6>Before You Begin</h6><p>Enable pools on your system.</p>
<ol><li><a name="rmpool.task-step-86"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-87"></a><b>Update the static configuration file
to match the current dynamic configuration.</b><pre># <tt><b>pooladm -s</b></tt></pre></li><li><a name="rmpool.task-step-88"></a><b>View the contents of the configuration
file in readable form.</b><p>Note that the configuration contains default
elements created by the system.</p><pre># <tt><b>poolcfg -c info</b></tt>
system tester
        string  system.comment
        int     system.version 1
        boolean system.bind-default true
        int     system.poold.pid 177916

        pool pool_default
                int     pool.sys_id 0
                boolean pool.active true
                boolean pool.default true
                int     pool.importance 1
                string  pool.comment 
                pset    pset_default

        pset pset_default
                int     pset.sys_id -1
                boolean pset.default true
                uint    pset.min 1
                uint    pset.max 65536
                string  pset.units population
                uint    pset.load 10
                uint    pset.size 4
                string  pset.comment 
                boolean testnullchanged true

                cpu
                        int     cpu.sys_id 3
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 2
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 1
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 0
                        string  cpu.comment 
                        string  cpu.status on-line</pre></li><li><a name="rmpool.task-step-91"></a><b>Commit the configuration at <tt>/etc/pooladm.conf</tt>.</b><pre># <tt><b>pooladm -c</b></tt></pre></li><li><a name="rmpool.task-step-96"></a><b>(Optional) To copy the dynamic configuration
to a static configuration file called <tt>/tmp/backup</tt>, type
the following:</b><pre># <tt><b>pooladm -s /tmp/backup</b></tt></pre></li></ol><a name="rmpool.task-15"></a><h4><img src="graphics/procedure.gif"> How to Modify a Configuration</h4>
<p>To enhance your configuration, create a processor set named <tt>pset_batch</tt> and a pool named <tt>pool_batch</tt>. Then join the pool
and the processor set with an association.</p>
<p>Note that you must quote subcommand arguments that contain white space.</p>
<ol><li><a name="rmpool.task-step-17"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-18"></a><b>Create processor set <tt>pset_batch</tt>.</b><pre># <tt><b>poolcfg -c 'create pset pset_batch (uint pset.min = 2; uint pset.max = 10)'</b></tt></pre></li><li><a name="rmpool.task-step-19"></a><b>Create pool <tt>pool_batch</tt>.</b><pre># <tt><b>poolcfg -c 'create pool pool_batch'</b></tt></pre></li><li><a name="rmpool.task-step-20"></a><b>Join the pool and the processor set with
an association.</b><pre># <tt><b>poolcfg -c 'associate pool pool_batch (pset pset_batch)'</b></tt></pre></li><li><a name="rmpool.task-step-21"></a><b>Display the edited configuration.</b><pre># <tt><b>poolcfg -c info</b></tt>
system tester
        string  system.comment kernel state
        int     system.version 1
        boolean system.bind-default true
        int     system.poold.pid 177916

        pool pool_default
                int     pool.sys_id 0
                boolean pool.active true
                boolean pool.default true
                int     pool.importance 1
                string  pool.comment 
                pset    pset_default

        pset pset_default
                int     pset.sys_id -1
                boolean pset.default true
                uint    pset.min 1
                uint    pset.max 65536
                string  pset.units population
                uint    pset.load 10
                uint    pset.size 4
                string  pset.comment 
                boolean testnullchanged true

                cpu
                        int     cpu.sys_id 3
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 2
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 1
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 0
                        string  cpu.comment 
                        string  cpu.status on-line

        pool pool_batch
                boolean pool.default false
                boolean pool.active true
                int pool.importance 1
                string pool.comment
                pset pset_batch

        pset pset_batch
                int pset.sys_id -2
                string pset.units population
                boolean pset.default true
                uint pset.max 10
                uint pset.min 2
                string pset.comment
                boolean pset.escapable false
                uint pset.load 0
                uint pset.size 0

                cpu
                        int     cpu.sys_id 5
                        string  cpu.comment
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 4
                        string  cpu.comment
                        string  cpu.status on-line</pre></li><li><a name="rmpool.task-step-76"></a><b>Commit the configuration at <tt>/etc/pooladm.conf</tt>.</b><pre># <tt><b>pooladm -c</b></tt></pre></li><li><a name="rmpool.task-step-93"></a><b>(Optional) To copy the dynamic configuration
to a static configuration file named <tt>/tmp/backup</tt>, type
the following:</b><pre># <tt><b>pooladm -s /tmp/backup</b></tt></pre></li></ol><a name="rmpool.task-22"></a><h4><img src="graphics/procedure.gif"> How to Associate a Pool With a Scheduling
Class</h4>
<p>You can associate a pool with a scheduling class so that all processes
bound to the pool use this scheduler. To do this, set the <tt>pool.scheduler</tt> property to the name of the scheduler. This example associates
the pool <tt>pool_batch</tt> with the fair share scheduler (FSS).</p>
<ol><li><a name="rmpool.task-step-24"></a><b>Become superuser, or assume a role that
includes the Process Management profile.</b><p>The System Administrator
role includes the Process Management profile. For more information about roles,
see Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i>.</p></li><li><a name="rmpool.task-step-25"></a><b>Modify pool <tt>pool_batch</tt> to
be associated with the FSS.</b><pre># <tt><b>poolcfg -c 'modify pool pool_batch (string pool.scheduler="FSS")'</b></tt></pre></li><li><a name="rmpool.task-step-26"></a><b>Display the edited configuration.</b><pre># <tt><b>poolcfg -c info</b></tt>
system tester
        string  system.comment
        int     system.version 1
        boolean system.bind-default true
        int     system.poold.pid 177916

        pool pool_default
                int     pool.sys_id 0
                boolean pool.active true
                boolean pool.default true
                int     pool.importance 1
                string  pool.comment 
                pset    pset_default

        pset pset_default
                int     pset.sys_id -1
                boolean pset.default true
                uint    pset.min 1
                uint    pset.max 65536
                string  pset.units population
                uint    pset.load 10
                uint    pset.size 4
                string  pset.comment 
                boolean testnullchanged true

                cpu
                        int     cpu.sys_id 3
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 2
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 1
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 0
                        string  cpu.comment 
                        string  cpu.status on-line

        pool pool_batch
                boolean pool.default false
                boolean pool.active true
                int pool.importance 1
                string pool.comment
                string pool.scheduler FSS
                pset batch

        pset pset_batch
                int pset.sys_id -2
                string pset.units population
                boolean pset.default true
                uint pset.max 10
                uint pset.min 2
                string pset.comment
                boolean pset.escapable false
                uint pset.load 0
                uint pset.size 0

                cpu
                        int     cpu.sys_id 5
                        string  cpu.comment
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 4
                        string  cpu.comment
                        string  cpu.status on-line</pre></li><li><a name="rmpool.task-step-77"></a><b>Commit the configuration at <tt>/etc/pooladm.conf</tt>:</b><pre># <tt><b>pooladm -c</b></tt></pre></li><li><a name="rmpool.task-step-95"></a><b>(Optional) To copy the dynamic configuration
to a static configuration file called <tt>/tmp/backup</tt>, type
the following:</b><pre># <tt><b>pooladm -s /tmp/backup</b></tt></pre></li></ol>
</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p42.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p44.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

