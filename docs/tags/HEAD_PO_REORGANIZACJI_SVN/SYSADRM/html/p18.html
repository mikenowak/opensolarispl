<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Resource Control Enforcement - System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >System Administration Guide: Solaris Containers-Resource Management and Solaris Zones<?GenHTML /ReferencePage> > <a href="p16.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a> > <a href="p16.html#rmctrls-3">Configuring Resource Controls and Attributes</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p17.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p19.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="rmctrls-10"></a><h4>Resource Control Enforcement</h4>
<p>More than one resource control can exist on a resource. A resource control
can exist at each containment level in the process model. If resource controls
are active on the same resource at different container levels, the smallest
container's control is enforced first. Thus, action is taken on <tt>process.max-cpu-time</tt> before <tt>task.max-cpu-time</tt> if both controls are
encountered simultaneously.</p>
<a name="rmctrl-fig-11"></a>Figure 6-1 Process Collectives, Container Relationships,
and Their Resource Control Sets<img src="figures/rm_multictrl.gif" alt=""></img><a name="rmctrls-11"></a><h4>Global Monitoring of Resource Control Events</h4>
<p>Often, the resource consumption of processes is unknown. To get more
information, try using the global resource control actions that are available
with the <tt>rctladm</tt> command. Use <tt>rctladm</tt> to
establish a <tt>syslog</tt> action on a resource control. Then,
if any entity managed by that resource control encounters a threshold value,
a system message is logged at the configured logging level. See <a href="p19.html">Chapter&nbsp;7, Administering Resource Controls (Tasks)</a> and the <tt>rctladm</tt>(1M) man
page for more information.</p>
<a name="rmctrls-12"></a><h3>Applying Resource Controls</h3>
<p>Each resource control listed in <a href="p16.html#rmctrls-tbl-5">Table 6-1</a> can be assigned to a project at login or when <tt>newtask</tt>, <tt>su</tt>, or the other project-aware launchers <tt>at</tt>, <tt>batch</tt>, or <tt>cron</tt> are invoked. Each command that
is initiated is launched in a separate task with the invoking user's default
project. See the man pages <tt>login</tt>(1), <tt>newtask</tt>(1), <tt>at</tt>(1), <tt>cron</tt>(1M),
and <tt>su</tt>(1M) for more
information.</p>
<p>Updates to entries in the <tt>project</tt> database, whether
to the <tt>/etc/project</tt> file or to a representation of the
database in a network name service, are not applied to currently active projects.
The updates are applied when a new task joins the project through login or <tt>newtask</tt>. </p>
<a name="rmctrls-13"></a><h3>Temporarily Updating Resource Control Values
on a Running System</h3>
<p><a name="indexterm-53"></a><a name="indexterm-54"></a>Values changed in the <tt>project</tt> database
only become effective for new tasks that are started in a project. However,
you can use the <tt>rctladm</tt> and <tt>prctl</tt> commands
to update resource controls on a running system.</p>
<a name="rmctrls-15"></a><h4>Updating Logging Status</h4>
<p>The <tt>rctladm</tt> command affects the global logging state
of each resource control on a system-wide basis. This command can be used
to view the global state and to set up the level of <tt>syslog</tt> logging
when controls are exceeded.</p>
<a name="rmctrls-14"></a><h4>Updating Resource Controls</h4>
<p><a name="indexterm-55"></a><a name="indexterm-56"></a>You can view and temporarily alter resource control
values and actions on a per-process, per-task, or per-project basis by using
the <tt>prctl</tt> command. A project, task, or process ID is given
as input, and the command operates on the resource control at the level where
the control is defined.</p>
<p>Any modifications to values and actions take effect immediately. However,
these modifications apply to the current process, task, or project only. The
changes are not recorded in the <tt>project</tt> database. If
the system is restarted, the modifications are lost. Permanent changes to
resource controls must be made in the <tt>project</tt> database.</p>
<p>All resource control settings that can be modified in the <tt>project</tt> database can also be modified with the <tt>prctl</tt> command.
Both basic and privileged values can be added or be deleted. Their actions
can also be modified. By default, the basic type is assumed for all set operations,
but processes and users with superuser privileges can also modify privileged
resource controls. System resource controls cannot be altered.</p>
<a name="rmctrls-19"></a><h3>Commands Used With Resource Controls</h3>
<p><a name="indexterm-57"></a>The commands that are used with resource controls are shown in
the following table.</p>
<table><tr><th><p>Command Reference</p>
</th><th><p>Description</p>
</th></tr>
<tr><td><p><tt>ipcs</tt>(1)</p>
</td><td><p>Allows you to observe which IPC objects are contributing to a project's
usage</p>
</td></tr>
<tr><td><p><tt>prctl</tt>(1)</p>
</td><td><p>Allows you to make runtime interrogations of and modifications to the
resource controls facility, with local scope</p>
</td></tr>
<tr><td><p><tt>rctladm</tt>(1M) </p>
</td><td><p>Allows you to make runtime interrogations of and modifications to the
resource controls facility, with global scope</p>
</td></tr>
</table><p>The <tt>resource_controls</tt>(5) man page describes  resource controls available through
the project database, including units and scaling factors.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p17.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p19.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

