<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML//EN" "docbook.dtd"[
	<!ENTITY % xinclude SYSTEM "xinclude.mod">
	%xinclude;
]>

<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="txldap-1">



<title>Configuring LDAP for Trusted Extensions</title>
<indexterm xml:id="indexterm-248">
<primary>installing</primary>
<seealso>
Trusted Extensions installation</seealso>
</indexterm>
<toc>
<para>This chapter covers how to configure the Sun Java System Directory Server and the Solaris Management Console for use
with Trusted Extensions. The Sun Java System Directory Server (LDAP server) provides LDAP services. LDAP
is the supported naming service for Trusted Extensions. The Solaris Management Console is the administrative
GUI for local and LDAP databases.</para>
<itemizedlist>
<para>You have two options. You can configure an LDAP server on a Trusted Extensions host,
or you can use an existing server and connect to it by using a Trusted Extensions proxy
server.</para>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-16">Configuring an LDAP Server on
a Trusted Extensions Host (Task Map)</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-18">Configuring an LDAP Proxy Server
on a Trusted Extensions Host (Task Map)</olink>
</para>
</listitem>
</itemizedlist>
</toc>
<sect1 xml:id="txldap-16">
<title>Configuring an LDAP Server on a Trusted Extensions Host
(Task Map)</title>
<indexterm xml:id="indexterm-249">
<primary>tasks and task maps</primary>
<secondary>Configuring an LDAP Server on a Trusted Extensions Host (Task Map)</secondary>
</indexterm>
<indexterm xml:id="indexterm-250">
<primary>Configuring an LDAP Server on a Trusted Extensions Host (Task Map)</primary>
</indexterm>
<informaltable frame="topbot" pgwide="1">
<tgroup cols="3" colsep="1" rowsep="1">
<colspec colname="colspec2" colwidth="21.17*"/>
<colspec colname="colspec1" colwidth="41.68*"/>
<colspec colname="colspec0" colwidth="36.12*"/>
<thead>
<row>
<entry>
<para>Task</para>
</entry>
<entry>
<para>Description</para>
</entry>
<entry>
<para>For Instructions</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>Set up a Trusted Extensions LDAP server.</para>
</entry>
<entry>
<para>If you do not have an existing Sun Java System Directory Server, make your first Trusted Extensions host
the LDAP server. The other Trusted Extensions hosts are clients of this server.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-3">Collect Information for the LDAP Service</olink>
</para>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-4">Install the Sun Java System Directory Server</olink>
</para>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-12">Protect Access Logs for the Sun Java System
Directory Server</olink>
</para>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-14">Protect Error Logs for the Sun Java System
Directory Server</olink>
</para>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-10">Configure a Multilevel Port for the Sun
Java System Directory Server</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Add Trusted Extensions databases to the server.</para>
</entry>
<entry>
<para>Populate the LDAP server with data from the Trusted Extensions system files.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-2">Populate the Sun Java System Directory Server</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Configure the Solaris Management Console to work with the Sun Java System Directory Server.</para>
</entry>
<entry>
<para>Manually set up an LDAP toolbox for the Solaris Management Console. The toolbox can modify Trusted Extensions attributes
on network objects.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="confsys-10">Configuring the Solaris Management Console
for LDAP (Tasks)</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Configure all other Trusted Extensions hosts as clients of this server.</para>
</entry>
<entry>
<para>When you configure another system with Trusted Extensions, make the system
a client of this LDAP server.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="chapter-4.xml" targetptr="txldap-8">Make the Global Zone an LDAP Client</olink>
</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1>
<sect1 xml:id="txldap-18">
<title>Configuring an LDAP Proxy Server on
a Trusted Extensions Host (Task Map)</title>
<indexterm xml:id="indexterm-251">
<primary>tasks and task maps</primary>
<secondary>Configuring an LDAP Proxy Server on a Trusted Extensions Host (Task Map)</secondary>
</indexterm>
<indexterm xml:id="indexterm-252">
<primary>Configuring an LDAP Proxy Server on a Trusted Extensions Host (Task Map)</primary>
</indexterm>
<para>Use this task map if you have an existing Sun Java System Directory Server that is running on
a Solaris system.</para>
<informaltable frame="topbot" pgwide="1">
<tgroup cols="3" colsep="1" rowsep="1">
<colspec colname="colspec2" colwidth="26.01*"/>
<colspec colname="colspec1" colwidth="36.49*"/>
<colspec colname="colspec0" colwidth="36.49*"/>
<thead>
<row>
<entry>
<para>Task</para>
</entry>
<entry>
<para>Description</para>
</entry>
<entry>
<para>For Instructions</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>Add Trusted Extensions databases to the server.</para>
</entry>
<entry>
<para>The Trusted Extensions network databases, <filename>tnrhdb</filename> and <filename>tnrhtp</filename>, need to be added to the LDAP server.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-2">Populate the Sun Java System Directory Server</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Set up an LDAP proxy server.</para>
</entry>
<entry>
<para>Make one Trusted Extensions host the proxy server for the other Trusted Extensions hosts.
The other Trusted Extensions hosts use this proxy server to reach the LDAP server.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-6">Create an LDAP Proxy Server</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Configure the proxy server to have a multilevel port for LDAP.</para>
</entry>
<entry>
<para>Enable the Trusted Extensions proxy server to communicate with the LDAP
server at specific labels.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-10">Configure a Multilevel Port for the Sun
Java System Directory Server</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Configure the Solaris Management Console to work with the LDAP proxy server.</para>
</entry>
<entry>
<para>You manually set up an LDAP toolbox for the Solaris Management Console. The toolbox can modify Trusted Extensions attributes
on network objects.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="confsys-10">Configuring the Solaris Management Console
for LDAP (Tasks)</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Configure all other Trusted Extensions hosts as clients of the LDAP proxy
server.</para>
</entry>
<entry>
<para>When you configure another system with Trusted Extensions, make the system
a client of the LDAP proxy server.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="chapter-4.xml" targetptr="txldap-8">Make the Global Zone an LDAP Client</olink>
</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1>
<sect1 xml:id="txconf-8">
<title>Configuring the Sun Java System Directory Server (Tasks)</title>
<indexterm xml:id="indexterm-253">
<primary>Sun Java System Directory Server</primary>
<see>
LDAP server</see>
</indexterm>
<indexterm xml:id="indexterm-254">
<primary>installing</primary>
<secondary>Sun Java System Directory Server</secondary>
</indexterm>
<indexterm xml:id="indexterm-255">
<primary>Trusted Extensions configuration</primary>
<secondary>LDAP</secondary>
</indexterm>
<indexterm xml:id="indexterm-256">
<primary>LDAP configuration</primary>
<secondary>for Trusted Extensions</secondary>
</indexterm>
<indexterm xml:id="indexterm-257">
<primary>configuring</primary>
<secondary>LDAP for Trusted Extensions</secondary>
</indexterm>
<indexterm xml:id="indexterm-258">
<primary>Trusted Extensions configuration</primary>
<secondary>databases for LDAP</secondary>
</indexterm>
<para>The LDAP directory service is the supported naming service for Trusted Extensions.
If your site is not yet running the LDAP directory service, configure a Sun Java System Directory Server on
a system that is configured with Trusted Extensions. If your site is running a Sun Java System Directory Server,
then you need to add the Trusted Extensions databases to the server. To access
the directory server, you then set up an LDAP proxy on a Trusted Extensions host.</para>
<note>

<para>If you do not use this LDAP server as an NFS server or as a server
for Sun Rays, then you do not need to install any labeled zones on this server.</para>
</note>
<sect2>
<title/>
<task id="txldap-3">

<title>Collect Information for the LDAP Service</title>
<indexterm xml:id="indexterm-259">
<primary>LDAP server</primary>
<secondary>collecting information for</secondary>
</indexterm>
<indexterm xml:id="indexterm-260">
<primary>collecting information</primary>
<secondary>for LDAP service</secondary>
</indexterm>
<procedure role="single-step">
<step>
<para>Determine the values for the following items.</para>
<para>The items are listed in the order of their
appearance in the Sun <trademark>Java</trademark> Enterprise System Install
Wizard.</para>
<informaltable frame="topbot">
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colname="colspec0" colwidth="31.24*"/>
<colspec colname="colspec1" colwidth="68.76*"/>
<thead>
<row>
<entry rowsep="1">
<para>Install Wizard Prompt</para>
</entry>
<entry rowsep="1">
<para>Action or Information</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry colsep="1" nameend="colspec1" namest="colspec0">
<para>Sun Java System Directory Server 5 <replaceable>version</replaceable>
</para>
</entry>
</row>
<row>
<entry>
<para>Administrator User ID</para>
</entry>
<entry>
<para>The default value is <literal>admin</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>Administrator Password</para>
</entry>
<entry>
<para>Create a password, such as <literal>admin123</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>Directory Manager DN</para>
</entry>
<entry>
<para>The default value is <literal>cn=Directory Manager</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>Directory Manager Password</para>
</entry>
<entry>
<para>Create a password, such as <literal>dirmgr89</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>Directory Server Root</para>
</entry>
<entry>
<para>The default value is <filename>/var/Sun/mps</filename>. This path is
also used later if the proxy software is installed.</para>
</entry>
</row>
<row>
<entry>
<para>Server Identifier</para>
</entry>
<entry>
<para>The default value is the local host.</para>
</entry>
</row>
<row>
<entry>
<para>Server Port</para>
</entry>
<entry>
<para>If you plan to use the Directory Server to provide standard LDAP naming
services to client systems, use the default value, <literal>389</literal>.</para>
<para>If you plan to use the Directory Server to support a subsequent installation
of a proxy server, enter a nonstandard port, such as <literal>10389</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>Suffix</para>
</entry>
<entry>
<para>Include your domain component, as in <literal>dc=example-domain,dc=com</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>Administration Domain</para>
</entry>
<entry>
<para>Construct to correspond to the Suffix, as in, <literal>example-domain.com</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>System User</para>
</entry>
<entry>
<para>The default value is <literal>root</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>System Group</para>
</entry>
<entry>
<para>The default value is <literal>root</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>Data Storage Location</para>
</entry>
<entry>
<para>The default value is <literal>Store configuration data on this server</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>Data Storage Location</para>
</entry>
<entry>
<para>The default value is <literal>Store user data and group data on this
server</literal>.</para>
</entry>
</row>
<row>
<entry>
<para>Administration Port</para>
</entry>
<entry>
<para>The default value is the Server Port. A suggested convention for changing
the default is <literal>software-version TIMES 1000</literal>. For software
version 5.2, this convention would result in port <literal>5200</literal>.</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</step>
</procedure>
</task>
</sect2>
<sect2>
<title/>
<task id="txldap-4">

<title>Install the Sun Java System Directory Server</title>
<indexterm xml:id="indexterm-261">
<primary>LDAP server</primary>
<secondary>installing in Trusted Extensions</secondary>
</indexterm>
<indexterm xml:id="indexterm-262">
<primary>LDAP server</primary>
<secondary>configuring naming service</secondary>
</indexterm>
<tasksummary>
<para>The Sun Java System Directory Server is delivered as packages with the Solaris release. </para>
</tasksummary>
<procedure>
<step>
<para>Find the Sun Java System Directory Server packages.</para>
<para>You can download the software
from the <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="text_url" xlink:href="http://www.sun.com/software/solaris">Sun Software Gateway</link> web site.</para>
<substeps>
<step>
<para>Click the 'Get It' tab.</para>
</step>
<step>
<para>Click the checkbox for the Sun Java Identity Management Suite.</para>
</step>
<step>
<para>Submit the request for the software.</para>
<para>Scroll down the
page to the Submit button, and click it.</para>
</step>
<step>
<para>If you are registered, log in to download the software.</para>
</step>
<step>
<para>If you are not registered, register, then log in to download the
software.</para>
</step>
<step>
<para>Select the Download Center at the upper left of the screen.</para>
</step>
<step>
<para>Under Identity Management, download the most recent software that
is appropriate for your platforms.</para>
</step>
</substeps>
</step>
<step>
<para>In the <filename>/etc/hosts</filename> file, add the FQDN to your
system's hostname entry.</para>
<para>The FQDN is the Fully Qualified Domain Name. This
name is a combination of the host name and the administration domain.</para>
<screen>
<replaceable>192.168.5.5 myhost myhost.example-domain.com</replaceable>
</screen>
</step>
<step>
<para>Install the Sun Java System Directory Server packages.</para>
<para>Answer the questions
by using the information
from <olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-3">Collect Information for the LDAP Service</olink>.</para>
</step>
<step>
<para>Ensure that the Sun Java System Directory Server starts at every boot.</para>
<substeps>
<step>
<para>Add an <filename>init.d</filename> script.</para>
<para>In the
following example, change the <literal>SERVER_ROOT</literal> and <literal>SERVER_INSTANCE</literal> variables to match your installation.</para>
<screen>/etc/init.d/ldap.directory-myhost
---------------------------------------
#!/sbin/sh

SERVER_ROOT=/var/Sun/mps
SERVER_INSTANCE=myhost

case "$1" in
start)
${SERVER_ROOT}/slapd-${SERVER_INSTANCE}/start-slapd
;;
stop)

${SERVER_ROOT}/slapd-${SERVER_INSTANCE}/stop-slapd
;;
*)

echo "Usage: $0 { start | stop }"
exit 1
esac
exit 0</screen>
</step>
<step>
<para>Link the <filename>init.d</filename> script to the <filename class="directory">rc2.d</filename> directory.</para>
<screen>/usr/bin/ln \
/etc/init.d/ldap.directory-myhost \
/etc/rc2.d/S70ldap.directory-myhost</screen>
</step>
</substeps>
</step>
<step>
<para>Verify your installation.</para>
<stepalternatives>
<step>
<para>Examine your installation directory.</para>
<para>A subdirectory
that is named <literal>slapd-</literal>
<replaceable>server hostname</replaceable> should
exist.</para>
</step>
<step>
<para>You should be able to start the Sun Java System Directory Server.</para>
<screen>
<replaceable>installation-directory</replaceable>/slapd-<replaceable>server hostname</replaceable>/restart-slapd</screen>
</step>
<step>
<para>The <command>slapd</command> process should exist.</para>
<screen># <userinput>ps -ef | grep slapd</userinput>
./ns-slapd -D <replaceable>installation-directory</replaceable>/slapd-<replaceable>server instance</replaceable> -i
<replaceable>installation-directory</replaceable>/slapd-<replaceable>server instance</replaceable>/</screen>
</step>
</stepalternatives>
</step>
</procedure>
<taskrelated role="troubleshooting">

<para>For strategies to solve LDAP configuration problems, see <olink remap="external" targetdoc="819-3194" targetptr="setupproblems-1">Chapter 13, <citetitle remap="chapter">LDAP Troubleshooting (Reference),</citetitle> in <citetitle remap="book">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</citetitle>
</olink>.</para>
</taskrelated>
</task>
</sect2>
<sect2>
<title/>
<task id="txldap-12">

<title>Protect Access Logs for the Sun Java System Directory Server</title>
<indexterm xml:id="indexterm-263">
<primary>LDAP server</primary>
<secondary>protecting access logs</secondary>
</indexterm>
<tasksummary>
<itemizedlist>
<para>The LDIF script in this procedure sets up the following rules for access
logs:</para>
<listitem>
<para>Log level 256 and buffered logs (default)</para>
</listitem>
<listitem>
<para>Rotate logs daily</para>
</listitem>
<listitem>
<para>Keep a maximum of 100 log files and each file is at most 500
MB</para>
</listitem>
<listitem>
<para>Expire log files that are older than 3 months</para>
</listitem>
<listitem>
<para>Delete oldest logs if less than 500 MB free disk space is
available</para>
</listitem>
<listitem>
<para>All log files use a maximum of 20,000 MB of disk space</para>
</listitem>
</itemizedlist>
</tasksummary>
<procedure>
<step>
<para>Create a script to manage access logs.</para>
<para>Create a file <filename>/var/tmp/logs-access.ldif</filename> with the following content.</para>
<screen>dn: cn=config
changetype: modify
replace: nsslapd-accesslog-logging-enabled
nsslapd-accesslog-logging-enabled: on
-
replace: nsslapd-accesslog-level
nsslapd-accesslog-level: 256
-
replace: nsslapd-accesslog-logbuffering
nsslapd-accesslog-logbuffering: on
-
replace: nsslapd-accesslog-logrotationtime
nsslapd-accesslog-logrotationtime: 1
-
replace: nsslapd-accesslog-logrotationtimeunit
nsslapd-accesslog-logrotationtimeunit: day
-
replace: nsslapd-accesslog-maxlogsize
nsslapd-accesslog-maxlogsize: 500
-
replace: nsslapd-accesslog-maxlogsperdir
nsslapd-accesslog-maxlogsperdir: 100
-
replace: nsslapd-accesslog-logexpirationtime
nsslapd-accesslog-logexpirationtime: 3
-
replace: nsslapd-accesslog-logexpirationtimeunit
nsslapd-accesslog-logexpirationtimeunit: month
-
replace: nsslapd-accesslog-logmaxdiskspace
nsslapd-accesslog-logmaxdiskspace: 20000
-
replace: nsslapd-accesslog-logminfreediskspace
nsslapd-accesslog-logminfreediskspace: 500</screen>
</step>
<step>
<para>Run the script.</para>
<screen># <userinput>ldapmodify -h localhost -D 'cn=directory manager' \
-f /var/tmp/logs-access.ldif</userinput>
</screen>
</step>
<step>
<para>Answer the prompts.</para>
<screen>Enter bind password: <lineannotation>
</lineannotation>
modifying entry cn=config</screen>
</step>
</procedure>
</task>
</sect2>
<sect2>
<title/>
<task id="txldap-14">

<title>Protect Error Logs for the Sun Java System Directory Server</title>
<indexterm xml:id="indexterm-264">
<primary>LDAP server</primary>
<secondary>protecting error logs</secondary>
</indexterm>
<tasksummary>
<itemizedlist>
<para>The LDIF script in this procedure sets up the following rules for the
error files:</para>
<listitem>
<para>Rotate logs weekly</para>
</listitem>
<listitem>
<para>Keep a maximum of 30 log files and each file is at most 500
MB</para>
</listitem>
<listitem>
<para>Expire log files that are older than 3 months</para>
</listitem>
<listitem>
<para>Delete oldest logs if less than 500 MB free disk space is
available</para>
</listitem>
<listitem>
<para>All log files use a maximum of 20,000 MB of disk space</para>
</listitem>
</itemizedlist>
</tasksummary>
<procedure>
<step>
<para>Create a script to manage error logs.</para>
<para>Create a file <filename>/var/tmp/logs-error.ldif</filename> with the following content.</para>
<screen>dn: cn=config
changetype: modify
replace: nsslapd-errorlog-logging-enabled
nsslapd-errorlog-logging-enabled: on
-
replace: nsslapd-errorlog-logexpirationtime
nsslapd-errorlog-logexpirationtime: 3
-
replace: nsslapd-errorlog-logexpirationtimeunit
nsslapd-errorlog-logexpirationtimeunit: month
-
replace: nsslapd-errorlog-logrotationtime
nsslapd-errorlog-logrotationtime: 1
-
replace: nsslapd-errorlog-logrotationtimeunit
nsslapd-errorlog-logrotationtimeunit: week
-
replace: nsslapd-errorlog-maxlogsize
nsslapd-errorlog-maxlogsize: 500
-
replace: nsslapd-errorlog-maxlogsperdir
nsslapd-errorlog-maxlogsperdir: 30
-
replace: nsslapd-errorlog-logmaxdiskspace
nsslapd-errorlog-logmaxdiskspace: 20000
-
replace: nsslapd-errorlog-logminfreediskspace
nsslapd-errorlog-logminfreediskspace: 500</screen>
</step>
<step>
<para>Run the script.</para>
<screen># <userinput>ldapmodify -h localhost -D 'cn=directory manager' -f
/var/tmp/logs-error.ldif</userinput>
</screen>
</step>
<step>
<para>Answer the prompts.</para>
<screen>Enter bind password: <lineannotation>
</lineannotation>
modifying entry cn=config</screen>
</step>
</procedure>
</task>
</sect2>
<sect2>
<title/>
<task id="txldap-10">

<title>Configure a Multilevel Port for the Sun Java System Directory Server</title>
<indexterm xml:id="indexterm-265">
<primary>LDAP server</primary>
<secondary>configuring multilevel port</secondary>
</indexterm>
<tasksummary>
<para>To work in Trusted Extensions, the server port of the Sun Java System Directory Server must be configured
as a multilevel port (MLP)
in the global zone.</para>
</tasksummary>
<procedure>
<step>
<para>Launch the Solaris Management Console, and navigate to the Trusted Network Zone tool.</para>
</step>
<step>
<para>Double-click the global zone.</para>
</step>
<step>
<para>For the TCP protocol, do the following:</para>
<substeps>
<step>
<para>Click Add for the Multilevel Ports for Zone's IP Addresses.</para>
</step>
<step>
<para>Type 389 for the port number, and click OK.</para>
</step>
</substeps>
</step>
<step>
<para>For the UDP protocol, do the following:</para>
<substeps>
<step>
<para>Click Add for the Multilevel Ports for Zone's IP Addresses.</para>
</step>
<step>
<para>After typing 389, choose the udp protocol, and click OK.</para>
</step>
</substeps>
</step>
<step>
<para>Click OK to save the settings.</para>
</step>
<step>
<para>Update the kernel.</para>
<screen># <userinput>tnctl -fz /etc/security/tsol/tnzonecfg</userinput>
</screen>
</step>
</procedure>
</task>
</sect2>
<sect2>
<title/>
<task id="txldap-2">

<title>Populate the Sun Java System Directory Server</title>
<indexterm xml:id="indexterm-266">
<primary>Trusted Extensions configuration</primary>
<secondary>adding network databases to LDAP server</secondary>
</indexterm>
<tasksummary>
<para>Several LDAP databases have been created or modified to hold Trusted Extensions data
about label configuration, users, and remote hosts.</para>
</tasksummary>
<procedure>
<step>
<para>
<indexterm xml:id="indexterm-267">
<primary>directories</primary>
<secondary>for naming service setup</secondary>
</indexterm>Create a staging area for files that you plan to use to populate
the naming service databases.</para>
<screen># <userinput>mkdir -p /setup/files</userinput>
</screen>
</step>
<step>
<para>Copy the sample <filename class="directory">/etc</filename> files
into the staging area.</para>
<screen># <userinput>cd /etc</userinput>
# <userinput>cp aliases group networks netmasks protocols /setup/files</userinput>
# <userinput>cp rpc services auto_master /setup/files</userinput>

# <userinput>cd /etc/security</userinput>
# <userinput>cp auth_attr prof_attr exec_attr /setup/files/</userinput>
#
# <userinput>cd /etc/security/tsol</userinput>
# <userinput>cp tnrhdb tnrhtp /setup/files</userinput>
#
# <userinput>cd /etc/inet</userinput>
# <userinput>cp ipnodes /setup/files</userinput>
</screen>
</step>
<step>
<para>Remove the <literal>+auto_master</literal> entry from the <filename>/setup/files/auto_master</filename> file.</para>
</step>
<step>
<para>Remove the <literal>?:::::?</literal> entry from the <filename>/setup/files/auth_attr</filename> file.</para>
</step>
<step>
<para>Create the zone automaps in the staging area.</para>
<itemizedlist>
<para>In the following list of automaps, the first of each pair of lines shows
the name of the file. The second line of each pair shows the file contents.
The zone names identify labels from the default <filename>label_encodings</filename> file
that is shipped with the Trusted Extensions software.</para>
<listitem>
<para>Substitute your zone names for the zone names in these lines.</para>
</listitem>
<listitem>
<para>
<replaceable>myNFSserver</replaceable> identifies the NFS
server for the home directories</para>
</listitem>
</itemizedlist>
<screen>/setup/files/auto_home_public
 * <replaceable>myNFSserver</replaceable>_FQDN:/zone/public/root/export/home/&amp;

/setup/files/auto_home_internal
 * <replaceable>myNFSserve</replaceable>r_FQDN:/zone/internal/root/export/home/&amp;

/setup/files/auto_home_needtoknow
 * <replaceable>myNFSserver</replaceable>_FQDN:/zone/needtoknow/root/export/home/&amp;

/setup/files/auto_home_restricted
 * <replaceable>myNFSserver</replaceable>_FQDN:/zone/restricted/root/export/home/&amp;</screen>
</step>
<step>
<para>Add every host on the network to the <filename>/setup/files/tnrhdb</filename> file. </para>
<para>No wildcard mechanism can be used here. The IP address of every
host to be contacted <emphasis>must</emphasis> be in this file. This includes
the IP addresses of labeled zones.</para>
<substeps>
<step>
<para>Open the Admin Editor and edit <filename>/setup/files/tnrhdb</filename>.</para>
</step>
<step>
<para>Add every IP address on a labeled host in the Trusted Extensions domain.</para>
<para>Labeled hosts are of type <literal>cipso</literal>. In the default configuration,
a cipso entry is similar to the following:</para>
<screen>192.168.25.2:cipso</screen>
<note>

<para>This list includes the IP addresses of global zones and of labeled
zones.</para>
</note>
</step>
<step>
<para>Add every unlabeled host with which the domain can communicate.</para>
<para>Unlabeled hosts are of type <literal>unlabeled</literal>. In the default
configuration, <literal>admin_low</literal> is the template name for an unlabeled
host:</para>
<screen>192.168.35.2:admin_low</screen>
</step>
<step>
<para>Save the file and exit the editor.</para>
</step>
<step>
<para>Check the syntax of the file.</para>
<screen># <userinput>tnchkdb -h /setup/files/tnrhdb</userinput>
</screen>
<para>Fix any errors before continuing.</para>
</step>
</substeps>
</step>
<step>
<para>Copy the <filename>/setup/files/tnrhdb</filename> file to <filename>/etc/security/tsol/tnrhdb</filename>.</para>
<para>At this point, these two files should be identical.</para>
</step>
<step xml:id="nisp-step-64">
<para>Use the <command>ldapaddent</command> command
to populate every file in the staging area.</para>
<screen># <userinput>/usr/sbin/ldapaddent -D "cn=directory manager" \
-w dirmgr123 -a simple -f /setup/files/hosts hosts</userinput>
</screen>
</step>
</procedure>
</task>
</sect2>
</sect1>
<sect1 xml:id="txconf-37">
<title>Using a Proxy for the Sun Java System Directory Server (Tasks)</title>
<indexterm xml:id="indexterm-268">
<primary>LDAP server</primary>
<secondary>configuring proxy for Trusted Extensions clients</secondary>
</indexterm>
<indexterm xml:id="indexterm-269">
<primary>configuring</primary>
<secondary>LDAP proxy server for Trusted Extensions clients</secondary>
</indexterm>
<para>First, you need to add the Trusted Extensions databases to the server. Second,
to enable Trusted Extensions hosts to access the directory server, you then make
one Trusted Extensions host an LDAP proxy server.</para>
<sect2>
<title/>
<task id="txldap-6">

<title>Create an LDAP Proxy Server</title>
<indexterm xml:id="indexterm-270">
<primary>LDAP server</primary>
<secondary>creating proxy for Trusted Extensions clients</secondary>
</indexterm>
<indexterm xml:id="indexterm-271">
<primary>creating</primary>
<secondary>LDAP proxy server for Trusted Extensions clients</secondary>
</indexterm>
<tasksummary>
<para>If an LDAP server already exists at your site, create a proxy server
on a Trusted Extensions host.</para>
</tasksummary>
<procedure>
<step>
<para>On a system that is configured with Trusted Extensions, create a proxy
server.</para>
</step>
<step>
<para>Add the Trusted Extensions databases to the LDAP server.</para>
<para>For
details, see <olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-2">Populate the Sun Java System Directory
Server</olink>.</para>
</step>
<step>
<para>Verify that Trusted Extensions databases can be viewed by the proxy
server.</para>
<screen># <userinput>ldaplist -l</userinput> <replaceable>database</replaceable>
</screen>
</step>
</procedure>
<taskrelated role="troubleshooting">

<para>For strategies to solve LDAP configuration problems, see <olink remap="external" targetdoc="819-3194" targetptr="setupproblems-1">Chapter 13, <citetitle remap="chapter">LDAP Troubleshooting (Reference),</citetitle> in <citetitle remap="book">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</citetitle>
</olink>.</para>
</taskrelated>
</task>
</sect2>
</sect1>
<sect1 xml:id="confsys-10">
<title>Configuring the Solaris Management Console for LDAP (Tasks)</title>
<indexterm xml:id="indexterm-272">
<primary>Solaris Management Console</primary>
<secondary>working with Sun Java System Directory Server</secondary>
</indexterm>
<indexterm xml:id="indexterm-273">
<primary>Solaris Management Console</primary>
<secondary>configuring for LDAP</secondary>
</indexterm>
<indexterm xml:id="indexterm-274">
<primary>configuring</primary>
<secondary>Solaris Management Console for LDAP</secondary>
</indexterm>
<indexterm xml:id="indexterm-275">
<primary>tasks and task maps</primary>
<secondary>Configuring the Solaris Management Console for LDAP (Tasks)</secondary>
</indexterm>
<indexterm xml:id="indexterm-276">
<primary>Configuring the Solaris Management Console for LDAP (Tasks)</primary>
</indexterm>
<para>The Solaris Management Console is the GUI for administering the network of systems that are
running Trusted Extensions.</para>
<informaltable frame="topbot" pgwide="1">
<tgroup cols="3" colsep="1" rowsep="1">
<colspec colname="colspec2" colwidth="21.17*"/>
<colspec colname="colspec1" colwidth="41.68*"/>
<colspec colname="colspec0" colwidth="36.12*"/>
<thead>
<row>
<entry>
<para>Task</para>
</entry>
<entry>
<para>Description</para>
</entry>
<entry>
<para>For Instructions</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>Register credentials</para>
</entry>
<entry>
<para>Authenticate the Solaris Management Console with the LDAP server.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-11">Register LDAP Credentials With the Solaris
Management Console</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Enable LDAP administration on a system</para>
</entry>
<entry>
<para>By default, LDAP administration is turned off at installation. You explicitly
enable particular systems to be LDAP administration systems.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-19">Enable an LDAP Client to Administer LDAP</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Create the LDAP toolbox</para>
</entry>
<entry>
<para>Create the LDAP toolbox in the Solaris Management Console for Trusted Extensions.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-7">Edit the LDAP Toolbox in the Solaris Management
Console</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Initialize the Solaris Management Console</para>
</entry>
<entry>
<para>Initialize the Solaris Management Console. This procedure is done once per system in the
global zone.</para>
</entry>
<entry>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="confsys-21">Initialize the Solaris Management Console
Server</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Verify that the Solaris Management Console is communicating with the LDAP server</para>
</entry>
<entry>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="chapter-4.xml" targetptr="txldap-8">Make the Global Zone an LDAP Client</olink>
</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
<sect2>
<title/>
<task id="txldap-11">

<title>Register LDAP Credentials With the Solaris Management Console</title>
<indexterm xml:id="indexterm-277">
<primary>credentials</primary>
<secondary>registering LDAP administrative</secondary>
</indexterm>
<indexterm xml:id="indexterm-278">
<primary>registering</primary>
<secondary>LDAP administrative credentials</secondary>
</indexterm>
<indexterm xml:id="indexterm-279">
<primary>Solaris Management Console</primary>
<secondary>registering LDAP credentials</secondary>
</indexterm>
<indexterm xml:id="indexterm-280">
<primary>LDAP server</primary>
<secondary>registering credentials with Solaris Management Console</secondary>
</indexterm>
<taskprerequisites>

<para>You must be the <literal>root</literal> user on an LDAP server that
is running Trusted Extensions. The server can be a proxy server.</para>
<itemizedlist>
<para>Your Sun Java System Directory Server must be configured. You have completed one of the following
configurations:</para>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-16">Configuring an LDAP Server on
a Trusted Extensions Host (Task Map)</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-18">Configuring an LDAP Proxy Server
on a Trusted Extensions Host (Task Map)</olink>
</para>
</listitem>
</itemizedlist>
</taskprerequisites>
<procedure>
<step>
<para>Register the LDAP administrative credentials.</para>
<screen># <userinput>/usr/sadm/bin/dtsetup storeCred</userinput>
Administrator DN:<lineannotation>Type the value for cn on your system</lineannotation>
Password:<lineannotation>Type the Directory Manager password</lineannotation>
Password (confirm):<lineannotation>Retype the password</lineannotation>
</screen>
</step>
<step>
<para>Verify communication with the directory service.</para>
<screen># <userinput>/usr/sadm/bin/dtsetup scopes</userinput>
Getting list of manageable scopes...
Scope 1 file:<lineannotation>Displays name of file scope</lineannotation>
Scope 2 ldap:<lineannotation>Displays name of ldap scope</lineannotation>
</screen>
</step>
</procedure>
<example xml:id="gcmni">

<title>Registering LDAP Credentials</title>
<para>In this case, the name of the LDAP server is <literal>LDAP1</literal>,
the name of the LDAP client is <literal>myhost</literal>, and the value for <literal>cn</literal> is the default, <literal>Directory Manager</literal>.</para>
<screen># <userinput>/usr/sadm/bin/dtsetup storeCred</userinput>
Administrator DN:<userinput>cn=Directory Manager</userinput>
Password:<userinput>abcde1;!</userinput>
Password (confirm):<userinput>abcde1;!</userinput>
# <userinput>/usr/sadm/bin/dtsetup scopes</userinput>
Getting list of manageable scopes...
Scope 1 file:/myhost/myhost
Scope 2 ldap:/myhost/cd=myhost,dc=example,dc=com</screen>
</example>
</task>
</sect2>
<sect2>
<title/>
<task id="txldap-19">

<title>Enable an LDAP Client to Administer
LDAP</title>
<indexterm xml:id="indexterm-281">
<primary>LDAP</primary>
<secondary>enabling administration from a client</secondary>
</indexterm>
<indexterm xml:id="indexterm-282">
<primary>enabling</primary>
<secondary>LDAP administration from a client</secondary>
</indexterm>
<indexterm xml:id="indexterm-283">
<primary>
<literal>tcp_listen=true</literal> LDAP setting</primary>
</indexterm>
<indexterm xml:id="indexterm-284">
<primary>Solaris Management Console</primary>
<secondary>enabling LDAP toolbox to be used</secondary>
</indexterm>
<tasksummary>
<para>By default, systems are installed to not listen on ports that present
security risks. Therefore, you must explicitly turn on network communication
with the LDAP server. You should perform this procedure only on systems from
which you plan to administer your network of systems and users.</para>
</tasksummary>
<taskprerequisites>

<para>You must be the <literal>root</literal> user or in the Security Administrator
role in the global zone.</para>
</taskprerequisites>
<procedure role="single-step">
<step>
<para>Enable the system to administer LDAP.</para>
<screen># <userinput>svccfg -s wbem setprop options/tcp_listen=true</userinput>
</screen>
</step>
</procedure>
</task>
</sect2>
<sect2>
<title/>
<task id="txldap-7">

<title>Edit the LDAP Toolbox in the Solaris Management Console</title>
<indexterm xml:id="indexterm-285">
<primary>toolboxes</primary>
<secondary>adding LDAP server to <filename>tsol_ldap.tbx</filename>
</secondary>
</indexterm>
<indexterm xml:id="indexterm-286">
<primary>adding</primary>
<secondary>LDAP toolbox</secondary>
</indexterm>
<indexterm xml:id="indexterm-287">
<primary>creating</primary>
<secondary>LDAP toolbox</secondary>
</indexterm>
<indexterm xml:id="indexterm-288">
<primary>
<filename>tsol_ldap.tbx</filename> file</primary>
</indexterm>
<indexterm xml:id="indexterm-289">
<primary>Solaris Management Console</primary>
<secondary>configuring LDAP toolbox</secondary>
</indexterm>
<taskprerequisites>

<para>You must be the <literal>root</literal> user.</para>
<para>Specifically, you must know the output of the <command>/usr/sadm/bin/dtsetup
scopes</command> command. For details, see <olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-11">Register
LDAP Credentials With the Solaris Management Console</olink>.</para>
</taskprerequisites>
<procedure>
<step>
<para>Find the LDAP toolbox.</para>
<screen># <userinput>cd /var/sadm/smc/toolboxes/tsol_ldap</userinput>
# <userinput>ls *tbx</userinput>
tsol_ldap.tbx</screen>
</step>
<step>
<para>Provide the LDAP server name.</para>
<substeps>
<step>
<para>Open the Admin Editor.</para>
</step>
<step>
<para>Copy and paste the full pathname of the <filename>tsol_ldap.tbx</filename> toolbox
into the dialog box.</para>
<para>For example, the following path is the default
location of the LDAP toolbox:</para>
<screen>/var/sadm/smc/toolboxes/tsol_ldap/tsol_ldap.tbx</screen>
</step>
<step>
<para>Replace the scope information.</para>
<para>Replace the <literal>server</literal> tags between the <literal>&lt;Scope&gt;
</literal> and <literal>&lt;/Scope&gt;
</literal> tags with the output of the <literal>ldap:/......</literal> line
from the <command>/usr/sadm/bin/dtsetup scopes</command> command.</para>
<screen>&lt;Scope&gt;ldap:/&lt;<replaceable>myhost</replaceable>&gt;/&lt;dc=<replaceable>domain</replaceable>,dc=<replaceable>suffix</replaceable>&gt;&lt;/Scope&gt;
</screen>
</step>
<step>
<para>Replace <literal>server</literal>.</para>
<para>Replace every instance
of <literal>&lt;?server?&gt;
</literal> or <literal>&lt;?server ?&gt;
</literal> with
the LDAP server, as in:</para>
<screen>&lt;Name&gt; <replaceable>ldap-server-name</replaceable>: Scope=ldap, Policy=TSOL&lt;/Name&gt;
services and configuration of <replaceable>ldap-server-name</replaceable>.&lt;/Description&gt;
and configuring <replaceable>ldap-server-name</replaceable>.&lt;/Description&gt;
&lt;ServerName&gt;
<replaceable>ldap-server-name</replaceable>&lt;/ServerName&gt;
&lt;ServerName&gt;
<replaceable>ldap-server-name</replaceable>&lt;/ServerName&gt;
</screen>
</step>
<step>
<para>Save <literal>(:wq!)</literal> and close the file.</para>
</step>
</substeps>
</step>
<step>
<para>Stop and start the daemon.</para>
<para>The <command>smc</command> daemon
is controlled by the <command>wbem</command> service.</para>
<screen># <userinput>svcadm disable wbem</userinput>
# <userinput>svcadm enable wbem</userinput>
</screen>
</step>
</procedure>
<example xml:id="txldap-17">

<title>Configuring the LDAP Toolbox</title>
<para>In this case, the name of the LDAP server is <literal>LDAP1</literal>.</para>
<screen>&lt;Name&gt;
<userinput>LDAP1</userinput>: Scope=ldap, Policy=TSOL&lt;/Name&gt;
services and configuration of <userinput>LDAP1</userinput>.&lt;/Description&gt;
and configuring <userinput>LDAP1</userinput>.&lt;/Description&gt;
&lt;ServerName&gt;
<userinput>LDAP1</userinput>&lt;/ServerName&gt;
&lt;ServerName&gt;
<userinput>LDAP1</userinput>&lt;/ServerName&gt;
</screen>
</example>
</task>
</sect2>
<sect2>
<title/>
<task id="confsys-21">

<title>Initialize the Solaris Management Console Server</title>
<indexterm xml:id="indexterm-290">
<primary>Solaris Management Console</primary>
<secondary>initializing</secondary>
</indexterm>
<indexterm xml:id="indexterm-291">
<primary>initializing</primary>
<secondary>Solaris Management Console</secondary>
</indexterm>
<indexterm xml:id="indexterm-292">
<primary>Solaris Management Console</primary>
<secondary>loading a Trusted Extensions toolbox</secondary>
</indexterm>
<indexterm xml:id="indexterm-293">
<primary>toolboxes</primary>
<secondary>loading in Trusted Extensions</secondary>
</indexterm>
<indexterm xml:id="indexterm-294">
<primary>Solaris Management Console</primary>
<secondary>troubleshooting</secondary>
</indexterm>
<indexterm xml:id="indexterm-295">
<primary>troubleshooting</primary>
<secondary>Solaris Management Console</secondary>
</indexterm>
<taskprerequisites>

<para>You must be the <literal>root</literal> user.</para>
<para>To view the LDAP toolbox, you must have completed <olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-7">Edit the LDAP Toolbox in the Solaris Management Console</olink>.</para>
</taskprerequisites>
<procedure>
<step>
<para>Start the Solaris Management Console server process.</para>
<screen># <userinput>/usr/sbin/smc &amp;</userinput>
</screen>
<note>

<para>The first time the Solaris Management Console server is launched, it performs several
registration tasks. These tasks can take a few minutes.</para>
</note>
</step>
<step xml:id="confsys-trouble-1">
<para>
<indexterm xml:id="indexterm-296">
<primary>troubleshooting</primary>
<secondary>Solaris Management Console</secondary>
</indexterm>
<indexterm xml:id="indexterm-297">
<primary>Solaris Management Console</primary>
<secondary>troubleshooting</secondary>
</indexterm>Do one of the following if toolbox icons do not appear in the Solaris Management Console.</para>
<stepalternatives>
<step xml:id="txconf-nav-1">
<para>If the Navigation pane is not visible:</para>
<substeps>
<step>
<para>In the Open Toolbox dialog that is displayed, click Load next
to this machine's name under Server.</para>
<para>If this machine does not
have the recommended amount of memory and swap, it might take a few minutes
for the toolboxes to display. For recommendations, see <olink remap="external" targetdoc="chapter-3.xml" targetptr="startinst-4">Installing or Upgrading the Solaris OS for Trusted
Extensions (Tasks)</olink>.</para>
</step>
<step>
<para>From the list of toolboxes, select one whose Policy=TSOL.</para>
<para>Your choice depends on which scope you want to influence. To edit local
files, choose the Files scope. To edit LDAP databases, choose the LDAP scope.
Do not choose the computer that has no policy.</para>
</step>
<step>
<para>Click Open.</para>
</step>
</substeps>
</step>
<step>
<para>If the Navigation pane is visible, but the toolbox icons are stop
signs:</para>
<substeps>
<step>
<para>Exit the Solaris Management Console.</para>
<para>Choose Exit from the Console pull-down
men</para>
</step>
<step>
<para>Restart the Solaris Management Console.</para>
<screen># <userinput>/usr/sbin/smc &amp;</userinput>
</screen>
</step>
<step>
<para>Follow the instructions in <olink remap="internal" targetdoc="chapter-5.xml" targetptr="txconf-nav-1">Step 3</olink>.</para>
<figure xml:id="txconf-12">

<title>Solaris Management Console Tools</title>
<mediaobject>
<imageobject>
<imagedata fileref="figures/smc.navpanel.gif"/>
</imageobject>
<textobject>
<simpara>Window shows the System Configuration node with the Users
tools and the Computers and Networks tools.</simpara>
</textobject>
</mediaobject>
</figure>
</step>
</substeps>
</step>
</stepalternatives>
</step>
<step performance="optional">

<para>Save the current toolbox.</para>
<para>Saving
a <literal>Policy=TSOL</literal> toolbox enables a Trusted Extensions toolbox
to load by default. Preferences are saved per role, per host. The host is
the Solaris Management Console server.</para>
<substeps>
<step>
<para>From the Console menu, choose Preferences.</para>
<para>The Home
Toolbox is selected.</para>
</step>
<step>
<para>Define a <literal>Policy=TSOL</literal> toolbox as the home toolbox.</para>
<para>Put the current toolbox in the Location field by clicking the Use Current
Toolbox button.</para>
</step>
<step>
<para>Click OK to save the preferences.</para>
</step>
</substeps>
</step>
<step>
<para>Close the Solaris Management Console.</para>
</step>
<step>
<para>Register the LDAP credentials with the Solaris Management Console.</para>
<screen># <userinput>/usr/sadm/bin/dtsetup scopes</userinput>
Getting list of managable scopes...
Scope 1 file:/myhost/myhost &lt;../../../../myhost/myhost&gt;
Scope 2 ldap:/myhost/dc=example-domain,dc=com &lt;ldap:///myhost/dc=example-domain,dc=com&gt;
</screen>
<para>Your LDAP server setup determines the LDAP scopes that are listed. Once
the server is registered, the LDAP toolbox can now be used.</para>
</step>
</procedure>
</task>
</sect2>
<sect2>
<title/>
<task id="txldap-9">

<title>Verify That the Solaris Management Console Contains Trusted Extensions Information</title>
<taskprerequisites>

<para>You must be logged in to an LDAP client in an administrative role, or
as superuser. To make a system an LDAP client, see <olink remap="external" targetdoc="chapter-4.xml" targetptr="txldap-8">Make
the Global Zone an LDAP Client</olink>.</para>
<para>To use the LDAP toolbox, you must have completed <olink remap="internal" targetdoc="chapter-5.xml" targetptr="txldap-7">Edit the LDAP Toolbox in the Solaris Management Console</olink> and <olink remap="internal" targetdoc="chapter-5.xml" targetptr="confsys-21">Initialize the Solaris Management Console Server</olink>.</para>
</taskprerequisites>
<procedure>
<step>
<para>Start the Solaris Management Console.</para>
<screen># <userinput>/usr/sbin/smc &amp;</userinput>
</screen>
</step>
<step>
<para>Open a Trusted Extensions toolbox.</para>
<para>A Trusted Extensions toolbox
has the value <literal>Policy=TSOL</literal>.</para>
<stepalternatives>
<step>
<para>To check that local files can be accessed, open the This Computer (<replaceable>this-host</replaceable>: <literal>Scope=Files, Policy=TSOL</literal>) toolbox.</para>
</step>
<step>
<para>To check that databases on the LDAP server can be accessed, open
the This Computer (<replaceable>this-host</replaceable>: <literal>Scope=LDAP, Policy=TSOL</literal>) toolbox.</para>
</step>
</stepalternatives>
</step>
<step>
<para>Navigate to Computers and Networks, then Security Templates.</para>
</step>
<step>
<para>Check that the correct templates and labels have been applied
to remote hosts.</para>
</step>
<step>
<para>To troubleshoot LDAP configuration, see <olink remap="external" targetdoc="819-3194" targetptr="setupproblems-1">Chapter 13, <citetitle remap="chapter">LDAP Troubleshooting (Reference),</citetitle> in <citetitle remap="book">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</citetitle>
</olink>.</para>
</step>
</procedure>
</task>
</sect2>
</sect1>
</chapter>
