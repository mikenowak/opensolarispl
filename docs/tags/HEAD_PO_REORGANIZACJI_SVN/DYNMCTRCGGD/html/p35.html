<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- GenHTML@17046-->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Options and Tunables - Solaris Dynamic Tracing Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2005-09-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >Solaris Dynamic Tracing Guide<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="5"></td></tr>
<tr>
<td></td>
<td style="width: 60%">&nbsp;</td>
<td><a href="p34.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p36.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<!--startindex-->
<div class="maincontent">
<a name="chp-opt"></a>Chapter&nbsp;16<h3>Options and Tunables</h3><p>To allow for customization, DTrace affords its consumers several important degrees of freedom. To minimize the likelihood of requiring specific tuning, DTrace is implemented using reasonable default values and flexible default policies. However, situations may arise that require tuning the behavior of DTrace on a consumer-by-consumer basis. This chapter describes the DTrace options and tunables and the interfaces you can use to modify them.</p>
<a name="chp-opt-1"></a><h3>Consumer Options</h3>
<p><a name="indexterm-281"></a><a name="indexterm-282"></a><a name="indexterm-283"></a>DTrace is tuned by setting or enabling options. The available options are described in the table below. For some options, <tt>dtrace</tt>(1M) provides a corresponding command-line option.</p>
<a name="tbl-options"></a>Table 16-1 DTrace Consumer Options<table><tr><th><p>Option Name</p>
</th><th><p>Value</p>
</th><th><p><tt>dtrace</tt>(1M) Alias</p>
</th><th><p>Description</p>
</th><th><p>See Chapter</p>
</th></tr>
<tr><td><p><tt>aggrate</tt></p>
</td><td><p><i>time</i></p>
</td><td></td><td><p>Rate of aggregation reading</p>
</td><td><p><a href="p19.html">Chapter&nbsp;9, Aggregations</a></p>
</td></tr>
<tr><td><p><tt>aggsize</tt></p>
</td><td><p><i>size</i></p>
</td><td></td><td><p>Aggregation buffer size</p>
</td><td><p><a href="p19.html">Chapter&nbsp;9, Aggregations</a></p>
</td></tr>
<tr><td><p><tt>bufresize</tt></p>
</td><td><p><tt>auto</tt> or <tt>manual</tt></p>
</td><td></td><td><p>Buffer resizing policy</p>
</td><td><p><a href="p25.html">Chapter&nbsp;11, Buffers and Buffering</a></p>
</td></tr>
<tr><td><p><tt>bufsize</tt></p>
</td><td><p><i>size</i></p>
</td><td><p><tt>-b</tt></p>
</td><td><p>Principal buffer size</p>
</td><td><p><a href="p25.html">Chapter&nbsp;11, Buffers and Buffering</a></p>
</td></tr>
<tr><td><p><tt>cleanrate</tt></p>
</td><td><p><i>time</i></p>
</td><td></td><td><p>Cleaning rate</p>
</td><td><p><a href="p30.html">Chapter&nbsp;13, Speculative Tracing</a></p>
</td></tr>
<tr><td><p><tt>cpu</tt></p>
</td><td><p><i>scalar</i></p>
</td><td><p><tt>-c</tt></p>
</td><td><p>CPU on which to enable tracing</p>
</td><td><p><a href="p25.html">Chapter&nbsp;11, Buffers and Buffering</a></p>
</td></tr>
<tr><td><p><tt>defaultargs</tt></p>
</td><td><p>&mdash;</p>
</td><td></td><td><p>Allow references to unspecified macro arguments</p>
</td><td><p><a href="p33.html">Chapter&nbsp;15, Scripting</a></p>
</td></tr>
<tr><td><p><tt>destructive</tt></p>
</td><td><p>&mdash;</p>
</td><td><p><tt>-w</tt></p>
</td><td><p>Allow destructive actions</p>
</td><td><p><a href="p21.html">Chapter&nbsp;10, Actions and Subroutines</a></p>
</td></tr>
<tr><td><p><tt>dynvarsize</tt></p>
</td><td><p><i>size</i></p>
</td><td></td><td><p>Dynamic variable space size</p>
</td><td><p><a href="p10.html">Chapter&nbsp;3, Variables</a></p>
</td></tr>
<tr><td><p><tt>flowindent</tt></p>
</td><td><p>&mdash;</p>
</td><td><p><tt>-F</tt></p>
</td><td><p>Indent function entry and prefix with <tt>-></tt>; unindent function return and prefix with <tt>&lt;-</tt></p>
</td><td><p><a href="p31.html">Chapter&nbsp;14, <tt>dtrace</tt>(1M) Utility</a></p>
</td></tr>
<tr><td><p><tt>grabanon</tt></p>
</td><td><p>&mdash;</p>
</td><td><p><tt>-a</tt></p>
</td><td><p>Claim anonymous state</p>
</td><td><p><a href="p61.html">Chapter&nbsp;36, Anonymous Tracing</a></p>
</td></tr>
<tr><td><p><tt>jstackframes</tt></p>
</td><td><p><i>scalar</i></p>
</td><td></td><td><p>Number of default stack frames <tt>jstack()</tt></p>
</td><td><p><a href="p21.html">Chapter&nbsp;10, Actions and Subroutines</a></p>
</td></tr>
<tr><td><p><tt>jstackstrsize</tt></p>
</td><td><p><i>scalar</i></p>
</td><td></td><td><p>Default string space size for <tt>jstack()</tt></p>
</td><td><p><a href="p21.html">Chapter&nbsp;10, Actions and Subroutines</a></p>
</td></tr>
<tr><td><p><tt>nspec</tt></p>
</td><td><p><i>scalar</i></p>
</td><td></td><td><p>Number of speculations</p>
</td><td><p><a href="p30.html">Chapter&nbsp;13, Speculative Tracing</a></p>
</td></tr>
<tr><td><p><tt>quiet</tt></p>
</td><td><p>&mdash;</p>
</td><td><p><tt>-q</tt></p>
</td><td><p>Output only explicitly traced data</p>
</td><td><p><a href="p31.html">Chapter&nbsp;14, <tt>dtrace</tt>(1M) Utility</a></p>
</td></tr>
<tr><td><p><tt>specsize</tt></p>
</td><td><p><i>size</i></p>
</td><td><p></p>
</td><td><p>Speculation buffer size</p>
</td><td><p><a href="p30.html">Chapter&nbsp;13, Speculative Tracing</a></p>
</td></tr>
<tr><td><p><tt>strsize</tt></p>
</td><td><p><i>size</i></p>
</td><td></td><td><p>String size</p>
</td><td><p><a href="p15.html">Chapter&nbsp;6, Strings</a></p>
</td></tr>
<tr><td><p><tt>stackframes</tt></p>
</td><td><p><i>scalar</i></p>
</td><td></td><td><p>Number of stack frames</p>
</td><td><p><a href="p21.html">Chapter&nbsp;10, Actions and Subroutines</a></p>
</td></tr>
<tr><td><p><tt>stackindent</tt></p>
</td><td><p><i>scalar</i></p>
</td><td></td><td><p>Number of whitespace characters to use when indenting <tt>stack()</tt> and <tt>ustack()</tt> output</p>
</td><td><p><a href="p21.html">Chapter&nbsp;10, Actions and Subroutines</a></p>
</td></tr>
<tr><td><p><tt>statusrate</tt></p>
</td><td><p><i>time</i></p>
</td><td></td><td><p>Rate of status checking</p>
</td><td><p></p>
</td></tr>
<tr><td><p><tt>switchrate</tt></p>
</td><td><p><i>time</i></p>
</td><td></td><td><p>Rate of buffer switching</p>
</td><td><p><a href="p25.html">Chapter&nbsp;11, Buffers and Buffering</a></p>
</td></tr>
<tr><td><p><tt>ustackframes</tt></p>
</td><td><p><i>scalar</i></p>
</td><td></td><td><p>Number of user stack frames</p>
</td><td><p><a href="p21.html">Chapter&nbsp;10, Actions and Subroutines</a></p>
</td></tr>
</table><p>Values that denote sizes may be given an optional suffix of <tt>k</tt>, <tt>m</tt>, <tt>g</tt>, or <tt>t</tt> to denote kilobytes, megabytes, gigabytes, and terabytes respectively. Values that denote times may be given an optional suffix of <tt>ns</tt>, <tt>us</tt>, <tt>ms</tt>, <tt>s</tt> or <tt>hz</tt> to denote nanoseconds, microseconds, milliseconds, seconds, and number-per-second, respectively.</p>
<a name="chp-opt-2"></a><h3>Modifying Options</h3>
<p><a name="indexterm-284"></a><a name="indexterm-285"></a><a name="indexterm-286"></a>Options may be set in a D script by using <tt>#pragma D</tt> followed by the string <tt>option</tt> and the option name. If the option takes a value, the option name should be followed by an equals sign (<tt>=</tt>) and the option value. The following examples are all valid option settings:</p>
<pre>#pragma D option nspec=4
#pragma D option grabanon
#pragma D option bufsize=2g
#pragma D option switchrate=10hz
#pragma D option aggrate=100us
#pragma D option bufresize=manual</pre><p>The <tt>dtrace</tt>(1M) command also accepts option settings on the command-line as an argument to the <tt>-x</tt> option. For example:</p>
<pre><tt><b># dtrace -x nspec=4 -x grabanon -x bufsize=2g \</b></tt>
    <tt><b>-x switchrate=10hz -x aggrate=100us -x bufresize=manual</b></tt></pre><p>If an invalid option is specified, <tt>dtrace</tt> indicates that the option name is invalid and exits:</p>
<pre><tt><b># dtrace -x wombats=25</b></tt>
dtrace: failed to set option -x wombats: Invalid option name
#</pre><p>Similarly, if an option value is not valid for the given option, <tt>dtrace</tt> will indicate that the value is invalid:</p>
<pre><tt><b># dtrace -x bufsize=100wombats</b></tt>
dtrace: failed to set option -x bufsize: Invalid value for specified option
#</pre><p>If an option is set more than once, subsequent settings overwrite earlier settings. Some options, such as <tt>grabanon</tt>, may <b>only</b> be set. The presence of such an option sets it, and you cannot subsequently unset it.</p>
<p>Options that are set for an anonymous enabling will be honored by the DTrace consumer that claims the anonymous state. See <a href="p61.html">Chapter&nbsp;36, Anonymous Tracing</a> for information about enabling anonymous tracing.</p>

</div>
<!--stopindex-->

<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p34.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td><a href="idx-1.html">Index</a></td>
<td><a href="p36.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2007 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

