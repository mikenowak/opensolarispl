<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 1. Solaris Flash (Overview)</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)"><link rel="up" href="index.html" title="Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)"><link rel="prev" href="pr01s05.html" title="Shell Prompts
in Command Examples"><link rel="next" href="ch02.html" title="Chapter 2. Solaris Flash (Planning)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 1. Solaris Flash (Overview)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pr01s05.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch02.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="flash-24"></a>Chapter 1. Solaris Flash (Overview)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch01.html#flashoverview-2">Solaris Flash Introduction</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch01.html#flashoverview-36">Installing Clone Systems With an Initial Installation</a></span></dt><dt><span class="sect2"><a href="ch01.html#flashoverview-37">Updating Clone Systems With a Solaris Flash Differential
Archive</a></span></dt></dl></dd></dl></div>





<div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="flashoverview-2"></a>Solaris Flash Introduction</h2></div></div></div>

<a class="indexterm" name="indexterm-1"></a>
<a class="indexterm" name="indexterm-2"></a>
<a class="indexterm" name="indexterm-3"></a>
<a class="indexterm" name="indexterm-4"></a>
<a class="indexterm" name="indexterm-5"></a>
<a class="indexterm" name="indexterm-6"></a>
<a class="indexterm" name="indexterm-7"></a>
<p>
<a class="indexterm" name="indexterm-8"></a>The Solaris Flash installation feature
enables you to use a single reference installation of the Solaris OS on a system,
which is called the master system. Then, you can replicate that installation on a
number of systems, which are called clone systems. You can replicate clone systems
with a Solaris Flash initial installation that overwrites all files on the system
or with a Solaris Flash update that only includes the differences between two
system images. A differential update changes only the files that are specified and
is restricted to systems that contain software consistent with the old master image.</p>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="flashoverview-36"></a>Installing Clone Systems With an Initial Installation</h3></div></div></div>

<p>
<a class="indexterm" name="indexterm-9"></a>You can install a master system with a Solaris Flash archive for
an initial installation by using any installation method: Solaris installation program, custom JumpStart,
Solaris Live Upgrade, or WAN boot. All files are overwritten. The Solaris Flash installation
is a five-part process.</p>
<div class="orderedlist"><ol type="1"><li>
<p>Install the master system. You select a system and use any of the
Solaris installation methods to install the Solaris OS and any other software.</p>
</li><li>
<p>(Optional) Prepare customization scripts to reconfigure or customize
the clone system before or after installation.</p>
</li><li>
<p>Create the Solaris Flash archive. The Solaris Flash archive
contains a copy of all of the files on the master system, unless you excluded some
nonessential files.</p>
</li><li>
<p>Install the Solaris Flash archive on clone systems. The master
system and the clone system must have the same kernel architecture.</p>
<p>When
you install the Solaris Flash archive on a system, all of the files in the archive
are copied to that system. The newly installed system now has the same installation
configuration as the original master system, thus the system is called a clone system.
Some customization is possible:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Scripts can be used for customization.</p>
</li><li>
<p>You can install extra packages with a Solaris Flash archive by
using the custom JumpStart installation method. The packages must be from outside
the software group being installed or a third-party package.</p>
</li></ul></div>
</li><li>
<p>(Optional) Save a copy of the master image. If you plan to create
a differential archive, the master image must be available and identical to the image
installed on the clone systems.</p>
</li></ol></div>
<p>For step-by-step instructions, see <span class="olink">Installing the Master System</span>.</p>
<p>
<span class="olink">Figure 1&#8211;1</span> shows an installation
of clone systems with an initial installation. All files are overwritten.</p>
<div class="figure"><a name="flashoverview-fig-49"></a><p class="title"><b>Figure 1.1. Solaris Flash Initial Installation</b></p>


<div class="mediaobject"><img src="figures/flash-initial.gif" alt="Solaris Flash Initial Installation" longdesc="ld-id1559300.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="ld-id1559300.html" target="longdesc">D</a>]</span></div></div>
</div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="flashoverview-37"></a>Updating Clone Systems With a Solaris Flash Differential
Archive</h3></div></div></div>

<p>
<a class="indexterm" name="indexterm-10"></a>
<a class="indexterm" name="indexterm-11"></a>
<a class="indexterm" name="indexterm-12"></a>
<a class="indexterm" name="indexterm-13"></a>If you have a clone system and want to update that system, you can create
a differential archive that contains only the differences between two images, the
unchanged master image and an updated master image. When you update a clone system
with a differential archive, only the files that are in the differential archive are
changed. You can choose to install a Solaris Flash differential archive with
the custom JumpStart installation method or Solaris Live Upgrade. An update is a five-part
process.</p>
<div class="orderedlist"><ol type="1"><li>
<p>Prepare the master system with changes. Before changes are made, the
master system should be running a duplicate of the original archive.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>If the master system is not running a duplicate of the original archive,
the differences between the two system images might result in a large differential
archive. Consequently, installing the differential archive could be time consuming.
Use an initial installation with a full archive in this case.</p>
</div>
</li><li>
<p>(Optional) Prepare customization scripts to reconfigure or customize
the clone system before or after installation.</p>
</li><li>
<p>Mount the directory of a copy of the saved-unchanged master image.
This second image is to be used to compare the two system images. Access the image
by the following methods.</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Mounted from a Solaris Live Upgrade boot environment</p>
</li><li>
<p>Mounted from a clone system over NFS</p>
</li><li>
<p>Restored from backup by using the <span><strong class="command">ufsrestore</strong></span> command</p>
</li></ul></div>
</li><li>
<p>Create the differential archive with the <code class="option">
A</code> option
of the <span><strong class="command">flarcreate</strong></span> command.</p>
</li><li>
<p>Install the differential archive on clone systems with custom JumpStart.
Or, you can use Solaris Live Upgrade to install the differential archive on an inactive
boot environment.</p>
</li></ol></div>
<p>
<span class="olink">Figure 1&#8211;2</span> shows the creation
and installation of a differential archive. A master image is updated with some modifications.
These modifications could be as simple as the addition, reconfiguration, or deletion
of a few files, or as complex as propagating patches. The updated master image is
compared to the unchanged master image. The differences between the two images become
the differential archive. The archive can be used to update other clone systems that
are currently using the unchanged master image. If the clone system has already been
modified or is not running the unchanged master image, the update fails. If you have
many changes to make on the clone systems, you can do an initial installation at any
time.</p>
<div class="figure"><a name="flashoverview-fig-50"></a><p class="title"><b>Figure 1.2. Solaris Flash Update</b></p>


<div class="mediaobject"><img src="figures/flash-diff.gif" alt="Solaris Flash Update" longdesc="ld-id1559597.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="ld-id1559597.html" target="longdesc">D</a>]</span></div></div>
</div>
</div>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pr01s05.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Shell Prompts
in Command Examples </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 2. Solaris Flash (Planning)</td></tr></table></div></body></html>
