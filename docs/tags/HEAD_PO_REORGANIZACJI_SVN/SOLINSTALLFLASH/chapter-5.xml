<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML//EN" "docbook.dtd"[
	<!ENTITY % xinclude SYSTEM "xinclude.mod">
	%xinclude;
]>

<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="flashref-1">



<title>Solaris Flash (Reference)</title>
<toc>
<para>This chapter provides a description of Solaris Flash sections, keywords,
and keyword values. Also, the chapter describes the <command>flar</command> command options.</para>
<itemizedlist>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="flashref-62">Solaris Flash Archive Section Descriptions</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="flash-51">Solaris Flash Keywords</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-5.xml" targetptr="flash-52">Solaris Flash <command>flar</command> Command</olink>
</para>
</listitem>
</itemizedlist>
</toc>
<sect1 xml:id="flashref-62">
<title>Solaris Flash Archive Section Descriptions</title>
<indexterm xml:id="indexterm-62">
<primary>archive</primary>
<secondary>sections</secondary>
<tertiary>description</tertiary>
</indexterm>
<para>Each Solaris Flash archive is grouped into sections. Some sections are
generated by the Solaris Flash software and need no input from you. Some sections
require input or optionally allow you to add information. The following table describes
each section.</para>
<table frame="topbot" xml:id="flashref-tbl-63" pgwide="1">

<title>Flash Archive Sections</title>
<tgroup cols="4" colsep="0" rowsep="0">
<colspec colwidth="50.38*"/>
<colspec colwidth="139.68*"/>
<colspec colname="colspec0" colwidth="29.46*"/>
<colspec colname="colspec1" colwidth="25.49*"/>
<thead>
<row rowsep="1">
<entry>
<para>Section Name</para>
</entry>
<entry>
<para>Description</para>
</entry>
<entry>
<para>Required by Archive?</para>
</entry>
<entry>
<para>Requires Input From User?</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>Archive cookie </para>
<para>
</para>
</entry>
<entry>
<para>
<indexterm xml:id="indexterm-63">
<primary>archive</primary>
<secondary>sections</secondary>
<tertiary>archive cookie, description</tertiary>
</indexterm> The first section contains a cookie that identifies the file as a Solaris Flash archive.
The deployment code uses the cookie for identification  and  validation purposes.
The cookie must be present for an archive to be valid.</para>
</entry>
<entry>
<para>Yes</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>Archive identification </para>
</entry>
<entry>
<para>
<indexterm xml:id="indexterm-64">
<primary>archive</primary>
<secondary>sections</secondary>
<tertiary>archive identification, description</tertiary>
</indexterm> The second section contains keywords with values that provide identification
information about the archive. The software generates some information such as the
following:</para>
<itemizedlist>
<listitem>
<para>The archive ID number</para>
</listitem>
<listitem>
<para>The method of archival: </para>
<itemizedlist>
<listitem>
<para>
<command>pax</command>
</para>
</listitem>
<listitem>
<para>
<command>cpio</command>
</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>The creation date by default</para>
</listitem>
</itemizedlist>
<para>You are required to specify a name for the Solaris Flash archive. Other
information that you can specify about the archive includes the following:</para>
<itemizedlist>
<listitem>
<para>The author of the archive</para>
</listitem>
<listitem>
<para>The date that the archive was created</para>
</listitem>
<listitem>
<para>The name of the master system that you used to create the archive</para>
</listitem>
</itemizedlist>
<para>For a list of keywords that describe the archive, see <olink remap="internal" targetdoc="chapter-5.xml" targetptr="flash-15">Archive Identification Section Keywords</olink>.</para>
</entry>
<entry>
<para>Yes</para>
</entry>
<entry>
<para>Content is generated by both user and the software</para>
</entry>
</row>
<row>
<entry>
<para>Manifest </para>
</entry>
<entry>
<para>
<indexterm xml:id="indexterm-65">
<primary>archive</primary>
<secondary>sections</secondary>
<tertiary>manifest, description</tertiary>
</indexterm> A section of a Solaris Flash archive that is used to validate a clone
system. The manifest section lists the files on a system to be retained, added to,
or deleted from the clone system.  The installation fails if the files do not match
the expected file set. This section is informational only. The section lists the files
in an internal format and cannot be used for scripting. </para>
<para>You can exclude this section by creating the differential archive with the <command>flarcreate</command> <option>
M</option> option.
Because no validation of the archive occurs, excluding this section is not recommended.</para>
</entry>
<entry>
<para>No</para>
</entry>
<entry>
<para>No</para>
<para>
</para>
</entry>
</row>
<row>
<entry>
<para>Predeployment, Postdeployment, Reboot</para>
</entry>
<entry>
<para>
<indexterm xml:id="indexterm-66">
<primary>predeployment script</primary>
<secondary>description</secondary>
</indexterm> This section contains internal information that the flash software uses
before and after installing an OS image.  Any customization scripts that you have
provided are stored in this section.</para>
</entry>
<entry>
<para>Yes</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>Summary </para>
</entry>
<entry>
<para>
<indexterm xml:id="indexterm-67">
<primary>archive</primary>
<secondary>sections</secondary>
<tertiary>summary, description</tertiary>
</indexterm> This section contains messages about the archive creation and records
the activities of predeployment scripts. </para>
</entry>
<entry>
<para>Yes</para>
</entry>
<entry>
<para>Content is generated by both user and the software</para>
</entry>
</row>
<row>
<entry>
<para>User-defined </para>
</entry>
<entry>
<para>
<indexterm xml:id="indexterm-68">
<primary>archive</primary>
<secondary>sections</secondary>
<tertiary>user-defined, description</tertiary>
</indexterm>This section follows the archive-identification section. The archive can contain
zero or more  user-defined  sections. These sections are not processed by the archive
extraction code. These sections are retrieved separately and can be used for content
descriptions.</para>
</entry>
<entry>
<para>No</para>
</entry>
<entry>
<para>Yes</para>
</entry>
</row>
<row>
<entry>
<para>Archive files</para>
</entry>
<entry>
<para>
<indexterm xml:id="indexterm-69">
<primary>archive</primary>
<secondary>sections</secondary>
<tertiary>archives files, description</tertiary>
</indexterm>The archive files section contains the files that have been gathered from
the  master system in binary data. This  section begins with <literal>section_begin=archive</literal>, but  it does not have an ending section boundary.</para>
</entry>
<entry>
<para>Yes</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect1>
<sect1 xml:id="flash-51">
<title>Solaris Flash Keywords</title>
<para>Solaris Flash keywords are like custom JumpStart keywords. They define
elements of the installation. Each keyword is a command that controls one aspect of
how the Solaris Flash software installs the software on a clone system.</para>
<para>
<indexterm xml:id="indexterm-70">
<primary>archive</primary>
<secondary>keywords</secondary>
<tertiary>description</tertiary>
</indexterm>
<indexterm xml:id="indexterm-71">
<primary>keywords</primary>
<secondary>Solaris Flash archives</secondary>
</indexterm>Use the following guidelines to format keywords and values:</para>
<itemizedlist>
<listitem>
<para>Keywords and values are separated by a single equal sign with only
one pair per line</para>
</listitem>
<listitem>
<para>Keywords are case insensitive</para>
</listitem>
<listitem>
<para>Individual lines can be any length</para>
</listitem>
</itemizedlist>
<sect2 xml:id="flash-18">
<title>General Keywords</title>
<indexterm xml:id="indexterm-72">
<primary>archive</primary>
<secondary>keywords</secondary>
<tertiary>
<literal>section_begin</literal> and <literal>section_end</literal>
</tertiary>
</indexterm>
<para>Each Solaris Flash archive section is defined by the <literal>section_begin</literal> and <literal>section_end</literal> keywords.  For example, the  archive
 files  section  includes  a <literal>section_begin</literal>  keyword, though with
a different value. User-defined archive sections are delimited by  <literal>section_begin</literal>  and  <literal>section_end</literal>  keywords,  with values appropriate
to each section. The values for the <literal>section_begin</literal> and <literal>section_end</literal> keywords are described in the following table.</para>
<table frame="topbot" xml:id="flash-tbl-19">

<title>Values for <literal>section_begin</literal> and <literal>section_end</literal> Keywords</title>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colname="colspec0" colwidth="40.00*"/>
<colspec colname="colspec1" colwidth="60.00*"/>
<thead>
<row rowsep="1">
<entry>
<para>Archive Section</para>
</entry>
<entry>
<para>Value for <literal>section_begin</literal> and <literal>section_end</literal> keywords</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>Archive cookie</para>
</entry>
<entry>
<para>
<literal>cookie</literal> – This section is not delimited by the <literal>section_begin</literal> and <literal>section_end</literal> keywords.</para>
</entry>
</row>
<row>
<entry>
<para>Archive identification</para>
</entry>
<entry>
<para>
<literal>identification</literal>
</para>
</entry>
</row>
<row>
<entry>
<para>User-defined sections</para>
</entry>
<entry>
<para>
<replaceable>section_name</replaceable> – An example of a <literal>section_name</literal> keyword is X-user_section_1.</para>
</entry>
</row>
<row>
<entry>
<para>Archive files</para>
</entry>
<entry>
<para>
<literal>archive</literal>
</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect2>
<sect2 xml:id="flash-15">
<title>Archive Identification
Section Keywords</title>
<indexterm xml:id="indexterm-73">
<primary>archive</primary>
<secondary>keywords</secondary>
<tertiary>archive identification section</tertiary>
</indexterm>
<para>The following tables describe the keywords for use in the archive identification section and the values you can define
for them. </para>
<para>Every section uses the keywords in <olink remap="internal" targetdoc="chapter-5.xml" targetptr="flash-tbl-21">Table 5–3</olink> to delimit each section.</para>
<table frame="topbot" xml:id="flash-tbl-21" pgwide="1">

<title>Archive Identification Section Keywords: General
Keywords</title>
<tgroup cols="4" colsep="0" rowsep="0">
<colspec colname="colspec2" colwidth="52.07*"/>
<colspec colname="colspec3" colwidth="124.55*"/>
<colspec colname="colspec1" colwidth="29.77*"/>
<colspec colname="colspec0" colwidth="34.25*"/>
<thead>
<row rowsep="1">
<entry>
<para>Keywords</para>
</entry>
<entry>
<para>Value Definitions</para>
</entry>
<entry>
<para>Value</para>
</entry>
<entry>
<para>Required</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<literal>section_begin</literal>
</para>
<para>
<literal>section_end</literal>
</para>
</entry>
<entry>
<para>These keywords are used to delimit sections in the archive and are not limited
exclusively to the archive identification
section. For a description of these keywords, see <olink remap="internal" targetdoc="chapter-5.xml" targetptr="flash-18">General Keywords</olink>.</para>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>Yes</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<para>The following keywords, used in the archive-identification
section, describe the contents of the archive files section.</para>
<table frame="topbot" xml:id="flash-tbl-210" pgwide="1">

<title>Archive Identification Section Keywords: Contents
of Archive Files Section</title>
<tgroup cols="4" colsep="0" rowsep="0">
<colspec colname="colspec2" colwidth="63.86*"/>
<colspec colname="colspec3" colwidth="127.19*"/>
<colspec colname="colspec1" colwidth="25.83*"/>
<colspec colname="colspec0" colwidth="23.77*"/>
<thead>
<row rowsep="1">
<entry>
<para>Keywords</para>
</entry>
<entry>
<para>Value Definitions</para>
</entry>
<entry>
<para>Value</para>
</entry>
<entry>
<para>Required</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<literal>archive_id</literal> (optional)</para>
</entry>
<entry>
<para>This keyword uniquely describes the  contents of  the archive. This value is
used by the installation software only to validate the contents of the archive during
archive installation.  If the keyword is not present, no integrity check  is performed.</para>
<para>For example, the <literal>archive_id</literal> keyword might be <literal>FlAsH-ARcHive-2.0</literal>.</para>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>files_archived_method</literal>
</para>
</entry>
<entry>
<para>This keyword
describes the archive method that is used in  the files  section. </para>
<itemizedlist>
<listitem>
<para>If  this  keyword is not present, the  files section is assumed to be  in  <literal>cpio</literal>  format  with ASCII headers. This format  is the <command>cpio</command> <option>
c</option> option. </para>
</listitem>
<listitem>
<para>If this keyword is present, it has one of the following values: </para>
<itemizedlist>
<listitem>
<para>
<command>pax</command> - The archive format in the files section is <command>pax</command> with extended <command>tar</command> interchange format. The <command>pax</command> utility  enables archiving and extracting files that are greater than
4 GB.</para>
</listitem>
<listitem>
<para>
<command>cpio</command> - The archive format in the files section
is <command>cpio</command> with ASCII headers</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
<para>If the <literal>files_compressed_method</literal> is present, the compression
method is applied to the archive file that is created by the archive method. </para>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>files_archived_size</literal>
</para>
</entry>
<entry>
<para>This keyword value is the size of the archived files section in bytes.</para>
</entry>
<entry>
<para>Numeric</para>
</entry>
<entry>
<para>No</para>
<para>	</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>files_compress_method</literal>
</para>
</entry>
<entry>
<para>This keyword describes the compression  algorithm that is used on the files
section.</para>
<itemizedlist>
<listitem>
<para>If the keyword is present, it can have one of the following values.</para>
<itemizedlist>
<listitem>
<para>
<literal>none</literal> – The archive  file section is  not
compressed.</para>
</listitem>
<listitem>
<para>
<literal>compress</literal> –   The file section is compressed
by using the  <command>compress</command> command.</para>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<para>If this keyword is not  present, the archive files section is assumed
to be uncompressed.</para>
</listitem>
</itemizedlist>
<para>The compression method that is indicated by this keyword is applied to  the
archive file created by the archive method indicated by the <literal>files_archived_method</literal> keyword.  </para>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>files_unarchived_size</literal>
</para>
</entry>
<entry>
<para>This keyword defines the cumulative size in bytes of the extracted archive.
The value is used for file-system size verification. </para>
</entry>
<entry>
<para>Numeric</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<para>The following keywords provide descriptive information about the entire archive.
These keywords are generally used to assist you in archive selection and to aid in
archive  management.  These  keywords are all optional and are used to help you to
distinguish between individual archives. You use options for the <command>flarcreate</command> command to include these keywords.
For an example, see <olink remap="external" targetdoc="chapter-3.xml" targetptr="flashcreate-ex-81">Example 3–9</olink>.</para>
<table frame="topbot" xml:id="flash-tbl-220" pgwide="1">

<title>Archive Identification Section Keywords: User Describes
the Archive</title>
<tgroup cols="4" colsep="0" rowsep="0">
<colspec colname="colspec2" colwidth="64.03*"/>
<colspec colname="colspec3" colwidth="116.77*"/>
<colspec colname="colspec1" colwidth="27.24*"/>
<colspec colname="colspec0" colwidth="32.60*"/>
<thead>
<row rowsep="1">
<entry>
<para>Keywords</para>
</entry>
<entry>
<para>Value Definitions</para>
</entry>
<entry>
<para>Value</para>
</entry>
<entry>
<para>Required</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<literal>creation_date</literal>
</para>
</entry>
<entry>
<para>This keyword value is a textual timestamp that represents the time that you
created the archive.</para>
<itemizedlist>
<listitem>
<para>You can use  the <command>flarcreate</command> command with the <option>
i</option> option to create the date.</para>
</listitem>
<listitem>
<para>If you do not specify a creation date with the <command>flarcreate</command> command, the default date
is set in Greenwich mean time (GMT).</para>
</listitem>
<listitem>
<para>The value must be in ISO-8601 complete basic calendar format without
the time designator (ISO-8601,§5.4.1(a)). The format is <replaceable>CCYYMMDDhhmmss</replaceable>. For example, 20000131221409 represents January 31, 2000, 10:14:09
p.m. </para>
</listitem>
</itemizedlist>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>creation_master</literal>
</para>
</entry>
<entry>
<para>This keyword value is the name of the master system you used to create the archive.
You can use the <command>flarcreate</command> <option>
m</option> option to create this value. If you do not specify a
value, the value is taken from the <command>uname <option>
n</option>
</command> command.</para>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>content_name</literal> </para>
</entry>
<entry>
<para>This keyword identifies the archive. The value is generated from the <command>flarcreate</command> <option>
n</option> option.
Follow these guidelines when you create this value:</para>
<itemizedlist>
<listitem>
<para>The descriptive name  can be no longer than 256 characters.</para>
</listitem>
<listitem>
<para>The description should contain  the function and purpose of the archive. </para>
</listitem>
</itemizedlist>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>Yes</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>content_type</literal>
</para>
</entry>
<entry>
<para>This keyword value specifies a category for the archive.  You use the <command>flarcreate</command> <option>
T</option> option
to generate the value.</para>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>content_description</literal>
</para>
</entry>
<entry>
<para>The keyword value describes the contents of the archive.  The value of this
keyword has no length limit. You use the <command>flarcreate</command> <option>
E</option> option to create this value.</para>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>content_author</literal>
</para>
</entry>
<entry>
<para>This keyword value identifies the creator of the archive. You use the <command>flarcreate</command>
<option>
a</option> option to
create this value. Suggested values include the full name of the creator and the creator's
email address.</para>
</entry>
<entry>
<para>Text</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>content_architectures</literal>
</para>
</entry>
<entry>
<para>This keyword value is a comma-separated list of the kernel architectures that
the archive supports. </para>
<itemizedlist>
<listitem>
<para>If the keyword is present, the installation software validates the
kernel architecture of the clone system against the list of architectures that the
archive supports.  The installation fails if the archive does not support the kernel
architecture of the clone system. </para>
</listitem>
<listitem>
<para>If the keyword is not present, the installation software  does not
validate the architecture of the clone system.</para>
</listitem>
</itemizedlist>
</entry>
<entry>
<para>Text list</para>
</entry>
<entry>
<para>No</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<para>The following keywords also describe the entire archive. By default, the values
are filled in by <command>uname</command> when  the flash archive is created. If you
create a  flash archive in which the root  directory  is  not  <filename>/</filename>,
 the archive software inserts the string UNKNOWN for the keywords. The exceptions
are the <literal>creation_node</literal>, <literal>creation_release</literal>,  and
 <literal>creation_os_name</literal> keywords.</para>
<itemizedlist>
<listitem>
<para>For <literal>creation_node</literal>, the software uses the contents
of the <filename>nodename</filename> file.</para>
</listitem>
<listitem>
<para>For <filename>creation_release</filename> and <filename>creation_os_name</filename>, the software attempts to use the contents of <filename>root</filename> directory <filename>/var/sadm/system/admin/INST_RELEASE</filename>. If  the software is unsuccessful in
reading this file, it assigns the value UNKNOWN.</para>
</listitem>
</itemizedlist>
<para>Regardless of their sources, you cannot override the values of these keywords.</para>
<table frame="topbot" xml:id="flashref-tbl-64">

<title>Archive Identification Section Keywords: Software
Describes the Archive</title>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colname="colspec0" colwidth="50*"/>
<colspec colname="colspec1" colwidth="50*"/>
<thead>
<row rowsep="1">
<entry>
<para>Keyword</para>
</entry>
<entry>
<para>Value</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<literal>creation_node</literal>
</para>
</entry>
<entry>
<para>The return from <command>uname</command> <option>
n</option>
</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>creation_hardware_class</literal>
</para>
</entry>
<entry>
<para>The return from <command>uname</command> <option>
m</option>
</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>creation_platform</literal>
</para>
</entry>
<entry>
<para>The return from <command>uname</command> <option>
i</option>
</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>creation_processor</literal>
</para>
</entry>
<entry>
<para>The return from <command>uname</command> <option>
p</option>
</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>creation_release</literal>
</para>
</entry>
<entry>
<para>The return from<command>uname</command> <option>
r</option>
</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>creation_os_name</literal>
</para>
</entry>
<entry>
<para>The return from <command>uname</command> <option>
s</option>
</para>
</entry>
</row>
<row>
<entry>
<para>
<literal>creation_os_version</literal>
</para>
</entry>
<entry>
<para>The return from <command>uname</command> <option>
v</option>
</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect2>
<sect2 xml:id="flashref-67">
<title>User-Defined Section Keywords</title>
<para>
<indexterm xml:id="indexterm-74">
<primary>archive</primary>
<secondary>keywords</secondary>
<tertiary>user-defined</tertiary>
</indexterm>In addition to the keywords that are defined by the Solaris Flash archive,
you can define other keywords. The Solaris Flash archive ignores user-defined
keywords, but you can provide scripts or programs that process the archive identification section and use user-defined
keywords.  Use the following format when creating user-defined keywords: </para>
<itemizedlist>
<listitem>
<para>Begin the keyword name with an <literal>X</literal>.</para>
</listitem>
<listitem>
<para>Create the keyword with any characters other than linefeeds, equal
signs, and null characters. </para>
</listitem>
<listitem>
<para>Suggested naming  conventions  for  user-defined  keywords  include
 the  underscore-delimited descriptive method used for the  predefined  keywords.
Another convention is  a  federated  convention similar to the naming of Java packages. </para>
</listitem>
</itemizedlist>
<para>For example, <literal>X-department</literal> is a valid name for a user-defined
keyword.</para>
<para>For an example of using options to include user-defined keywords in the archive identification section, see <olink remap="external" targetdoc="chapter-3.xml" targetptr="flashcreate-ex-81">Example 3–9</olink>.</para>
</sect2>
</sect1>
<sect1 xml:id="flash-52">
<title>Solaris Flash <command>flar</command> Command</title>
<para>Use the Solaris Flash <command>flar</command> command to create a Solaris Flash archive
and administer the archive</para>
<sect2 xml:id="flash-53">
<title>The <command>flar</command> Command</title>
<indexterm xml:id="indexterm-75">
<primary>
<command>flarcreate</command> command</primary>
</indexterm>
<indexterm xml:id="indexterm-76">
<primary>archive</primary>
<secondary>
<command>flarcreate</command> command</secondary>
</indexterm>
<para>The flar command
can be used with the following options: </para>
<itemizedlist>
<listitem>
<para>
<command>flarcreate</command> creates an archive</para>
</listitem>
<listitem>
<para>
<command>flar combin</command> merges two archives</para>
</listitem>
<listitem>
<para>
<command>flar split</command> breaks an archive into sections</para>
</listitem>
<listitem>
<para>
<command>flar info</command> checks the structure of an archive</para>
</listitem>
</itemizedlist>
<para>Use the <command>flarcreate</command> command to create
a Solaris Flash archive from a master system. You can use this command when the
master system is running in multiuser mode or single-user mode.  You can also use <command>flarcreate</command> when the master system is
booted from the following media.</para>
<itemizedlist>
<listitem>
<para>Solaris Operating System DVD</para>
</listitem>
<listitem>
<para>Solaris Software - 1  CD</para>
</listitem>
<listitem>
<para>An image of the Solaris Software CDs and Solaris Languages CD</para>
</listitem>
</itemizedlist>
<para>The master system should be in as stable a state as possible when you create
a Solaris Flash archive. </para>
<note>

<para>You can create
a Solaris Flash archive by using either of these command options:</para>
<itemizedlist>
<listitem>
<para>As two words: <command>flar</command> with the <command>create</command> subcommand</para>
</listitem>
<listitem>
<para>As one word: <command>flarcreate</command>
</para>
</listitem>
</itemizedlist>
</note>
<para>The syntax of
the command is as follows:</para>
<para>
<command>flarcreate <option>
n</option> <replaceable>archive_name</replaceable> [<option>
R</option> <replaceable>root</replaceable>] [<option>
A</option> <replaceable>unchanged_master_image_dir</replaceable>]
[<option>
H</option>][<option>
I</option>][<option>
M</option>][[<option>
S</option>]<option>
c</option>][<option>
t</option> [<option>
p</option> <replaceable>posn</replaceable>]
[<option>
b</option> <replaceable>blocksize</replaceable>]][<option>
i</option> <replaceable>date</replaceable>][<option>
u</option> <replaceable>section</replaceable> ...][<option>
m</option> <replaceable>master</replaceable>][<option>
f</option> [<replaceable>list_filename</replaceable>| -] [<option>
F</option>][<option>
a</option> <replaceable>author</replaceable>][<option>
e</option> <replaceable>descr</replaceable>|<option>
E</option> <replaceable>descr_file</replaceable>][<option>
L</option> cpio][<option>
T</option> <replaceable>type</replaceable>][<option>
U</option> <replaceable>key=val</replaceable> ...][<option>
x</option> <replaceable>exclude_dir/filename</replaceable>]
[<option>
y</option> <replaceable>include_dir/filename</replaceable>] [<option>
z</option> <replaceable>list_filename</replaceable>] [<option>
X</option> <replaceable>list_filename</replaceable>]<replaceable>path/filename</replaceable>
</command>
</para>
<para>
<command>flar combine [<option>
d</option> <replaceable>dir</replaceable>] [<option>
u</option> <replaceable>section...</replaceable>] [<option>
t</option> [<option>
p</option> <replaceable>posn</replaceable>] <replaceable>path/filename</replaceable>
</command>
</para>
<para>
<command>flar split [<option>
d</option> <replaceable>dir</replaceable>] [<option>
u</option> <replaceable>section...</replaceable>] [<option>
f</option>]  [<option>
S</option>  <replaceable>section</replaceable>]  [<option>
t</option> [<option>
p</option> <replaceable>posn</replaceable>] <replaceable>path/filename</replaceable>
</command>     </para>
<para>
<command>flar info [<option>
l</option>]
[<option>
k</option> <replaceable>keyword</replaceable>] [<option>
t</option> [<option>
p</option> <replaceable>posn</replaceable>] <replaceable>path/filename</replaceable>
</command>
</para>
<para>In the previous command lines, <replaceable>path</replaceable> is the directory
in which you want the archive file to be saved. <replaceable>filename</replaceable> is
the name of the archive file. If you do not specify a path, <command>flarcreate</command> saves the archive file
in the current directory.</para>
<table frame="topbot" xml:id="flash-tbl-54">

<title>Command-Line Options for the <command>flar</command> Command</title>
<tgroup cols="2" colsep="1" rowsep="1">
<colspec colname="colspec0" colwidth="28.14*"/>
<colspec colname="colspec1" colwidth="71.86*"/>
<thead>
<row>
<entry colsep="0" rowsep="1">
<para>Option</para>
</entry>
<entry colsep="1" rowsep="1">
<para>Description</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0" rowsep="1">
<para>Required Options</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<option>
n</option> <replaceable>archive_name</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="1">
<para>The value of this flag is the name of the archive.  The <replaceable>archive_name</replaceable> you specify is the value of the <filename>content_name</filename> keyword.</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0" rowsep="1">
<para>Option for Compression</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<option>
c</option>
</para>
</entry>
<entry colsep="1" rowsep="1">
<para>Compresses the archive by using <command>compress(1)</command>.</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0" rowsep="1">
<para>Options for Directories and Sizes</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
R</option> <replaceable>root</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Creates the archive from the file system tree that is rooted at <replaceable>root</replaceable>.  If you do not specify this option, <command>flarcreate</command> creates an archive from a
file system that is rooted at <filename>/</filename>.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
S</option>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Omits sizing information in the archive.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<option>
H</option>
</para>
</entry>
<entry colsep="1" rowsep="1">
<para>Does not generate the hash identifier.</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0" rowsep="1">
<para>Options for Creating a Differential Archive</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
A</option> <replaceable>unchanged_master_image_dir</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Creates a differential archive by comparing a new system image with the image
that is specified by the <replaceable>unchanged_master_image_dir</replaceable> argument.
By default, the new system image is root (<filename>/</filename>). You can change
the default with the <option>
R</option> option. <replaceable>unchanged_master_image_dir</replaceable> is a directory where the unchanged master system image is stored or
mounted through UFS, NFS, or <command>lumount</command>.</para>
<para>You can modify the effects of file selection for a differential archive by using
the options for contents selection described in the next section of the table.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<option>
M</option>
</para>
</entry>
<entry colsep="1" rowsep="1">
<para>Excludes the manifest file. When you use this option, no validation occurs on
the differential archive. When creating a differential archive, <command>flarcreate</command> creates a long list of the
files in the system that are unchanged, are changed, and are to be deleted from the
archive. This list is stored in the manifest section of the archive. When the differential
archive is deployed, the software uses this list to perform a file-by-file check,
ensuring the integrity of the clone system. Use of this option avoids such a check
and saves the space that is used by the manifest section in a differential archive.
However, you must consider the savings in time and disk space against the loss of
an integrity check upon installation. Because no validation occurs, avoid using this
option.</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0" rowsep="1">
<para>Options for Contents Selection</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0" rowsep="1">
<caution>

<para>Use the <command>flarcreate</command> file-exclusion options with caution. If you exclude some directories, others
that you were unaware of might be left in the archive, such as system configuration
files. The system would then be inconsistent and the installation would not work.
Excluding directories and files is best used with data that can easily be removed
without disrupting the system, such as large data files.</para>
</caution>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
y</option> <replaceable>include_dir/filename</replaceable> </para>
</entry>
<entry colsep="1" rowsep="0">
<para>Adds to the archive those files and directories that are specified on the command
line. This option is used when you have excluded a directory, but want to restore
individual subdirectories or files.</para>
<para>
<replaceable>include_dir/filename</replaceable> is the name of the subdirectory
or file to be included. </para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
f</option> <replaceable>list_filename</replaceable> </para>
</entry>
<entry colsep="1" rowsep="0">
<para>Adds files and directories from a list to the archive. </para>
<para>
<replaceable>list_filename</replaceable> is the full path to a file that contains
a list. The contents of the file are added to the file list unless <option>
F</option> is
specified. </para>
<itemizedlist>
<listitem>
<para>The <replaceable>list_filename</replaceable> file must contain one
file per line.  </para>
</listitem>
<listitem>
<para>If you specify a file system with <option>
R</option> <replaceable>root</replaceable>, the path to each file must be relative to the alternate <filename>root</filename> directory or an absolute path.</para>
</listitem>
<listitem>
<para>If <replaceable>filename</replaceable> is “-”, <command>flarcreate</command> reads  standard input  as
the list of files.  When you use the value “-”, the archive size is not
calculated.</para>
</listitem>
</itemizedlist>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
F</option> </para>
</entry>
<entry colsep="1" rowsep="0">
<para>Uses only the files in <option>
f</option> <replaceable>list_filename</replaceable> to
create the archive. This option makes the <option>
f</option> <replaceable>list_filename</replaceable> the absolute list, rather than a list that is appended to the normal
file list.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
x</option> <replaceable>exclude_dir/filename</replaceable> </para>
</entry>
<entry colsep="1" rowsep="0">
<para>Excludes  files and directories from the archive. These files and directories
are specified at the command line. You can use multiple instances of this option to
exclude more than one file or directory.</para>
<para>
<replaceable>exclude_dir/filename</replaceable> is the name of the directory
or file to be excluded. </para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
X</option> <replaceable>list_filename</replaceable> </para>
</entry>
<entry colsep="1" rowsep="0">
<para>Excludes a list of files or directories from the archive. </para>
<para>
<replaceable>list_filename</replaceable> is the full path to a file that contains
the list. </para>
<itemizedlist>
<listitem>
<para>The <replaceable>list_filename</replaceable> file must contain one
file per line.  </para>
</listitem>
<listitem>
<para>If you specify a file system with <option>
R</option> <replaceable>root</replaceable>, the path to each file must be relative to the alternate <filename>root</filename> directory or an absolute path.</para>
</listitem>
<listitem>
<para>If <replaceable>list_filename</replaceable> is “-”, <command>flarcreate</command> reads standard input  as the
list of files.  When you use the value “-”, the archive size is not calculated.</para>
</listitem>
</itemizedlist>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
z</option> <replaceable>list_filename</replaceable> </para>
</entry>
<entry colsep="1" rowsep="0">
<para>Excludes or includes a list of files or directories from the archive. Each file
or directory in the list is noted with a plus “+” or minus “-”.
A plus indicates an included file or directory and the minus indicates an excluded
file or directory.</para>
<para>
<replaceable>list_filename</replaceable> is the full path to a file that contains
the list. </para>
<itemizedlist>
<listitem>
<para>The <replaceable>list_filename</replaceable> file must contain one
file per line.  </para>
</listitem>
<listitem>
<para>If you specify a file system with <option>
R</option> <replaceable>root</replaceable>, the path to each file must be relative to the alternate <filename>root</filename> directory or an absolute path.</para>
</listitem>
</itemizedlist>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<option>
I</option>
</para>
</entry>
<entry colsep="1" rowsep="1">
<para>Override the integrity check. To prevent you from excluding important system
files from an archive, <command>flarcreate</command> runs an integrity check. This check examines all files that are registered
in a system package database and stops archive creation if any of them are excluded.
Use of this option overrides this integrity check. Therefore, avoid the use of the <option>
I</option> option.</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0">
<para>Options for Splitting and
Merging Archives</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
d</option> <replaceable>dir</replaceable>
</para>
</entry>
<entry colsep="0" rowsep="0">
<para>Retrieves the sections to copy from <replaceable>dir</replaceable>, rather than
from the current directory.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
u</option> <replaceable>section</replaceable>
</para>
</entry>
<entry colsep="0" rowsep="0">
<itemizedlist>
<listitem>
<para>If you use this option, <command>flar</command> copies the cookie, identification, archive, and <replaceable>section</replaceable> sections.  You can specify a single section name or a space-separated
list of section names.</para>
</listitem>
<listitem>
<para>If you do <emphasis>not</emphasis> use this option, <command>flar</command> copies the cookie, ldentification, and archive sections only.</para>
</listitem>
</itemizedlist>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
f</option> archive</para>
</entry>
<entry colsep="0" rowsep="0">
<para>Extracts the archive section into a directory that is named <filename>archive</filename>, rather than placing it in a file with the name <filename>archive</filename>. Used for splitting an archive</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<option>
S</option> <replaceable>section</replaceable>
</para>
</entry>
<entry colsep="0" rowsep="1">
<para>Only copies the section that is named <replaceable>section</replaceable> from
the archive. This section is user defined.
Used for splitting an archive.</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0">
<para>Option Used To Copy Files
(Archive)</para>
</entry>
</row>
<row>
<entry colsep="0">
<para>
<option>
L cpio</option> </para>
</entry>
<entry>
<para>The <command>pax</command> utility
is the default copy method. For backward compatibility issues, you can create
a <command>cpio</command> archive with the <option>
L cpio</option> option. A <command>cpio</command> archive cannot contain Individual file sizes  over 4 Gbytes.</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0" rowsep="1">
<para>Options Used With User-Defined Sections</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<option>
u</option> <replaceable>section</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="1">
<para>Includes <replaceable>section</replaceable> as a user-defined section.  To include
more than one user-defined section, <replaceable>section</replaceable> must be a space-separated
list of section names.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<option>
d</option> <replaceable>dir</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="1">
<para>Retrieves the section file that is specified with <option>
u</option> from <replaceable>dir</replaceable>.</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0" rowsep="1">
<para>Options Used With Tape Archives</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
t</option> </para>
</entry>
<entry colsep="1" rowsep="0">
<para>Creates an archive on a tape device.  The <replaceable>filename</replaceable> argument
is the name of the tape device. </para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
p</option> <replaceable>posn</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Use only with the <option>
t</option> option. Specifies the position on the tape
device for <command>flarcreate</command> to store the
archive.  If you do not use this option, <command>flarcreate</command> places the archive at the current position of the tape. </para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="1">
<para>
<option>
b</option> <replaceable>blocksize</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="1">
<para>Specifies the block size <command>flarcreate</command> uses when creating the archive.  If you do not specify a block size, <command>flarcreate</command> uses the default block size
of 64 KB.</para>
</entry>
</row>
<row>
<entry colsep="0" nameend="colspec1" namest="colspec0" rowsep="1">
<para>Options for Archive Identification</para>
<para>These keywords and values appear in the archive identification
section of the archive.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
U</option> <replaceable>key=val</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Includes user-defined keywords and values in the archive identification section.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
i</option> <replaceable>date</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Uses <replaceable>date</replaceable> as the value for the <filename>creation_date</filename> keyword. If you do not specify a date, <command>flarcreate</command> uses the current system time and date.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
m</option> <replaceable>master</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Uses <replaceable>master</replaceable> as the name of the master system on which
you created the archive. <replaceable>master</replaceable> is the value for the <filename>creation_master</filename> keyword. If you do not specify <replaceable>master</replaceable>, <command>flarcreate</command> uses the system name that
is reported by <command>uname -n</command>. </para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
e</option> <replaceable>descr</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Uses <replaceable>descr</replaceable> for the value of the <filename>content_description</filename> keyword.  You cannot use this option when you use the <option>
E</option> option.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
E</option> <replaceable>descr_file</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Retrieves the value for the <filename>content_description</filename> keyword
from the <replaceable>descr_file</replaceable> file.   You cannot use this option
when you use the <option>
e</option> option.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
a</option> <replaceable>author</replaceable>
</para>
</entry>
<entry colsep="1" rowsep="0">
<para>Uses <replaceable>author</replaceable> as the author name in the archive identification section. <replaceable>author</replaceable> is the value for the <literal>content_author</literal> keyword.
 If you do not specify an author, <command>flarcreate</command> does not include the <literal>content_author</literal> keyword in the archive identification section.</para>
</entry>
</row>
<row>
<entry colsep="0" rowsep="0">
<para>
<option>
T</option> <replaceable>type</replaceable>
</para>
</entry>
<entry colsep="0" rowsep="0">
<para>Uses <replaceable>type</replaceable> as the value for the <filename>content_type</filename> keyword. <replaceable>type</replaceable> is user defined. If you do not
specify a type, <command>flarcreate</command> does not include the <filename>content_type</filename> keyword.</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect2>
</sect1>
</chapter>
