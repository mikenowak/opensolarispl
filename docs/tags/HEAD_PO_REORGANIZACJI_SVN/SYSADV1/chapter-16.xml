<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML//EN" "docbook.dtd"[
	<!ENTITY % xinclude SYSTEM "xinclude.mod">
	%xinclude;
]>

<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="swmgrpkgsconcepts-52619">



<title>Managing Software (Overview)</title>
<toc>
<para>Software management involves adding and removing software from stand-alone
systems, servers, and their clients. This chapter describes the various tools
that are available for installing and managing software.</para>
<para>This chapter does not describe installing the Solaris Operating System
(Solaris OS) on a new system, nor does it describe installing or upgrading
a new version of the Solaris OS. For information about installing or upgrading
the Solaris OS, see <olink remap="external" targetdoc="819-2393">
<citetitle remap="book">Solaris Express Installation Guide: Basic Installations</citetitle>
</olink>.</para>
<para>This is a list of the overview information in this chapter.</para>
<itemizedlist>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-16.xml" targetptr="gazwe">What's New in Software Management in the Solaris Operating System?</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgsconcepts-30493">Where to Find Software Management Tasks</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgsconcepts-35274">Overview of Software Packages</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgsconcepts-38835">Tools for Managing Software Packages</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgsconcepts-25409">Adding or Removing a Software Package (<command>pkgadd</command>)</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgsconcepts-16775">Key Points for Adding Software Packages (<command>pkgadd</command>)</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgsconcepts-35627">Guidelines for Removing Packages (<command>pkgrm</command>)</olink>
</para>
</listitem>
<listitem>
<para>
<olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgs-19113">Avoiding User Interaction When Adding Packages (<command>pkgadd</command>)</olink>
</para>
</listitem>
</itemizedlist>
<para>For step-by-step instructions on managing software, see <olink remap="external" targetdoc="chapter-19.xml" targetptr="swmgrpkgsgui-1">Chapter 19, Managing Software With Solaris System Administration Tools (Tasks)</olink> and <olink remap="external" targetdoc="chapter-20.xml" targetptr="swmgrpkgscli-1">Chapter 20, Managing Software by Using Package Commands (Tasks)</olink>.</para>
<para>For information about managing software on Solaris systems with zones
installed, see <olink remap="external" targetdoc="819-2450" targetptr="z.pkginst.task-1">Chapter 25, <citetitle remap="chapter">Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</citetitle>
</olink>.</para>
</toc>
<sect1 xml:id="gazwe">
<title>What's New in Software Management in the Solaris
Operating System?</title>
<para>This section describes the new software management features in this
Solaris release.</para>
<para>For a complete listing of new Solaris features and a description of
Solaris releases, see the <olink remap="external" targetdoc="819-2183">
<citetitle remap="book">What’s New in Solaris Express</citetitle>
</olink>.</para>
<sect2 xml:id="gbyud">
<title>Sun Update Connection Product Supports Patch Management
From a Global Zone on Systems With Non-Global Zones Installed</title>
<para>
<emphasis role="strong">Solaris Express 3/06:</emphasis> Sun Update Connection support
for managing Solaris systems with zones installed. The version
of the Sun Update connection software that is available in this Solaris release
supports the default behavior of the <command>patchadd</command> command from
a global zone on systems that have one or more non-global zones installed.
For more information, see the <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="text_url" xlink:href="http://docs.sun.com/app/docs/coll/1320.1">Sun Update
Connection Collection</link>.</para>
</sect2>
<sect2 xml:id="gcbvq">
<title>Common Agent Container Included in Solaris 10 6/06
OS</title>
<para>
<emphasis role="strong">Solaris Express 5/06:</emphasis> The Common Agent Container
is a stand-alone Java program that implements a container for Java management
applications.  This program provides a management infrastructure that is designed
for Java Management Extensions (JMX) and Java Dynamic Management Kit (Java
DMK) based management functionality.  The software is installed by the <literal>SUNWcacaort</literal> package and resides in the <filename>/usr/lib/cacao</filename> directory.</para>
<para>Typically, the container is not visible.  However, there are two instances
when you might need to interact with the container daemon:</para>
<itemizedlist>
<listitem>
<para>It is possible that another application might attempt to use
a network port that is reserved for the Common Agent Container.</para>
</listitem>
<listitem>
<para>In the event that a certificate store is compromised, you
may have to regenerate the Common Agent Container certificate keys. </para>
</listitem>
</itemizedlist>
<para>For information about how to troubleshoot these problems, see <olink remap="external" targetdoc="819-2380" targetptr="gcbwx">
<citetitle remap="section">Troubleshooting Common Agent Container Problems in the Solaris OS</citetitle> in <citetitle remap="book">System Administration Guide: Advanced Administration</citetitle>
</olink>.</para>
</sect2>
<sect2 xml:id="gazvn">
<title>Sun Update Connection, System Edition 1.0</title>
<indexterm xml:id="indexterm-263">
<primary>Sun Update Connection</primary>
<secondary>patch and update management</secondary>
</indexterm>
<indexterm xml:id="indexterm-264">
<primary>patch management</primary>
<secondary>Sun Update Connection</secondary>
</indexterm>
<para>
<emphasis role="strong">Solaris Express 10/05:</emphasis> The Sun Update Connection services
enable you to keep your Solaris systems up to date by giving you access to
all the latest fixes and features. You can choose to perform local single-system
update management or remote multiple-system update management. The Sun Update
Connection product suite includes these components:</para>
<itemizedlist>
<listitem>
<para>
<emphasis role="strong">Sun Update Manager.</emphasis> <indexterm xml:id="indexterm-265">
<primary>Sun Update Manager</primary>
<secondary>
<command>smpatch</command> command, using</secondary>
</indexterm>
<indexterm xml:id="indexterm-266">
<primary>
<command>smpatch</command> command</primary>
<secondary>Sun Update Manager</secondary>
<tertiary>Sun Update Connection</tertiary>
</indexterm>
<indexterm xml:id="indexterm-267">
<primary>Sun Update Connection components</primary>
<secondary>Sun Update Manager</secondary>
</indexterm> The Sun Update Manager GUI and the <command>smpatch</command> command-line
interface enable you to locally manage updates on your Solaris system. </para>
<note>

<para>The Sun Update Connection software has the same functionality
as the Sun Patch Manager 2.0 tools, with the addition of some new features
and enhancements.</para>
</note>
</listitem>
<listitem>
<para>
<indexterm xml:id="indexterm-268">
<primary>Sun Update Connection</primary>
<secondary>web application</secondary>
</indexterm>
<emphasis role="strong">Sun Update Connection.</emphasis> This
web application is hosted at Sun and enables you to remotely manage updates
on one or more of your Solaris systems.</para>
</listitem>
<listitem>
<para>
<emphasis role="strong">Sun Update Connection Proxy.</emphasis> <indexterm xml:id="indexterm-269">
<primary>Sun Update Connection Proxy</primary>
</indexterm>This local caching proxy serves updates from Sun to the proxy's
client systems inside your enterprise security domain.</para>
</listitem>
<listitem>
<para>
<emphasis role="strong">SunSolve Patch &amp; Updates Portal.</emphasis> <indexterm xml:id="indexterm-270">
<primary>SunSolve Patch &amp; Updates Portal</primary>
<secondary>Sun Update Connection</secondary>
</indexterm>The <trademark class="service">SunSolve</trademark> Patch and
Updates portal gives you manual access to patches for download and to patch
README files. More information can be found at <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="url" xlink:href="http://sunsolve.sun.com/">
</link>.</para>
</listitem>
</itemizedlist>
<para>
<indexterm xml:id="indexterm-271">
<primary>Sun Update Connection</primary>
<secondary>requirements for using</secondary>
</indexterm>To receive the Sun Update Connection services, you must first
register your system. The registration process is initiated the first time
you boot your system or access the Update Manager application for the first
time.</para>
<para>A subset of the Sun Update Connection services is available, at no cost,
to all Solaris users. These services include the use of Sun Update Manager
to manage all security fixes and device driver updates that apply to your
Solaris system.</para>
<para>
<indexterm xml:id="indexterm-272">
<primary>service plan</primary>
<secondary>Sun Update Connection</secondary>
</indexterm>
<indexterm xml:id="indexterm-273">
<primary>Sun Update Connection</primary>
<secondary>service plan</secondary>
<tertiary>requirements for using Sun Update Connection</tertiary>
</indexterm>To use the full suite of Sun Update Connection products, including
access to all patches, the Sun Update Connection web application, and the
Sun Update Connection proxy, you must have one of the service plans described
at <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="url" xlink:href="http://www/sun.com/service/solaris10">
</link>.</para>
<para>The Sun Update Connection, System Edition software was introduced in
the Solaris 10 1/06 release. If you are running the Solaris 10 initial release,
and you want to use Sun Update Connection, install the appropriate patches
or upgrade your system to at least the Solaris
Express 10/05 release.</para>
<para>For more information about installing and using Sun Update Connection,
see the Sun Update Connection Collection, at <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="url" xlink:href="http://docs.sun.com/app/docs/coll/1320.1">Sun Update Connection
Collection</link>.</para>
<para>For information about registering your system after you install the
Solaris software, see <olink remap="external" targetdoc="chapter-18.xml" targetptr="tasks-basics-2">Chapter 18, Registering Your Solaris Express 3/06 or 10/05 Software (Tasks)</olink>.</para>
</sect2>
<sect2 xml:id="gbahu">
<title>Basic Registration Tool</title>
<indexterm xml:id="indexterm-274">
<primary>registering your Solaris system</primary>
<secondary>Basic Registration Tool</secondary>
<tertiary>Sun Update Connection, using</tertiary>
</indexterm>
<indexterm xml:id="indexterm-275">
<primary>Basic Registration Tool</primary>
<secondary>registering your system</secondary>
</indexterm>
<para>
<emphasis role="strong">Solaris Express 10/05:</emphasis> Sun Update Connection services
enable you to update your registered Solaris system by giving you access to
the latest fixes and features.</para>
<para>To be eligible for all applicable Solaris patches and updates, you must
register your Solaris software and include an eligible service plan ID. Eligible
service plans are described at <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="url" xlink:href="http://sun.com/service/solaris10/">
</link>. If you do not have a service plan, you can register your
Solaris software and use Sun Update Connection services to manage the hardware
support and security patches that are available on your system.</para>
<para>Register your Solaris software by using one of the following tools:</para>
<itemizedlist>
<listitem>
<para>Registration wizard GUI</para>
</listitem>
<listitem>
<para>Registration command-line interface (CLI)</para>
</listitem>
<listitem>
<para>Sun Update Manager GUI</para>
</listitem>
</itemizedlist>
<para>If you are running the Solaris 10 initial release, and you want to use
Sun Update Connection, install the appropriate patches or upgrade your system
to at least the Solaris Express
10/05 release.</para>
<note>

<para>Starting with the Solaris
Express 3/06 release, the Basic Registration Tool, Version 1.1 is included
in the Solaris OS. Use the Basic Registration tool to create a registration
profile and ID to automate your Solaris software registrations. This version
of the software includes software registration user interface revisions and
changes to the steps to register a system. </para>
</note>
<para>For more information about using the registration wizard or CLI to register
your software, see <olink remap="external" targetdoc="chapter-18.xml" targetptr="tasks-basics-2">Chapter 18, Registering Your Solaris Express 3/06 or 10/05 Software (Tasks)</olink>. For information about installing the
Sun Update Connection software and using the Sun Update Manager GUI to register
your software, see the Sun Update Manager documentation in the Sun Update
Connection Collection at <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="url" xlink:href="http://docs.sun.com/app/docs/coll/1320.1">
</link>.</para>
</sect2>
<sect2 xml:id="gbytw">
<title>Improvements to How <command>patchadd</command> <option>
M</option> Command Handles Multiple Patches</title>
<para>
<emphasis role="strong">Solaris 10:</emphasis> Starting with the Solaris
10 release, the functionality of the <command>patchadd</command> <option>
M</option> command
is improved to enable more effective and efficient handling of multiple patches
and dependencies between patches. As a result, you no longer have to specify
patch IDs in numerical order when using this command.</para>
<para>Note that if you use the <command>patchadd</command> <option>
M</option> command
without specifying a patch ID or patch IDs, all the patches in the directory
are automatically installed on the system. To install a specific patch or
patches, you must specify the patch ID when using the <command>patchadd</command> <option>
M</option> command.</para>
<para>For more information, see the <olink remap="external" targetdoc="819-2240" targetptr="patchadd-1m">
<citerefentry>
<refentrytitle>patchadd</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> man page.</para>
</sect2>
<sect2 xml:id="swmgrpkgsconcepts-38">
<title>Package and Patch Tool Enhancements</title>
<para>
<emphasis role="strong">Solaris 10:</emphasis> The Solaris package and
patch tools were enhanced in the Solaris 10 initial release to provide improved
performance and extended functionality. </para>
<para>As a part of these enhancements, the <command>pkgchk</command> command
now provides a new option to assist you in mapping files to packages. To map
files to packages, use the <command>pkgchk</command> <option>
P</option> option
instead of <command>grep</command> <replaceable>pattern</replaceable>
<filename>/var/sadm/install/contents</filename>. The <option>
P</option> option enables you to use a partial path.
Use this option with the <option>
l</option> option to list the information
about the files that contain the partial path. For more information see <olink remap="external" targetdoc="chapter-20.xml" targetptr="eywvy">How to Check the Integrity of Installed Objects (<command>pkgchk -p, pkgchk -P</command>)</olink> and the <olink remap="external" targetdoc="819-2240" targetptr="pkgchk-1m">
<citerefentry>
<refentrytitle>pkgchk</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> man
page.</para>
</sect2>
<sect2 xml:id="swmgrpkgsconcepts-338">
<title>Sun Patch Manager Enhancements</title>
<para>
<emphasis role="strong">Solaris 10:</emphasis> Starting with the Solaris
10 initial release, the Sun Patch Manager tool (Patch Manager) is used to
manage patches on Solaris systems. Use this tool to apply patches to Solaris
systems.</para>
<para>You can access Patch Manager by using
the GUI or by using the <command>smpatch</command> command-line interface.</para>
<note>

<para>In the current Solaris release, you can use the Sun Update Connection
to keep your Solaris system up to date. The Sun Update Connection software
has the same functionality as the Sun Patch Manager tools, with the addition
of some new features and enhancements. If you are running the Solaris 10 initial
release, and you want to use Sun Update Connection, install the appropriate
patches or upgrade your system to at least the Solaris
Express 10/05 release. For more information, see <olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgsconcepts-52619">Chapter 16, Managing Software (Overview)</olink>.</para>
<para>For information about installing and using the Sun Update
Connection software to manage patches and updates on your Solaris system,
see the Sun Update Connection Collection at <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="url" xlink:href="http://docs.sun.com/app/docs/coll/1320.1">
</link>.</para>
</note>
<para>Patch Manager includes the following features:</para>
<itemizedlist>
<listitem>
<para>
<emphasis role="strong">PatchPro analysis engine –</emphasis> Patch
Manager now incorporates PatchPro functionality to automate the patch management
process. This process includes performing patch analysis on systems, then
downloading and applying the resulting patches. This automation functionality
was previously available for Solaris 9 as a separate PatchPro product and
is now part of the standard Solaris release.</para>
</listitem>
<listitem>
<para>
<emphasis role="strong">Local-mode command-line interface –</emphasis> The command-line interface, <command>smpatch</command>, can be
used even when the Solaris WBEM services are not running on your system. This
capability enables you to use <command>smpatch</command> to apply patches
while your system is in single-user mode.</para>
</listitem>
<listitem>
<para>
<emphasis role="strong">Patch list operations –</emphasis> Patch
Manager enables you to generate, save, edit, order, and resolve patch lists.
These lists can be used to perform patch operations, such as downloading and
applying patches.</para>
</listitem>
</itemizedlist>
<para>You must install at least the Developer Software Support Group of the Solaris
Express software to use Sun Patch Manager.</para>
<para>For more information about how to use Patch Manager, see <olink remap="external" targetdoc="chapter-22.xml" targetptr="patchmanager-1">Chapter 22, Managing Solaris Patches by Using Sun Patch Manager (Tasks)</olink> and the <olink remap="external" targetdoc="819-2240" targetptr="smpatch-1m">
<citerefentry>
<refentrytitle>smpatch</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> man page.</para>
</sect2>
</sect1>
<sect1 xml:id="swmgrpkgsconcepts-30493">
<title>Where to Find Software Management
Tasks</title>
<para>Use this table to find step-by-step instructions for managing software.</para>
<informaltable frame="topbot">
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colname="colspec0" colwidth="41.41*"/>
<colspec colname="colspec1" colwidth="58.59*"/>
<thead>
<row rowsep="1">
<entry>
<para>Software Management Topics</para>
</entry>
<entry>
<para>For More Information</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>Installing Solaris software.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2393">
<citetitle remap="book">Solaris Express Installation Guide: Basic Installations</citetitle>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Adding or removing Solaris software packages after installation.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="chapter-19.xml" targetptr="swmgrpkgsgui-1">Chapter 19, Managing Software With Solaris System Administration Tools (Tasks)</olink> and <olink remap="external" targetdoc="chapter-20.xml" targetptr="swmgrpkgscli-1">Chapter 20, Managing Software by Using Package Commands (Tasks)</olink>
</para>
</entry>
</row>
<row>
<entry>
<para> Adding or removing Solaris patches after installation.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="chapter-22.xml" targetptr="patchmanager-1">Chapter 22, Managing Solaris Patches by Using Sun Patch Manager (Tasks)</olink> and <olink remap="external" targetdoc="chapter-23.xml" targetptr="swmgrpatchtasks-1">Chapter 23, Managing Solaris Patches by Using the <command>patchadd</command> Command (Tasks)</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Managing patches and updates on your Solaris system with the Sun Update
Connection, System Edition software.</para>
</entry>
<entry>
<para>See the Sun Update Connection Collection at, <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="url" xlink:href="http://docs.sun.com/app/docs/coll/1320.1">
</link>.</para>
</entry>
</row>
<row>
<entry>
<para>Registering your Solaris systems.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="chapter-18.xml" targetptr="tasks-basics-2">Chapter 18, Registering Your Solaris Express 3/06 or 10/05 Software (Tasks)</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Troubleshooting software package problems.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2380" targetptr="tsswmgr-40462">Chapter 29, <citetitle remap="chapter">Troubleshooting Software Package Problems (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: Advanced Administration</citetitle>
</olink>
</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1>
<sect1 xml:id="swmgrpkgsconcepts-35274">
<title>Overview of Software Packages</title>
<para>
<indexterm xml:id="indexterm-276">
<primary>packages</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="indexterm-277">
<primary>packages</primary>
<secondary>definition of</secondary>
</indexterm>Software management involves installing or removing software products.
Sun and its third-party vendors deliver software products in a form called
a <emphasis>package</emphasis>. </para>
<para>
<indexterm xml:id="swmgrpkgsconcepts-ix1702">
<primary>software management</primary>
<secondary>packages and</secondary>
</indexterm>The term <emphasis>packaging</emphasis> generically refers to
the method for distributing and installing software products to systems where
the products will be used. A package is a collection of files and directories
in a defined format. This format conforms to the application binary interface
(ABI), which is a supplement to the System V Interface Definition. The Solaris
OS provides a set of utilities that interpret this format and provide the
means to install a package, to remove a package, or to verify a package installation. </para>
<para>A <emphasis>patch</emphasis> is a collection of files and directories
that replace or update existing files and directories that are preventing
proper execution of the existing software. For more information about patches,
see <olink remap="external" targetdoc="chapter-21.xml" targetptr="swmgrpatchconcepts-30492">Chapter 21, Managing Solaris Patches and Updates (Overview)</olink>.</para>
<note>

<para>The terms patch and update are used interchangeably in this book.</para>
</note>
<sect2 xml:id="swmgrpkgsconcepts-27">
<title>Signed Packages, Patches, and Updates</title>
<para>
<indexterm xml:id="indexterm-278">
<primary>packages, signed</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="indexterm-279">
<primary>packages</primary>
<secondary>signed</secondary>
<see>
packages, signed</see>
</indexterm>
<indexterm xml:id="indexterm-280">
<primary>patches</primary>
<secondary>signed</secondary>
<tertiary>applying</tertiary>
</indexterm>
<indexterm xml:id="indexterm-281">
<primary>keystore</primary>
</indexterm>
<indexterm xml:id="indexterm-282">
<primary>certificate, trusted</primary>
<secondary>definition</secondary>
</indexterm>
<indexterm xml:id="indexterm-283">
<primary>user key</primary>
</indexterm>
<indexterm xml:id="indexterm-284">
<primary>key, user</primary>
<see>
user key</see>
</indexterm>Packages can include a digital signature. A
package with a valid digital signature ensures that the package has not been
modified since the signature was applied to the package. Using signed packages
is a secure method of downloading or adding packages because the digital signature
can be verified before the package is added to your system.</para>
<para>The same holds true for signed patches. A patch with a valid digital
signature ensures that the patch has not been modified since the signature
was applied to the patch. Using signed patches is a secure method of downloading
or applying patches because the digital signature can be verified before the
patch is applied to your system.</para>
<para>For more information about <emphasis>applying</emphasis> signed patches
to your system, see  <olink remap="external" targetdoc="chapter-22.xml" targetptr="usepatchtoolsclitaskmap">Managing Solaris Patches by Using the Sun Patch Manager Command-Line Interface (Task Map)</olink> or <olink remap="external" targetdoc="chapter-23.xml" targetptr="swmgrpatchtasks-14">Managing Solaris Patches by Using the <command>patchadd</command> Command (Task Map)</olink>.</para>
<para>For information about <emphasis>creating</emphasis> signed packages,
see <olink remap="external" targetdoc="817-0406">
<citetitle remap="book">Application Packaging Developer’s Guide</citetitle>
</olink>.</para>
<para>A signed package is identical to an unsigned package, except for the
digital signature. The package can be installed, queried, or removed with
existing Solaris packaging tools. A signed package is also binary-compatible
with an unsigned package.</para>
<para>Before you can use <command>pkgadd</command> and <command>patchadd</command> to
add a package or patch with a digital signature to your system, you must set
up a package keystore with trusted certificates. These certificates are used
to identify that the digital signature on the package or patch is valid. Note
that the keystore and certificates are automatically set up when you use Patch
Manager to apply signed patches.</para>
<para>The following describes the general terms associated with signed packages
and patches.</para>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">Keystore</emphasis>
</term>
<listitem>
<para>A repository of certificates and keys that is queried when
needed.</para>
<itemizedlist>
<listitem>
<para>Java keystore – A repository of certificates that is
installed by default with the Solaris release. The Java keystore is usually
stored in the <filename>/usr/j2se/jre/lib/security</filename> directory.</para>
</listitem>
<listitem>
<para>Package keystore – A repository of certificates that
you import when adding signed packages and patches to your system.</para>
<para>The
package keystore is stored in the <filename>/var/sadm/security</filename> directory
by default.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">Trusted certificate</emphasis>
</term>
<listitem>
<para>A certificate that holds a public key that belongs to another
entity. The <emphasis>trusted certificate</emphasis> is named as such because
the keystore owner trusts that the public key in the certificate indeed belongs
to the identity identified by the subject or owner of the certificate. The
issuer of the certificate vouches for this trust by signing the certificate.</para>
<para>Trusted certificates are used when verifying signatures, and when initiating
a connection to a secure (SSL) server.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">User key</emphasis>
</term>
<listitem>
<para>Holds sensitive cryptographic key information. This information
is stored in a protected format to prevent unauthorized access. A user key
consists of both the user's private key and the public key certificate that
corresponds to the private key.</para>
</listitem>
</varlistentry>
</variablelist>
<para>The process of using the <command>pkgadd</command> or <command>patchadd</command> command
to add a signed package or patch to your system involves three basic steps:</para>
<orderedlist>
<listitem>
<para>Adding the certificates to your system's package keystore
by using the <command>pkgadm</command> command</para>
</listitem>
<listitem>
<para>(Optional) Listing the certificates by using the <command>pkgadm</command> command</para>
</listitem>
<listitem>
<para>Adding the package with the <command>pkgadd</command> command
or applying the patch by using the <command>patchadd</command> command</para>
</listitem>
</orderedlist>
<para>If you use Patch Manager to apply patches to your system, you do not
need to manually set up the keystore and certificates, as it is automatically
set up.</para>
<para>For step-by-step instructions on adding signed packages to your system,
see <olink remap="external" targetdoc="chapter-20.xml" targetptr="swmgrpkgscli-2">Adding and Removing Signed Packages by Using the <command>pkgadd</command> Command (Task Map)</olink>.</para>
<para>For step-by-step instructions on applying patches and updates to your
system with the Sun Update Manager tools, see the Sun Update Connection, System
Edition software documentation at <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="url" xlink:href="http://docs.sun.com/app/docs/coll/1320.1/">
</link>.</para>
<para>For step-by-step instructions on applying signed patches to your system
with the Sun Patch Manger tools, see  <olink remap="external" targetdoc="chapter-22.xml" targetptr="usepatchtoolsclitaskmap">Managing Solaris Patches by Using the Sun Patch Manager Command-Line Interface (Task Map)</olink>, or <olink remap="external" targetdoc="chapter-23.xml" targetptr="swmgrpatchtasks-14">Managing Solaris Patches by Using the <command>patchadd</command> Command (Task Map)</olink>.</para>
<sect3 xml:id="swmgrpkgsconcepts-28">
<title>Using Sun's Certificates to Verify
Signed Packages and Patches</title>
<para>Digital certificates, issued and authenticated by Sun Microsystems,
are used to verify that the downloaded package or patch with the digital signature
has not been compromised. These certificates are imported into your system's
package keystore.<indexterm xml:id="indexterm-285">
<primary>certificate, trusted</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="indexterm-286">
<primary>ASN.1 (Abstract Syntax Notation 1)</primary>
</indexterm>
<indexterm xml:id="indexterm-287">
<primary>base64</primary>
</indexterm>
<indexterm xml:id="indexterm-288">
<primary>DER (Distinguished Encoding Rules)</primary>
</indexterm>
<indexterm xml:id="indexterm-289">
<primary>PEM (Privacy Enhanced Message)</primary>
</indexterm>
<indexterm xml:id="indexterm-290">
<primary>PKCS7 (Public Key Cryptography Standard #7)</primary>
</indexterm>
<indexterm xml:id="indexterm-291">
<primary>X.509</primary>
</indexterm>
<indexterm xml:id="indexterm-292">
<primary>
<command>pkgadm</command> command</primary>
<secondary>
<command>pkgadm listcert</command> command</secondary>
<tertiary>output</tertiary>
</indexterm>
</para>
<para>A <emphasis>stream-formatted</emphasis> SVR4-signed package or patch
contains an embedded PEM-encoded PKCS7 signature. This signature contains
at a minimum the encrypted digest of the package or patch, along with the
signer's X.509 public key certificate. The package or patch can also contain
a <emphasis>certificate chain</emphasis> that is used to form a chain of trust
from the signer's certificate to a locally stored trusted certificate.</para>
<para>The PEM-encoded PKCS7 signature is used to verify the following information:</para>
<itemizedlist>
<listitem>
<para>The package came from the entity that signed it.</para>
</listitem>
<listitem>
<para>The entity indeed signed it.</para>
</listitem>
<listitem>
<para>The package hasn't been modified since the entity signed it.</para>
</listitem>
<listitem>
<para>The entity that signed it is a trusted entity.</para>
</listitem>
</itemizedlist>
<para>All Sun certificates are issued by Baltimore Technologies, which recently
bought GTE CyberTrust.</para>
<para>Access to a package keystore is protected by a special password that
you specify when you import the Sun certificates into your system's package
keystore.</para>
<para>If you use the <command>pkgadm listcert</command> command, you can view
information about your locally stored certificates in the package keystore.
For example:</para>
<screen># <userinput>pkgadm listcert -P pass:</userinput>
<replaceable>store-pass</replaceable>
    Keystore Alias: GTE CyberTrust Root
       Common Name: GTE CyberTrust Root
  Certificate Type: Trusted Certificate
Issuer Common Name: GTE CyberTrust Root
    Validity Dates: &lt;Feb 23 23:01:00 1996 GMT&gt; - &lt;Feb 23 23:59:00 2006 GMT&gt;
   MD5 Fingerprint: C4:D7:F0:B2:A3:C5:7D:61:67:F0:04:CD:43:D3:BA:58
  SHA1 Fingerprint: 90:DE:DE:9E:4C:4E:9F:6F:D8:86:17:57:9D:D3:91:BC:65:A6...</screen>
<para>The following describes the output of the <command>pkgadm listcert</command> command.</para>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">Keystore Alias</emphasis>
</term>
<listitem>
<para>When you retrieve certificates for printing, signing, or removing,
this name must be used to reference the certificate.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">Command Name</emphasis>
</term>
<listitem>
<para>The common name of the certificate. For trusted certificates,
this name is the same as the keystore alias.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">Certificate Type</emphasis>
</term>
<listitem>
<para>Can be one of two types:</para>
<itemizedlist>
<listitem>
<para>Trusted certificate – A certificate that can be used
as a trust anchor when verifying other certificates. No private key is associated
with a trusted certificate.</para>
</listitem>
<listitem>
<para>Signing certificate – A certificate that can be used
when signing a package or patch. A private key is  associated with a signing
certificate.</para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">Issuer Command Name</emphasis>
</term>
<listitem>
<para>The name of the entity that issued, and therefore signed,
this certificate. For trusted certificate authority (CA) certificates, the
issuer common name and common name are the same.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">Validity Dates</emphasis>
</term>
<listitem>
<para>A date range that identifies when the certificate is valid.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">MD5 Fingerprint</emphasis>
</term>
<listitem>
<para>An MD5 digest of the certificate. This digest can be used
to verify that the certificate has not been altered during transmission from
the source of the certificate.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">SHA1 Fingerprint</emphasis>
</term>
<listitem>
<para>Similar to an MD5 fingerprint, except that it is calculated
using a different algorithm.</para>
</listitem>
</varlistentry>
</variablelist>
<para>Each certificate is authenticated by comparing its MD5 and SHA1 hashes,
also called <emphasis>fingerprints</emphasis>, against the known correct fingerprints
published by the issuer.</para>
</sect3>
<sect3 xml:id="swmgrpkgsconcepts-36">
<title>Importing Sun's Trusted Certificates</title>
<para>
<indexterm xml:id="indexterm-293">
<primary>certificate, trusted</primary>
<secondary>obtaining</secondary>
</indexterm>
<indexterm xml:id="indexterm-294">
<primary>Java keystore</primary>
</indexterm>
<indexterm xml:id="indexterm-295">
<primary>PKI (Public Key Infrastructure) site</primary>
</indexterm>
<indexterm xml:id="indexterm-296">
<primary>PatchPro</primary>
<secondary>keystore</secondary>
</indexterm>You can obtain Sun's trusted certificates for adding signed packages
and patches in the following ways:</para>
<itemizedlist>
<listitem>
<para>
<emphasis role="strong">Java keystore</emphasis> – Import
Sun's Root CA certificate that is included by default in the Java keystore
when you install the Solaris release.</para>
</listitem>
<listitem>
<para>
<emphasis role="strong">Sun's Public Key Infrastructure (PKI)
site</emphasis> – If you do not have a Java keystore available on your
system, you can import the certificates from this site.</para>
<para>
<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="text" xlink:href="https://ra.sun.com:11005">https://ra.sun.com:11005/</link>
</para>
</listitem>
<listitem>
<para>
<emphasis role="strong">PatchPro's keystore</emphasis> –
If you have installed PatchPro for applying signed patches with the <command>smpatch</command> command, you can import Sun's Root CA certificate from the Java
keystore.</para>
</listitem>
</itemizedlist>
</sect3>
<sect3 xml:id="swmgrpkgsconcepts-31">
<title>Setting Up a Package Keystore</title>
<para>
<indexterm xml:id="indexterm-297">
<primary>
<command>keytool</command> command</primary>
</indexterm>
<indexterm xml:id="indexterm-298">
<primary>package keystore</primary>
<secondary>setting up</secondary>
</indexterm>In previous Solaris releases, you could download the patch management
tools and create a Java keystore, for use by PatchPro, by importing the certificates
with the <command>keytool</command> command.</para>
<para>If your system already has a populated Java keystore, you can now export
the Sun Microsystems root CA certificate from the Java keystore with the <command>keytool</command> command. Then, use the <command>pkgadm</command> command
to import this certificate into the package keystore.</para>
<para>After the Root CA certificate is imported into the package keystore,
you can use the <command>pkgadd</command> and <command>patchadd</command> commands
to add signed packages and patches to your system.</para>
<note>

<para>The Sun Microsystems root-level certificates are only required
when adding Sun-signed patches and packages.</para>
</note>
<para>For step-by-step instructions on importing certificates into the package
keystore, see <olink remap="external" targetdoc="chapter-20.xml" targetptr="swmgrpkgscli-3">How to Import a Trusted Certificate From the Java Keystore (<command>pkgadm addcert</command>)</olink>.</para>
<para>For complete instructions on adding signed packages with the <command>pkgadd</command> command, see <olink remap="external" targetdoc="chapter-20.xml" targetptr="swmgrpkgscli-13">How to Add a Signed Package (<command>pkgadd</command>)</olink>.</para>
</sect3>
</sect2>
</sect1>
<sect1 xml:id="swmgrpkgsconcepts-38835">
<title>Tools for Managing Software Packages</title>
<para>
<indexterm xml:id="swmgrpkgsconcepts-ix1704">
<primary>software management</primary>
<secondary>tools for</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1710">
<primary>
<command>pkgrm</command> command</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1711">
<primary>
<command>pkgadd</command> command</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="indexterm-299">
<primary>
<command>pkgadm</command> command</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix1834">
<primary>
<command>pkgchk</command> command</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix1838">
<primary>
<command>pkginfo</command> command</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix1839">
<primary>
<command>pkgparam</command> command</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix18300">
<primary>
<command>prodreg</command> command</primary>
<secondary>overview</secondary>
</indexterm>
<indexterm xml:id="indexterm-300">
<primary>
<command>pkgtrans</command> command</primary>
<secondary>overview</secondary>
</indexterm>The following table describes the tools for adding and removing
software packages from a system after the Solaris release is installed on
a system.</para>
<table frame="topbot" xml:id="swmgrpkgs-37371">

<title>Tools or Commands for Managing
Software Packages</title>
<tgroup cols="3" colsep="0" rowsep="0">
<colspec colname="column1" colwidth="111.72*"/>
<colspec colname="column2" colwidth="202.71*"/>
<colspec colname="colspec1" colwidth="295.58*"/>
<thead>
<row rowsep="1">
<entry>
<para>Tool or Command </para>
</entry>
<entry>
<para>Description</para>
</entry>
<entry>
<para>Man Page</para>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<para>
<command>installer</command>
</para>
</entry>
<entry>
<para>Launches an installer, such as Solaris installation GUI, to add software
from the Solaris media. The installer must be available either locally or
remotely.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2240" targetptr="installer-1m">
<citerefentry>
<refentrytitle>installer</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>
<command>prodreg (GUI)</command>
</para>
</entry>
<entry>
<para>Launches an installer to add, remove, or display software product information.
Use Solaris Product Registry to remove or display information about software
products that were originally installed by using the Solaris installation
GUI or the Solaris <command>pkgadd</command> command.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2240" targetptr="prodreg-1m">
<citerefentry>
<refentrytitle>prodreg</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>Solaris Product Registry <command>prodreg</command> Viewer (CLI) </para>
</entry>
<entry>
<para>Use the <command>prodreg</command> command to remove or display information
about software products that were originally installed by using the Solaris
installation GUI or the Solaris <command>pkgadd</command> command.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2240" targetptr="prodreg-1m">
<citerefentry>
<refentrytitle>prodreg</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>
<command>pkgadd</command>
</para>
<para> </para>
</entry>
<entry>
<para>Installs a signed or unsigned software package.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2240" targetptr="pkgadd-1m">
<citerefentry>
<refentrytitle>pkgadd</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>
<command>pkgadm</command>
</para>
</entry>
<entry>
<para>Maintains the keys and certificates used to manage signed packages and
signed patches.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2240" targetptr="pkgadm-1m">
<citerefentry>
<refentrytitle>pkgadm</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>
<command>pkgchk</command>
</para>
</entry>
<entry>
<para>Checks the installation of a software package.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2240" targetptr="pkgchk-1m">
<citerefentry>
<refentrytitle>pkgchk</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>
<command>pkginfo</command>
</para>
</entry>
<entry>
<para>Lists software package information.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2239" targetptr="pkginfo-1">
<citerefentry>
<refentrytitle>pkginfo</refentrytitle>
<manvolnum>
1
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>
<command>pkgparam</command>
</para>
<para> </para>
</entry>
<entry>
<para>Displays software package parameter values.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2239" targetptr="pkgparam-1">
<citerefentry>
<refentrytitle>pkgparam</refentrytitle>
<manvolnum>
1
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>
<command>pkgrm</command>
</para>
</entry>
<entry>
<para>Removes a software package.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2240" targetptr="pkgrm-1m">
<citerefentry>
<refentrytitle>pkgrm</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
<row>
<entry>
<para>
<command>pkgtrans</command>
</para>
</entry>
<entry>
<para>Translates an installable package from one format to another format.
The <option>
g</option> option instructs the <command>pkgtrans</command> command
to generate and store a signature in the resulting data stream.</para>
</entry>
<entry>
<para>
<olink remap="external" targetdoc="819-2239" targetptr="pkgtrans-1">
<citerefentry>
<refentrytitle>pkgtrans</refentrytitle>
<manvolnum>
1
</manvolnum>
</citerefentry>
</olink>
</para>
</entry>
</row>
</tbody>
</tgroup>
</table>
<para>For more information about these commands, see <olink remap="external" targetdoc="chapter-19.xml" targetptr="swmgrpkgsgui-1">Chapter 19, Managing Software With Solaris System Administration Tools (Tasks)</olink> and <olink remap="external" targetdoc="chapter-20.xml" targetptr="swmgrpkgscli-1">Chapter 20, Managing Software by Using Package Commands (Tasks)</olink>.</para>
</sect1>
<sect1 xml:id="swmgrpkgsconcepts-25409">
<title>Adding or Removing a Software Package
(<command>pkgadd</command>)</title>
<para>All the software management tools that are listed in <olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgs-37371">Table 16–1</olink> are used to add, remove,
or query information about installed software. The Solaris Product Registry <command>prodreg</command> viewer and the Solaris installation GUI  both access install
data that is stored in the Solaris Product Registry.  The package tools, such
as the <command>pkgadd</command> and <command>pkgrm</command> commands, also
access or modify install data.</para>
<para>When you add a package, the <command>pkgadd</command> command uncompresses
and copies files from the installation media to a local system's disk. When
you remove a package, the <command>pkgrm</command> command deletes all files
associated with that package, unless those files are also shared with other
packages. </para>
<para>Package files are delivered in package format and are unusable as they
are delivered. The <command>pkgadd</command> command interprets the software
package's control files, and then uncompresses and installs the product files
onto the system's local disk.</para>
<para>Although the <command>pkgadd</command> and <command>pkgrm</command> commands
do not log their output to a standard location, they do keep track of the
package that is installed or removed. The <command>pkgadd</command> and <command>pkgrm</command> commands store information about a package that has been installed
or removed in a software product database.</para>
<para>By updating this database, the <command>pkgadd</command> and <command>pkgrm</command> commands keep a record of all software products installed on the
system.</para>
</sect1>
<sect1 xml:id="swmgrpkgsconcepts-16775">
<title>Key Points for Adding Software
Packages (<command>pkgadd</command>)</title>
<para>
<indexterm xml:id="swmgrpkgsconcepts-ix1722">
<primary>adding</primary>
<secondary>packages (prerequisites)</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1723">
<primary>
<command>pkgrm</command> command</primary>
<secondary>prerequisites for using</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1724">
<primary>
<command>pkgadd</command> command</primary>
<secondary>prerequisites for using</secondary>
</indexterm>Keep the following key points in mind before you install or remove
packages on your system:</para>
<itemizedlist>
<listitem>
<para>
<indexterm xml:id="swmgrpkgsconcepts-ix1725">
<primary>
<literal>SUNW</literal> prefix</primary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1726">
<primary>software management</primary>
<secondary>naming conventions for packages</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1727">
<primary>names</primary>
<secondary>
<literal>SUNW</literal> prefix</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1728">
<primary>names</primary>
<secondary>software package naming conventions</secondary>
</indexterm>
<emphasis role="strong">Package naming conventions</emphasis> –
Sun packages always begin with the prefix <literal>SUNW</literal>, as in <filename>SUNWaccr</filename>, <filename>SUNWadmap</filename>, and <filename>SUNWcsu</filename>.
Third-party packages usually begin with a prefix that corresponds to the company's
stock symbol.    </para>
</listitem>
<listitem>
<para>
<indexterm xml:id="swmgrpkgsconcepts-ix1730">
<primary>
<command>pkginfo</command> command</primary>
<secondary>overview</secondary>
</indexterm>
<emphasis role="strong">What software is already installed</emphasis> –
You can use the Solaris installation GUI, Solaris Product Registry <command>prodreg</command> viewer (either GUI or CLI) or the <command>pkginfo</command> command
to determine the software that is already installed on a system.</para>
</listitem>
<listitem>
<para>
<emphasis role="strong">How servers and clients share software</emphasis> –
Clients might have software that resides partially on a server and partially
on the client. In such cases, adding software for the client requires that
you add packages to both the server and the client.</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 xml:id="swmgrpkgsconcepts-35627">
<title>Guidelines for Removing Packages
(<command>pkgrm</command>)</title>
<para>
<indexterm xml:id="swmgrpkgsconcepts-ix1812">
<primary>removing</primary>
<secondary>software packages</secondary>
<tertiary>guidelines for</tertiary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1815">
<primary>
<command>pkgrm</command> command</primary>
<secondary>
<command>rm</command> command vs.</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1816">
<primary>
<command>pkgrm</command> command</primary>
<secondary>caution</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1817">
<primary>
<command>pkgrm</command> command</primary>
<secondary>
<command>rm</command> command vs.</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1818">
<primary>
<command>removef</command> command</primary>
</indexterm>You should use one of the tools listed in <olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgs-37371">Table 16–1</olink> to remove a package,
even though you might be tempted to use the <command>rm</command> command
instead. For example, you could use the <command>rm</command> command to remove
a binary executable file. However, doing so is not the same as using the <command>pkgrm</command> command to remove the software package that includes that
binary executable. Using the <command>rm</command> command to remove a package's
files will corrupt the software products database. If you really only want
to remove one file, you can use the <command>removef</command> command. This
command will update the software product database correctly so that the file
is no longer a part of the package. For more information, see the <olink remap="external" targetdoc="819-2240" targetptr="removef-1m">
<citerefentry>
<refentrytitle>removef</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink> man page.    </para>
<para>
<indexterm xml:id="indexterm-301">
<primary>administration file</primary>
<secondary>keyword</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1819">
<primary>adding</primary>
<secondary>multiple versions of a package</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1820">
<primary>multiple versions of software packages</primary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1821">
<primary>base directory (<filename>basedir</filename>)</primary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1822">
<primary>
<literal>basedir</literal> keyword (administration files)</primary>
</indexterm>
<indexterm xml:id="swmgrpkgsconcepts-ix1823">
<primary>directories</primary>
<secondary>base directory (<filename>basedir</filename>)</secondary>
</indexterm>If you intend to keep multiple versions of a package, install
new versions into a different directory than the already installed package
by using the <command>pkgadd</command> command. For example, if you intended
to keep multiple versions of a document processing application. The directory
where a package is installed is referred to as the base directory. You can
manipulate the base directory by setting the <literal>basedir</literal> keyword
in a special file called an administration file. For more information on using
an <emphasis>administration file</emphasis> and on setting the base directory,
see the <olink remap="internal" targetdoc="chapter-16.xml" targetptr="swmgrpkgs-19113">Avoiding User Interaction When Adding Packages (<command>pkgadd</command>)</olink> and <olink remap="external" targetdoc="819-2251" targetptr="admin-4">
<citerefentry>
<refentrytitle>admin</refentrytitle>
<manvolnum>
4
</manvolnum>
</citerefentry>
</olink> man page.</para>
<note>

<para>If you use the upgrade option when installing Solaris software,
the Solaris installation software checks the software product database to
determine the products that are already installed on the system.</para>
</note>
</sect1>
<sect1 xml:id="swmgrpkgs-19113">
<title>Avoiding User Interaction When Adding Packages
(<command>pkgadd</command>)</title>
<para>This section provides information about avoiding user interaction when
adding packages with the <command>pkgadd</command> command.</para>
<sect2 xml:id="swmgrpkgsconcepts-3">
<title>Using an Administration File</title>
<para>
<indexterm xml:id="swmgrpkgs-ix1844">
<primary>adding</primary>
<secondary>packages with administration files</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix1845">
<primary>
<command>pkgadd</command> command</primary>
<secondary>bypassing user interaction</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix1846">
<primary>
<command>pkgadd</command> command</primary>
<secondary>
<option>
a</option> option (administration file)</secondary>
</indexterm>When you use the <command>pkgadd</command> <option>
a</option> command,
the command consults a special administration file for information about how
the installation should proceed. Normally, the <command>pkgadd</command> command
performs several checks and prompts the user for confirmation before it actually
adds the specified package. You can, however, create an administration file
that indicates to the <command>pkgadd</command> command that it should bypass
these checks and install the package without user confirmation.   </para>
<para>
<indexterm xml:id="swmgrpkgs-ix1849">
<primary>
<filename>/var/sadm/install/admin</filename> directory</primary>
</indexterm>The <command>pkgadd</command> command, by default, checks the
current working directory for an administration file. If the <command>pkgadd</command> command
doesn't find an administration file in the current working directory, it checks
the <filename>/var/sadm/install/admin</filename> directory for the specified
administration file. The <command>pkgadd</command> command also accepts an
absolute path to the administration file.  </para>
<note>

<para>Use administration files judiciously. You should know where a
package's files are installed and how a package's installation scripts run
before using an administration file to avoid the checks and prompts that the <command>pkgadd</command> command normally provides.</para>
</note>
<para>
<indexterm xml:id="swmgrpkgs-ix1851">
<primary>
<literal>noask_pkgadd</literal> administration file</primary>
</indexterm>The following example shows an administration file that prevents
the <command>pkgadd</command> command from prompting the user for confirmation
before installing the package. </para>
<screen>mail=
instance=overwrite
partial=nocheck
runlevel=nocheck
idepend=nocheck
rdepend=nocheck
space=nocheck
setuid=nocheck
conflict=nocheck
action=nocheck
networktimeout=60
networkretries=3
authentication=quit
keystore=/var/sadm/security
proxy=
basedir=default</screen>
<para>
<indexterm xml:id="swmgrpkgs-ix1852">
<primary>removing</primary>
<secondary>packages with administration files and</secondary>
</indexterm>Besides using administration files to avoid user interaction when
you add packages, you can use them in several other ways. For example, you
can use an administration file to quit a package installation (without user
interaction) if there's an error or to avoid interaction when you remove packages
by using the <command>pkgrm</command> command. </para>
<para>
<indexterm xml:id="swmgrpkgs-ix1854">
<primary>
<command>pkgadd</command> command</primary>
<secondary>alternate base directory and</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix1855">
<primary>multiple versions of software packages</primary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix1857">
<primary>base directory (<filename>basedir</filename>)</primary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix1861">
<primary>
<command>pkgadd</command> command</primary>
<secondary>
<option>
a</option> option (administration file)</secondary>
</indexterm>
<indexterm xml:id="swmgrpkgs-ix1862">
<primary>
<command>pkgadd</command> command</primary>
<secondary>bypassing user interaction</secondary>
</indexterm>You can also assign a special installation directory for a package,
which you might do if you wanted to maintain multiple versions of a package
on a system. To do so, set an alternate base directory in the administration
file by using the <literal>basedir</literal> keyword. The keyword specifies
where the package will be installed. For more information, see the <olink remap="external" targetdoc="819-2251" targetptr="admin-4">
<citerefentry>
<refentrytitle>admin</refentrytitle>
<manvolnum>
4
</manvolnum>
</citerefentry>
</olink> man page.</para>
</sect2>
<sect2 xml:id="swmgrpkgsconcepts-4">
<title>Using a Response File (<command>pkgadd</command>)</title>
<para>A response file contains your answers to specific questions that are
asked by an <firstterm>interactive package</firstterm>. An interactive package
includes a <filename>request</filename> script that asks you questions prior
to package installation, such as whether optional pieces of the package should
be installed.</para>
<para>If you know prior to installation that the package is an interactive
package, and you want to store your answers to prevent user interaction during
future installations, use the <command>pkgask</command> command to save your
response. For more information on this command, see <olink remap="external" targetdoc="819-2240" targetptr="pkgask-1m">
<citerefentry>
<refentrytitle>pkgask</refentrytitle>
<manvolnum>
1M
</manvolnum>
</citerefentry>
</olink>.</para>
<para>Once you have stored your responses to the questions asked by the <filename>request</filename> script, you can use the <command>pkgadd -r</command> command
to install the package without user interaction.</para>
</sect2>
</sect1>
</chapter>
