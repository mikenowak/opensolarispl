<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Tuning Your Patch Management Environment
by Using the Command-Line Interface (Task Map)</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="System Administration Guide: Basic Administration"><link rel="up" href="ch22.html" title="Chapter 22. Managing Solaris Patches by Using Sun Patch
Manager (Tasks)"><link rel="prev" href="ch22s07.html" title="Managing Patches by Using the Command-Line
Interface (Task Map)"><link rel="next" href="ch22s09.html" title="Patch Manager Troubleshooting"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Tuning Your Patch Management Environment
by Using the Command-Line Interface (Task Map)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch22s07.html">Prev</a> </td><th width="60%" align="center">Chapter 22. Managing Solaris Patches by Using Sun Patch
Manager (Tasks)</th><td width="20%" align="right"> <a accesskey="n" href="ch22s09.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tunepatchenvclitaskmap"></a>Tuning Your Patch Management Environment
by Using the Command-Line Interface (Task Map)</h2></div></div></div>

<a class="indexterm" name="indexterm-520"></a>
<a class="indexterm" name="indexterm-521"></a>
<p>The following table identifies the optional tasks that you might perform
when you tune the patch management environment for your system.</p>
<p>Use the <span><strong class="command">smpatch</strong></span> command to tune your patch management
environment. For the list of configuration parameters you can set, see <span class="olink">Setting Patch Manager Configuration Parameters</span> and
the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">smpatch</span>
(
1M
)
</span>
</span> man
page.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>You can use the Sun Update Connection, System Edition software
to manage patches and updates on your Solaris system. The Sun Update Connection
software has the same functionality as the Sun Patch Manager 2.0 tools, with
the addition of some new features and enhancements. For more information,
see <span class="olink">What's New in Software Management in the Solaris Operating System?</span>.</p>
</div>
<p>The following are optional tasks that you can perform with Sun Patch
Manager.</p>
<div class="informaltable">
<table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
<p>Task</p>
</th><th>
<p>Description</p>
</th><th>
<p>For Instructions</p>
</th></tr></thead><tbody><tr><td>
<p>Obtain configuration information about your patch management environment.</p>
</td><td>
<p>View the configuration of your patch management environment, which might
help you diagnose problems.</p>
</td><td>
<p>
<span class="olink">How to View the Configuration Settings for Your Patch Management Environment (Command Line)</span>
</p>
</td></tr><tr><td>
<p>Change the policy for applying patches for your system.</p>
</td><td>
<p>Patch Manager can update your system with standard patches automatically.
If you want to update your system with some types of nonstandard patches,
you must change your policy for applying patches.</p>
<p>By default, only patches that are associated with the <code class="literal">standard</code>, <code class="literal">rebootafter</code>, or <code class="literal">reconfigafter</code> properties are
applied by an update operation.</p>
</td><td>
<p>
<span class="olink">How to Change the Policy for Applying Patches (Command Line)</span>
</p>
</td></tr><tr><td>
<p>Change the patch set to use for system analysis.</p>
</td><td>
<p>Patch Manager bases analyses on all available Sun patches. If you want
to apply only patches from a different patch set, such as the Recommended
Patch Cluster, you must change the patch set.</p>
</td><td>
<p>
<span class="olink">How to Change the Patch Set (Command Line)</span>
</p>
</td></tr><tr><td>
<p>Set different directory locations.</p>
</td><td>
<p>You might want to specify a different location for the download directory
or the backout directory if the default locations are not large enough.</p>
</td><td>
<p>
<span class="olink">How to Change Directory Locations (Command Line)</span>
</p>
</td></tr><tr><td>
<p>Reset configuration parameters to the default values.</p>
</td><td>
<p>You might want to reset configuration parameters to the default values.</p>
<p>Note that some configuration parameters have an empty default value.</p>
</td><td>
<p>
<span class="olink">How to Reset Configuration Parameters to the Default Values (Command Line)</span>
</p>
</td></tr></tbody></table>
</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>The following procedures and examples show how to run the local
mode <span><strong class="command">smpatch</strong></span> command, which is run by default. To run the
remote mode version, use any of the authentication options (except for <code class="option">
L</code>)
or the remote options. See the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">smpatch</span>
(
1M
)
</span>
</span> man
page.</p>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2151009"></a></h3></div></div></div>

<div class="task"><a name="viewpatchenvcliproc"></a><p class="title"><b>How to View the Configuration Settings
for Your Patch Management Environment (Command Line)</b></p><a class="indexterm" name="indexterm-522"></a><a class="indexterm" name="indexterm-523"></a><a class="indexterm" name="indexterm-524"></a><div class="tasksummary">
<p>You can check the configuration settings of your patch management environment
to help diagnose problems or to understand your system's patch-related settings.</p>
<p>The configuration settings output shows an entry for all configuration
parameters. Each entry appears on a line by itself.</p>
<p>When you list all settings, each entry includes three fields: the parameter
name, the value you have assigned, and its default value. The fields are separated
by one or more tab characters.</p>
<p>The following values have special meaning:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>
<code class="literal">-</code> means that no value is set</p>
</li><li>
<p>
<code class="literal">""</code> means that the value is the null string</p>
</li><li>
<p>
<code class="literal">\-</code> means that the value is <code class="literal">-</code>
</p>
</li><li>
<p>
<code class="literal">\""</code> means that the value is <code class="literal">""</code> (two
double quotes)</p>
</li></ul></div>
<p>In addition to these special values, these special characters might
appear in the output:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>
<code class="literal">\t</code> for a tab</p>
</li><li>
<p>
<code class="literal">\n</code> for a newline</p>
</li><li>
<p>
<code class="literal">\\</code> for a backslash</p>
</li></ul></div>
</div><div class="procedure"><ol type="1"><li>
<p>Become an appropriately authorized user or assume a role that includes the Software Installation profile or the <code class="literal">solaris.admin.patchmgr.*</code> authorization.</p>
<p>The System Administrator profile includes the appropriate profiles. To create the role and assign the role to a user, see <span class="olink">
<em class="citetitle">Configuring RBAC</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li>
<p>List the configuration settings for your patch management environment.</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>To list all settings, type:</p>
<pre class="screen"># <strong class="userinput"><code>smpatch get</code></strong>
</pre>
</li><li>
<p>To list the values for one or more parameters, type:</p>
<pre class="screen"># <strong class="userinput"><code>smpatch get <em class="replaceable"><code>parameter-name...</code></em>
</code></strong>
</pre>
</li></ul></div>
</li></ol></div><div class="example"><a name="listparamscliexample"></a><p class="title"><b>Example 22.8. Viewing Configuration Settings for Your Patch Management Environment</b></p>


<p>The following example shows how to list all the configuration settings
for your patch management environment.</p>
<pre class="screen"># <strong class="userinput"><code>smpatch get</code></strong>
patchpro.backout.directory  -      ""
patchpro.download.directory -      /var/sadm/spool
patchpro.install.types      -      rebootafter:reconfigafter:standard
patchpro.patch.source       -      https://updateserver.sun.com/solaris/
patchpro.patchset           -      patchdb
patchpro.proxy.host         -      ""
patchpro.proxy.passwd       ****   ****
patchpro.proxy.port         -      8080
patchpro.proxy.user         -      ""
patchpro.sun.passwd         ****   ****
patchpro.sun.user           -      ""</pre>
<p>The following example shows how to list the configuration settings for
the <code class="literal">patchpro.download.directory</code> and <code class="literal">patchpro.patchset</code> parameters.</p>
<pre class="screen"># <strong class="userinput"><code>smpatch get patchpro.download.directory patchpro.patchset</code></strong>
/var/sadm/spool
patchdb</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2151413"></a></h3></div></div></div>

<div class="task"><a name="patchpolicycliproc"></a><p class="title"><b>How to Change the Policy for Applying
Patches (Command Line)</b></p><a class="indexterm" name="indexterm-525"></a><a class="indexterm" name="indexterm-526"></a><div class="tasksummary">
<p>If you want to configure your system to apply some nonstandard patches
during an update operation, you must change the policy for applying patches.</p>
<p>By default, only patches that are associated with the <code class="literal">standard</code>, <code class="literal">rebootafter</code>, or <code class="literal">reconfigafter</code> properties can
be applied by an update operation.</p>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3>

<p>If you change your policy from the default, Sun makes no guarantees
that the patches apply correctly to your system or that your system will function
properly.</p>
</div>
<p>For more information about the policy for applying patches, see <span class="olink">Customizing the Policy for Applying Patches</span>.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Determine the types of nonstandard patch properties that you want
to apply during an update.</p>
</li><li>
<p>Become an appropriately authorized user or assume a role that includes the Software Installation profile or the <code class="literal">solaris.admin.patchmgr.*</code> authorization.</p>
<p>The System Administrator profile includes the appropriate profiles. To create the role and assign the role to a user, see <span class="olink">
<em class="citetitle">Configuring RBAC</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li>
<p>Specify the new policy.</p>
<pre class="screen"># <strong class="userinput"><code>smpatch set patchpro.install.types=<em class="replaceable"><code>patch-property</code></em>
</code></strong>
</pre>
<p>
<em class="replaceable"><code>patch-property</code></em> is a list of patch properties
each separated by a colon (<code class="literal">:</code>). For the list of valid patch
properties, see <span class="olink">Customizing the Policy for Applying Patches</span>.</p>
</li></ol></div><div class="example"><a name="patchpolicycliexample"></a><p class="title"><b>Example 22.9. Changing the Policy for Applying Patches</b></p>


<p>This example shows how to set the policy for a system. The new policy
also includes patches that require that the system be rebooted immediately
for the patch to take effect.</p>
<pre class="screen"># <strong class="userinput"><code>smpatch set \
patchpro.install.types=standard:rebootafter:reconfigafter:rebootimmediate</code></strong>
</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2151673"></a></h3></div></div></div>

<div class="task"><a name="patchsetcliproc"></a><p class="title"><b>How to Change the Patch Set (Command Line)</b></p><a class="indexterm" name="indexterm-527"></a><a class="indexterm" name="indexterm-528"></a><div class="tasksummary">
<p>You can choose to analyze your system based on different sets of Sun
patches, such as the Recommended Patch Cluster. By default, you use the patch
set All Available Patches.</p>
<p>As of this Solaris release, the only patch sets available from Sun are
All Available Patches and Recommended Patch Cluster.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Become an appropriately authorized user or assume a role that includes the Software Installation profile or the <code class="literal">solaris.admin.patchmgr.*</code> authorization.</p>
<p>The System Administrator profile includes the appropriate profiles. To create the role and assign the role to a user, see <span class="olink">
<em class="citetitle">Configuring RBAC</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li>
<p>Specify the patch set to use.</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>To base your analysis on all patches, type:</p>
<pre class="screen"># <strong class="userinput"><code>smpatch set patchpro.patchset=patchdb</code></strong>
</pre>
</li><li>
<p>To base your analysis on recommended patches, type:</p>
<pre class="screen"># <strong class="userinput"><code>smpatch set patchpro.patchset=recommended</code></strong>
</pre>
</li><li>
<p>To base your analysis on another patch set, type:</p>
<pre class="screen"># <strong class="userinput"><code>smpatch set patchpro.patchset=<em class="replaceable"><code>patch-set</code></em>
</code></strong>
</pre>
</li></ul></div>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2151869"></a></h3></div></div></div>

<div class="task"><a name="patchdirscliproc"></a><p class="title"><b>How to Change Directory Locations (Command
Line)</b></p><a class="indexterm" name="indexterm-529"></a><a class="indexterm" name="indexterm-530"></a><a class="indexterm" name="indexterm-531"></a><a class="indexterm" name="indexterm-532"></a><a class="indexterm" name="indexterm-533"></a><div class="tasksummary">
<p>Patch Manager is configured to use these default locations for storing
patch-related data:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>
<span class="strong"><strong>Download directory &#8211;</strong></span> Directory
in which patches are stored when they are downloaded from the patch source.
This is also the directory from which patches are applied. Patches remain
in this directory until they are successfully applied. The default location
is <code class="filename">/var/sadm/spool</code>.</p>
</li><li>
<p>
<span class="strong"><strong>Backout data directory &#8211;</strong></span> Directory
in which data that enables a patch to be backed out is stored. By default, <span class="olink">
<span class="emphasis"><em>backout data</em></span>
</span> is
stored in the default locations used by <span><strong class="command">patchadd</strong></span>. This
is the <code class="filename">save</code> directory of each package that was modified
by the patch. For example, if a patch modifies the <code class="filename">SUNWcsr</code> package,
the backout data for that package is stored in the <code class="filename">/var/sadm/pkg/SUNWcsr/save</code> directory.</p>
</li></ul></div>
<p>If you run out of available disk space in the default locations, specify
different locations for these directories.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>If you specify a different directory, you must manually create
that directory before performing any patch operations.</p>
</div>
</div><div class="procedure"><ol type="1"><li>
<p>Determine the new locations for the directories.</p>
</li><li>
<p>Become an appropriately authorized user or assume a role that includes the Software Installation profile or the <code class="literal">solaris.admin.patchmgr.*</code> authorization.</p>
<p>The System Administrator profile includes the appropriate profiles. To create the role and assign the role to a user, see <span class="olink">
<em class="citetitle">Configuring RBAC</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li>
<p>Specify a new directory, <em class="replaceable"><code>dir-name</code></em>,
for any of the patch-related directories.</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>To specify a different download directory, type:</p>
<pre class="screen"># <strong class="userinput"><code>smpatch set patchpro.download.directory=<em class="replaceable"><code>dir-name</code></em>
</code></strong>
</pre>
<p>where <em class="replaceable"><code>dir-name</code></em> is <code class="filename">/export/patches</code>,
for example.</p>
</li><li>
<p>To specify a different <span class="olink">
<span class="emphasis"><em>backout directory</em></span>
</span>,
type:</p>
<pre class="screen"># <strong class="userinput"><code>smpatch set patchpro.backout.directory=<em class="replaceable"><code>dir-name</code></em>
</code></strong>
</pre>
<p>where <em class="replaceable"><code>dir-name</code></em> is <code class="filename">/export/patches/backout</code>, for example.</p>
</li></ul></div>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2152253"></a></h3></div></div></div>

<div class="task"><a name="resetpropscliproc"></a><p class="title"><b>How to Reset Configuration Parameters
to the Default Values (Command Line)</b></p><a class="indexterm" name="indexterm-534"></a><a class="indexterm" name="indexterm-535"></a><a class="indexterm" name="indexterm-536"></a><a class="indexterm" name="indexterm-537"></a><a class="indexterm" name="indexterm-538"></a><div class="tasksummary">
<p>You must reset parameter values explicitly. You cannot use the <span><strong class="command">smpatch</strong></span> command to reset all parameter values at once.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Become an appropriately authorized user or assume a role that includes the Software Installation profile or the <code class="literal">solaris.admin.patchmgr.*</code> authorization.</p>
<p>The System Administrator profile includes the appropriate profiles. To create the role and assign the role to a user, see <span class="olink">
<em class="citetitle">Configuring RBAC</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li>
<p>Reset a configuration parameter for your patch management environment
to its default value.</p>
<pre class="screen"># <strong class="userinput"><code>smpatch unset <em class="replaceable"><code>parameter-name...</code></em>
</code></strong>
</pre>
</li></ol></div><div class="example"><a name="resetpropcliexample"></a><p class="title"><b>Example 22.10. Resetting Configuration Parameters to the Default Values</b></p>


<p>The following example shows how to configure a system to obtain patches
from the Sun patch server instead of from a different patch source.</p>
<pre class="screen"># <strong class="userinput"><code>smpatch unset patchpro.patch.source</code></strong>
</pre>
<p>The following example shows how to reset the patch download directory
and the backout directory locations to the default values.</p>
<pre class="screen"># <strong class="userinput"><code>smpatch unset patchpro.download.directory patchpro.backout.directory</code></strong>
</pre>
</div></div>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch22s07.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch22.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch22s09.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Managing Patches by Using the Command-Line
Interface (Task Map) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Patch Manager Troubleshooting</td></tr></table></div></body></html>
