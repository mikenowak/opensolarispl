<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>
Booting a SPARC Based System</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="System Administration Guide: Basic Administration"><link rel="up" href="ch10.html" title="Chapter 10. 
Booting a System (Tasks)"><link rel="prev" href="ch10s02.html" title="
Using the Boot PROM"><link rel="next" href="ch11.html" title="Chapter 11. 
GRUB Based Booting (Tasks)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">
Booting a SPARC Based System</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch10s02.html">Prev</a> </td><th width="60%" align="center">Chapter 10. 
Booting a System (Tasks)</th><td width="20%" align="right"> <a accesskey="n" href="ch11.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hbsparcboot-9"></a>
Booting a SPARC Based System</h2></div></div></div>

<p>If a system is turned off, turning it on starts the multiuser boot sequence.
The following procedures show how to boot to different run levels from the <code class="literal">ok</code> PROM prompt. These procedures assume that the system has been cleanly
shut down, unless stated otherwise.</p>
<p>Use the <span><strong class="command">who -r</strong></span> command to verify that the system is brought
to the specified run level. For a description of run levels, see <span class="olink">Chapter 14, Managing Services (Overview)</span>.</p>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2071409"></a></h3></div></div></div>

<div class="task"><a name="hbsparcboot-36744"></a><p class="title"><b>
How to Boot a System to Run Level
3 (Multiuser Level)</b></p><div class="tasksummary">
<p>Use this procedure to boot a system that is currently at run level 0 to run
level 3.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbsparcboot-step-49"></a>
<p>
<a class="indexterm" name="hbsparcboot-ix998"></a>Boot the system to run level 3. </p>
<pre class="screen">ok <strong class="userinput"><code>boot</code></strong>
</pre>
<p>The automatic boot procedure displays a series of startup messages, and brings
the system to run level 3. For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">boot</span>
(
1M
)
</span>
</span> man page.</p>
</li><li><a name="hbsparcboot-step-50"></a>
<p>Verify that the system has booted to run level
3.</p>
<p>The login prompt is displayed when the boot process has finished successfully.</p>
<pre class="screen">
<em class="replaceable"><code>hostname</code></em> console login:</pre>
</li></ol></div><div class="example"><a name="id2071564"></a><p class="title"><b>Example 10.3. 
Booting a System to Run Level 3 (Multiuser Level)</b></p>


<p>The following example displays the messages from booting a system to run level
3.</p>
<pre class="screen">ok <strong class="userinput"><code>boot</code></strong>
Sun Ultra 5/10 UPA/PCI (UltraSPARC-IIi 333MHz)
OpenBoot 3.15, 128 MB memory installed, Serial #<em class="replaceable"><code>number</code></em>.
Ethernet address <em class="replaceable"><code>number</code></em>, Host ID: <em class="replaceable"><code>number</code></em>.

Rebooting with command: boot
Boot device: /pci@1f,0/pci@1,1/ide@3/disk@0,0:a  File and args: kernel/sparcv9/unix
SunOS Release 5.10 Version s10_60 64-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
configuring IPv4 interfaces: hme0.
add net default: gateway 172.20.27.248
Hostname: starlite
The system is coming up.  Please wait.
NIS domain name is example.com
starting rpc services: rpcbind keyserv ypbind done.
Setting netmask of hme0 to 255.255.255.0
Setting default IPv4 interface for multicast: add net 224.0/4: gateway starlite
syslog service starting.The system is ready.
Starting Sun(TM) Web Console Version 2.1-dev..
volume management starting.
The system is ready.
starlite console login: </pre>
<p>In the preceding example, <span class="emphasis"><em>sparcv9</em></span> was used as an example
only. This string matches the output of the <span><strong class="command">isainfo</strong></span> <code class="option">
k</code> command.</p>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2071650"></a></h3></div></div></div>

<div class="task"><a name="hbsparcboot-83723"></a><p class="title"><b>
How to Boot a System to Run Level
S (Single-User Level)</b></p><div class="tasksummary">
<p>Use this procedure to boot a system that is currently at run level 0 to run
level S.  This run level is used for system maintenance tasks, such as backing up
a file system.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbsparcboot-step-12"></a>
<p>
<a class="indexterm" name="hbsparcboot-ix999"></a>
<a class="indexterm" name="hbsparcboot-ix1000"></a>Boot the system to run level S.</p>
<pre class="screen">ok <strong class="userinput"><code>boot -s</code></strong>
</pre>
</li><li><a name="hbsparcboot-step-55"></a>
<p>Type the superuser password when the following
message is displayed:</p>
<pre class="screen">SINGLE USER MODE

Root password for system maintenance (control-d to bypass): <strong class="userinput"><code>xxxxxx</code></strong>
</pre>
</li><li><a name="hbsparcboot-step-13"></a>
<p>Verify that the system is at run level S.</p>
<pre class="screen"># <strong class="userinput"><code>who -r</code></strong>
.       run-level S  Jun 10 15:27     3      0 </pre>
</li><li>
<p>Perform the maintenance task that required the run level change to S.</p>
</li><li><a name="hbsparcboot-step-14"></a>
<p>After you complete the system maintenance task,
type Control-D to bring the system to the multiuser state.</p>
</li></ol></div><div class="example"><a name="id2071804"></a><p class="title"><b>Example 10.4. 
Booting a System to Run Level S (Single-User Level)</b></p>


<p>The following example displays the messages from booting a system to run level
S.</p>
<pre class="screen">ok <strong class="userinput"><code>boot -s</code></strong>
.
.
.
Sun Microsystems Inc.   SunOS 5.10
Copyright 1983-2003 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
configuring IPv4 interfaces: hme0.
Hostname: starlite

SINGLE USER MODE

Root password for system maintenance (control-d to bypass): <strong class="userinput"><code>xxxxxx</code></strong>
single-user privilege assigned to /dev/console.
Entering System Maintenance Mode
Oct 14 15:01:28 su: 'su root' succeeded for root on /dev/console
Sun Microsystems Inc.   SunOS 5.10
# <strong class="userinput"><code>who -r</code></strong>
   .       run-level S  Sep 19 08:49     S      0  ?
<em class="lineannotation"><span class="lineannotation">(Perform some maintenance task)</span></em>
# <strong class="userinput"><code>^D</code></strong>
</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2071853"></a></h3></div></div></div>

<div class="task"><a name="hbsparcboot-66353"></a><p class="title"><b>
How to Boot a System Interactively</b></p><div class="tasksummary">
<p>Use this boot option when you need to specify an alternate kernel or <code class="filename">/etc/system</code> file.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbsparcboot-step-17"></a>
<p>
<a class="indexterm" name="hbsparcboot-ix1002"></a>Boot the system interactively.</p>
<pre class="screen">ok <strong class="userinput"><code>boot -a</code></strong>
</pre>
</li><li><a name="hbsparcboot-step-18"></a>
<p>Answer the following system prompts:</p>
<ol type="a">
<li>
<p>When prompted, enter the name of the kernel to use for booting.</p>
<p>Press enter to use the default kernel file name. Otherwise, provide the name
of an alternate kernel, press Enter.</p>
</li>
<li>
<p>When prompted, provide an alternate path for the <code class="filename">modules</code> directories.</p>
<p>Press enter to use the default module directories. Otherwise, provide
the alternate paths to module directories, press Enter.</p>
</li>
<li>
<p>When prompted, provide the name of an alternate system file.</p>
<p>Type <code class="filename">/dev/null</code> if your <code class="filename">/etc/system</code> file
has been damaged. </p>
</li>
<li>
<p>When prompted, enter the <code class="literal">root</code> filesystem type.</p>
<p>Press enter to select UFS for local disk booting, which is the default, or enter <code class="literal">NFS</code> for network booting.</p>
</li>
<li>
<p>When prompted, enter the physical name of <code class="literal">root</code> device. </p>
<p>Provide an alternate device name or press return to use the default.</p>
</li>
</ol>
</li><li><a name="hbsparcboot-step-56"></a>
<p>If you are not prompted to answer these questions,
verify that you typed the <span><strong class="command">boot</strong></span> <code class="option">
a</code> command correctly.</p>
</li></ol></div><div class="example"><a name="id2072106"></a><p class="title"><b>Example 10.5. 
Booting a System Interactively</b></p>


<p>In the following example, the default choices (shown in square brackets <code class="literal">[]</code>) are accepted.</p>
<pre class="screen">ok <strong class="userinput"><code>boot -a</code></strong>
.
.
.
Rebooting with command: boot -a
Boot device: /pci@1f,0/pci@1,1/ide@3/disk@0,0:a  
File and args: -a
Enter filename [kernel/sparcv9/unix]: <em class="lineannotation"><span class="lineannotation">Press Return</span></em>
Enter default directory for modules [/platform/SUNW,Ultra-5_10/kernel 
     /platform/sun4u/kernel /kernel /usr/kernel]: <em class="lineannotation"><span class="lineannotation">Press Return</span></em>
Name of system file [etc/system]: <em class="lineannotation"><span class="lineannotation">Press Return</span></em>
SunOS Release 5.10 Version S10_60 64-bit
Copyright (c) 1983-2004 by Sun Microsystems, Inc. All rights reserved
Use is subject to license terms.
root filesystem type [ufs]: <em class="lineannotation"><span class="lineannotation">Press Return</span></em>
Enter physical name of root device
[/pci@1f,0/pci@1,1/ide@3/disk@0,0:a]: <em class="lineannotation"><span class="lineannotation">Press Return</span></em>
configuring IPv4 interfaces: hme0.
Hostname: starlite
The system is coming up.  Please wait.
checking ufs filesystems
.
.
.
The system is ready.
starlite console login:</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2072194"></a></h3></div></div></div>

<div class="task"><a name="hbsparcboot-60"></a><p class="title"><b>
How to Boot a System From the Network</b></p><div class="tasksummary">
<p>Any system can boot from the network if a boot server is available. You might
want to boot a stand-alone system from the network if the system cannot boot from
the local disk. For information on changing or resetting the default boot device,
see <span class="olink">
How to Change the Default Boot Device</span>.</p>
<p>Two network configuration boot strategies are available on sun&#8211;4u systems: </p>
<div class="itemizedlist"><ul type="disc"><li>
<p>RARP &#8211; Reverse Address Resolution Protocol and ONC+ RPC Bootparams
Protocol</p>
</li><li>
<p>DHCP &#8211; Dynamic Host Configuration Protocol</p>
</li></ul></div>
<p>The default network boot strategy is set to RARP. You can use either protocol,
depending on whether a RARP boot server or a DHCP boot server is available on your
network.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>Sun Ultra systems must have PROM version 3.25.<em class="replaceable"><code>nn</code></em> or
later to use the DHCP network boot strategy. For information on determining your PROM
version, see <span class="olink">
How to Find the PROM Revision Number for a System</span>.</p>
</div>
<p>If both protocols are available, you can temporarily specify which protocol
to use in the <span><strong class="command">boot</strong></span> command. Or, you can save the network boot strategy
across system reboots at the PROM level by setting up an NVRAM alias. The following
example uses the <span><strong class="command">nvalias</strong></span> command to set up a network device alias
for booting DHCP by default on a Sun Ultra 10 system.</p>
<pre class="screen">ok <strong class="userinput"><code>nvalias net	/pci@1f,4000/network@1,1:dhcp</code></strong>
</pre>
<p>As a result, when you type <span><strong class="command">boot net</strong></span>, the system boots by
using the DHCP network book strategy.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>You should not use the <span><strong class="command">nvalias</strong></span> command to modify the <code class="filename">NVRAMRC</code> file, unless you are very familiar with the syntax of this command
and the <span><strong class="command">nvunalias</strong></span> command. For information on using these commands,
see the <em class="citetitle">OpenBoot 3.x Command Reference Manual</em>.</p>
</div>
</div><div class="taskprerequisites">

<p>You must have already set up a RARP or DHCP boot server in your network to use
either protocol to boot successfully.</p>
</div><div class="procedure"><ol type="1"><li>
<p>If necessary, shut down the system.</p>
</li><li><a name="hbsparcboot-step-72"></a>
<p>Determine the method for booting from the network,
and select one of the following:</p>
<ol type="a">
<li>
<p>Boot the system from the network by using the DHCP strategy.</p>
<pre class="screen">ok <strong class="userinput"><code>boot net</code></strong>[<strong class="userinput"><code>:dhcp</code></strong>]</pre>
<p>If you have changed the PROM setting to boot DHCP by default, as in the preceding <span><strong class="command">nvalias</strong></span> example, you only have to specify <span><strong class="command">boot net</strong></span>.</p>
</li>
<li><a name="hbsparcboot-step-73"></a>
<p>Boot the system from the network by using the
RARP strategy.</p>
<pre class="screen">ok <strong class="userinput"><code>boot net</code></strong>[<strong class="userinput"><code>:rarp</code></strong>]</pre>
<p>Because RARP is the default network boot strategy, you only have to specify <span><strong class="command">boot net:rarp</strong></span> if you have changed the PROM value to boot DHCP.</p>
</li>
</ol>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2072483"></a></h3></div></div></div>

<div class="task"><a name="hbsparcboot-50162"></a><p class="title"><b>
How to Stop the System for Recovery
Purposes</b></p><div class="procedure"><ol type="1"><li><a name="hbsparcboot-step-31"></a>
<p>
<a class="indexterm" name="indexterm-114"></a>Type the Stop key sequence for your system.</p>
<p>The monitor displays
the <code class="literal">ok</code> PROM prompt.</p>
<pre class="screen">ok</pre>
<p>
<a class="indexterm" name="hbsparcboot-ix1006"></a>
<a class="indexterm" name="hbsparcboot-ix1007"></a>
<a class="indexterm" name="hbsparcboot-ix1008"></a>The specific Stop key sequence depends on your keyboard type. For example,
you can press Stop-A or L1-A. On terminals, press the Break key. </p>
</li><li><a name="hbsparcboot-step-32"></a>
<p>Synchronize the file systems.</p>
<pre class="screen">ok <strong class="userinput"><code>sync</code></strong>
</pre>
</li><li><a name="hbsparcboot-step-33"></a>
<p>When you see the <code class="literal">syncing file systems...</code> message, press the Stop key sequence again.</p>
</li><li><a name="hbsparcboot-step-34"></a>
<p>Type the appropriate <span><strong class="command">boot</strong></span> command
to start the boot process.</p>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">boot</span>
(
1M
)
</span>
</span> man page.</p>
</li><li><a name="hbsparcboot-step-52"></a>
<p>Verify that the system was booted to the specified
run level.</p>
<pre class="screen"># <strong class="userinput"><code>who -r</code></strong>
 .       run-level 3  May  2 07:39     3      0  S</pre>
</li></ol></div><div class="example"><a name="id2072707"></a><p class="title"><b>Example 10.6. 
Stopping the System for Recovery Purposes</b></p>


<pre class="screen">
<em class="lineannotation"><span class="lineannotation">Press Stop-A</span></em>
ok <strong class="userinput"><code>sync</code></strong>
syncing file systems...
<em class="lineannotation"><span class="lineannotation">Press Stop-A</span></em>
ok <strong class="userinput"><code>boot</code></strong>
</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2072738"></a></h3></div></div></div>

<div class="task"><a name="hbsparcboot-82678"></a><p class="title"><b>
How to Boot a System for Recovery
Purposes</b></p><div class="tasksummary">
<p>Use this procedure when an important file, such as <code class="filename">/etc/passwd</code>,
has an invalid entry and causes the boot process to fail. </p>
<p>Use the stop sequence described in this procedure if you do not know the <code class="literal">root</code> password or if you can't log in to the system. For more information,
see <span class="olink">
How to Stop the System for Recovery Purposes</span>.</p>
<p>Substitute the device name of the file system to be repaired for the <em class="replaceable"><code>device-name</code></em> variable in the following procedure. If you need help identifying
a system's device names, refer to <span class="olink">
<em class="citetitle">Displaying Device Configuration Information</em> in <em class="citetitle">System Administration Guide: Devices and File Systems</em>
</span>.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbsparcboot-step-68"></a>
<p>Stop the system by using the system's Stop key
sequence.</p>
</li><li><a name="hbsparcboot-step-21"></a>
<p>Boot the system in single-user mode.</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>Boot the system from the Solaris Software 1 CD or DVD,</p>
<div class="itemizedlist"><ul type="circle"><li>
<p>Insert the Solaris installation media into the drive.</p>
</li><li>
<p>Boot from the installation media in single-user mode.</p>
<pre class="screen">ok <strong class="userinput"><code>boot cdrom -s</code></strong>
</pre>
</li></ul></div>
</li><li>
<p>Boot the system from the network if an installation server or remote
CD or DVD drive is not available.</p>
<pre class="screen">ok <strong class="userinput"><code>boot net -s</code></strong>
</pre>
</li></ul></div>
</li><li><a name="hbsparcboot-step-22"></a>
<p>Mount the file system that contains the file
with an invalid entry.</p>
<pre class="screen"># <strong class="userinput"><code>mount /dev/dsk/</code></strong>
<em class="replaceable"><code>device-name</code></em> <strong class="userinput"><code>/a</code></strong>
</pre>
</li><li><a name="hbsparcboot-step-23"></a>
<p>Change to the newly mounted file system.</p>
<pre class="screen"># <strong class="userinput"><code>cd /a/</code></strong>
<em class="replaceable"><code>file-system</code></em>
</pre>
</li><li><a name="hbsparcboot-step-24"></a>
<p>Set the terminal type.</p>
<pre class="screen"># <strong class="userinput"><code>TERM=</code></strong>
<em class="replaceable"><code>sun</code></em>
# <strong class="userinput"><code>export TERM</code></strong>
</pre>
</li><li><a name="hbsparcboot-step-25"></a>
<p>Remove the invalid entry from the file by using
an editor.</p>
<pre class="screen"># <strong class="userinput"><code>vi</code></strong> <em class="replaceable"><code>filename</code></em>
</pre>
</li><li><a name="hbsparcboot-step-26"></a>
<p>Change to the root (<code class="filename">/</code>) directory.</p>
<pre class="screen"># <strong class="userinput"><code>cd /</code></strong>
</pre>
</li><li><a name="hbsparcboot-step-27"></a>
<p>Unmount the <code class="filename">/a</code> directory.</p>
<pre class="screen"># <strong class="userinput"><code>umount /a</code></strong>
</pre>
</li><li><a name="hbsparcboot-step-28"></a>
<p>Reboot the system.</p>
<pre class="screen"># <strong class="userinput"><code>init 6</code></strong>
</pre>
</li><li><a name="hbsparcboot-step-51"></a>
<p>Verify that the system booted to run level 3.</p>
<p>The login prompt is displayed when the boot process has finished successfully.</p>
<pre class="screen">
<em class="replaceable"><code>hostname</code></em> console login:</pre>
</li></ol></div><div class="example"><a name="id2073150"></a><p class="title"><b>Example 10.7. 
Booting a System for Recovery Purposes (Damaged Password File)</b></p>


<p>
<a class="indexterm" name="hbsparcboot-ix1004"></a>
<a class="indexterm" name="hbsparcboot-ix1005"></a>
<a class="indexterm" name="indexterm-115"></a>The following example shows how to repair an important system file (in
this case, <code class="filename">/etc/passwd</code>) after booting from a local CD-ROM. </p>
<pre class="screen">ok <strong class="userinput"><code>boot cdrom -s</code></strong>
# <strong class="userinput"><code>mount /dev/dsk/c0t3d0s0 /a</code></strong>
# <strong class="userinput"><code>cd /a/etc</code></strong>
# <strong class="userinput"><code>TERM=vt100</code></strong>
# <strong class="userinput"><code>export TERM</code></strong>
# <strong class="userinput"><code>vi passwd</code></strong>
<em class="lineannotation"><span class="lineannotation">(Remove invalid entry)</span></em>
# <strong class="userinput"><code>cd /</code></strong>
# <strong class="userinput"><code>umount /a</code></strong>
# <strong class="userinput"><code>init 6</code></strong>
</pre>
</div><div class="example"><a name="id2073292"></a><p class="title"><b>Example 10.8. 
Booting a System if You Forgot the <code class="literal">root</code> Password</b></p>


<p>
<a class="indexterm" name="indexterm-116"></a>
<a class="indexterm" name="indexterm-117"></a>
<a class="indexterm" name="indexterm-118"></a>
<a class="indexterm" name="indexterm-119"></a>The following example shows how to boot the system from the network when
you have forgotten the <code class="literal">root</code> password. This example assumes that
the network boot server is already available. Be sure to apply a new <code class="literal">root</code> password after the system has rebooted.</p>
<pre class="screen">ok <strong class="userinput"><code>boot net -s</code></strong>
# <strong class="userinput"><code>mount /dev/dsk/c0t3d0s0 /a</code></strong>
# <strong class="userinput"><code>cd /a/etc</code></strong>
# <strong class="userinput"><code>TERM=vt100</code></strong>
# <strong class="userinput"><code>export TERM</code></strong>
# <strong class="userinput"><code>vi shadow</code></strong>
<em class="lineannotation"><span class="lineannotation">(Remove root's encrypted password string)</span></em>
# <strong class="userinput"><code>cd /</code></strong>
# <strong class="userinput"><code>umount /a</code></strong>
# <strong class="userinput"><code>init 6</code></strong>
</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="hbsparcboot-37"></a>
Forcing a Crash Dump and Rebooting
the System</h3></div></div></div>

<p>Forcing a crash dump and rebooting the system is sometimes necessary for troubleshooting
purposes. The <span><strong class="command">savecore</strong></span> feature is enabled by default.</p>
<p>For more information on system crash dumps, see <span class="olink">Chapter 24, <em class="citetitle">Managing System Crash Information (Tasks),</em> in <em class="citetitle">System Administration Guide: Advanced Administration</em>
</span>. </p>
<div class="task"><a name="hbsparcboot-70469"></a><p class="title"><b>
How to Force a Crash Dump and Reboot
of the System</b></p><div class="tasksummary">
<p>Use this procedure to force a crash dump of the system. The example that follows
this procedure shows how to use the <span><strong class="command">halt</strong></span> <code class="option">
d</code> command
to force a crash dump of the system. You will need to manually reboot the system after
running this command.</p>
</div><div class="procedure"><ol type="1"><li><a name="hbsparcboot-step-39"></a>
<p>Type the stop key sequence for your system.</p>
<p>The specific stop key sequence depends on your keyboard type. For example, you
can press Stop-A or L1-A. On terminals, press the Break key.</p>
<p>The PROM
displays the <code class="literal">ok</code> prompt.</p>
</li><li><a name="hbsparcboot-step-40"></a>
<p>
<a class="indexterm" name="hbsparcboot-ix1010"></a>
<a class="indexterm" name="hbsparcboot-ix1011"></a>Synchronize the file systems and write the crash dump.  </p>
<pre class="screen">&gt; <strong class="userinput"><code>n</code></strong>
ok <strong class="userinput"><code>sync</code></strong>
</pre>
<p>After the crash dump is written to disk, the system will continue to reboot.</p>
</li><li><a name="hbsparcboot-step-53"></a>
<p>Verify the system boots to run level 3.</p>
<p>The login prompt is displayed when the boot process has finished successfully.</p>
<pre class="screen">
<em class="replaceable"><code>hostname</code></em> console login:</pre>
</li></ol></div><div class="example"><a name="id2073675"></a><p class="title"><b>Example 10.9. 
Forcing a Crash Dump and Reboot of the System by Using the <span>halt</span> <code class="option">
d</code> Command</b></p>


<p>This example shows how to force a crash dump and reboot of the system <code class="literal">jupiter</code> by using the <span><strong class="command">halt</strong></span> <code class="option">
d</code> and <span><strong class="command">boot</strong></span> command. Use this method to force a crash dump and reboot of the system.</p>
<pre class="screen"># <strong class="userinput"><code>halt -d</code></strong>
Jul 21 14:13:37 jupiter halt: halted by root

panic[cpu0]/thread=30001193b20: forced crash dump initiated at user request

000002a1008f7860 genunix:kadmin+438 (b4, 0, 0, 0, 5, 0)
  %l0-3: 0000000000000000 0000000000000000 0000000000000004 0000000000000004
  %l4-7: 00000000000003cc 0000000000000010 0000000000000004 0000000000000004
000002a1008f7920 genunix:uadmin+110 (5, 0, 0, 6d7000, ff00, 4)
  %l0-3: 0000030002216938 0000000000000000 0000000000000001 0000004237922872
  %l4-7: 000000423791e770 0000000000004102 0000030000449308 0000000000000005

syncing file systems... 1 1 done
dumping to /dev/dsk/c0t0d0s1, offset 107413504, content: kernel
100% done: 5339 pages dumped, compression ratio 2.68, dump succeeded
Program terminated
ok boot
Resetting ... 

Sun Ultra 5/10 UPA/PCI (UltraSPARC-IIi 333MHz), No Keyboard
OpenBoot 3.15, 128 MB memory installed, Serial #10933339.
Ethernet address 8:0:20:a6:d4:5b, Host ID: 80a6d45b.

Rebooting with command: boot
Boot device: /pci@1f,0/pci@1,1/ide@3/disk@0,0:a
File and args: kernel/sparcv9/unix
SunOS Release 5.10 Version s10_60 64-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
configuring IPv4 interfaces: hme0.
add net default: gateway 172.20.27.248
Hostname: jupiter
The system is coming up.  Please wait.
NIS domain name is example.com
.
.
.
System dump time: Wed Jul 21 14:13:41 2004
Jul 21 14:15:23 jupiter savecore: saving system crash dump
in /var/crash/jupiter/*.0
Constructing namelist /var/crash/jupiter/unix.0
Constructing corefile /var/crash/jupiter/vmcore.0
100% done: 5339 of 5339 pages saved

Starting Sun(TM) Web Console Version 2.1-dev...
.
.
.</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2073750"></a></h3></div></div></div>

<div class="task"><a name="euayz"></a><p class="title"><b>
How to Boot the System With the Kernel Debugger
(<span><strong class="command">kmdb</strong></span>)</b></p><div class="tasksummary">
<p>This procedure shows you the basics for loading the kernel debugger (<span><strong class="command">kmdb</strong></span>). For more detailed information, see the <em class="citetitle">Solaris Modular
Debugger Guide</em>.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Halt the system, causing it to display the <code class="literal">ok</code> prompt.</p>
<p>To halt the system gracefully, use the <span><strong class="command">/usr/sbin/halt</strong></span> command.</p>
</li><li>
<p>Type either <span><strong class="command">boot kmdb</strong></span> or <span><strong class="command">boot <code class="option">
k</code>
</strong></span> to
request the loading of the kernel debugger. Press return.</p>
</li><li>
<p>Enter the kernel debugger.</p>
<p>The method used to enter the debugger
is dependent upon the type of console that is used to access the system:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>If a locally attached keyboard is being used, press Stop-A or L1&#8211;A,
depending upon the type of keyboard.</p>
</li><li>
<p>If a serial console is being used, send a break by using the method
that is appropriate for the type of serial console that is being used.</p>
</li></ul></div>
<p>A welcome message is displayed when you enter the kernel debugger for the first
time.</p>
<pre class="screen">Rebooting with command: kadb
Boot device: /iommu/sbus/espdma@4,800000/esp@4,8800000/sd@3,0
.
.
.</pre>
</li></ol></div><div class="example"><a name="id2073892"></a><p class="title"><b>Example 10.10. 
Booting the System With the Kernel Debugger (<span>kmdb</span>)</b></p>


<pre class="screen">ok <strong class="userinput"><code>boot kmdb</code></strong>
Resetting...

Executing last command: boot kmdb -d
Boot device: /pci@1f,0/ide@d/disk@0,0:a File and args: kmdb -d
Loading kmdb...</pre>
</div></div>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch10s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch10.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch11.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">
Using the Boot PROM </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 11. 
GRUB Based Booting (Tasks)</td></tr></table></div></body></html>
