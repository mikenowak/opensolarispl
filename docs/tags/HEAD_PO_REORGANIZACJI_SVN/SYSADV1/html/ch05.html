<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 5. Managing User Accounts and
Groups (Tasks)</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="System Administration Guide: Basic Administration"><link rel="up" href="index.html" title="System Administration Guide: Basic Administration"><link rel="prev" href="ch04s06.html" title="Customizing a User's Work Environment"><link rel="next" href="ch05s02.html" title="Maintaining User Accounts (Task Map)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 5. Managing User Accounts and
Groups (Tasks)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s06.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch05s02.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="usersetup-92366"></a>Chapter 5. Managing User Accounts and
Groups (Tasks)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch05.html#usersetup-129">Setting Up User Accounts (Task Map)</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch05.html#usersetup-21417">How to Gather User Information</a></span></dt><dt><span class="sect2"><a href="ch05.html#id2042336"></a></span></dt><dt><span class="sect2"><a href="ch05.html#id2042826"></a></span></dt><dt><span class="sect2"><a href="ch05.html#id2043076"></a></span></dt><dt><span class="sect2"><a href="ch05.html#usersetup-32">How to Add Groups and Users With Command-Line
Tools</a></span></dt><dt><span class="sect2"><a href="ch05.html#userconcept-29">Setting Up Home Directories With the Solaris
Management Console</a></span></dt><dt><span class="sect2"><a href="ch05.html#id2043854"></a></span></dt><dt><span class="sect2"><a href="ch05.html#id2044308"></a></span></dt></dl></dd><dt><span class="sect1"><a href="ch05s02.html">Maintaining User Accounts (Task Map)</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch05s02.html#userconcept-13">Modifying User Accounts</a></span></dt><dt><span class="sect2"><a href="ch05s02.html#id2045919"></a></span></dt><dt><span class="sect2"><a href="ch05s02.html#id2046175"></a></span></dt><dt><span class="sect2"><a href="ch05s02.html#userconcept-8">Administering Passwords</a></span></dt><dt><span class="sect2"><a href="ch05s02.html#userconcept-5">Using Password Aging</a></span></dt><dt><span class="sect2"><a href="ch05s02.html#id2046750"></a></span></dt><dt><span class="sect2"><a href="ch05s02.html#id2046967"></a></span></dt><dt><span class="sect2"><a href="ch05s02.html#id2047257"></a></span></dt><dt><span class="sect2"><a href="ch05s02.html#id2047517"></a></span></dt></dl></dd></dl></div>





<div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="usersetup-129"></a>Setting Up User Accounts (Task Map)</h2></div></div></div>

<div class="informaltable">
<table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>
<p>Task</p>
</th><th>
<p>Description</p>
</th><th>
<p>For Instructions</p>
</th></tr></thead><tbody><tr><td>
<p>Gather user information.</p>
</td><td>
<p>Use a standard form to gather user information to help you keep user
information organized.</p>
</td><td>
<p>
<span class="olink">How to Gather User Information</span>
</p>
</td></tr><tr><td>
<p>Customize user initialization files.</p>
</td><td>
<p>You can set up user initialization files (<code class="filename">.cshrc</code>, <code class="filename">.profile</code>, <code class="filename">.login</code>), so that you can provide
new users with consistent environments.</p>
</td><td>
<p>
<span class="olink">How to Customize User Initialization Files</span>
</p>
</td></tr><tr><td>
<p>Add a group.</p>
</td><td>
<p>You can add a group with the following tools:</p>
<p>Solaris Management Console's Groups tool</p>
<p>Solaris command-line interface tools</p>
</td><td>
<p>
<span class="olink">How to Add a Group With the Solaris Management Console's Groups Tool</span>
</p>
<p>
<span class="olink">How to Add Groups and Users With Command-Line Tools</span>
</p>
</td></tr><tr><td>
<p>Add a user.</p>
</td><td>
<p>You can add a user with the following tools:</p>
<p>Solaris Management Console's Users tool</p>
<p>Solaris command-line interface tools</p>
</td><td>
<p>
<span class="olink">How to Add a User With the Solaris Management Console's Users Tool</span>
</p>
<p>
<span class="olink">How to Add Groups and Users With Command-Line Tools</span>*Add new example with useradd &#8212;D</p>
</td></tr><tr><td>
<p>Set up a user template.</p>
</td><td>
<p>You can create a user template so that you don't have to manually add
all similar user properties.</p>
</td><td>
<p>See Solaris Management Console online help</p>
</td></tr><tr><td>
<p>Add rights or a role to a user.</p>
</td><td>
<p>You can add rights or a role to a user so that the user can perform
a specific command or task.</p>
</td><td>
<p>See Solaris Management Console online help</p>
</td></tr><tr><td>
<p>Share the user's home directory.</p>
</td><td>
<p>You must share the user's home directory so that the directory can be
remotely mounted from the user's system. </p>
</td><td>
<p>
<span class="olink">How to Share a User's Home Directory</span>
</p>
</td></tr><tr><td>
<p>Mount the user's home directory.</p>
</td><td>
<p>You must mount the user's home directory on the user's system.</p>
</td><td>
<p>
<span class="olink">How to Mount a User's Home Directory</span>
</p>
</td></tr></tbody></table>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="usersetup-21417"></a>How to Gather User Information</h3></div></div></div>

<p>
<a class="indexterm" name="usersetup-ix713"></a>You can create a form such as the following to gather information
about users before adding their accounts. </p>
<div class="informaltable">
<table border="1"><colgroup><col><col></colgroup><thead><tr><th>
<p>Item</p>
</th><th>
<p>Description</p>
</th></tr></thead><tbody><tr><td>
<p>User Name:</p>
</td><td>
</td></tr><tr><td>
<p>Role Name:</p>
</td><td>
</td></tr><tr><td>
<p>Profiles or Authorizations:</p>
</td><td>
</td></tr><tr><td>
<p>UID:</p>
</td><td>
</td></tr><tr><td>
<p>Primary Group:</p>
</td><td>
</td></tr><tr><td>
<p>Secondary Groups:</p>
</td><td>
</td></tr><tr><td>
<p>Comment:</p>
</td><td>
</td></tr><tr><td>
<p>Default Shell:</p>
</td><td>
</td></tr><tr><td>
<p>Password Status and Aging:</p>
</td><td>
</td></tr><tr><td>
<p>Home Directory Path Name:</p>
</td><td>
</td></tr><tr><td>
<p>Mounting Method:</p>
</td><td>
</td></tr><tr><td>
<p>Permissions on Home Directory:</p>
</td><td>
</td></tr><tr><td>
<p>Mail Server:</p>
</td><td>
</td></tr><tr><td>
<p>Department Name:</p>
</td><td>
</td></tr><tr><td>
<p>Department Administrator:</p>
</td><td>
</td></tr><tr><td>
<p>Manager:</p>
</td><td>
</td></tr><tr><td>
<p>Employee Name:</p>
</td><td>
</td></tr><tr><td>
<p>Employee Title:</p>
</td><td>
</td></tr><tr><td>
<p>Employee Status:</p>
</td><td>
</td></tr><tr><td>
<p>Employee Number:</p>
</td><td>
</td></tr><tr><td>
<p>Start Date:</p>
</td><td>
</td></tr><tr><td>
<p>Add to These Mail Aliases:</p>
</td><td>
</td></tr><tr><td>
<p>Desktop System Name:</p>
</td><td>
</td></tr></tbody></table>
</div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2042336"></a></h3></div></div></div>

<div class="task"><a name="usersetup-52714"></a><p class="title"><b>How to Customize User Initialization Files</b></p><div class="procedure"><ol type="1"><li>
<p>Become superuser or assume an equivalent role.</p>
<p>Roles contain authorizations and privileged commands. For more information about roles,
see <span class="olink">
<em class="citetitle">Configuring RBAC (Task Map)</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li><a name="usersetup-step-5"></a>
<p>Create a skeleton directory for each type
of user.</p>
<pre class="screen"># <strong class="userinput"><code>mkdir /</code></strong>
<em class="replaceable"><code>shared-dir</code></em>
<strong class="userinput"><code>/skel/</code></strong>
<em class="replaceable"><code>user-type</code></em>
</pre>
<div class="variablelist"><dl><dt><span class="term">
<em class="replaceable"><code>shared-dir</code></em>
</span></dt><dd>
<p>The name of a directory that is available to other systems
on the network. </p>
</dd><dt><span class="term">
<em class="replaceable"><code>user-type</code></em>
</span></dt><dd>
<p>The name of a directory to store initialization files for
a type of user.</p>
</dd></dl></div>
</li><li><a name="usersetup-step-6"></a>
<p>Copy the default user initialization files
into the directories that you created for different types of users.   </p>
<pre class="screen"># <strong class="userinput"><code>cp /etc/skel/local.cshrc /</code></strong>
<em class="replaceable"><code>shared-dir</code></em>
<strong class="userinput"><code>/skel/</code></strong>
<em class="replaceable"><code>user-type</code></em>
<strong class="userinput"><code>/.cshrc</code></strong>
# <strong class="userinput"><code>cp /etc/skel/local.login /</code></strong>
<em class="replaceable"><code>shared-dir</code></em>
<strong class="userinput"><code>/skel/</code></strong>
<em class="replaceable"><code>user-type</code></em>
<strong class="userinput"><code>/.login</code></strong>
# <strong class="userinput"><code>cp /etc/skel/local.profile /</code></strong>
<em class="replaceable"><code>shared-dir</code></em>
<strong class="userinput"><code>/skel/</code></strong>
<em class="replaceable"><code>user-type</code></em>
<strong class="userinput"><code>/.profile</code></strong>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>

<p>If the account has profiles assigned to it, then the user has
to launch a special version of the shell called a profile shell to use commands
(with any security attributes) that are assigned to the profile. There are
three <span class="emphasis"><em>profile shells</em></span> corresponding to the types of shells: <span><strong class="command">pfsh</strong></span> (Bourne shell), <span><strong class="command">pfcsh</strong></span> (C shell), and <span><strong class="command">pfksh</strong></span> (Korn shell). For information about profile shells, see <span class="olink">
<em class="citetitle">Role-Based Access Control (Overview)</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</div>
</li><li><a name="usersetup-step-7"></a>
<p>Edit the user initialization files for each
user type and customize them based on your site's needs.</p>
<p>For a
detailed description on the ways to customize the user initialization files,
see <span class="olink">Customizing a User's Work Environment</span>.</p>
</li><li><a name="usersetup-step-8"></a>
<p>Set the permissions for the user initialization
files.</p>
<pre class="screen"># <strong class="userinput"><code>chmod 744</code></strong> <strong class="userinput"><code>/</code></strong>
<em class="replaceable"><code>shared-dir</code></em>
<strong class="userinput"><code>/skel/</code></strong>
<em class="replaceable"><code>user-type</code></em>
<strong class="userinput"><code>/.*</code></strong>
</pre>
</li><li><a name="usersetup-step-2"></a>
<p>Verify that the permissions for the user
initialization files are correct.</p>
<pre class="screen"># <strong class="userinput"><code>ls -la</code></strong> <em class="replaceable"><code>/shared-dir</code></em>
<strong class="userinput"><code>/skel/*</code></strong>
</pre>
</li></ol></div><div class="example"><a name="id2042771"></a><p class="title"><b>Example 5.1. Customizing User Initialization Files</b></p>


<p>The following example shows how to customize the C-shell user initialization
file in the <code class="filename">/export/skel/enduser</code> directory designated
for a particular type of user. For an example of a <code class="filename">.cshrc</code> file,
see <span class="olink">Example 4&#8211;3</span>.</p>
<pre class="screen"># <strong class="userinput"><code>mkdir /export/skel/enduser</code></strong>
# <strong class="userinput"><code>cp /etc/skel/local.cshrc /export/skel/enduser/.cshrc</code></strong>
 
(<em class="replaceable"><code>Edit .cshrc file</code></em>)
# <strong class="userinput"><code>chmod 744 /export/skel/enduser/.*</code></strong>
</pre>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2042826"></a></h3></div></div></div>

<div class="task"><a name="usersetup-30"></a><p class="title"><b>How to Add a Group With the Solaris Management
Console's Groups Tool</b></p><div class="tasksummary">
<p>You can add existing users to the group when you add the group. Or,
you can just add the group and then add the user to the group when you add
the user.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Become superuser or assume an equivalent role.</p>
<p>Roles contain authorizations and privileged commands. For more information about roles,
see <span class="olink">
<em class="citetitle">Configuring RBAC (Task Map)</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li><a name="usersetup-step-23"></a>
<p>Start the Solaris Management Console.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smc &amp;</code></strong>
</pre>
<p>For more information on starting the Solaris Management Console, see <span class="olink">How to Start the Console as Superuser or as a Role</span> or <span class="olink">How to Start the Solaris Management Console in a Name Service Environment</span>.</p>
</li><li><a name="usersetup-step-24"></a>
<p>Click the This Computer icon under the
Management Tools icon in the Navigation pane.</p>
<p>A list of categories
is displayed.</p>
</li><li><a name="usersetup-step-25"></a>
<p>(Optional) Select the appropriate toolbox
for your name service environment.</p>
</li><li><a name="usersetup-step-26"></a>
<p>Click the System Configuration icon.</p>
</li><li><a name="usersetup-step-27"></a>
<p>Click the User icon and provide the superuser
password or the role password.</p>
</li><li><a name="usersetup-step-29"></a>
<p>Click the Groups icon. Select Add Group
from the Action menu.</p>
<p>Use the Context help to add a group to the
system.</p>
</li><li><a name="usersetup-step-36"></a>
<p>Identify the group name at the Group Name
prompt under Group Identification.</p>
<p>For example, <code class="literal">mechanoids</code>.</p>
</li><li><a name="usersetup-step-37"></a>
<p>Identify the group number at the Group
ID number prompt.</p>
<p>For example, GID 101.</p>
</li><li><a name="usersetup-step-38"></a>
<p>Click OK.</p>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2043076"></a></h3></div></div></div>

<div class="task"><a name="usersetup-21"></a><p class="title"><b>How to Add a User With the Solaris Management
Console's Users Tool</b></p><div class="tasksummary">
<p>Use the following procedure to add a user with the Solaris Management
Console's Users tool.</p>
</div><div class="procedure"><ol type="1"><li>
<p>Become superuser or assume an equivalent role.</p>
<p>Roles contain authorizations and privileged commands. For more information about roles,
see <span class="olink">
<em class="citetitle">Configuring RBAC (Task Map)</em> in <em class="citetitle">System Administration Guide: Security Services</em>
</span>.</p>
</li><li><a name="usersetup-step-1"></a>
<p>Start the Solaris Management Console.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smc &amp;</code></strong>
</pre>
<p>For more information on starting the Solaris Management Console, see <span class="olink">How to Start the Console as Superuser or as a Role</span> or <span class="olink">How to Start the Solaris Management Console in a Name Service Environment</span>.</p>
</li><li><a name="usersetup-step-9"></a>
<p>Click the This Computer icon under the Management
Tools icon in the Navigation pane.</p>
<p>A list of categories is displayed.</p>
</li><li><a name="usersetup-step-10"></a>
<p>(Optional) Select the appropriate toolbox
for your name service environment.</p>
</li><li><a name="usersetup-step-11"></a>
<p>Click the System Configuration icon.</p>
</li><li><a name="usersetup-step-12"></a>
<p>Click the User icon and provide the superuser
password or the role password.</p>
</li><li><a name="usersetup-step-15"></a>
<p>Click the User Accounts icon.</p>
<p>Use
the Context help to add a user to the system.</p>
</li><li><a name="usersetup-step-39"></a>
<p>Select Add User&#8658;With Wizard from the
Action menu.</p>
<p>Click Next between the steps below.</p>
<ol type="a">
<li>
<p>Identify the user name or login name at the User Name prompt.</p>
<p>For example, <code class="literal">kryten</code>
</p>
</li>
<li><a name="usersetup-step-40"></a>
<p>(Optional) Identify the user's full name
at the Full Name prompt.</p>
<p>For example, <code class="literal">kryten series 3000</code>.</p>
</li>
<li><a name="usersetup-step-41"></a>
<p>(Optional) Provide a further description
of this user at the Description prompt.</p>
</li>
<li><a name="usersetup-step-42"></a>
<p>Provide the user ID at the User ID Number
prompt.</p>
<p>For example, <code class="literal">1001</code>.</p>
</li>
<li><a name="usersetup-step-43"></a>
<p>Select the User Must Use This Password
At First Login option.</p>
<p>Provide a password for the user at the
Password prompt and then confirm the password at the Confirm Password prompt.</p>
</li>
<li><a name="usersetup-step-44"></a>
<p>Select the user's primary group.</p>
<p>For
example, <code class="literal">mechanoids</code>.</p>
</li>
<li><a name="usersetup-step-45"></a>
<p>Create the user's home directory by accepting
the defaults at the Server and Path prompts.</p>
</li>
<li><a name="usersetup-step-46"></a>
<p>Specify the mail server.</p>
</li>
<li><a name="usersetup-step-47"></a>
<p>Review the information you provided and
go back to correct the information, if necessary. Otherwise, click Finish.</p>
</li>
</ol>
</li></ol></div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="usersetup-32"></a>How to Add Groups and Users With Command-Line
Tools</h3></div></div></div>

<p>This section provides examples of adding users and groups with command-line
tools.</p>
<div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="usersetup-33"></a>Example&#8212;Adding a Group and User With
the <span><strong class="command">groupadd</strong></span> and <span><strong class="command">useradd</strong></span> Commands</h4></div></div></div>

<p>The following example shows how to use the <span><strong class="command">groupadd</strong></span> and <span><strong class="command">useradd</strong></span> commands to add the group <code class="literal">scutters</code> and
the user <code class="literal">scutter1</code> to files on the local system. These commands
cannot be used to manage users in a name service environment.</p>
<pre class="screen"># <strong class="userinput"><code>groupadd -g 102 scutters</code></strong>
# <strong class="userinput"><code>useradd -u 1003 -g 102 -d /export/home/scutter1 -s /bin/csh \
-c "Scutter 1" -m -k /etc/skel</code></strong> <strong class="userinput"><code>scutter1</code></strong>
64 blocks</pre>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">groupadd</span>
(
1M
)
</span>
</span> and <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">useradd</span>
(
1M
)
</span>
</span> man pages.</p>
</div>
<div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="usersetup-34"></a>Example&#8212;Adding a Group and User With
the <span><strong class="command">smgroup</strong></span> and <span><strong class="command">smuser</strong></span> Commands</h4></div></div></div>

<p>The following example shows how to use the <span><strong class="command">smgroup</strong></span> and <span><strong class="command">smuser</strong></span> commands to add the group <code class="literal">gelfs</code> and the
user <code class="literal">camille</code> to the NIS domain <code class="literal">solar.com</code> on
the host <code class="literal">starlite</code>.</p>
<pre class="screen"># <strong class="userinput"><code>/usr/sadm/bin/smgroup add -D nis:/starlitesolar.com -- -g 103 -n gelfs</code></strong>
# <strong class="userinput"><code>/usr/sadm/bin/smuser add -D nis:/starlite/solar.com -- -u 1004</code></strong> 
<strong class="userinput"><code>-n camille -c "Camille G." -d /export/home/camille -s /bin/csh -g gelfs</code></strong>
</pre>
<p>For more information, see the <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">smgroup</span>
(
1M
)
</span>
</span> and <span class="olink">
<span class="citerefentry">
<span class="refentrytitle">smuser</span>
(
1M
)
</span>
</span> man pages.</p>
</div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="userconcept-29"></a>Setting Up Home Directories With the Solaris
Management Console</h3></div></div></div>

<p>Keep the following in mind when using the Solaris Management Console
tools to manage user home directories:</p>
<div class="itemizedlist"><ul type="disc"><li>
<p>If you use the Users tool's Add User Wizard to add a user
account and you specify the user's home directory as <code class="filename">/export/home/</code>
<em class="replaceable"><code>username</code></em>, the home directory is automatically set up to be automounted.
Also, the following entry is added to the <code class="literal">passwd</code> file.</p>
<pre class="screen">/home/<em class="replaceable"><code>username</code></em>
</pre>
</li><li>
<p>There is only way you can use Users tool to set up a user
account that does not automount the home directory. First, set up a user account
template that disables this feature. Then, add users with this template. You
cannot disable this feature with the Add User Wizard.</p>
</li><li>
<p>You can use the <span><strong class="command">smuser add</strong></span> command with
the <code class="option">
x autohome=N</code> option to add a user without automounting
the user's home directory. However, there is no option to the <span><strong class="command">smuser
delete</strong></span> command to remove the home directory after the user is added.
You would have to remove the user and the user's home directory with the Users
tool.</p>
</li></ul></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2043854"></a></h3></div></div></div>

<div class="task"><a name="usersetup-15731"></a><p class="title"><b>How to Share a User's Home Directory</b></p><div class="tasksummary">
<p>Use the following procedure to share a user's home directory.</p>
</div><div class="procedure"><ol type="1"><li><a name="usersetup-step-59"></a>
<p>
<a class="indexterm" name="usersetup-ix762"></a>
<a class="indexterm" name="usersetup-ix764"></a>Become superuser or assume an equivalent role on the system that
contains the home directory.</p>
</li><li><a name="usersetup-step-60"></a>
<p>Verify that the <span><strong class="command">mountd</strong></span> daemon
is running.</p>
<p>In this release, <span><strong class="command">mountd</strong></span> is now
started as part of the NFS server service. To see if the <span><strong class="command">mountd</strong></span> daemon
is running, type the following command:</p>
<pre class="screen"># <strong class="userinput"><code>svcs network/nfs/server</code></strong>
STATE          STIME    FMRI
online         Aug_26   svc:/network/nfs/server:default</pre>
</li><li><a name="usersetup-step-61"></a>
<p>If the <span><strong class="command">mountd</strong></span> daemon
is not running, start it.</p>
<pre class="screen"># <strong class="userinput"><code>svcadm network/nfs/server</code></strong>
</pre>
</li><li><a name="usersetup-step-62"></a>
<p>List the file systems that are shared on
the system.</p>
<pre class="screen"># <strong class="userinput"><code>share</code></strong>
</pre>
</li><li><a name="usersetup-step-63"></a>
<p>Select one of the following based on whether
the file system that contains the user's home directory is already shared.</p>
<ol type="a">
<li>
<p>If the user's home directory is already shared, go to the step
8.</p>
</li>
<li><a name="usersetup-step-14"></a>
<p>If the user's home directory is not shared,
go to <span class="olink">Step 6</span>.</p>
</li>
</ol>
</li><li><a name="usersetup-step-64"></a>
<p>
<a class="indexterm" name="usersetup-ix767"></a>
<a class="indexterm" name="usersetup-ix768"></a>Edit the <code class="filename">/etc/dfs/dfstab</code> file and add the
following line: </p>
<pre class="screen">share -F nfs <em class="replaceable"><code>/file-system</code></em>
</pre>
<p>
<em class="replaceable"><code>/file-system</code></em> is the file system that contains
the user's home directory that you need to share. By convention, the file
system is <code class="filename">/export/home</code>. </p>
</li><li><a name="usersetup-step-65"></a>
<p>Share the file systems listed in the <code class="filename">/etc/dfs/dfstab</code> file.</p>
<pre class="screen"># <strong class="userinput"><code>shareall -F nfs</code></strong>
</pre>
<p>This command executes all the <span><strong class="command">share</strong></span> commands in the <span><strong class="command">/etc/dfs/dfstab</strong></span> file so that you do not have to wait to reboot the
system.</p>
</li><li><a name="usersetup-step-66"></a>
<p>Verify that a user's home directory is
shared.</p>
<pre class="screen"># <strong class="userinput"><code>share</code></strong>
</pre>
</li></ol></div><div class="example"><a name="id2044204"></a><p class="title"><b>Example 5.2. Sharing a User's Home Directory</b></p>


<p>The following example shows how to share the <code class="filename">/export/home</code> directory.</p>
<pre class="screen"># <strong class="userinput"><code>svcs network/nfs/server</code></strong>
# <strong class="userinput"><code>svcadm network/nfs/server</code></strong>
# <strong class="userinput"><code>share</code></strong>
# <strong class="userinput"><code>vi /etc/dfs/dfstab</code></strong>
 
(<em class="replaceable"><code>The line</code></em> share -F nfs /export/home <em class="replaceable"><code>is added.</code></em>)
# <strong class="userinput"><code>shareall -F nfs</code></strong>
# <strong class="userinput"><code>share</code></strong>
-               /usr/dist                ro   "" 
-               /export/home/<em class="replaceable"><code>user-name</code></em>     rw   ""  </pre>
</div><div class="taskrelated">

<p>If the user's home directory is not located on the user's system, you
have to mount the user's home directory from the system where it is located.
For detailed instructions, see <span class="olink">How to Mount a User's Home Directory</span>.    </p>
</div></div>
</div>
<div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2044308"></a></h3></div></div></div>

<div class="task"><a name="usersetup-57972"></a><p class="title"><b>How to Mount a User's Home Directory</b></p><div class="tasksummary">
<p>For information on automounting a home directory, see <span class="olink">
<em class="citetitle">Task Overview for Autofs Administration</em> in <em class="citetitle">System Administration Guide: Network Services</em>
</span>.</p>
</div><div class="procedure"><ol type="1"><li><a name="usersetup-step-69"></a>
<p>Make sure that the user's home directory
is shared.</p>
<p>
<a class="indexterm" name="usersetup-ix774"></a>
<a class="indexterm" name="usersetup-ix775"></a>For more information, see <span class="olink">How to Share a User's Home Directory</span>.</p>
</li><li><a name="usersetup-step-70"></a>
<p>Log in as superuser on the user's system.</p>
</li><li><a name="usersetup-step-71"></a>
<p>
<a class="indexterm" name="usersetup-ix777"></a>Edit the <code class="filename">/etc/vfstab</code> file and create an entry
for the user's home directory.</p>
<pre class="screen">
<em class="replaceable"><code>system-name</code></em>:/export/home/<em class="replaceable"><code>user-name</code></em> - /export/home/<em class="replaceable"><code>username</code></em> nfs - yes rw</pre>
<div class="variablelist"><dl><dt><span class="term">
<em class="replaceable"><code>system-name</code></em>
</span></dt><dd>
<p>The name of the system where the home directory is located.</p>
</dd><dt><span class="term">
<code class="filename">/export/home/</code>
<em class="replaceable"><code>username</code></em>
</span></dt><dd>
<p>The name of the user's home directory that will be shared.
By convention, <code class="filename">/export/home/</code>
<em class="replaceable"><code>username</code></em> contains
user home directories. However, you can use a different file system. </p>
</dd><dt><span class="term">
<code class="literal">-</code>
</span></dt><dd>
<p>Required placeholders in the entry.</p>
</dd><dt><span class="term">
<code class="filename">/export/home/</code>
<em class="replaceable"><code>username</code></em>
</span></dt><dd>
<p>The name of the directory where the user's home directory
will be mounted.</p>
</dd></dl></div>
<p>For more information about adding an entry to the <code class="filename">/etc/vfstab</code> file,
see <span class="olink">
<em class="citetitle">Mounting File Systems</em> in <em class="citetitle">System Administration Guide: Devices and File Systems</em>
</span>.</p>
</li><li><a name="usersetup-step-72"></a>
<p>Create the mount point for the user's home
directory.</p>
<pre class="screen"># <strong class="userinput"><code>mkdir -p /export/home/</code></strong>
<em class="replaceable"><code>username</code></em>
</pre>
</li><li><a name="usersetup-step-73"></a>
<p>Mount the user's home directory.</p>
<pre class="screen"># <strong class="userinput"><code>mountall</code></strong>
</pre>
<p>All entries in the current <code class="filename">vfstab</code> file (whose <code class="literal">mount at boot</code> fields are set to <code class="literal">yes</code>) are mounted.</p>
</li><li><a name="usersetup-step-74"></a>
<p>Verify that the home directory is mounted.</p>
<pre class="screen"># <strong class="userinput"><code>mount | grep</code></strong> <em class="replaceable"><code>username</code></em>
</pre>
</li></ol></div><div class="example"><a name="id2044739"></a><p class="title"><b>Example 5.3. Mounting a User's Home Directory</b></p>


<p>The following example shows how to mount user <code class="literal">ripley</code>'s
home directory.</p>
<pre class="screen"># <strong class="userinput"><code>vi /etc/vfstab</code></strong>
 
(<em class="replaceable"><code>The line</code></em> venus:/export/home/ripley - /export/home/ripley
nfs - yes rw <em class="replaceable"><code>is added.</code></em>)
# <strong class="userinput"><code>mkdir -p /export/home/ripley</code></strong>
# <strong class="userinput"><code>mountall</code></strong>
# <strong class="userinput"><code>mount</code></strong>
/ on /dev/dsk/c0t0d0s0 read/write/setuid/intr/largefiles/xattr/onerror=panic/dev=...
/devices on /devices read/write/setuid/dev=46c0000 on Thu Jan  8 09:38:19 2004
/usr on /dev/dsk/c0t0d0s6 read/write/setuid/intr/largefiles/xattr/onerror=panic/dev=...
/proc on /proc read/write/setuid/dev=4700000 on Thu Jan  8 09:38:27 2004
/etc/mnttab on mnttab read/write/setuid/dev=47c0000 on Thu Jan  8 09:38:27 2004
/dev/fd on fd read/write/setuid/dev=4800000 on Thu Jan  8 09:38:30 2004
/var/run on swap read/write/setuid/xattr/dev=1 on Thu Jan  8 09:38:30 2004
/tmp on swap read/write/setuid/xattr/dev=2 on Thu Jan  8 09:38:30 2004
/export/home on /dev/dsk/c0t0d0s7 read/write/setuid/intr/largefiles/xattr/onerror=...
/export/home/ripley on venus:/export/home/ripley remote/read/write/setuid/xattr/dev=...</pre>
</div></div>
</div>
</div>

</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s06.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch05s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Customizing a User's Work Environment </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Maintaining User Accounts (Task Map)</td></tr></table></div></body></html>
